(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.AmadeusVideoPlayer=t():e.AmadeusVideoPlayer=t()})(window,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&'object'==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,'default',{enumerable:!0,value:e}),2&a&&'string'!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(a,'a',a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=59)}([function(e,t,a){(function(t){var a;a='undefined'==typeof window?'undefined'==typeof t?'undefined'==typeof self?{}:self:t:window,e.exports=a}).call(this,a(7))},function(e,t,a){(function(t){var n='undefined'==typeof t?'undefined'==typeof window?{}:window:t,r=a(92),i;'undefined'==typeof document?(i=n['__GLOBAL_DOCUMENT_CACHE@4'],!i&&(i=n['__GLOBAL_DOCUMENT_CACHE@4']=r)):i=document,e.exports=i}).call(this,a(7))},function(e,t){function a(e){if(e&&'object'==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if('number'==typeof e)return i[e];var a=e+'',s=n[a.toLowerCase()];if(s)return s;var s=r[a.toLowerCase()];return s?s:1===a.length?a.charCodeAt(0):void 0}a.isEventKey=function(e,t){if(e&&'object'==typeof e){var a=e.which||e.keyCode||e.charCode;if(null===a||a===void 0)return!1;if('string'==typeof t){var i=n[t.toLowerCase()];if(i)return i===a;var i=r[t.toLowerCase()];if(i)return i===a}else if('number'==typeof t)return t===a;return!1}},t=e.exports=a;var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91/*!
 * Programatically add the following
 */};for(s=97;123>s;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;58>s;s++)n[s-48]=s;for(s=1;13>s;s++)n['f'+s]=s+111;for(s=0;10>s;s++)n['numpad '+s]=s+96;var i=t.names=t.title={};for(s in n)i[n[s]]=s;for(var o in r)n[o]=r[o]},function(e,t){(function(e,a){a(t)})(this,function(e){'use strict';function t(e,t){return(t||document).querySelector(e)}function a(e){return'svg'===e?document.createElementNS($e,e):document.createElement(e)}function n(e,t,a){var n=Qe.exec(t);n&&n[1]?e.setAttributeNS(Je,n[1],a):e.setAttribute(t,a)}function r(e,t){return Object.getOwnPropertyDescriptor(e,t)}function i(e){return typeof e===Ke}function s(e,t){var a=r(e,t);return i(e[t])||a&&a.writable}function o(e){for(var t=1,a=arguments,n=a.length,r;t<n;t++)if(r=a[t])for(var i in r)s(e,i)&&(e[i]=r[i]);return e}function l(e){return Object.create(e)}function d(e,t){return[].slice.call((t||document).querySelectorAll(e))}function u(){return document.createTextNode('')}function p(e,t){e.style.display=t?'':'none',e.hidden=!t}function c(e,t){return e.getAttribute(t)}function m(e,t){e.removeAttribute(t)}function g(e,t,a){if(a){var n=e.ownerDocument.importNode(new DOMParser().parseFromString('<svg xmlns="'+$e+'">'+t+'</svg>','application/xml').documentElement,!0);e.appendChild(n)}else e.innerHTML=t}function y(e,t){if(e)for(var a;a=nt.exec(e);)t(a[1].toLowerCase(),a[2]||a[3]||a[4])}function h(){return document.createDocumentFragment()}function f(e,t,a){e.insertBefore(t,a.parentNode&&a)}function _(e){return Object.keys(e).reduce(function(t,a){return t+' '+a+': '+e[a]+';'},'')}function b(e,t,a){if(e){var n=t(e,a),r;if(!1===n)return;for(e=e.firstChild;e;)r=e.nextSibling,b(e,t,n),e=r}}function v(e){return i(e)||null===e}function T(e){return v(e)||''===e}function k(e){return typeof e===Xe}function S(e){return e&&typeof e===Ge}function C(e){var t=e.ownerSVGElement;return!!t||null===t}function E(e){return Array.isArray(e)||e instanceof Array}function L(e){return it.test(e)}function w(e){return typeof e===We}function x(e,t){return-1!==e.indexOf(t)}function P(e,t){for(var a=e?e.length:0,n=0;n<a;n++)t(e[n],n);return e}function I(e,t){return e.slice(0,t.length)===t}function M(e,t,a,n){return Object.defineProperty(e,t,o({value:a,enumerable:!1,writable:!1,configurable:!0},n)),e}function D(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function O(e){console&&console.warn&&console.warn(e)}function A(e,t,a,n,r){var s=e[t],o=E(s),l=!i(r);if(!(s&&s===a))if(!s&&n)e[t]=[a];else if(!s)e[t]=a;else if(o){var d=s.indexOf(a);if(d===r)return;-1!==d&&s.splice(d,1),l?s.splice(r,0,a):s.push(a)}else e[t]=[s,a]}function R(e){return e.tagName&&Oe[c(e,Be)||c(e,Be)||e.tagName.toLowerCase()]}function N(e,t){var a=R(e),n=!t&&c(e,Be);return n&&!gt.hasExpr(n)?n:a?a.name:e.tagName.toLowerCase()}function U(){return this.parent?o(l(this),this.parent):this}function B(e,a,n){var r='o'===n[0],i=r?'select>':'table>';if(e.innerHTML='<'+i+a.trim()+'</'+i,i=e.firstChild,r)i.selectedIndex=-1;else{var s=Et[n];s&&1===i.childElementCount&&(i=t(s,i))}return i}function Y(e,t){if(!Tt.test(e))return e;var a={};return t=t&&t.replace(St,function(e,t,n){return a[t]=a[t]||n,''}).trim(),e.replace(Ct,function(e,t,n){return a[t]||n||''}).replace(kt,function(e,a){return t||a||''})}function F(e,t,n){var r=e&&e.match(/^\s*<([-\w]+)/),i=r&&r[1].toLowerCase(),s=a(n?xt:wt);return e=Y(e,t),Lt.test(i)?s=B(s,e,i):g(s,e,n),s}function j(e){return Pt.test(e)}function H(e){for(var t=e;t.__.isAnonymous&&!!t.parent;)t=t.parent;return t}function V(t,a,n){var e=this.__.parent,r=this.__.item;if(!r)for(;e&&!r;)r=e.__.item,e=e.__.parent;if((s(n,'currentTarget')&&(n.currentTarget=t),s(n,'target')&&(n.target=n.srcElement),s(n,'which')&&(n.which=n.charCode||n.keyCode),n.item=r,a.call(this,n),!!ht.autoUpdate)&&!n.preventUpdate){var i=H(this);i.isMounted&&i.update()}}function z(e,t,a,n){var r=V.bind(n,a,t),i;a[e]=null,i=e.replace(at,''),x(n.__.listeners,a)||n.__.listeners.push(a),a[qe]||(a[qe]={}),a[qe][e]&&a.removeEventListener(i,a[qe][e]),a[qe][e]=r,a.addEventListener(i,r,!1)}function q(e,t,a,n){var r=Ie(e,t,a),i=t.tagName||N(t.root,!0),s=H(n);return M(r,'parent',s),r.__.parent=n,A(s.tags,i,r),s!==n&&A(n.tags,i,r),r}function W(e,t,a,n){if(E(e[t])){var r=e[t].indexOf(a);-1!==r&&e[t].splice(r,1),e[t].length?1===e[t].length&&!n&&(e[t]=e[t][0]):delete e[t]}else e[t]===a&&delete e[t]}function G(e,t){var a=this,n=u(),r=u(),i=h(),s,o;for(this.root.insertBefore(n,this.root.firstChild),this.root.appendChild(r),this.__.head=o=n,this.__.tail=r;o;)s=o.nextSibling,i.appendChild(o),a.__.virts.push(o),o=s;t?e.insertBefore(i,t.__.head):e.appendChild(i)}function K(e,t){var a=h();G.call(e,a),t.parentNode.replaceChild(a,t)}function X(e,t,a){var r=e.tag||e.dom._tag,i=r?r.__:{},s=i.head,o='VIRTUAL'===e.dom.tagName,l;return r&&e.tagName===a?void r.update():void((r&&(o&&(l=u(),s.parentNode.insertBefore(l,s)),r.unmount(!0)),!!w(a))&&(e.impl=Oe[a],e.impl&&(e.tag=r=q(e.impl,{root:e.dom,parent:t,tagName:a},e.dom.innerHTML,t),P(e.attrs,function(e){return n(r.root,e.name,e.value)}),e.tagName=a,r.mount(),o&&K(r,l||r.root),t.__.onUnmount=function(){var e=r.opts.dataIs;W(r.parent.tags,e,r),W(r.__.parent.tags,e,r),r.unmount()})))}function J(e){return e?(e=e.replace(Ne,''),rt[e]&&(e=rt[e]),e):null}function Q(e){if(!(this.root&&c(this.root,'virtualized'))){var t=e.dom,a=J(e.attr),r=x([He,Ve],a),i=e.root&&'VIRTUAL'===e.root.tagName,s=this.__,o=s.isAnonymous,l=t&&(e.parent||t.parentNode),d='style'===a,u='class'===a,g;if(e._riot_id)return void(e.__.wasCreated?e.update():(e.mount(),i&&K(e,e.root)));if(e.update)return e.update();var y=r&&!o?U.call(this):this;g=gt(e.expr,y);var h=!T(g),f=S(g);if(f&&(u?g=gt(JSON.stringify(g),this):d&&(g=_(g))),!e.attr||e.wasParsedOnce&&h&&!1!==g||m(t,c(t,e.attr)?e.attr:a),e.bool&&(g=!!g&&a),e.isRtag)return X(e,this,g);if(!(e.wasParsedOnce&&e.value===g)&&(e.value=g,e.wasParsedOnce=!0,!f||u||d||r)){if(h||(g=''),!a)return g+='',void(l&&(e.parent=l,'TEXTAREA'===l.tagName?(l.value=g,!st&&(t.nodeValue=g)):t.nodeValue=g));switch(!0){case k(g):j(a)&&z(a,g,t,this);break;case r:p(t,a===Ve?!g:g);break;default:e.bool&&(t[a]=g),'value'===a&&t.value!==g?t.value=g:h&&!1!==g&&n(t,a,g),d&&t.hidden&&p(t,!1);}}}}function Z(e){P(e,Q.bind(this))}function ee(e,t,a,n,r){if(!(e&&a)){var i=e?U.call(this):t||this;P(r,function(e){e.expr&&Q.call(i,e.expr),n[D(e.name).replace(Ne,'')]=e.expr?e.expr.value:e.value})}}function te(e,t,a){var n=e.__,r={},i=e.isMounted&&!n.skipAnonymous;return(n.isAnonymous&&n.parent&&o(e,n.parent),o(e,t),ee.apply(e,[n.isLoop,n.parent,n.isAnonymous,r,n.instAttrs]),i&&e.isMounted&&k(e.shouldUpdate)&&!e.shouldUpdate(t,r))?e:(o(e.opts,r),i&&e.trigger('update',t),Z.call(e,a),i&&e.trigger('updated'),e)}function ae(e){if(!e){var t=Object.keys(Oe);return t+ae(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,a){var t=a.trim().toLowerCase();return e+',['+Be+'="'+t+'"]'},'')}function ne(e,t){var a=this,n=a.name,r=a.tmpl,i=a.css,s=a.attrs,o=a.onCreate;return Oe[n]||(re(n,r,i,s,o),Oe[n].class=this.constructor),Me(e,n,t,this),i&&ut.inject(),this}function re(e,t,a,n,r){return k(n)&&(r=n,/^[\w-]+\s?=/.test(a)?(n=a,a=''):n=''),a&&(k(a)?r=a:ut.add(a,e)),e=e.toLowerCase(),Oe[e]={name:e,tmpl:t,attrs:n,fn:r},e}function ie(e,t,a,n,r){return a&&ut.add(a,e),Oe[e]={name:e,tmpl:t,attrs:n,fn:r},e}function se(e,t,a){function r(e){if(e.tagName){var s=c(e,Be),o;t&&s!==t&&(s=t,n(e,Be,t)),o=Me(e,s||e.tagName.toLowerCase(),a),o&&i.push(o)}else e.length&&P(e,r)}var i=[],s,o;if(ut.inject(),S(t)&&(a=t,t=0),w(e)?(e='*'===e?o=ae():e+ae(e.split(/, */)),s=e?d(e):[]):s=e,'*'===t){if(t=o||ae(),s.tagName)s=d(t,s);else{var l=[];P(s,function(e){return l.push(d(t,e))}),s=l}t=0}return r(s),i}function oe(e,t,a){if(S(e))return void oe('__'+Dt++ +'__',e,!0);var n=a?Mt:It;if(!t){if(i(n[e]))throw new Error('Unregistered mixin: '+e);return n[e]}n[e]=k(t)?o(t.prototype,n[e]||{})&&t:o(n[e]||{},t)}function le(){return P(De,function(e){return e.update()})}function de(e){return ut.remove(e),delete Oe[e]}function pe(e){for(var t=[],a=arguments.length-1;0<a--;)t[a]=arguments[a+1];return P(t,function(t){var a=[],n=['init','__proto__'],i,s;t=w(t)?oe(t):t,i=k(t)?new t:t;var o=Object.getPrototypeOf(i);do a=a.concat(Object.getOwnPropertyNames(s||i));while(s=Object.getPrototypeOf(s||i));P(a,function(t){if(!x(n,t)){var a=r(i,t)||r(o,t),s=a&&(a.get||a.set);!e.hasOwnProperty(t)&&s?Object.defineProperty(e,t,a):e[t]=k(i[t])?i[t].bind(e):i[t]}}),i.init&&i.init.bind(e)(e.opts)}),e}function ue(e,t){var a=this.parent,n;a&&(n=a.tags[e],E(n)?n.splice(t,0,n.splice(n.indexOf(this),1)[0]):A(a.tags,e,this))}function ce(e,t){for(var a=this,n=this.__.head,r=h(),i;n;)if(i=n.nextSibling,r.appendChild(n),n=i,n===a.__.tail){r.appendChild(n),e.insertBefore(r,t.__.head);break}}function me(e,t,a){var n={};return n[e.key]=t,e.pos&&(n[e.pos]=a),n}function ge(e,t,a){for(var n=t.length,r=e.length-a;n>r;)n--,ye.apply(t[n],[t,n])}function ye(e,t){e.splice(t,1),this.unmount(),W(this.parent,this,this.__.tagName,!0)}function he(e){var t=this;P(Object.keys(this.tags),function(a){ue.apply(t.tags[a],[a,e])})}function fe(e,t,a){a?ce.apply(this,[e,t]):f(e,this.root,t.root)}function _e(e,t,a){a?G.apply(this,[e,t]):f(e,this.root,t.root)}function be(e,t){t?G.call(this,e):e.appendChild(this.root)}function ve(e,t,a,n){return e?n?gt(e,a):t[e]:t}function Te(e,t,a){var n=typeof c(e,je)!==We||m(e,je),r=c(e,ze),s=!!r&&gt.hasExpr(r),d=N(e),p=Oe[d],i=e.parentNode,g=u(),y=R(e),f=c(e,Ye),_=[],b=e.innerHTML,v=!Oe[d],T='VIRTUAL'===e.tagName,k=[];return m(e,Fe),m(e,ze),a=gt.loopKeys(a),a.isLoop=!0,f&&m(e,Ye),i.insertBefore(g,e),i.removeChild(e),a.update=function(){a.value=gt(a.val,t);var u=a.value,c=h(),m=!E(u)&&!w(u),S=g.parentNode,C=[],L=m&&!!u;if(S){m&&(u=u?Object.keys(u).map(function(e){return me(a,u[e],e)}):[]);var I=0;P(u,function(g,h){var E=h-I,w=!L&&a.key?me(a,g,h):g;if(f&&!gt(f,o(l(t),w)))return void I++;var P=ve(r,g,w,s),M=!m&&n&&typeof g===Ge||r,D=k.indexOf(P),O=-1===D,R=!O&&M?D:E,N=_[R],U=E>=k.length,B=M&&O||!M&&!N||!_[E];B?(N=Ie(p,{parent:t,isLoop:!0,isAnonymous:v,tagName:d,root:e.cloneNode(v),item:w,index:E},b),N.mount(),U?be.apply(N,[c||S,T]):_e.apply(N,[S,_[E],T]),!U&&k.splice(E,0,w),_.splice(E,0,N),y&&A(t.tags,d,N,!0)):R!==E&&M&&((r||x(u,k[R]))&&(fe.apply(N,[S,_[E],T]),_.splice(E,0,_.splice(R,1)[0]),k.splice(E,0,k.splice(R,1)[0])),a.pos&&(N[a.pos]=E),!y&&N.tags&&he.call(N,E)),o(N.__,{item:w,index:E,parent:t}),C[E]=P,B||N.update(w)}),ge(u,_,I),k=C.slice(),S.insertBefore(c,g)}},a.unmount=function(){P(_,function(e){e.unmount()})},a}function ke(e,t,a,n){return l(Rt).init(e,t,a,n)}function Se(e){P(e,function(e){e.unmount?e.unmount(!0):e.tagName?e.tag.unmount(!0):e.unmount&&e.unmount()})}function Ce(e,t,a){return l(Nt).init(e,t,a)}function Ee(e,t){var a=this,r=[];return b(e,function(i){var s=i.nodeType,o,l;if((t||i!==e)&&(3===s&&'STYLE'!==i.parentNode.tagName&&gt.hasExpr(i.nodeValue)&&r.push({dom:i,expr:i.nodeValue}),1===s)){var d='VIRTUAL'===i.tagName;if(o=c(i,Fe))return d&&n(i,'loopVirtual',!0),r.push(Te(i,a,o)),!1;if(o=c(i,Ye))return r.push(Ce(i,a,o)),!1;if((o=c(i,Be))&&gt.hasExpr(o))return r.push({isRtag:!0,expr:o,dom:i,attrs:[].slice.call(i.attributes)}),!1;if(l=R(i),d&&(c(i,'virtualized')&&i.parentElement.removeChild(i),!l&&!c(i,'virtualized')&&!c(i,'loopVirtual')&&(l={tmpl:i.outerHTML})),l&&(i!==e||t)){var p=c(i,Be);if(d&&!p){n(i,'virtualized',!0);var u=Ie({tmpl:i.outerHTML},{root:i,parent:a},i.innerHTML);r.push(u)}else return p&&d&&O('Virtual tags shouldn\'t be used together with the "'+Be+'" attribute - https://github.com/riot/riot/issues/2511'),r.push(q(l,{root:i,parent:a},i.innerHTML,a)),!1}Le.apply(a,[i,i.attributes,function(e,t){t&&r.push(t)}])}}),r}function Le(e,t,a){var n=this;P(t,function(t){if(!t)return!1;var r=t.name,i=L(r),s;x(Ue,r)&&e.tagName.toLowerCase()!==Ae?s=ke(e,n,r,t.value):gt.hasExpr(t.value)&&(s={dom:e,expr:t.value,attr:r,bool:i}),a(t,s)})}function we(e){var t=this.__,a=t.isAnonymous;M(this,'isMounted',e),a||(e?this.trigger('mount'):(this.trigger('unmount'),this.off('*'),this.__.wasCreated=!1))}function xe(e,t,a,r){var s=e.__,o=s.root;o._tag=e,Le.apply(s.parent,[o,o.attributes,function(t,a){!s.isAnonymous&&Rt.isPrototypeOf(a)&&(a.tag=e),t.expr=a,s.instAttrs.push(t)}]),y(s.impl.attrs,function(e,t){s.implAttrs.push({name:e,value:t})}),Le.apply(e,[o,s.implAttrs,function(e,t){t?a.push(t):n(o,e.name,e.value)}]),ee.apply(e,[s.isLoop,s.parent,s.isAnonymous,r,s.instAttrs]);var l=oe(Re);if(l&&!s.skipAnonymous)for(var d in l)l.hasOwnProperty(d)&&e.mixin(l[d]);if(s.impl.fn&&s.impl.fn.call(e,r),s.skipAnonymous||e.trigger('before-mount'),P(Ee.apply(e,[t,s.isAnonymous]),function(t){return a.push(t)}),e.update(s.item),!s.isAnonymous&&!s.isInline)for(;t.firstChild;)o.appendChild(t.firstChild);if(M(e,'root',o),!s.skipAnonymous&&e.parent){var i=H(e.parent);i.one(i.isMounted?'updated':'mount',function(){we.call(e,!0)})}else we.call(e,!0);return e.__.wasCreated=!0,e}function Pe(e,t,a){var n=e.__,r=n.root,i=De.indexOf(e),s=r.parentNode;if(n.skipAnonymous||e.trigger('before-unmount'),y(n.impl.attrs,function(e){I(e,Ne)&&(e=e.slice(Ne.length)),m(r,e)}),e.__.listeners.forEach(function(e){Object.keys(e[qe]).forEach(function(t){e.removeEventListener(t,e[qe][t])})}),-1!==i&&De.splice(i,1),n.parent&&!n.isAnonymous){var o=H(n.parent);n.isVirtual?Object.keys(e.tags).forEach(function(t){return W(o.tags,t,e.tags[t])}):W(o.tags,n.tagName,e)}return e.__.virts&&P(e.__.virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),Se(a),P(n.instAttrs,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()}),t?g(r,''):s&&s.removeChild(r),n.onUnmount&&n.onUnmount(),e.isMounted||we.call(e,!0),we.call(e,!1),delete r._tag,e}function Ie(e,t,a){void 0===e&&(e={}),void 0===t&&(t={});var n=t.context||{},r=t.opts||{},i=t.parent,s=t.isLoop,l=!!t.isAnonymous,d=ht.skipAnonymousTags&&l,p=t.item,u=t.index,c=e.tmpl,m=[],g=t.root,y=t.tagName||N(g),h='virtual'===y,f=!h&&!c,_;return f||s&&l?_=g:(!h&&(g.innerHTML=''),_=F(c,a,C(g))),d||yt(n),e.name&&g._tag&&g._tag.unmount(!0),M(n,'__',{impl:e,root:g,skipAnonymous:d,implAttrs:[],isAnonymous:l,instAttrs:[],innerHTML:a,tagName:y,index:u,isLoop:s,isInline:f,item:p,parent:i,listeners:[],virts:[],wasCreated:!1,tail:null,head:null}),[['isMounted',!1],['_riot_id',bt()],['root',g],['opts',r,{writable:!0,enumerable:!0}],['parent',i||null],['tags',{}],['refs',{}],['update',function(e){return te(n,e,m)}],['mixin',function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return pe.apply(void 0,[n].concat(e))}],['mount',function(){return xe(n,_,m,r)}],['unmount',function(e){return Pe(n,e,m)}]].reduce(function(e,t){var a=t[0],r=t[1],i=t[2];return M(n,a,r,i),e},o(n,p))}function Me(e,t,a,n){var r=Oe[t],i=Oe[t].class,s=n||(i?l(i.prototype):{}),d=e._innerHTML=e._innerHTML||e.innerHTML,p=o({root:e,opts:a,context:s},{parent:a?a.parent:null}),u;return r&&e&&(u=Ie(r,p,d)),u&&u.mount&&(u.mount(!0),!x(De,u)&&De.push(u)),u}var De=[],Oe={},Ae='yield',Re='__global_mixin',Ne='riot-',Ue=['ref','data-ref'],Be='data-is',Ye='if',Fe='each',je='no-reorder',He='show',Ve='hide',ze='key',qe='__riot-events__',We='string',Ge='object',Ke='undefined',Xe='function',Je='http://www.w3.org/1999/xlink',$e='http://www.w3.org/2000/svg',Qe=/^xlink:(\w+)/,Ze=typeof window===Ke?void 0:window,et=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,tt=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,at=/^on/,nt=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,rt={viewbox:'viewBox',preserveaspectratio:'preserveAspectRatio'},it=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,st=0|(Ze&&Ze.document||{}).documentMode,ot={},lt=!1,dt,pt;Ze&&(dt=function(){var e=a('style'),r=t('style[type=riot]');return n(e,'type','text/css'),r?(r.id&&(e.id=r.id),r.parentNode.replaceChild(e,r)):document.head.appendChild(e),e}(),pt=dt.styleSheet);var ut={styleNode:dt,add:function(e,t){ot[t]=e,lt=!0},inject:function(){if(Ze&&lt){lt=!1;var e=Object.keys(ot).map(function(e){return ot[e]}).join('\n');pt?pt.cssText=e:dt.innerHTML=e}},remove:function(e){delete ot[e],lt=!0}},ct=function(){function e(e,t){for(;0<=--t&&/\s/.test(e[t]););return t}var t=['case','default','do','else','in','instanceof','prefix','return','typeof','void','yield'],a=t.reduce(function(e,t){return e+t.slice(-1)},''),n=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/,r=/[$\w]/;return function(i,s){var o=/.*/g,l=o.lastIndex=s++,d=o.exec(i)[0].match(n);if(d){var p=l+d[0].length;l=e(i,l);var u=i[l];if(0>l||~'[{(,;:?=|&!^~>%*/'.indexOf(u))return p;if('.'===u)'.'===i[l-1]&&(s=p);else if('+'===u||'-'===u)(i[--l]!==u||0>(l=e(i,l))||!r.test(i[l]))&&(s=p);else if(~a.indexOf(u)){for(var c=l+1;0<=--l&&r.test(i[l]););~t.indexOf(i.slice(l+1,c))&&(s=p)}}return s}}(),mt=function(e){function t(e){return e}function a(e,t){return t||(t=f),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?s:'')}function n(e){if(e===g)return y;var t=e.split(' ');if(2!==t.length||p.test(e))throw new Error('Unsupported brackets "'+e+'"');return t=t.concat(e.replace(u,'\\').split(' ')),t[4]=a(1<t[1].length?/{[\S\s]*?}/:y[4],t),t[5]=a(3<e.length?/\\({|})/g:y[5],t),t[6]=a(y[6],t),t[7]=RegExp('\\\\('+t[3]+')|([[({])|('+t[3]+')|'+c,s),t[8]=e,t}function r(e){return e instanceof RegExp?_(e):f[e]}function i(e){(e||(e=g))!==f[8]&&(f=n(e),_=e===g?t:a,f[9]=_(y[9])),h=e}var s='g',o=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,d=l.source+'|'+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+'|'+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,p=/[\x00-\x1F<>a-zA-Z0-9'",;\\]/,u=/(?=[[\]()*+?.^$|])/g,c=l.source+'|'+/(\/)(?![*\/])/.source,m={"(":RegExp('([()])|'+c,s),"[":RegExp('([[\\]])|'+c,s),"{":RegExp('([{}])|'+c,s)},g='{ }',y=['{','}','{','}',/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp('\\\\(})|([[({])|(})|'+c,s),g,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],h=e,f=[],_,v;return r.split=function(e,t,a){function n(e){l&&(e=l+e,l=''),t||p?i.push(e&&e.replace(a[5],'$1')):i.push(e)}function r(a,n,r){return r&&(n=ct(e,a)),t&&n>a+2&&(g='\u2057'+o.length+'~',o.push(e.slice(a,n)),l+=e.slice(u,a)+g,u=n),n}a||(a=f);var i=[],s=a[6],o=[],l='',d,p,u,c,g,y;for(p=u=s.lastIndex=0;d=s.exec(e);){if(y=s.lastIndex,c=d.index,p){if(d[2]){var h=d[2],_=m[h],b=1;for(_.lastIndex=y;d=_.exec(e);)if(!d[1])_.lastIndex=r(d.index,_.lastIndex,d[2]);else if(d[1]===h)++b;else if(! --b)break;s.lastIndex=b?e.length:_.lastIndex;continue}if(!d[3]){s.lastIndex=r(c,y,d[4]);continue}}d[1]||(n(e.slice(u,c)),u=s.lastIndex,s=a[6+(p^=1)],s.lastIndex=u)}return e&&u<e.length&&n(e.slice(u)),i.qblocks=o,i},r.hasExpr=function(e){return f[4].test(e)},r.loopKeys=function(e){var t=e.match(f[9]);return t?{key:t[1],pos:t[2],val:f[0]+t[3].trim()+f[1]}:{val:e.trim()}},r.array=function(e){return e?n(e):f},Object.defineProperty(r,'settings',{set:function(e){var t;e=e||{},t=e.brackets,Object.defineProperty(e,'brackets',{set:i,get:function(){return h},enumerable:!0}),v=e,i(t)},get:function(){return v}}),r.settings='undefined'!=typeof riot&&riot.settings||{},r.set=i,r.skipRegex=ct,r.R_STRINGS=l,r.R_MLCOMMS=o,r.S_QBLOCKS=d,r.S_QBLOCK2=c,r}(),gt=function(){function e(e,n){return e?(s[e]||(s[e]=a(e))).call(n,t.bind({data:n,tmpl:e})):e}function t(t,a){t.riotData={tagName:a&&a.__&&a.__.tagName,_riot_id:a&&a._riot_id},e.errorHandler?e.errorHandler(t):'undefined'!=typeof console&&'function'==typeof console.error&&(console.error(t.message),console.log('<%s> %s',t.riotData.tagName||'Unknown tag',this.tmpl),console.log(this.data))}function a(e){var t=n(e);return'try{return '!==t.slice(0,11)&&(t='return '+t),new Function('E',t+';')}function n(e){var t=mt.split(e.replace(o,'"'),1),a=t.qblocks,n;if(2<t.length||t[0]){var s=[],d,i;for(d=i=0;d<t.length;++d)n=t[d],n&&(n=1&d?r(n,1,a):'"'+n.replace(/\\/g,'\\\\').replace(/\r\n?|\n/g,'\\n').replace(/"/g,'\\"')+'"')&&(s[i++]=n);n=2>i?s[0]:'['+s.join(',')+'].join("")'}else n=r(t[1],0,a);return a.length&&(n=n.replace(l,function(e,t){return a[t].replace(/\r/g,'\\r').replace(/\n/g,'\\n')})),n}function r(e,t,a){function n(t,a){var n=1,r=p[t],i;for(r.lastIndex=a.lastIndex;i=r.exec(e);)if(i[0]===t)++n;else if(! --n)break;a.lastIndex=n?e.length:r.lastIndex}if(e=e.replace(/\s+/g,' ').trim().replace(/\ ?([[\({},?\.:])\ ?/g,'$1'),e){for(var r=[],s=0,o;e&&(o=e.match(d))&&!o.index;){var l=/,|([[{(])|$/g,u,c;for(e=RegExp.rightContext,u=o[2]?a[o[2]].slice(1,-1).trim().replace(/\s+/g,' '):o[1];c=(o=l.exec(e))[1];)n(c,l);c=e.slice(0,o.index),e=RegExp.rightContext,r[s++]=i(c,1,u)}e=s?1<s?'['+r.join(',')+'].join(" ").trim()':r[0]:i(e,t)}return e}function i(e,t,a){var n;return e=e.replace(c,function(e,t,a,r,i){return a&&(r=n?0:r+e.length,'this'!==a&&'global'!==a&&'window'!==a?(e=t+'("'+a+u+a,r&&(n='.'===(i=i[r])||'('===i||'['===i)):r&&(n=!m.test(i.slice(r)))),e}),n&&(e='try{return '+e+'}catch(e){E(e,this)}'),a?e=(n?'function(){'+e+'}.call(this)':'('+e+')')+'?"'+a+'":""':t&&(e='function(v){'+(n?e.replace('return ','v='):'v=('+e+')')+';return v||v===0?v:""}.call(this)'),e}var s={};e.hasExpr=mt.hasExpr,e.loopKeys=mt.loopKeys,e.clearCache=function(){s={}},e.errorHandler=null;var o=/\u2057/g,l=/\u2057(\d+)~/g,d=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,p={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},u='"in this?this:'+('object'==typeof window?'window':'global')+').',c=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,m=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.version=mt.version='v3.0.8',e}(),yt=function(e){e=e||{};var t={},a=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(a,n){return'function'==typeof n&&(t[a]=t[a]||[]).push(n),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(a,n){if('*'==a&&!n)t={};else if(n)for(var r=t[a],s=0,i;i=r&&r[s];++s)i==n&&r.splice(s--,1);else delete t[a];return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,a){function n(){e.off(t,n),a.apply(e,arguments)}return e.on(t,n)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(n){var r=arguments,s=arguments.length-1,o=Array(s),l,d,p;for(p=0;p<s;p++)o[p]=r[p+1];for(l=a.call(t[n]||[],0),p=0;d=l[p];++p)d.apply(e,o);return t['*']&&'*'!=n&&e.trigger.apply(e,['*',n].concat(o)),e},enumerable:!1,writable:!1,configurable:!1}}),e},ht=o(l(mt.settings),{skipAnonymousTags:!0,autoUpdate:!0}),ft=Object.freeze({$$:d,$:t,createDOMPlaceholder:u,mkEl:a,setAttr:n,toggleVisibility:p,getAttr:c,remAttr:m,setInnerHTML:g,walkAttrs:y,createFrag:h,safeInsert:f,styleObjectToString:_,walkNodes:b}),_t=Object.freeze({isBlank:T,isFunction:k,isObject:S,isSvg:C,isWritable:s,isArray:E,isBoolAttr:L,isNil:v,isString:w,isUndefined:i}),bt=function(){var e=-1;return function(){return++e}}(),vt=Object.freeze({contains:x,each:P,getPropDescriptor:r,startsWith:I,uid:bt,defineProperty:M,objectCreate:l,extend:o,toCamel:D,warn:O}),Tt=/<yield\b/i,kt=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/ig,St=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/ig,Ct=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/ig,Et={tr:'tbody',th:'tr',td:'tr',col:'colgroup'},Lt=st&&10>st?et:tt,wt='div',xt='svg',Pt=/^on/,It={},Mt=It[Re]={},Dt=0,Ot='v3.11.1',At=Object.freeze({Tag:ne,tag:re,tag2:ie,mount:se,mixin:oe,update:le,unregister:de,version:Ot}),Rt={init:function(e,t,a,n){return this.dom=e,this.attr=a,this.rawValue=n,this.parent=t,this.hasExp=gt.hasExpr(n),this},update:function(){var e=this.value,t=this.parent&&H(this.parent),a=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?gt(this.rawValue,this.parent):this.rawValue,!T(e)&&t&&W(t.refs,e,a),!T(this.value)&&w(this.value)?(t&&A(t.refs,this.value,a,null,this.parent.__.index),this.value!==e&&n(this.dom,this.attr,this.value)):m(this.dom,this.attr),this.dom.__ref||(this.dom.__ref=a)},unmount:function(){var e=this.tag||this.dom,t=this.parent&&H(this.parent);!T(this.value)&&t&&W(t.refs,this.value,e)}},Nt={init:function(e,t,a){m(e,Ye),o(this,{tag:t,expr:a,stub:u(),pristine:e});var n=e.parentNode;return n.insertBefore(this.stub,e),n.removeChild(e),this},update:function(){this.value=gt(this.expr,this.tag);this.stub.parentNode&&(this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=Ee.apply(this.tag,[this.current,!0])):!this.value&&this.current&&(this.unmount(),this.current=null,this.expressions=[]),this.value&&Z.call(this.tag,this.expressions))},unmount:function(){this.current&&(this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current)),Se(this.expressions||[])}},Ut=Object.freeze({arrayishAdd:A,getTagName:N,inheritParentProps:U,mountTo:Me,selectTags:ae,arrayishRemove:W,getTag:R,initChildTag:q,moveChildTag:ue,makeReplaceVirtual:K,getImmediateCustomParentTag:H,makeVirtual:G,moveVirtual:ce,unmountAll:Se,createIfDirective:Ce,createRefDirective:ke}),Bt=ht,Yt={tmpl:gt,brackets:mt,styleManager:ut,vdom:De,styleNode:ut.styleNode,dom:ft,check:_t,misc:vt,tags:Ut},Ft=o({},At,{observable:yt,settings:Bt,util:Yt});e.settings=Bt,e.util=Yt,e.Tag=ne,e.tag=re,e.tag2=ie,e.mount=se,e.mixin=oe,e.update=le,e.unregister=de,e.version=Ot,e.observable=yt,e.default=Ft,Object.defineProperty(e,'__esModule',{value:!0})})},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.ApiManager=t.ApiManagerCache=void 0;var i=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(8),o=n(s),l=a(14),d=n(l),p=a(24),u=n(p),c=a(16),m=a(17),g=a(32),y=a(19),h=a(18),f=n(h),_=t.ApiManagerCache={Places:'places',POIs:'pois'},b=function(){function e(){r(this,e),this.authProfile=(0,c.getLocalStorageValue)('auth_profile')||'0',this.prefix=this.authProfile===m.Profile.ADMIN?'admin':'restricted',this.registeredPromises={},this.places={},this.pois={}}return e.prototype.createSession=function(){var e={method:m.Network.POST,url:this.server+'/api/session',params:{},body:{api_key:o.default.getValue(m.Environment.API_KEY)},headers:{"Content-Type":'application/json'},json:!0};return(0,u.default)(e)},e.prototype.convertCurrency=function(e,t,a){e=e||'EUR';var n={url:this.server+'/api/currency/convert/'+e.toUpperCase()+'/'+t.toUpperCase()+'/'+a,method:m.Network.GET,json:!0};return(0,u.default)(n)},e.prototype.getAirportDetailsByLocation=function(e){var t=this,a=arguments;return new Promise(function(n,r){var i={url:t.server+'/api/airport/'+e.lat+'/'+e.lng,method:m.Network.GET,json:!0};return(0,u.default)(i).then(function(e){n(e.response)}).catch(function(){r(a)})})},e.prototype.getCurrency=function(e){var t={method:m.Network.GET,url:this.server+'/api/currency/for/'+e,params:{},headers:{"Content-Type":'application/x-www-form-urlencoded'},json:!0};return(0,u.default)(t)},e.prototype.getFares=function(e,t,a,n){var r=this;return new Promise(function(i,s){var o={method:m.Network.GET,url:r.server+'/api/fares/'+e+'/'+t+'/'+a,json:!0};n=n||{},n.currency=d.default.data.currencyCode,o.params=n;var l=null;a?l=(0,u.default)(o):(o.url=r.server+'/api/fares/'+e+'/'+t,l=(0,u.default)(o)),l.then(function(e){var t=e.response;if(t.fares){var a=t.fares.sort(function(e,t){return e.amount>t.amount?1:-1}),n=a.map(function(e){return{depdate:e.depdate,retdate:e.retdate,amount:e.amount,deeplink:e.deep_link}});i(n)}else s('Unable to retrive fares')}).catch(function(){return s('Unable to retrive fares')})})},e.prototype.getGeodataFromID=function(e){var t={url:this.server+'/api/geodata/'+e,method:m.Network.GET,json:!0};return(0,u.default)(t)},e.prototype.getHotelsByID=function(e,t,a){var n={url:this.server+'/api/hotels/'+e+'/'+t+'/'+a,method:m.Network.GET,currency:d.default.data.currencyCode,json:!0};return(0,u.default)(n)},e.prototype.getNearestAirport=function(e,t){var a={method:m.Network.GET,url:this.server+'/api/airport/'+e+'/'+t,headers:{"Content-Type":'application/json'},json:!0};return(0,u.default)(a)},e.prototype.getPlace=function(e){var t=this,a=arguments;if(this.registeredPromises.hasOwnProperty[e]&&null!==this.registeredPromises[e])return this.registeredPromises[e];var n=new Promise(function(n,r){if(t.places.hasOwnProperty(e))n(t.places[e]),t.registeredPromises[e]=null;else if(!e||!e.length)r('Unable to retrieve place');else{var i={method:m.Network.GET,url:t.base+'/place/'+e,params:{},headers:{"Content-Type":'application/x-www-form-urlencoded',authorization:'Bearer '+(0,g.getToken)()},json:!0};(0,u.default)(i).then(function(a){var i=a.response;'OK'===i.status.toUpperCase()?(t.places[e]=i.result,n(t.places[e]),t.registeredPromises[e]=null):(r(i),t.registeredPromises[e]=null)}).catch(function(){r(a),t.registeredPromises[e]=null})}});return this.registeredPromises[e]=n,n},e.prototype.getPOI=function(e){var t=this,a=arguments;if(this.registeredPromises.hasOwnProperty[e]&&null!==this.registeredPromises[e])return this.registeredPromises[e];var n=new Promise(function(n,r){if(t.pois.hasOwnProperty(e))n(t.pois[e]),t.registeredPromises[e]=null;else{var i={method:m.Network.GET,url:t.base+'/limitedpois',params:{},headers:{"Content-Type":'application/x-www-form-urlencoded',authorization:'Bearer '+(0,g.getToken)()},json:!0};i.params._id=e,(0,u.default)(i).then(function(a){var r=a.response;t.pois[e]=r.filter(function(t){return t.id===e})[0],n(t.pois[e]),t.registeredPromises[e]=null}).catch(function(){r(a),t.registeredPromises[e]=null})}});return this.registeredPromises[e]=n,n},e.prototype.getProducer=function(e){var t={method:m.Network.GET,url:this.server+'/api/user/'+e,params:{},headers:{"Content-Type":'application/x-www-form-urlencoded',authorization:'Bearer '+(0,g.getToken)()},json:!0};return(0,u.default)(t)},e.prototype.getSkin=function(e){var t={method:'GET',url:'https://storage.googleapis.com/travelcast/styles/_'+e+'.scss?t='+Date.now(),params:{},headers:{"Content-Type":'application/json'}};return(0,u.default)(t)},e.prototype.getVideo=function(e){var t={method:m.Network.GET,url:this.base+'/video/'+e,headers:{authorization:'Bearer '+(0,g.getToken)()},json:!0};return(0,u.default)(t)},e.prototype.getVideoBy=function(e){var t=this;return new Promise(function(a,n){var r={method:m.Network.GET,url:t.base+'/video/all',params:e,headers:{authorization:'Bearer '+(0,g.getToken)()},json:!0};(0,u.default)(r).then(function(e){e.response.length?a({response:e.response[0]}):n('Unable to retrieve video by id')},function(){return n('Unable to retrieve video by id')})})},e.prototype.getVimeoSource=function(e,t){t=t||'';var a={method:m.Network.GET,url:this.server+'/api/vimeo/'+e+'?fields='+t,headers:{authorization:'Bearer '+(0,g.getToken)()},json:!0};return(0,u.default)(a)},e.prototype.event=function(e){var t={url:this.base+'/event',method:m.Network.POST,body:e,headers:{authorization:'Bearer '+(0,g.getToken)(),"Content-Type":'application/json'},onerror:function(){return f.default.send(y.Events.VIMEO_ERROR)}};return(0,u.default)(t)},e.prototype.clear=function(e){this[e]={}},i(e,[{key:'base',get:function(){return this.server+'/api/'+this.prefix}},{key:'server',get:function(){var e=o.default.getValue(m.Environment.MAIN_SERVER);return('undefined'==typeof e||null===e||'null'===e)&&(e=''),e}}]),e}();t.ApiManager=b,t.default=new b},function(e,t,a){(function(e){var t;//! moment.js
(function(t,a){e.exports=a()})(this,function(){'use strict';function t(){return It.apply(null,arguments)}function n(e){return e instanceof Array||'[object Array]'===Object.prototype.toString.call(e)}function r(e){return null!=e&&'[object Object]'===Object.prototype.toString.call(e)}function i(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function s(e){return void 0===e}function o(e){return'number'==typeof e||'[object Number]'===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||'[object Date]'===Object.prototype.toString.call(e)}function d(e,t){var a=[],n;for(n=0;n<e.length;++n)a.push(t(e[n],n));return a}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var a in t)p(t,a)&&(e[a]=t[a]);return p(t,'toString')&&(e.toString=t.toString),p(t,'valueOf')&&(e.valueOf=t.valueOf),e}function g(e,t,a,n){return ze(e,t,a,n,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(e){return null==e._pf&&(e._pf=c()),e._pf}function m(e){if(null==e._isValid){var t=y(e),a=Mt.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&0>t.overflow&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&a);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null==Object.isFrozen||!Object.isFrozen(e))e._isValid=n;else return n}return e._isValid}function h(e){var t=g(NaN);return null==e?y(t).userInvalidated=!0:u(y(t),e),t}function f(e,t){var a,n,r;if(s(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),s(t._i)||(e._i=t._i),s(t._f)||(e._f=t._f),s(t._l)||(e._l=t._l),s(t._strict)||(e._strict=t._strict),s(t._tzm)||(e._tzm=t._tzm),s(t._isUTC)||(e._isUTC=t._isUTC),s(t._offset)||(e._offset=t._offset),s(t._pf)||(e._pf=y(t)),s(t._locale)||(e._locale=t._locale),0<Dt.length)for(a=0;a<Dt.length;a++)n=Dt[a],r=t[n],s(r)||(e[n]=r);return e}function _(e){f(this,e),this._d=new Date(null==e._d?NaN:e._d.getTime()),this.isValid()||(this._d=new Date(NaN)),!1===Ot&&(Ot=!0,t.updateOffset(this),Ot=!1)}function b(e){return e instanceof _||null!=e&&null!=e._isAMomentObject}function v(e){return 0>e?Math.ceil(e)||0:Math.floor(e)}function T(e){var t=+e,a=0;return 0!=t&&isFinite(t)&&(a=v(t)),a}function k(e,t,a){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0,o;for(o=0;o<n;o++)(a&&e[o]!==t[o]||!a&&T(e[o])!==T(t[o]))&&s++;return s+r}function S(e){!1===t.suppressDeprecationWarnings&&'undefined'!=typeof console&&console.warn&&console.warn('Deprecation warning: '+e)}function C(e,a){var n=!0;return u(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var r=[],s=0,i;s<arguments.length;s++){if(i='','object'==typeof arguments[s]){for(var o in i+='\n['+s+'] ',arguments[0])i+=o+': '+arguments[0][o]+', ';i=i.slice(0,-2)}else i=arguments[s];r.push(i)}S(e+'\nArguments: '+Array.prototype.slice.call(r).join('')+'\n'+new Error().stack),n=!1}return a.apply(this,arguments)},a)}function E(e,a){null!=t.deprecationHandler&&t.deprecationHandler(e,a),At[e]||(S(a),At[e]=!0)}function L(e){return e instanceof Function||'[object Function]'===Object.prototype.toString.call(e)}function w(e,t){var a=u({},e),n;for(n in t)p(t,n)&&(r(e[n])&&r(t[n])?(a[n]={},u(a[n],e[n]),u(a[n],t[n])):null==t[n]?delete a[n]:a[n]=t[n]);for(n in e)p(e,n)&&!p(t,n)&&r(e[n])&&(a[n]=u({},a[n]));return a}function x(e){null!=e&&this.set(e)}function P(e,t){var a=e.toLowerCase();Ut[a]=Ut[a+'s']=Ut[t]=e}function I(e){return'string'==typeof e?Ut[e]||Ut[e.toLowerCase()]:void 0}function M(e){var t={},a,n;for(n in e)p(e,n)&&(a=I(n),a&&(t[a]=e[n]));return t}function D(e,t){Bt[e]=t}function O(e){var t=[];for(var a in e)t.push({unit:a,priority:Bt[a]});return t.sort(function(e,t){return e.priority-t.priority}),t}function A(e,t,a){var n=''+Math.abs(e),r=t-n.length;return(0<=e?a?'+':'':'-')+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function R(e,t,a,n){var r=n;'string'==typeof n&&(r=function(){return this[n]()}),e&&(Ht[e]=r),t&&(Ht[t[0]]=function(){return A(r.apply(this,arguments),t[1],t[2])}),a&&(Ht[a]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,''):e.replace(/\\/g,'')}function U(e){var t=e.match(Yt),a,n;for(a=0,n=t.length;a<n;a++)t[a]=Ht[t[a]]?Ht[t[a]]:N(t[a]);return function(a){var r='',s;for(s=0;s<n;s++)r+=L(t[s])?t[s].call(a,e):t[s];return r}}function B(e,t){return e.isValid()?(t=Y(t,e.localeData()),jt[t]=jt[t]||U(t),jt[t](e)):e.localeData().invalidDate()}function Y(e,t){function a(e){return t.longDateFormat(e)||e}var n=5;for(Ft.lastIndex=0;0<=n&&Ft.test(e);)e=e.replace(Ft,a),Ft.lastIndex=0,n-=1;return e}function F(e,t,a){sa[e]=L(t)?t:function(e){return e&&a?a:t}}function j(e,t){return p(sa,e)?sa[e](t._strict,t._locale):new RegExp(H(e))}function H(e){return V(e.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,a,n,r){return t||a||n||r}))}function V(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')}function z(e,t){var a=t,n;for('string'==typeof e&&(e=[e]),o(t)&&(a=function(e,a){a[t]=T(e)}),n=0;n<e.length;n++)oa[e[n]]=a}function q(e,t){z(e,function(e,a,n,r){n._w=n._w||{},t(e,n._w,n,r)})}function W(e,t,a){null!=t&&p(oa,e)&&oa[e](t,a._a,a,e)}function G(e){return K(e)?366:365}function K(e){return 0==e%4&&0!=e%100||0==e%400}function X(e,a){return function(n){return null==n?J(this,e):($(this,e,n),t.updateOffset(this,a),this)}}function J(e,t){return e.isValid()?e._d['get'+(e._isUTC?'UTC':'')+t]():NaN}function $(e,t,a){e.isValid()&&!isNaN(a)&&('FullYear'===t&&K(e.year())&&1===e.month()&&29===e.date()?e._d['set'+(e._isUTC?'UTC':'')+t](a,e.month(),Z(a,e.month())):e._d['set'+(e._isUTC?'UTC':'')+t](a))}function Q(e,t){return(e%t+t)%t}function Z(e,t){if(isNaN(e)||isNaN(t))return NaN;var a=Q(t,12);return e+=(t-a)/12,1===a?K(e)?29:28:31-a%7%2}function ee(e,t,a){var n=e.toLocaleLowerCase(),r,i,s;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;12>r;++r)s=g([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,'').toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,'').toLocaleLowerCase();return a?'MMM'===t?(i=_a.call(this._shortMonthsParse,n),-1===i?null:i):(i=_a.call(this._longMonthsParse,n),-1===i?null:i):'MMM'===t?(i=_a.call(this._shortMonthsParse,n),-1!==i)?i:(i=_a.call(this._longMonthsParse,n),-1===i?null:i):(i=_a.call(this._longMonthsParse,n),-1!==i)?i:(i=_a.call(this._shortMonthsParse,n),-1===i?null:i)}function te(e,t){var a;if(!e.isValid())return e;if('string'==typeof t)if(/^\d+$/.test(t))t=T(t);else if(t=e.localeData().monthsParse(t),!o(t))return e;return a=Math.min(e.date(),Z(e.year(),t)),e._d['set'+(e._isUTC?'UTC':'')+'Month'](t,a),e}function ae(e){return null==e?J(this,'Month'):(te(this,e),t.updateOffset(this,!0),this)}function ne(){function e(e,t){return t.length-e.length}var t=[],a=[],n=[],r,i;for(r=0;12>r;r++)i=g([2e3,r]),t.push(this.monthsShort(i,'')),a.push(this.months(i,'')),n.push(this.months(i,'')),n.push(this.monthsShort(i,''));for(t.sort(e),a.sort(e),n.sort(e),r=0;12>r;r++)t[r]=V(t[r]),a[r]=V(a[r]);for(r=0;24>r;r++)n[r]=V(n[r]);this._monthsRegex=new RegExp('^('+n.join('|')+')','i'),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp('^('+a.join('|')+')','i'),this._monthsShortStrictRegex=new RegExp('^('+t.join('|')+')','i')}function re(e,t,a,n,r,i,s){var o=new Date(e,t,a,n,r,i,s);return 100>e&&0<=e&&isFinite(o.getFullYear())&&o.setFullYear(e),o}function ie(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function se(e,t,a){var n=7+t-a,r=(7+ie(e,0,n).getUTCDay()-t)%7;return-r+n-1}function oe(e,t,a,n,r){var i=se(e,n,r),s=1+7*(t-1)+(7+a-n)%7+i,o,l;return 0>=s?(o=e-1,l=G(o)+s):s>G(e)?(o=e+1,l=s-G(e)):(o=e,l=s),{year:o,dayOfYear:l}}function le(e,t,a){var n=se(e.year(),t,a),r=Math.floor((e.dayOfYear()-n-1)/7)+1,i,s;return 1>r?(s=e.year()-1,i=r+de(s,t,a)):r>de(e.year(),t,a)?(i=r-de(e.year(),t,a),s=e.year()+1):(s=e.year(),i=r),{week:i,year:s}}function de(e,t,a){var n=se(e,t,a),r=se(e+1,t,a);return(G(e)-n+r)/7}function pe(e,t){return'string'==typeof e?isNaN(e)?(e=t.weekdaysParse(e),'number'==typeof e?e:null):parseInt(e,10):e}function ue(e,t){return'string'==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function ce(e,t,a){var n=e.toLocaleLowerCase(),r,i,s;if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;7>r;++r)s=g([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,'').toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,'').toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,'').toLocaleLowerCase();return a?'dddd'===t?(i=_a.call(this._weekdaysParse,n),-1===i?null:i):'ddd'===t?(i=_a.call(this._shortWeekdaysParse,n),-1===i?null:i):(i=_a.call(this._minWeekdaysParse,n),-1===i?null:i):'dddd'===t?(i=_a.call(this._weekdaysParse,n),-1!==i)?i:(i=_a.call(this._shortWeekdaysParse,n),-1!==i)?i:(i=_a.call(this._minWeekdaysParse,n),-1===i?null:i):'ddd'===t?(i=_a.call(this._shortWeekdaysParse,n),-1!==i)?i:(i=_a.call(this._weekdaysParse,n),-1!==i)?i:(i=_a.call(this._minWeekdaysParse,n),-1===i?null:i):(i=_a.call(this._minWeekdaysParse,n),-1!==i)?i:(i=_a.call(this._weekdaysParse,n),-1!==i)?i:(i=_a.call(this._shortWeekdaysParse,n),-1===i?null:i)}function me(){function e(e,t){return t.length-e.length}var t=[],a=[],n=[],r=[],s,i,o,l,d;for(s=0;7>s;s++)i=g([2e3,1]).day(s),o=this.weekdaysMin(i,''),l=this.weekdaysShort(i,''),d=this.weekdays(i,''),t.push(o),a.push(l),n.push(d),r.push(o),r.push(l),r.push(d);for(t.sort(e),a.sort(e),n.sort(e),r.sort(e),s=0;7>s;s++)a[s]=V(a[s]),n[s]=V(n[s]),r[s]=V(r[s]);this._weekdaysRegex=new RegExp('^('+r.join('|')+')','i'),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp('^('+n.join('|')+')','i'),this._weekdaysShortStrictRegex=new RegExp('^('+a.join('|')+')','i'),this._weekdaysMinStrictRegex=new RegExp('^('+t.join('|')+')','i')}function ge(){return this.hours()%12||12}function ye(e,t){R(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function he(e,t){return t._meridiemParse}function fe(e){return e?e.toLowerCase().replace('_','-'):e}function _e(e){for(var t=0,a,n,r,i;t<e.length;){for(i=fe(e[t]).split('-'),a=i.length,n=fe(e[t+1]),n=n?n.split('-'):null;0<a;){if(r=be(i.slice(0,a).join('-')),r)return r;if(n&&n.length>=a&&k(i,n,!0)>=a-1)break;a--}t++}return Ra}function be(t){var n=null;if(!Ea[t]&&'undefined'!=typeof e&&e&&e.exports)try{n=Ra._abbr;a(121)('./'+t),ve(n)}catch(t){}return Ea[t]}function ve(e,t){var a;return e&&(a=s(t)?ke(e):Te(e,t),a?Ra=a:'undefined'!=typeof console&&console.warn&&console.warn('Locale '+e+' not found. Did you forget to load it?')),Ra._abbr}function Te(e,t){if(null!==t){var a=Ca,n;if(t.abbr=e,null!=Ea[e])E('defineLocaleOverride','use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info.'),a=Ea[e]._config;else if(null!=t.parentLocale)if(null!=Ea[t.parentLocale])a=Ea[t.parentLocale]._config;else if(n=be(t.parentLocale),null!=n)a=n._config;else return La[t.parentLocale]||(La[t.parentLocale]=[]),La[t.parentLocale].push({name:e,config:t}),null;return Ea[e]=new x(w(a,t)),La[e]&&La[e].forEach(function(e){Te(e.name,e.config)}),ve(e),Ea[e]}return delete Ea[e],null}function ke(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ra;if(!n(e)){if(t=be(e),t)return t;e=[e]}return _e(e)}function Se(){return Rt(Ea)}function Ce(e){var t=e._a,a;return t&&-2===y(e).overflow&&(a=0>t[da]||11<t[da]?da:1>t[pa]||t[pa]>Z(t[la],t[da])?pa:0>t[ua]||24<t[ua]||24===t[ua]&&(0!==t[ca]||0!==t[ma]||0!==t[ga])?ua:0>t[ca]||59<t[ca]?ca:0>t[ma]||59<t[ma]?ma:0>t[ga]||999<t[ga]?ga:-1,y(e)._overflowDayOfYear&&(a<la||a>pa)&&(a=pa),y(e)._overflowWeeks&&-1===a&&(a=ya),y(e)._overflowWeekday&&-1===a&&(a=ha),y(e).overflow=a),e}function Ee(e,t,a){return null==e?null==t?a:t:e}function Le(e){var a=new Date(t.now());return e._useUTC?[a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()]:[a.getFullYear(),a.getMonth(),a.getDate()]}function we(e){var t=[],a,n,r,i,s;if(!e._d){for(r=Le(e),e._w&&null==e._a[pa]&&null==e._a[da]&&xe(e),null!=e._dayOfYear&&(s=Ee(e._a[la],r[la]),(e._dayOfYear>G(s)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),n=ie(s,0,e._dayOfYear),e._a[da]=n.getUTCMonth(),e._a[pa]=n.getUTCDate()),a=0;3>a&&null==e._a[a];++a)e._a[a]=t[a]=r[a];for(;7>a;a++)e._a[a]=t[a]=null==e._a[a]?2===a?1:0:e._a[a];24===e._a[ua]&&0===e._a[ca]&&0===e._a[ma]&&0===e._a[ga]&&(e._nextDay=!0,e._a[ua]=0),e._d=(e._useUTC?ie:re).apply(null,t),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ua]=24),e._w&&'undefined'!=typeof e._w.d&&e._w.d!==i&&(y(e).weekdayMismatch=!0)}}function xe(e){var t,a,n,r,i,s,o,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)i=1,s=4,a=Ee(t.GG,e._a[la],le(qe(),1,4).year),n=Ee(t.W,1),r=Ee(t.E,1),(1>r||7<r)&&(l=!0);else{i=e._locale._week.dow,s=e._locale._week.doy;var d=le(qe(),i,s);a=Ee(t.gg,e._a[la],d.year),n=Ee(t.w,d.week),null==t.d?null==t.e?r=i:(r=t.e+i,(0>t.e||6<t.e)&&(l=!0)):(r=t.d,(0>r||6<r)&&(l=!0))}1>n||n>de(a,i,s)?y(e)._overflowWeeks=!0:null==l?(o=oe(a,n,r,i,s),e._a[la]=o.year,e._dayOfYear=o.dayOfYear):y(e)._overflowWeekday=!0}function Pe(e){var t=e._i,a=wa.exec(t)||xa.exec(t),n,r,i,s,o,l;if(a){for(y(e).iso=!0,n=0,r=Ia.length;n<r;n++)if(Ia[n][1].exec(a[1])){s=Ia[n][0],i=!1!==Ia[n][2];break}if(null==s)return void(e._isValid=!1);if(a[3]){for(n=0,r=Ma.length;n<r;n++)if(Ma[n][1].exec(a[3])){o=(a[2]||' ')+Ma[n][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(a[4])if(Pa.exec(a[4]))l='Z';else return void(e._isValid=!1);e._f=s+(o||'')+(l||''),Ue(e)}else e._isValid=!1}function Ie(e,t,a,n,r,i){var s=[Me(e),va.indexOf(t),parseInt(a,10),parseInt(n,10),parseInt(r,10)];return i&&s.push(parseInt(i,10)),s}function Me(e){var t=parseInt(e,10);return 49>=t?2e3+t:999>=t?1900+t:t}function De(e){return e.replace(/\([^)]*\)|[\n\t]/g,' ').replace(/(\s\s+)/g,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'')}function Oe(e,t,a){if(e){var n=Ta.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(n!==r)return y(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function Ae(e,t,a){if(e)return Aa[e];if(t)return 0;var n=parseInt(a,10),r=n%100;return 60*((n-r)/100)+r}function Re(e){var t=Oa.exec(De(e._i));if(t){var a=Ie(t[4],t[3],t[2],t[5],t[6],t[7]);if(!Oe(t[1],a,e))return;e._a=a,e._tzm=Ae(t[8],t[9],t[10]),e._d=ie.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function Ne(e){var a=Da.exec(e._i);if(null!==a)return void(e._d=new Date(+a[1]));if(Pe(e),!1===e._isValid)delete e._isValid;else return;if(Re(e),!1===e._isValid)delete e._isValid;else return;t.createFromInputFallback(e)}function Ue(e){if(e._f===t.ISO_8601)return void Pe(e);if(e._f===t.RFC_2822)return void Re(e);e._a=[],y(e).empty=!0;var a=''+e._i,n=a.length,r=0,s,i,o,l,d;for(o=Y(e._f,e._locale).match(Yt)||[],s=0;s<o.length;s++)l=o[s],i=(a.match(j(l,e))||[])[0],i&&(d=a.substr(0,a.indexOf(i)),0<d.length&&y(e).unusedInput.push(d),a=a.slice(a.indexOf(i)+i.length),r+=i.length),Ht[l]?(i?y(e).empty=!1:y(e).unusedTokens.push(l),W(l,i,e)):e._strict&&!i&&y(e).unusedTokens.push(l);y(e).charsLeftOver=n-r,0<a.length&&y(e).unusedInput.push(a),12>=e._a[ua]&&!0===y(e).bigHour&&0<e._a[ua]&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[ua]=Be(e._locale,e._a[ua],e._meridiem),we(e),Ce(e)}function Be(e,t,a){var n;return null==a?t:null==e.meridiemHour?null==e.isPM?t:(n=e.isPM(a),n&&12>t&&(t+=12),n||12!==t||(t=0),t):e.meridiemHour(t,a)}function Ye(e){var t,a,n,r,i;if(0===e._f.length)return y(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)(i=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Ue(t),!!m(t))&&(i+=y(t).charsLeftOver,i+=10*y(t).unusedTokens.length,y(t).score=i,(null==n||i<n)&&(n=i,a=t));u(e,a||t)}function Fe(e){if(!e._d){var t=M(e._i);e._a=d([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),we(e)}}function je(e){var t=new _(Ce(He(e)));return t._nextDay&&(t.add(1,'d'),t._nextDay=void 0),t}function He(e){var t=e._i,a=e._f;return(e._locale=e._locale||ke(e._l),null===t||void 0===a&&''===t)?h({nullInput:!0}):('string'==typeof t&&(e._i=t=e._locale.preparse(t)),b(t))?new _(Ce(t)):(l(t)?e._d=t:n(a)?Ye(e):a?Ue(e):Ve(e),m(e)||(e._d=null),e)}function Ve(e){var a=e._i;s(a)?e._d=new Date(t.now()):l(a)?e._d=new Date(a.valueOf()):'string'==typeof a?Ne(e):n(a)?(e._a=d(a.slice(0),function(e){return parseInt(e,10)}),we(e)):r(a)?Fe(e):o(a)?e._d=new Date(a):t.createFromInputFallback(e)}function ze(e,t,a,s,o){var l={};return(!0===a||!1===a)&&(s=a,a=void 0),(r(e)&&i(e)||n(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=a,l._i=e,l._f=t,l._strict=s,je(l)}function qe(e,t,a,n){return ze(e,t,a,n,!1)}function We(e,t){var a,r;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return qe();for(a=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](a))&&(a=t[r]);return a}function Ge(e){for(var t in e)if(-1===_a.call(Ba,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var a=!1,n=0;n<Ba.length;++n)if(e[Ba[n]]){if(a)return!1;parseFloat(e[Ba[n]])!==T(e[Ba[n]])&&(a=!0)}return!0}function Ke(e){var t=M(e),a=t.year||0,n=t.quarter||0,r=t.month||0,i=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,d=t.second||0,p=t.millisecond||0;this._isValid=Ge(t),this._milliseconds=+p+1e3*d+6e4*l+60*(60*(1e3*o)),this._days=+s+7*i,this._months=+r+3*n+12*a,this._data={},this._locale=ke(),this._bubble()}function Xe(e){return e instanceof Ke}function Je(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function $e(e,t){R(e,0,0,function(){var e=this.utcOffset(),a='+';return 0>e&&(e=-e,a='-'),a+A(~~(e/60),2)+t+A(~~e%60,2)})}function Qe(e,t){var a=(t||'').match(e);if(null===a)return null;var n=a[a.length-1]||[],r=(n+'').match(Ya)||['-',0,0],i=+(60*r[1])+T(r[2]);return 0===i?0:'+'===r[0]?i:-i}function Ze(e,a){var n,r;return a._isUTC?(n=a.clone(),r=(b(e)||l(e)?e.valueOf():qe(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),t.updateOffset(n,!1),n):qe(e).local()}function et(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function tt(){return!!this.isValid()&&this._isUTC&&0===this._offset}function at(e,t){var a=e,n=null,r,i,s;return Xe(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(a={},t?a[t]=e:a.milliseconds=e):(n=Fa.exec(e))?(r='-'===n[1]?-1:1,a={y:0,d:T(n[pa])*r,h:T(n[ua])*r,m:T(n[ca])*r,s:T(n[ma])*r,ms:T(Je(1e3*n[ga]))*r}):(n=ja.exec(e))?(r='-'===n[1]?-1:'+'===n[1]?1:1,a={y:nt(n[2],r),M:nt(n[3],r),w:nt(n[4],r),d:nt(n[5],r),h:nt(n[6],r),m:nt(n[7],r),s:nt(n[8],r)}):null==a?a={}:'object'==typeof a&&('from'in a||'to'in a)&&(s=it(qe(a.from),qe(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),i=new Ke(a),Xe(e)&&p(e,'_locale')&&(i._locale=e._locale),i}function nt(e,t){var a=e&&parseFloat(e.replace(',','.'));return(isNaN(a)?0:a)*t}function rt(e,t){var a={milliseconds:0,months:0};return a.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(a.months,'M').isAfter(t)&&--a.months,a.milliseconds=+t-+e.clone().add(a.months,'M'),a}function it(e,t){var a;return e.isValid()&&t.isValid()?(t=Ze(t,e),e.isBefore(t)?a=rt(e,t):(a=rt(t,e),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function st(e,t){return function(a,n){var r,i;return null===n||isNaN(+n)||(E(t,'moment().'+t+'(period, number) is deprecated. Please use moment().'+t+'(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.'),i=a,a=n,n=i),a='string'==typeof a?+a:a,r=at(a,n),ot(this,r,e),this}}function ot(e,a,n,r){var i=a._milliseconds,s=Je(a._days),o=Je(a._months);e.isValid()&&(r=null==r||r,o&&te(e,J(e,'Month')+o*n),s&&$(e,'Date',J(e,'Date')+s*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&t.updateOffset(e,s||o))}function lt(e,t){var a=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(a,'months'),r,i;return 0>t-n?(r=e.clone().add(a-1,'months'),i=(t-n)/(n-r)):(r=e.clone().add(a+1,'months'),i=(t-n)/(r-n)),-(a+i)||0}function dt(e){var t;return void 0===e?this._locale._abbr:(t=ke(e),null!=t&&(this._locale=t),this)}function pt(){return this._locale}function ut(e,t){R(0,[e,e.length],0,t)}function ct(e,t,a,n,r){var i;return null==e?le(this,n,r).year:(i=de(e,n,r),t>i&&(t=i),mt.call(this,e,t,a,n,r))}function mt(e,t,a,n,r){var i=oe(e,t,a,n,r),s=ie(i.year,0,i.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function gt(e,t){t[ga]=T(1e3*('0.'+e))}function yt(e){return e}function ht(e,t,a,n){var r=ke(),i=g().set(n,t);return r[a](i,e)}function ft(e,t,a){if(o(e)&&(t=e,e=void 0),e=e||'',null!=t)return ht(e,t,a,'month');var n=[],r;for(r=0;12>r;r++)n[r]=ht(e,r,a,'month');return n}function _t(e,t,a,n){'boolean'==typeof e?(o(t)&&(a=t,t=void 0),t=t||''):(t=e,a=t,e=!1,o(t)&&(a=t,t=void 0),t=t||'');var r=ke(),s=e?r._week.dow:0;if(null!=a)return ht(t,(a+s)%7,n,'day');var l=[],d;for(d=0;7>d;d++)l[d]=ht(t,(d+s)%7,n,'day');return l}function bt(e,t,a,n){var r=at(t,a);return e._milliseconds+=n*r._milliseconds,e._days+=n*r._days,e._months+=n*r._months,e._bubble()}function vt(e){return 0>e?Math.floor(e):Math.ceil(e)}function Tt(e){return 4800*e/146097}function kt(e){return 146097*e/4800}function St(e){return function(){return this.as(e)}}function Ct(e){return function(){return this.isValid()?this._data[e]:NaN}}function Et(e,t,a,n,r){return r.relativeTime(t||1,!!a,e,n)}function Lt(e,t,n){var r=at(e).abs(),i=yn(r.as('s')),s=yn(r.as('m')),o=yn(r.as('h')),l=yn(r.as('d')),d=yn(r.as('M')),p=yn(r.as('y')),u=i<=hn.ss&&['s',i]||i<hn.s&&['ss',i]||1>=s&&['m']||s<hn.m&&['mm',s]||1>=o&&['h']||o<hn.h&&['hh',o]||1>=l&&['d']||l<hn.d&&['dd',l]||1>=d&&['M']||d<hn.M&&['MM',d]||1>=p&&['y']||['yy',p];return u[2]=t,u[3]=0<+e,u[4]=n,Et.apply(null,u)}function wt(e){return void 0===e?yn:'function'==typeof e&&(yn=e,!0)}function xt(e){return(0<e)-(0>e)||+e}function Pt(){if(!this.isValid())return this.localeData().invalidDate();var e=fn(this._milliseconds)/1e3,t=fn(this._days),a=fn(this._months),n,r,i;n=v(e/60),r=v(n/60),e%=60,n%=60,i=v(a/12),a%=12;var o=i,l=a,d=t,p=r,u=n,c=e?e.toFixed(3).replace(/\.?0+$/,''):'',s=this.asSeconds();if(!s)return'P0D';var m=0>s?'-':'',g=xt(this._months)===xt(s)?'':'-',y=xt(this._days)===xt(s)?'':'-',h=xt(this._milliseconds)===xt(s)?'':'-';return m+'P'+(o?g+o+'Y':'')+(l?g+l+'M':'')+(d?y+d+'D':'')+(p||u||c?'T':'')+(p?h+p+'H':'')+(u?h+u+'M':'')+(c?h+c+'S':'')}var It,Mt;Mt=Array.prototype.some?Array.prototype.some:function(e){for(var a=Object(this),t=a.length>>>0,n=0;n<t;n++)if(n in a&&e.call(this,a[n],n,a))return!0;return!1};var Dt=t.momentProperties=[],Ot=!1,At={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Rt=Object.keys?Object.keys:function(e){var t=[],a;for(a in e)p(e,a)&&t.push(a);return t};var Nt=/\d{1,2}/,Ut={},Bt={},Yt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ft=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,jt={},Ht={},Vt=/\d/,zt=/\d\d/,qt=/\d{3}/,Wt=/\d{4}/,Gt=/[+-]?\d{6}/,Kt=/\d\d?/,Xt=/\d\d\d\d?/,Jt=/\d\d\d\d\d\d?/,$t=/\d{1,3}/,Qt=/\d{1,4}/,Zt=/[+-]?\d{1,6}/,ea=/\d+/,ta=/[+-]?\d+/,aa=/Z|[+-]\d\d:?\d\d/gi,na=/Z|[+-]\d\d(?::?\d\d)?/gi,ra=/[+-]?\d+(\.\d{1,3})?/,ia=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,sa={},oa={},la=0,da=1,pa=2,ua=3,ca=4,ma=5,ga=6,ya=7,ha=8;R('Y',0,0,function(){var e=this.year();return 9999>=e?''+e:'+'+e}),R(0,['YY',2],0,function(){return this.year()%100}),R(0,['YYYY',4],0,'year'),R(0,['YYYYY',5],0,'year'),R(0,['YYYYYY',6,!0],0,'year'),P('year','y'),D('year',1),F('Y',ta),F('YY',Kt,zt),F('YYYY',Qt,Wt),F('YYYYY',Zt,Gt),F('YYYYYY',Zt,Gt),z(['YYYYY','YYYYYY'],la),z('YYYY',function(e,a){a[la]=2===e.length?t.parseTwoDigitYear(e):T(e)}),z('YY',function(e,a){a[la]=t.parseTwoDigitYear(e)}),z('Y',function(e,t){t[la]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return T(e)+(68<T(e)?1900:2e3)};var fa=X('FullYear',!0),_a;_a=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},R('M',['MM',2],'Mo',function(){return this.month()+1}),R('MMM',0,0,function(e){return this.localeData().monthsShort(this,e)}),R('MMMM',0,0,function(e){return this.localeData().months(this,e)}),P('month','M'),D('month',8),F('M',Kt),F('MM',Kt,zt),F('MMM',function(e,t){return t.monthsShortRegex(e)}),F('MMMM',function(e,t){return t.monthsRegex(e)}),z(['M','MM'],function(e,t){t[da]=T(e)-1}),z(['MMM','MMMM'],function(e,t,a,n){var r=a._locale.monthsParse(e,n,a._strict);null==r?y(a).invalidMonth=e:t[da]=r});var ba=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,va=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];R('w',['ww',2],'wo','week'),R('W',['WW',2],'Wo','isoWeek'),P('week','w'),P('isoWeek','W'),D('week',5),D('isoWeek',5),F('w',Kt),F('ww',Kt,zt),F('W',Kt),F('WW',Kt,zt),q(['w','ww','W','WW'],function(e,t,a,n){t[n.substr(0,1)]=T(e)});R('d',0,'do','day'),R('dd',0,0,function(e){return this.localeData().weekdaysMin(this,e)}),R('ddd',0,0,function(e){return this.localeData().weekdaysShort(this,e)}),R('dddd',0,0,function(e){return this.localeData().weekdays(this,e)}),R('e',0,0,'weekday'),R('E',0,0,'isoWeekday'),P('day','d'),P('weekday','e'),P('isoWeekday','E'),D('day',11),D('weekday',11),D('isoWeekday',11),F('d',Kt),F('e',Kt),F('E',Kt),F('dd',function(e,t){return t.weekdaysMinRegex(e)}),F('ddd',function(e,t){return t.weekdaysShortRegex(e)}),F('dddd',function(e,t){return t.weekdaysRegex(e)}),q(['dd','ddd','dddd'],function(e,t,a,n){var r=a._locale.weekdaysParse(e,n,a._strict);null==r?y(a).invalidWeekday=e:t.d=r}),q(['d','e','E'],function(e,t,a,n){t[n]=T(e)});var Ta=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];R('H',['HH',2],0,'hour'),R('h',['hh',2],0,ge),R('k',['kk',2],0,function(){return this.hours()||24}),R('hmm',0,0,function(){return''+ge.apply(this)+A(this.minutes(),2)}),R('hmmss',0,0,function(){return''+ge.apply(this)+A(this.minutes(),2)+A(this.seconds(),2)}),R('Hmm',0,0,function(){return''+this.hours()+A(this.minutes(),2)}),R('Hmmss',0,0,function(){return''+this.hours()+A(this.minutes(),2)+A(this.seconds(),2)}),ye('a',!0),ye('A',!1),P('hour','h'),D('hour',13),F('a',he),F('A',he),F('H',Kt),F('h',Kt),F('k',Kt),F('HH',Kt,zt),F('hh',Kt,zt),F('kk',Kt,zt),F('hmm',Xt),F('hmmss',Jt),F('Hmm',Xt),F('Hmmss',Jt),z(['H','HH'],ua),z(['k','kk'],function(e,t){var a=T(e);t[ua]=24===a?0:a}),z(['a','A'],function(e,t,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),z(['h','hh'],function(e,t,a){t[ua]=T(e),y(a).bigHour=!0}),z('hmm',function(e,t,a){var n=e.length-2;t[ua]=T(e.substr(0,n)),t[ca]=T(e.substr(n)),y(a).bigHour=!0}),z('hmmss',function(e,t,a){var n=e.length-4,r=e.length-2;t[ua]=T(e.substr(0,n)),t[ca]=T(e.substr(n,2)),t[ma]=T(e.substr(r)),y(a).bigHour=!0}),z('Hmm',function(e,t){var a=e.length-2;t[ua]=T(e.substr(0,a)),t[ca]=T(e.substr(a))}),z('Hmmss',function(e,t){var a=e.length-4,n=e.length-2;t[ua]=T(e.substr(0,a)),t[ca]=T(e.substr(a,2)),t[ma]=T(e.substr(n))});var ka=/[ap]\.?m?\.?/i,Sa=X('Hours',!0),Ca={calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},longDateFormat:{LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'},invalidDate:'Invalid date',ordinal:'%d',dayOfMonthOrdinalParse:Nt,relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:va,week:{dow:0,doy:6},weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysMin:['Su','Mo','Tu','We','Th','Fr','Sa'],weekdaysShort:Ta,meridiemParse:ka},Ea={},La={},wa=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xa=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Pa=/Z|[+-]\d\d(?::?\d\d)?/,Ia=[['YYYYYY-MM-DD',/[+-]\d{6}-\d\d-\d\d/],['YYYY-MM-DD',/\d{4}-\d\d-\d\d/],['GGGG-[W]WW-E',/\d{4}-W\d\d-\d/],['GGGG-[W]WW',/\d{4}-W\d\d/,!1],['YYYY-DDD',/\d{4}-\d{3}/],['YYYY-MM',/\d{4}-\d\d/,!1],['YYYYYYMMDD',/[+-]\d{10}/],['YYYYMMDD',/\d{8}/],['GGGG[W]WWE',/\d{4}W\d{3}/],['GGGG[W]WW',/\d{4}W\d{2}/,!1],['YYYYDDD',/\d{7}/]],Ma=[['HH:mm:ss.SSSS',/\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss,SSSS',/\d\d:\d\d:\d\d,\d+/],['HH:mm:ss',/\d\d:\d\d:\d\d/],['HH:mm',/\d\d:\d\d/],['HHmmss.SSSS',/\d\d\d\d\d\d\.\d+/],['HHmmss,SSSS',/\d\d\d\d\d\d,\d+/],['HHmmss',/\d\d\d\d\d\d/],['HHmm',/\d\d\d\d/],['HH',/\d\d/]],Da=/^\/?Date\((\-?\d+)/i,Oa=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Aa={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Ra;t.createFromInputFallback=C('value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.',function(e){e._d=new Date(e._i+(e._useUTC?' UTC':''))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Na=C('moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var e=qe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:h()}),Ua=C('moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',function(){var e=qe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:h()}),Ba=['year','quarter','month','week','day','hour','minute','second','millisecond'];$e('Z',':'),$e('ZZ',''),F('Z',na),F('ZZ',na),z(['Z','ZZ'],function(e,t,a){a._useUTC=!0,a._tzm=Qe(na,e)});var Ya=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Fa=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ja=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;at.fn=Ke.prototype,at.invalid=function(){return at(NaN)};var Ha=st(1,'add'),Va=st(-1,'subtract');t.defaultFormat='YYYY-MM-DDTHH:mm:ssZ',t.defaultFormatUtc='YYYY-MM-DDTHH:mm:ss[Z]';var za=C('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(e){return void 0===e?this.localeData():this.locale(e)});R(0,['gg',2],0,function(){return this.weekYear()%100}),R(0,['GG',2],0,function(){return this.isoWeekYear()%100}),ut('gggg','weekYear'),ut('ggggg','weekYear'),ut('GGGG','isoWeekYear'),ut('GGGGG','isoWeekYear'),P('weekYear','gg'),P('isoWeekYear','GG'),D('weekYear',1),D('isoWeekYear',1),F('G',ta),F('g',ta),F('GG',Kt,zt),F('gg',Kt,zt),F('GGGG',Qt,Wt),F('gggg',Qt,Wt),F('GGGGG',Zt,Gt),F('ggggg',Zt,Gt),q(['gggg','ggggg','GGGG','GGGGG'],function(e,t,a,n){t[n.substr(0,2)]=T(e)}),q(['gg','GG'],function(e,a,n,r){a[r]=t.parseTwoDigitYear(e)}),R('Q',0,'Qo','quarter'),P('quarter','Q'),D('quarter',7),F('Q',Vt),z('Q',function(e,t){t[da]=3*(T(e)-1)}),R('D',['DD',2],'Do','date'),P('date','D'),D('date',9),F('D',Kt),F('DD',Kt,zt),F('Do',function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),z(['D','DD'],pa),z('Do',function(e,t){t[pa]=T(e.match(Kt)[0])});var qa=X('Date',!0);R('DDD',['DDDD',3],'DDDo','dayOfYear'),P('dayOfYear','DDD'),D('dayOfYear',4),F('DDD',$t),F('DDDD',qt),z(['DDD','DDDD'],function(e,t,a){a._dayOfYear=T(e)}),R('m',['mm',2],0,'minute'),P('minute','m'),D('minute',14),F('m',Kt),F('mm',Kt,zt),z(['m','mm'],ca);var Wa=X('Minutes',!1);R('s',['ss',2],0,'second'),P('second','s'),D('second',15),F('s',Kt),F('ss',Kt,zt),z(['s','ss'],ma);var Ga=X('Seconds',!1);R('S',0,0,function(){return~~(this.millisecond()/100)}),R(0,['SS',2],0,function(){return~~(this.millisecond()/10)}),R(0,['SSS',3],0,'millisecond'),R(0,['SSSS',4],0,function(){return 10*this.millisecond()}),R(0,['SSSSS',5],0,function(){return 100*this.millisecond()}),R(0,['SSSSSS',6],0,function(){return 1e3*this.millisecond()}),R(0,['SSSSSSS',7],0,function(){return 1e4*this.millisecond()}),R(0,['SSSSSSSS',8],0,function(){return 1e5*this.millisecond()}),R(0,['SSSSSSSSS',9],0,function(){return 1e6*this.millisecond()}),P('millisecond','ms'),D('millisecond',16),F('S',$t,Vt),F('SS',$t,zt),F('SSS',$t,qt);var Ka;for(Ka='SSSS';9>=Ka.length;Ka+='S')F(Ka,ea);for(Ka='S';9>=Ka.length;Ka+='S')z(Ka,gt);var Xa=X('Milliseconds',!1);R('z',0,0,'zoneAbbr'),R('zz',0,0,'zoneName');var Ja=_.prototype;Ja.add=Ha,Ja.calendar=function(e,a){var n=e||qe(),r=Ze(n,this).startOf('day'),i=t.calendarFormat(this,r)||'sameElse',s=a&&(L(a[i])?a[i].call(this,n):a[i]);return this.format(s||this.localeData().calendar(i,this,qe(n)))},Ja.clone=function(){return new _(this)},Ja.diff=function(e,t,a){var n,r,i;return this.isValid()?(n=Ze(e,this),!n.isValid())?NaN:(r=6e4*(n.utcOffset()-this.utcOffset()),t=I(t),(i='year'===t?lt(this,n)/12:'month'===t?lt(this,n):'quarter'===t?lt(this,n)/3:'second'===t?(this-n)/1e3:'minute'===t?(this-n)/6e4:'hour'===t?(this-n)/36e5:'day'===t?(this-n-r)/864e5:'week'===t?(this-n-r)/6048e5:this-n,a?i:v(i))):NaN},Ja.endOf=function(e){return(e=I(e),void 0===e||'millisecond'===e)?this:('date'===e&&(e='day'),this.startOf(e).add(1,'isoWeek'===e?'week':e).subtract(1,'ms'))},Ja.format=function(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var a=B(this,e);return this.localeData().postformat(a)},Ja.from=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||qe(e).isValid())?at({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ja.fromNow=function(e){return this.from(qe(),e)},Ja.to=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||qe(e).isValid())?at({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ja.toNow=function(e){return this.to(qe(),e)},Ja.get=function(e){return e=I(e),L(this[e])?this[e]():this},Ja.invalidAt=function(){return y(this).overflow},Ja.isAfter=function(e,t){var a=b(e)?e:qe(e);return!!(this.isValid()&&a.isValid())&&(t=I(s(t)?'millisecond':t),'millisecond'===t?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(t).valueOf())},Ja.isBefore=function(e,t){var a=b(e)?e:qe(e);return!!(this.isValid()&&a.isValid())&&(t=I(s(t)?'millisecond':t),'millisecond'===t?this.valueOf()<a.valueOf():this.clone().endOf(t).valueOf()<a.valueOf())},Ja.isBetween=function(e,t,a,n){return n=n||'()',('('===n[0]?this.isAfter(e,a):!this.isBefore(e,a))&&(')'===n[1]?this.isBefore(t,a):!this.isAfter(t,a))},Ja.isSame=function(e,t){var a=b(e)?e:qe(e),n;return!!(this.isValid()&&a.isValid())&&(t=I(t||'millisecond'),'millisecond'===t?this.valueOf()===a.valueOf():(n=a.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Ja.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Ja.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Ja.isValid=function(){return m(this)},Ja.lang=za,Ja.locale=dt,Ja.localeData=pt,Ja.max=Ua,Ja.min=Na,Ja.parsingFlags=function(){return u({},y(this))},Ja.set=function(e,t){if('object'==typeof e){e=M(e);for(var a=O(e),n=0;n<a.length;n++)this[a[n].unit](e[a[n].unit])}else if(e=I(e),L(this[e]))return this[e](t);return this},Ja.startOf=function(e){switch(e=I(e),e){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':case'date':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}return'week'===e&&this.weekday(0),'isoWeek'===e&&this.isoWeekday(1),'quarter'===e&&this.month(3*Math.floor(this.month()/3)),this},Ja.subtract=Va,Ja.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Ja.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Ja.toDate=function(){return new Date(this.valueOf())},Ja.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,a=t?this.clone().utc():this;return 0>a.year()||9999<a.year()?B(a,t?'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ'):L(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+1e3*(60*this.utcOffset())).toISOString().replace('Z',B(a,'Z')):B(a,t?'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]':'YYYY-MM-DD[T]HH:mm:ss.SSSZ')},Ja.inspect=function(){if(!this.isValid())return'moment.invalid(/* '+this._i+' */)';var e='moment',t='';this.isLocal()||(e=0===this.utcOffset()?'moment.utc':'moment.parseZone',t='Z');var a='['+e+'("]',n=0<=this.year()&&9999>=this.year()?'YYYY':'YYYYYY',r=t+'[")]';return this.format(a+n+'-MM-DD[T]HH:mm:ss.SSS'+r)},Ja.toJSON=function(){return this.isValid()?this.toISOString():null},Ja.toString=function(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ')},Ja.unix=function(){return Math.floor(this.valueOf()/1e3)},Ja.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Ja.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Ja.year=fa,Ja.isLeapYear=function(){return K(this.year())},Ja.weekYear=function(e){return ct.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Ja.isoWeekYear=function(e){return ct.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Ja.quarter=Ja.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Ja.month=ae,Ja.daysInMonth=function(){return Z(this.year(),this.month())},Ja.week=Ja.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),'d')},Ja.isoWeek=Ja.isoWeeks=function(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),'d')},Ja.weeksInYear=function(){var e=this.localeData()._week;return de(this.year(),e.dow,e.doy)},Ja.isoWeeksInYear=function(){return de(this.year(),1,4)},Ja.date=qa,Ja.day=Ja.days=function(e){if(!this.isValid())return null==e?NaN:this;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:(e=pe(e,this.localeData()),this.add(e-t,'d'))},Ja.weekday=function(e){if(!this.isValid())return null==e?NaN:this;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,'d')},Ja.isoWeekday=function(e){if(!this.isValid())return null==e?NaN:this;if(null!=e){var t=ue(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Ja.dayOfYear=function(e){var t=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return null==e?t:this.add(e-t,'d')},Ja.hour=Ja.hours=Sa,Ja.minute=Ja.minutes=Wa,Ja.second=Ja.seconds=Ga,Ja.millisecond=Ja.milliseconds=Xa,Ja.utcOffset=function(e,a,n){var r=this._offset||0,i;if(!this.isValid())return null==e?NaN:this;if(null!=e){if('string'!=typeof e)16>Math.abs(e)&&!n&&(e*=60);else if(e=Qe(na,e),null===e)return this;return!this._isUTC&&a&&(i=et(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,'m'),r!==e&&(!a||this._changeInProgress?ot(this,at(e-r,'m'),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:et(this)},Ja.utc=function(e){return this.utcOffset(0,e)},Ja.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(et(this),'m')),this},Ja.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if('string'==typeof this._i){var e=Qe(aa,this._i);null==e?this.utcOffset(0,!0):this.utcOffset(e)}return this},Ja.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?qe(e).utcOffset():0,0==(this.utcOffset()-e)%60)},Ja.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Ja.isLocal=function(){return!!this.isValid()&&!this._isUTC},Ja.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Ja.isUtc=tt,Ja.isUTC=tt,Ja.zoneAbbr=function(){return this._isUTC?'UTC':''},Ja.zoneName=function(){return this._isUTC?'Coordinated Universal Time':''},Ja.dates=C('dates accessor is deprecated. Use date instead.',qa),Ja.months=C('months accessor is deprecated. Use month instead',ae),Ja.years=C('years accessor is deprecated. Use year instead',fa),Ja.zone=C('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',function(e,t){return null==e?-this.utcOffset():('string'!=typeof e&&(e=-e),this.utcOffset(e,t),this)}),Ja.isDSTShifted=C('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var e={};if(f(e,this),e=He(e),e._a){var t=e._isUTC?g(e._a):qe(e._a);this._isDSTShifted=this.isValid()&&0<k(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var $a=x.prototype;$a.calendar=function(e,t,a){var n=this._calendar[e]||this._calendar.sameElse;return L(n)?n.call(t,a):n},$a.longDateFormat=function(e){var t=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return t||!a?t:(this._longDateFormat[e]=a.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},$a.invalidDate=function(){return this._invalidDate},$a.ordinal=function(e){return this._ordinal.replace('%d',e)},$a.preparse=yt,$a.postformat=yt,$a.relativeTime=function(e,t,a,n){var r=this._relativeTime[a];return L(r)?r(e,t,a,n):r.replace(/%d/i,e)},$a.pastFuture=function(e,t){var a=this._relativeTime[0<e?'future':'past'];return L(a)?a(t):a.replace(/%s/i,t)},$a.set=function(e){var t,a;for(a in e)t=e[a],L(t)?this[a]=t:this['_'+a]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+'|'+/\d{1,2}/.source)},$a.months=function(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ba).test(t)?'format':'standalone'][e.month()]:n(this._months)?this._months:this._months.standalone},$a.monthsShort=function(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ba.test(t)?'format':'standalone'][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},$a.monthsParse=function(e,t,a){var n,r,i;if(this._monthsParseExact)return ee.call(this,e,t,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=g([2e3,n]),a&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp('^'+this.months(r,'').replace('.','')+'$','i'),this._shortMonthsParse[n]=new RegExp('^'+this.monthsShort(r,'').replace('.','')+'$','i')),a||this._monthsParse[n]||(i='^'+this.months(r,'')+'|^'+this.monthsShort(r,''),this._monthsParse[n]=new RegExp(i.replace('.',''),'i')),a&&'MMMM'===t&&this._longMonthsParse[n].test(e))return n;if(a&&'MMM'===t&&this._shortMonthsParse[n].test(e))return n;if(!a&&this._monthsParse[n].test(e))return n}},$a.monthsRegex=function(e){return this._monthsParseExact?(p(this,'_monthsRegex')||ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(p(this,'_monthsRegex')||(this._monthsRegex=ia),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},$a.monthsShortRegex=function(e){return this._monthsParseExact?(p(this,'_monthsRegex')||ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,'_monthsShortRegex')||(this._monthsShortRegex=ia),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},$a.week=function(e){return le(e,this._week.dow,this._week.doy).week},$a.firstDayOfYear=function(){return this._week.doy},$a.firstDayOfWeek=function(){return this._week.dow},$a.weekdays=function(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?'format':'standalone'][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone},$a.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},$a.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},$a.weekdaysParse=function(e,t,a){var n,r,i;if(this._weekdaysParseExact)return ce.call(this,e,t,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(r=g([2e3,1]).day(n),a&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp('^'+this.weekdays(r,'').replace('.','\\.?')+'$','i'),this._shortWeekdaysParse[n]=new RegExp('^'+this.weekdaysShort(r,'').replace('.','\\.?')+'$','i'),this._minWeekdaysParse[n]=new RegExp('^'+this.weekdaysMin(r,'').replace('.','\\.?')+'$','i')),this._weekdaysParse[n]||(i='^'+this.weekdays(r,'')+'|^'+this.weekdaysShort(r,'')+'|^'+this.weekdaysMin(r,''),this._weekdaysParse[n]=new RegExp(i.replace('.',''),'i')),a&&'dddd'===t&&this._fullWeekdaysParse[n].test(e))return n;if(a&&'ddd'===t&&this._shortWeekdaysParse[n].test(e))return n;if(a&&'dd'===t&&this._minWeekdaysParse[n].test(e))return n;if(!a&&this._weekdaysParse[n].test(e))return n}},$a.weekdaysRegex=function(e){return this._weekdaysParseExact?(p(this,'_weekdaysRegex')||me.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,'_weekdaysRegex')||(this._weekdaysRegex=ia),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},$a.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(p(this,'_weekdaysRegex')||me.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,'_weekdaysShortRegex')||(this._weekdaysShortRegex=ia),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},$a.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(p(this,'_weekdaysRegex')||me.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,'_weekdaysMinRegex')||(this._weekdaysMinRegex=ia),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},$a.isPM=function(e){return'p'===(e+'').toLowerCase().charAt(0)},$a.meridiem=function(e,t,a){return 11<e?a?'pm':'PM':a?'am':'AM'},ve('en',{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,a=1===T(e%100/10)?'th':1==t?'st':2==t?'nd':3==t?'rd':'th';return e+a}}),t.lang=C('moment.lang is deprecated. Use moment.locale instead.',ve),t.langData=C('moment.langData is deprecated. Use moment.localeData instead.',ke);var Qa=Math.abs,Za=St('ms'),en=St('s'),tn=St('m'),an=St('h'),nn=St('d'),rn=St('w'),sn=St('M'),on=St('y'),ln=Ct('milliseconds'),dn=Ct('seconds'),pn=Ct('minutes'),un=Ct('hours'),cn=Ct('days'),mn=Ct('months'),gn=Ct('years'),yn=Math.round,hn={ss:44,s:45,m:45,h:22,d:26,M:11},fn=Math.abs,_n=Ke.prototype;return _n.isValid=function(){return this._isValid},_n.abs=function(){var e=this._data;return this._milliseconds=Qa(this._milliseconds),this._days=Qa(this._days),this._months=Qa(this._months),e.milliseconds=Qa(e.milliseconds),e.seconds=Qa(e.seconds),e.minutes=Qa(e.minutes),e.hours=Qa(e.hours),e.months=Qa(e.months),e.years=Qa(e.years),this},_n.add=function(e,t){return bt(this,e,t,1)},_n.subtract=function(e,t){return bt(this,e,t,-1)},_n.as=function(e){if(!this.isValid())return NaN;var t=this._milliseconds,a,n;if(e=I(e),'month'===e||'year'===e)return a=this._days+t/864e5,n=this._months+Tt(a),'month'===e?n:n/12;switch(a=this._days+Math.round(kt(this._months)),e){case'week':return a/7+t/6048e5;case'day':return a+t/864e5;case'hour':return 24*a+t/36e5;case'minute':return 1440*a+t/6e4;case'second':return 86400*a+t/1e3;case'millisecond':return Math.floor(864e5*a)+t;default:throw new Error('Unknown unit '+e);}},_n.asMilliseconds=Za,_n.asSeconds=en,_n.asMinutes=tn,_n.asHours=an,_n.asDays=nn,_n.asWeeks=rn,_n.asMonths=sn,_n.asYears=on,_n.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*T(this._months/12):NaN},_n._bubble=function(){var e=this._milliseconds,t=this._days,a=this._months,n=this._data,r,i,s,o,l;return 0<=e&&0<=t&&0<=a||0>=e&&0>=t&&0>=a||(e+=864e5*vt(kt(a)+t),t=0,a=0),n.milliseconds=e%1e3,r=v(e/1e3),n.seconds=r%60,i=v(r/60),n.minutes=i%60,s=v(i/60),n.hours=s%24,t+=v(s/24),l=v(Tt(t)),a+=l,t-=vt(kt(l)),o=v(a/12),a%=12,n.days=t,n.months=a,n.years=o,this},_n.clone=function(){return at(this)},_n.get=function(e){return e=I(e),this.isValid()?this[e+'s']():NaN},_n.milliseconds=ln,_n.seconds=dn,_n.minutes=pn,_n.hours=un,_n.days=cn,_n.weeks=function(){return v(this.days()/7)},_n.months=mn,_n.years=gn,_n.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),a=Lt(this,!e,t);return e&&(a=t.pastFuture(+this,a)),t.postformat(a)},_n.toISOString=Pt,_n.toString=Pt,_n.toJSON=Pt,_n.locale=dt,_n.localeData=pt,_n.toIsoString=C('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',Pt),_n.lang=za,R('X',0,0,'unix'),R('x',0,0,'valueOf'),F('x',ta),F('X',ra),z('X',function(e,t,a){a._d=new Date(1e3*parseFloat(e,10))}),z('x',function(e,t,a){a._d=new Date(T(e))}),t.version='2.22.2',function(e){It=e}(qe),t.fn=Ja,t.min=function(){var e=[].slice.call(arguments,0);return We('isBefore',e)},t.max=function(){var e=[].slice.call(arguments,0);return We('isAfter',e)},t.now=function(){return Date.now?Date.now():+new Date},t.utc=g,t.unix=function(e){return qe(1e3*e)},t.months=function(e,t){return ft(e,t,'months')},t.isDate=l,t.locale=ve,t.invalid=h,t.duration=at,t.isMoment=b,t.weekdays=function(e,t,a){return _t(e,t,a,'weekdays')},t.parseZone=function(){return qe.apply(null,arguments).parseZone()},t.localeData=ke,t.isDuration=Xe,t.monthsShort=function(e,t){return ft(e,t,'monthsShort')},t.weekdaysMin=function(e,t,a){return _t(e,t,a,'weekdaysMin')},t.defineLocale=Te,t.updateLocale=function(e,t){if(null!=t){var a=Ca,n,r;r=be(e),null!=r&&(a=r._config),t=w(a,t),n=new x(t),n.parentLocale=Ea[e],Ea[e]=n,ve(e)}else null!=Ea[e]&&(null==Ea[e].parentLocale?null!=Ea[e]&&delete Ea[e]:Ea[e]=Ea[e].parentLocale);return Ea[e]},t.locales=Se,t.weekdaysShort=function(e,t,a){return _t(e,t,a,'weekdaysShort')},t.normalizeUnits=I,t.relativeTimeRounding=wt,t.relativeTimeThreshold=function(e,t){return void 0!==hn[e]&&(void 0===t?hn[e]:(hn[e]=t,'s'===e&&(hn.ss=t-1),!0))},t.calendarFormat=function(e,t){var a=e.diff(t,'days',!0);return-6>a?'sameElse':-1>a?'lastWeek':0>a?'lastDay':1>a?'sameDay':2>a?'nextDay':7>a?'nextWeek':'sameElse'},t.prototype=Ja,t.HTML5_FMT={DATETIME_LOCAL:'YYYY-MM-DDTHH:mm',DATETIME_LOCAL_SECONDS:'YYYY-MM-DDTHH:mm:ss',DATETIME_LOCAL_MS:'YYYY-MM-DDTHH:mm:ss.SSS',DATE:'YYYY-MM-DD',TIME:'HH:mm',TIME_SECONDS:'HH:mm:ss',TIME_MS:'HH:mm:ss.SSS',WEEK:'YYYY-[W]WW',MONTH:'YYYY-MM'},t})}).call(this,a(120)(e))},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.injectJSONLd=t.getDefaultConfiguration=t.getOrientation=t.debounce=t.dispatchEvent=t.getToken=t.removeClass=t.addClass=t.getElementBounding=t.style=t.setKey=t.getKey=t.htmlToElement=t.languages=t.getAuthorizedStore=t.getTravelCastKeyName=t.isSessionStorageAuthorized=t.isCookieAuthorized=t.isLocalStorageAuthorized=t.isAndroidDevice=t.isiOSDevice=t.isMobile=t.getSessionStorageValue=t.setSessionStorageValue=t.setLocalStorageValue=t.getLocalStorageValue=t.eraseCookie=t.setCookie=t.getCookie=t.uuid=t.makeJSONp=t.makeRequest=t.mapIcons=void 0;var r=a(23),i=a(64),s=a(65),o=a(66),l=a(67),d=n(l),p=a(30),u=n(p),c=a(31),m=a(68),g=a(24),y=n(g),h=a(32),f=a(16),_=a(73),b=n(_);t.mapIcons=u.default,t.makeRequest=y.default,t.makeJSONp=g.makeJSONp,t.uuid=b.default,t.getCookie=r.getCookie,t.setCookie=r.setCookie,t.eraseCookie=r.eraseCookie,t.getLocalStorageValue=f.getLocalStorageValue,t.setLocalStorageValue=f.setLocalStorageValue,t.setSessionStorageValue=f.setSessionStorageValue,t.getSessionStorageValue=f.getSessionStorageValue,t.isMobile=m.isMobile,t.isiOSDevice=m.isiOSDevice,t.isAndroidDevice=m.isAndroidDevice,t.isLocalStorageAuthorized=f.isLocalStorageAuthorized,t.isCookieAuthorized=r.isCookieAuthorized,t.isSessionStorageAuthorized=f.isSessionStorageAuthorized,t.getTravelCastKeyName=h.getTravelCastKeyName,t.getAuthorizedStore=h.getAuthorizedStore,t.languages=d.default,t.htmlToElement=i.htmlToElement,t.getKey=f.getKey,t.setKey=f.setKey,t.style=i.style,t.getElementBounding=i.getElementBounding,t.addClass=i.addClass,t.removeClass=i.removeClass,t.getToken=h.getToken,t.dispatchEvent=s.dispatchEvent,t.debounce=s.debounce,t.getOrientation=m.getOrientation,t.getDefaultConfiguration=c.getDefaultPOIConfiguration,t.injectJSONLd=o.injectJSONLd},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(t=window)}e.exports=t},function(e,t){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=t.ConfigurationService=function(){function e(){a(this,e),this.cfg={MAIN_SERVER:{MAIN_SERVER:'https://studio.amadeus-video-solutions.com',VIMEO_API_KEY:'bc4d16805f6ddc068ccf42cb77b45efe',DEFAULT_VIDEO_ID:'5adda788b9ac5a0001089ada',API_KEY:'bcfe74fb-3609-4caa-bac2-fcd11a5ceb6d',GOOGLE_MAP_API_KEY:'AIzaSyD8_qWasEu_6g_KsrZ-4_atfnpFU3qab84',GOOGLE_ANALYTICS_TRACKING_CODE:'UA-93593227-1',IP_STACK_API_KEY:'5e3b7bc9af040f6f10685212818c8eb7'}.MAIN_SERVER,VIMEO_API_KEY:{MAIN_SERVER:'https://studio.amadeus-video-solutions.com',VIMEO_API_KEY:'bc4d16805f6ddc068ccf42cb77b45efe',DEFAULT_VIDEO_ID:'5adda788b9ac5a0001089ada',API_KEY:'bcfe74fb-3609-4caa-bac2-fcd11a5ceb6d',GOOGLE_MAP_API_KEY:'AIzaSyD8_qWasEu_6g_KsrZ-4_atfnpFU3qab84',GOOGLE_ANALYTICS_TRACKING_CODE:'UA-93593227-1',IP_STACK_API_KEY:'5e3b7bc9af040f6f10685212818c8eb7'}.VIMEO_API_KEY,DEFAULT_VIDEO_ID:{MAIN_SERVER:'https://studio.amadeus-video-solutions.com',VIMEO_API_KEY:'bc4d16805f6ddc068ccf42cb77b45efe',DEFAULT_VIDEO_ID:'5adda788b9ac5a0001089ada',API_KEY:'bcfe74fb-3609-4caa-bac2-fcd11a5ceb6d',GOOGLE_MAP_API_KEY:'AIzaSyD8_qWasEu_6g_KsrZ-4_atfnpFU3qab84',GOOGLE_ANALYTICS_TRACKING_CODE:'UA-93593227-1',IP_STACK_API_KEY:'5e3b7bc9af040f6f10685212818c8eb7'}.DEFAULT_VIDEO_ID,API_KEY:{MAIN_SERVER:'https://studio.amadeus-video-solutions.com',VIMEO_API_KEY:'bc4d16805f6ddc068ccf42cb77b45efe',DEFAULT_VIDEO_ID:'5adda788b9ac5a0001089ada',API_KEY:'bcfe74fb-3609-4caa-bac2-fcd11a5ceb6d',GOOGLE_MAP_API_KEY:'AIzaSyD8_qWasEu_6g_KsrZ-4_atfnpFU3qab84',GOOGLE_ANALYTICS_TRACKING_CODE:'UA-93593227-1',IP_STACK_API_KEY:'5e3b7bc9af040f6f10685212818c8eb7'}.API_KEY,GOOGLE_MAP_API_KEY:{MAIN_SERVER:'https://studio.amadeus-video-solutions.com',VIMEO_API_KEY:'bc4d16805f6ddc068ccf42cb77b45efe',DEFAULT_VIDEO_ID:'5adda788b9ac5a0001089ada',API_KEY:'bcfe74fb-3609-4caa-bac2-fcd11a5ceb6d',GOOGLE_MAP_API_KEY:'AIzaSyD8_qWasEu_6g_KsrZ-4_atfnpFU3qab84',GOOGLE_ANALYTICS_TRACKING_CODE:'UA-93593227-1',IP_STACK_API_KEY:'5e3b7bc9af040f6f10685212818c8eb7'}.GOOGLE_MAP_API_KEY,GOOGLE_ANALYTICS_TRACKING_CODE:{MAIN_SERVER:'https://studio.amadeus-video-solutions.com',VIMEO_API_KEY:'bc4d16805f6ddc068ccf42cb77b45efe',DEFAULT_VIDEO_ID:'5adda788b9ac5a0001089ada',API_KEY:'bcfe74fb-3609-4caa-bac2-fcd11a5ceb6d',GOOGLE_MAP_API_KEY:'AIzaSyD8_qWasEu_6g_KsrZ-4_atfnpFU3qab84',GOOGLE_ANALYTICS_TRACKING_CODE:'UA-93593227-1',IP_STACK_API_KEY:'5e3b7bc9af040f6f10685212818c8eb7'}.GOOGLE_ANALYTICS_TRACKING_CODE,IP_STACK_API_KEY:{MAIN_SERVER:'https://studio.amadeus-video-solutions.com',VIMEO_API_KEY:'bc4d16805f6ddc068ccf42cb77b45efe',DEFAULT_VIDEO_ID:'5adda788b9ac5a0001089ada',API_KEY:'bcfe74fb-3609-4caa-bac2-fcd11a5ceb6d',GOOGLE_MAP_API_KEY:'AIzaSyD8_qWasEu_6g_KsrZ-4_atfnpFU3qab84',GOOGLE_ANALYTICS_TRACKING_CODE:'UA-93593227-1',IP_STACK_API_KEY:'5e3b7bc9af040f6f10685212818c8eb7'}.IP_STACK_API_KEY}}return e.prototype.setValue=function(e,t){'string'==typeof t?this.cfg[e]=t:console.warn('Configuration service only allows setting of string values.')},e.prototype.getValue=function(e){return this.cfg[e]||null},e}();t.default=new n},function(){'use strict';function e(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var t=function(){function t(){e(this,t)}return t.prototype.getVersion=function(){var e=this,t=this.getVersioningKeys(),a=function(e,t){return e.split('.').reduce(function(e,t){return e&&e.hasOwnProperty(t)?e[t]:null},t)};return t.map(function(t){return a(t,e)}).reduce(function(e,t){return''+t+e},'')},t.prototype.getVersioningKeys=function(){return['opts.marker.place_id']},t}();riot.mixin('versioned',new t)},function(e,t,a){'use strict';/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */function n(){return n=Object.assign||function(e){for(var t=1,a;t<arguments.length;t++)for(var n in a=arguments[t],a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e},n.apply(this,arguments)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){if(void 0===e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return e}function s(e){for(var t=Ve.a.atob(e||''),a=new Uint8Array(t.length),n=0;n<t.length;n++)a[n]=t.charCodeAt(n);return a}function o(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}function l(e){var t='info',a=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];n('log',t,a)},n;return n=Dt(e,a),a.createLogger=function(t){return l(e+': '+t)},a.levels={all:'debug|log|warn|error',off:'',debug:'debug|log|warn|error',info:'log|warn|error',warn:'warn|error',error:'error',DEFAULT:t},a.level=function(e){if('string'==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');t=e}return t},a.history=function(){return Mt?[].concat(Mt):[]},a.history.filter=function(e){return(Mt||[]).filter(function(t){return new RegExp('.*'+e+'.*').test(t[0])})},a.history.clear=function(){Mt&&(Mt.length=0)},a.history.disable=function(){null!==Mt&&(Mt.length=0,Mt=null)},a.history.enable=function(){null==Mt&&(Mt=[])},a.error=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return n('error',t,a)},a.warn=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return n('warn',t,a)},a.debug=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return n('debug',t,a)},a}function d(e,t){Nt(e).forEach(function(a){return t(e[a],a)})}function p(e,t,a){return void 0===a&&(a=0),Nt(e).reduce(function(a,n){return t(a,e[n],n)},a)}function u(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[e].concat(a)):(a.forEach(function(t){t&&d(t,function(t,a){e[a]=t})}),e)}function c(e){return!!e&&'object'==typeof e}function m(e){return c(e)&&'[object Object]'===Rt.call(e)&&e.constructor===Object}function g(e,t){if(!e||!t)return'';if('function'==typeof Ve.a.getComputedStyle){var a=Ve.a.getComputedStyle(e);return a?a.getPropertyValue(t)||a[t]:''}return''}function y(e){return'string'==typeof e&&/\S/.test(e)}function h(e){if(/\s/.test(e))throw new Error('class has illegal whitespace characters')}function f(e){return new RegExp('(^|\\s)'+e+'($|\\s)')}function _(){return qe.a===Ve.a.document}function b(e){return c(e)&&1===e.nodeType}function v(){try{return Ve.a.parent!==Ve.a.self}catch(e){return!0}}function T(e){return function(t,a){if(!y(t))return qe.a[e](null);y(a)&&(a=qe.a.querySelector(a));var n=b(a)?a:qe.a;return n[e]&&n[e](t)}}function k(e,t,a,n){void 0===e&&(e='div'),void 0===t&&(t={}),void 0===a&&(a={});var r=qe.a.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var a=t[e];-1!==e.indexOf('aria-')||'role'===e||'type'===e?(Ot.warn('Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set '+e+' to '+a+'.'),r.setAttribute(e,a)):'textContent'===e?S(r,a):r[e]=a}),Object.getOwnPropertyNames(a).forEach(function(e){r.setAttribute(e,a[e])}),n&&H(r,n),r}function S(e,t){return'undefined'==typeof e.textContent?e.innerText=t:e.textContent=t,e}function C(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function E(e,t){return h(t),e.classList?e.classList.contains(t):f(t).test(e.className)}function L(e,t){return e.classList?e.classList.add(t):!E(e,t)&&(e.className=(e.className+' '+t).trim()),e}function w(e,t){return e.classList?e.classList.remove(t):(h(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(' ')),e}function x(e,t,a){var n=E(e,t);if('function'==typeof a&&(a=a(e,t)),'boolean'!=typeof a&&(a=!n),a!==n)return a?L(e,t):w(e,t),e}function P(e,t){Object.getOwnPropertyNames(t).forEach(function(a){var n=t[a];null===n||'undefined'==typeof n||!1===n?e.removeAttribute(a):e.setAttribute(a,!0===n?'':n)})}function I(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var a=e.attributes,n=a.length-1;0<=n;n--){var r=a[n].name,i=a[n].value;('boolean'==typeof e[r]||-1!==',autoplay,controls,playsinline,loop,muted,default,defaultMuted,'.indexOf(','+r+','))&&(i=null!==i),t[r]=i}return t}function M(e,t){return e.getAttribute(t)}function D(e,t,a){e.setAttribute(t,a)}function O(e,t){e.removeAttribute(t)}function A(){qe.a.body.focus(),qe.a.onselectstart=function(){return!1}}function R(){qe.a.onselectstart=function(){return!0}}function N(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),a={};return['bottom','height','left','right','top','width'].forEach(function(e){void 0!==t[e]&&(a[e]=t[e])}),a.height||(a.height=parseFloat(g(e,'height'))),a.width||(a.width=parseFloat(g(e,'width'))),a}}function U(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var a=qe.a.documentElement,n=qe.a.body,r=a.clientLeft||n.clientLeft||0,i=Ve.a.pageXOffset||n.scrollLeft,s=t.left+i-r,o=a.clientTop||n.clientTop||0,l=Ve.a.pageYOffset||n.scrollTop,d=t.top+l-o;return{left:Math.round(s),top:Math.round(d)}}function B(e,t){var a={},n=U(e),r=e.offsetWidth,i=e.offsetHeight,s=n.top,o=n.left,l=t.pageY,d=t.pageX;return t.changedTouches&&(d=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),a.y=Math.max(0,Math.min(1,(s-l+i)/i)),a.x=Math.max(0,Math.min(1,(d-o)/r)),a}function Y(e){return c(e)&&3===e.nodeType}function F(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function j(e){return'function'==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return'function'==typeof e&&(e=e()),b(e)||Y(e)?e:'string'==typeof e&&/\S/.test(e)?qe.a.createTextNode(e):void 0}).filter(function(e){return e})}function H(e,t){return j(t).forEach(function(t){return e.appendChild(t)}),e}function V(e,t){return H(F(e),t)}function z(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||'mouseup'===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}function q(e,t){t&&(Ht=t),Ve.a.setTimeout(jt,e)}function W(){Ft=!0,Ve.a.removeEventListener('load',W)}function G(){return qt++}function K(e,t){if(Gt.has(e)){var a=Gt.get(e);0===a.handlers[t].length&&(delete a.handlers[t],e.removeEventListener?e.removeEventListener(t,a.dispatcher,!1):e.detachEvent&&e.detachEvent('on'+t,a.dispatcher)),0>=Object.getOwnPropertyNames(a.handlers).length&&(delete a.handlers,delete a.dispatcher,delete a.disabled),0===Object.getOwnPropertyNames(a).length&&Gt['delete'](e)}}function X(e,t,a,n){a.forEach(function(a){e(t,a,n)})}function J(e){function t(){return!0}function a(){return!1}if(!e||!e.isPropagationStopped){var n=e||Ve.a.event;for(var r in e={},n)'layerX'!==r&&'layerY'!==r&&'keyLocation'!==r&&'webkitMovementX'!==r&&'webkitMovementY'!==r&&('returnValue'===r&&n.preventDefault||(e[r]=n[r]));if(e.target||(e.target=e.srcElement||qe.a),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=a,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=a,null!==e.clientX&&void 0!==e.clientX){var i=qe.a.documentElement,s=qe.a.body;e.pageX=e.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function Q(e,t,a){if(Array.isArray(t))return X(Q,e,t,a);Gt.has(e)||Gt.set(e,{});var r=Gt.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),a.guid||(a.guid=G()),r.handlers[t].push(a),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,a){if(!r.disabled){t=J(t);var i=r.handlers[t.type];if(i)for(var s=i.slice(0),o=0,l=s.length;o<l&&!t.isImmediatePropagationStopped();o++)try{s[o].call(e,t,a)}catch(t){Ot.error(t)}}}),1===r.handlers[t].length)if(e.addEventListener){var n=!1;Kt&&-1<Xt.indexOf(t)&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)}else e.attachEvent&&e.attachEvent('on'+t,r.dispatcher)}function Z(e,a,r){if(Gt.has(e)){var i=Gt.get(e);if(i.handlers){if(Array.isArray(a))return X(Z,e,a,r);var s=function(e,a){i.handlers[a]=[],K(e,a)};if(void 0===a){for(var o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&s(e,o);return}var t=i.handlers[a];if(t){if(!r)return void s(e,a);if(r.guid)for(var l=0;l<t.length;l++)t[l].guid===r.guid&&t.splice(l--,1);K(e,a)}}}}function ee(e,t,a){var n=Gt.has(e)?Gt.get(e):{},r=e.parentNode||e.ownerDocument;if('string'==typeof t?t={type:t,target:e}:!t.target&&(t.target=e),t=J(t),n.dispatcher&&n.dispatcher.call(e,t,a),r&&!t.isPropagationStopped()&&!0===t.bubbles)ee.call(null,r,t,a);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){Gt.has(t.target)||Gt.set(t.target,{});var i=Gt.get(t.target);t.target[t.type]&&(i.disabled=!0,'function'==typeof t.target[t.type]&&t.target[t.type](),i.disabled=!1)}return!t.defaultPrevented}function te(e,t,a){if(Array.isArray(t))return X(te,e,t,a);var n=function n(){Z(e,t,n),a.apply(this,arguments)};n.guid=a.guid=a.guid||G(),Q(e,t,n)}function ae(e,t,a){var n=function n(){Z(e,t,n),a.apply(this,arguments)};n.guid=a.guid=a.guid||G(),Q(e,t,n)}function ne(e,t){void 0===t&&(t={});var a=t,n=a.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=k('span',{className:'vjs-event-bus'});return u(e,ua),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on('dispose',function(){e.off(),Ve.a.setTimeout(function(){e.eventBusEl_=null},0)}),e}function re(e,t){return u(e,ca),e.state=u({},e.state,t),'function'==typeof e.handleStateChanged&&na(e)&&e.on('statechanged',e.handleStateChanged),e}function ie(){for(var e={},t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.forEach(function(t){t&&d(t,function(t,a){return m(t)?void(!m(e[a])&&(e[a]={}),e[a]=ie(e[a],t)):void(e[a]=t)})}),e}function se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function oe(e,t){return oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oe(e,t)}function le(){if('undefined'==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if('function'==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function de(){return de=le()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),i=new a;return n&&oe(i,n.prototype),i},de.apply(null,arguments)}function pe(e){if(void 0===e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return e}function ue(e,t,a){if('number'!=typeof t||0>t||t>a)throw new Error('Failed to execute \''+e+'\' on \'TimeRanges\': The index provided ('+t+') is non-numeric or out of bounds (0-'+a+').')}function ce(e,t,a,n){return ue(e,n,a.length-1),a[n][t]}function me(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error('This TimeRanges object is empty')},end:function(){throw new Error('This TimeRanges object is empty')}}:{length:e.length,start:ce.bind(null,'start',0,e),end:ce.bind(null,'end',1,e)}}function ge(e,t){return Array.isArray(e)?me(e):void 0===e||void 0===t?me():me([[e,t]])}function ye(e,t){var a=0,n,r;if(!t)return 0;e&&e.length||(e=ge(0,0));for(var s=0;s<e.length;s++)n=e.start(s),r=e.end(s),r>t&&(r=t),a+=r-n;return a/t}function he(e){return e instanceof he?e:void('number'==typeof e?this.code=e:'string'==typeof e?this.message=e:c(e)&&('number'==typeof e.code&&(this.code=e.code),u(this,e)),!this.message&&(this.message=he.defaultMessages[this.code]||''))}function fe(e){return void 0!==e&&null!==e&&'function'==typeof e.then}function _e(e){fe(e)&&e.then(null,function(){})}function be(e,t,a,n,r){void 0===r&&(r={});var i=e.textTracks();r.kind=t,a&&(r.label=a),n&&(r.language=n),r.tech=e;var s=new Ln.text.TrackClass(r);return i.addTrack(s),s}function ve(e,t,a){e.setTimeout(function(){return Pe(t,xn[t.type],a,e)},1)}function Te(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}function ke(e,t,a){return e.reduceRight(Ee(a),t[a]())}function Se(e,t,a,n){return t[a](e.reduce(Ee(a),n))}function Ce(e,t,a,n){void 0===n&&(n=null);var r='call'+ga(a),i=e.reduce(Ee(r),n),s=i===In,o=s?null:t[a](i);return Le(e,a,o,s),o}function Ee(e){return function(t,a){return t===In?In:a[e]?a[e](t):t}}function Le(e,t,a,n){for(var r=e.length-1,i;0<=r;r--)i=e[r],i[t]&&i[t](n,a)}function we(e){Pn[e.id()]=null}function xe(e,t){var a=Pn[e.id()],n=null;if(void 0===a||null===a)return n=t(e),Pn[e.id()]=[[t,n]],n;for(var r=0;r<a.length;r++){var i=a[r],s=i[0],o=i[1];s===t&&(n=o)}return null===n&&(n=t(e),a.push([t,n])),n}function Pe(e,t,a,n,r,i){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===i&&(i=!1);var s=t,o=s[0],l=s.slice(1);if('string'==typeof o)Pe(e,xn[o],a,n,r,i);else if(o){var d=xe(n,o);if(!d.setSource)return r.push(d),Pe(e,l,a,n,r,i);d.setSource(u({},e),function(t,s){return t?Pe(e,l,a,n,r,i):void(r.push(d),Pe(s,e.type===s.type?l:xn[s.type],a,n,r,i))})}else l.length?Pe(e,l,a,n,r,i):i?a(e,r):Pe(e,xn['*'],a,n,r,!0)}function Ie(e){if(!e.type){var t=Rn(e.src);t&&(e.type=t)}return e}function Me(e,t){var a;if(4===e.length)a=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else if(7===e.length)a=e.slice(1);else throw new Error('Invalid color code provided, '+e+'; must be formatted as e.g. #f0e or #f604e2.');return'rgba('+parseInt(a.slice(0,2),16)+','+parseInt(a.slice(2,4),16)+','+parseInt(a.slice(4,6),16)+','+t+')'}function De(e,t,a){try{e.style[t]=a}catch(t){}}function Oe(e,t){return void 0===t&&(t=e),$n(e,t)}function Ae(e,t){if(t&&(e=t(e)),e&&'none'!==e)return e}function Re(e,t){var a=e.options[e.options.selectedIndex].value;return Ae(a,t)}function Ne(e,t,a){if(t)for(var n=0;n<e.options.length;n++)if(Ae(e.options[n].value,a)===t){e.selectedIndex=n;break}}function Ue(e,t,a){var n=Ue.getPlayer(e);if(n)return t&&Ot.warn('Player "'+e+'" is already initialised. Options will not be applied.'),a&&n.ready(a),n;var r='string'==typeof e?Ut('#'+ji(e)):e;if(!b(r))throw new TypeError('The element or ID supplied is not valid. (videojs)');r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||Ot.warn('The element supplied is not included in the DOM'),t=t||{},Ue.hooks('beforesetup').forEach(function(e){var a=e(r,ie(t));return!c(a)||Array.isArray(a)?void Ot.error('please return an object in beforesetup hooks'):void(t=ie(t,a))});var i=ha.getComponent('Player');return n=new i(r,t,a),Ue.hooks('setup').forEach(function(e){return e(n)}),n}function Be(e,t){return function(a){var n=this;if(!t)return new yo(e);if(yo&&!a){var r=t.toString().replace(/^function.+?{/,'').slice(0,-1),i=Ye(r);return this[uo]=new yo(i),Fe(this[uo],i),this[uo]}var s={postMessage:function(e){n.onmessage&&setTimeout(function(){n.onmessage({data:e,target:s})})}};t.call(s),this.postMessage=function(e){setTimeout(function(){s.onmessage({data:e,target:n})})},this.isThisThread=!0}}function Ye(e){try{return go.createObjectURL(new Blob([e],{type:co}))}catch(a){var t=new mo;return t.append(e),go.createObjectURL(t.getBlob(type))}}function Fe(e,t){if(e&&t){var a=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&go.revokeObjectURL(e.objURL),a.call(e)}}}function je(){}a.r(t);var He=a(0),Ve=a.n(He),ze=a(1),qe=a.n(ze),We=a(56),Ge=a.n(We),Ke=a(2),Xe=a.n(Ke),Je=a(27),$e=a.n(Je),Qe=a(28),Ze=a.n(Qe),et=a(29),tt=a.n(et),at=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var a=this.listeners[e].indexOf(t);return this.listeners[e].splice(a,1),-1<a},t.trigger=function(e){var t=this.listeners[e],a,n,r;if(t)if(2===arguments.length)for(n=t.length,a=0;a<n;++a)t[a].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),n=t.length,a=0;a<n;++a)t[a].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on('data',function(t){e.push(t)})},e}(),nt=function(e){function t(){var t;return t=e.call(this)||this,t.buffer='',t}r(t,e);var a=t.prototype;return a.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf('\n');-1<t;t=this.buffer.indexOf('\n'))this.trigger('data',this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(at),rt=function(){return /(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/},it=function(e){for(var t=e.split(rt()),a={},n=t.length,r;n--;)''!==t[n]&&(r=/([^=]*)=(.*)/.exec(t[n]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,''),r[1]=r[1].replace(/^\s+|\s+$/g,''),r[1]=r[1].replace(/^['"](.*)['"]$/g,'$1'),a[r[0]]=r[1]);return a},st=function(e){function t(){var t;return t=e.call(this)||this,t.customParsers=[],t.tagMappers=[],t}r(t,e);var a=t.prototype;return a.push=function(e){var t=this,a,n;if(e=e.trim(),0!==e.length){if('#'!==e[0])return void this.trigger('data',{type:'uri',uri:e});var r=this.tagMappers.reduce(function(t,a){var n=a(e);return n===e?t:t.concat([n])},[e]);r.forEach(function(e){for(var r=0;r<t.customParsers.length;r++)if(t.customParsers[r].call(t,e))return;if(0!==e.indexOf('#EXT'))return void t.trigger('data',{type:'comment',text:e.slice(1)});if(e=e.replace('\r',''),a=/^#EXTM3U/.exec(e),a)return void t.trigger('data',{type:'tag',tagType:'m3u'});if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e),a)return n={type:'tag',tagType:'inf'},a[1]&&(n.duration=parseFloat(a[1])),a[2]&&(n.title=a[2]),void t.trigger('data',n);if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e),a)return n={type:'tag',tagType:'targetduration'},a[1]&&(n.duration=parseInt(a[1],10)),void t.trigger('data',n);if(a=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e),a)return n={type:'tag',tagType:'totalduration'},a[1]&&(n.duration=parseInt(a[1],10)),void t.trigger('data',n);if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e),a)return n={type:'tag',tagType:'version'},a[1]&&(n.version=parseInt(a[1],10)),void t.trigger('data',n);if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e),a)return n={type:'tag',tagType:'media-sequence'},a[1]&&(n.number=parseInt(a[1],10)),void t.trigger('data',n);if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e),a)return n={type:'tag',tagType:'discontinuity-sequence'},a[1]&&(n.number=parseInt(a[1],10)),void t.trigger('data',n);if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e),a)return n={type:'tag',tagType:'playlist-type'},a[1]&&(n.playlistType=a[1]),void t.trigger('data',n);if(a=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e),a)return n={type:'tag',tagType:'byterange'},a[1]&&(n.length=parseInt(a[1],10)),a[2]&&(n.offset=parseInt(a[2],10)),void t.trigger('data',n);if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e),a)return n={type:'tag',tagType:'allow-cache'},a[1]&&(n.allowed=!/NO/.test(a[1])),void t.trigger('data',n);if(a=/^#EXT-X-MAP:?(.*)$/.exec(e),a){if(n={type:'tag',tagType:'map'},a[1]){var i=it(a[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var s=i.BYTERANGE.split('@'),o=s[0],l=s[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),l&&(n.byterange.offset=parseInt(l,10))}}return void t.trigger('data',n)}if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e),a){if(n={type:'tag',tagType:'stream-inf'},a[1]){if(n.attributes=it(a[1]),n.attributes.RESOLUTION){var d=n.attributes.RESOLUTION.split('x'),p={};d[0]&&(p.width=parseInt(d[0],10)),d[1]&&(p.height=parseInt(d[1],10)),n.attributes.RESOLUTION=p}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes['PROGRAM-ID']&&(n.attributes['PROGRAM-ID']=parseInt(n.attributes['PROGRAM-ID'],10))}return void t.trigger('data',n)}return(a=/^#EXT-X-MEDIA:?(.*)$/.exec(e),a)?(n={type:'tag',tagType:'media'},a[1]&&(n.attributes=it(a[1])),void t.trigger('data',n)):(a=/^#EXT-X-ENDLIST/.exec(e),a)?void t.trigger('data',{type:'tag',tagType:'endlist'}):(a=/^#EXT-X-DISCONTINUITY/.exec(e),a)?void t.trigger('data',{type:'tag',tagType:'discontinuity'}):(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e),a)?(n={type:'tag',tagType:'program-date-time'},a[1]&&(n.dateTimeString=a[1],n.dateTimeObject=new Date(a[1])),void t.trigger('data',n)):(a=/^#EXT-X-KEY:?(.*)$/.exec(e),a)?(n={type:'tag',tagType:'key'},a[1]&&(n.attributes=it(a[1]),n.attributes.IV&&('0x'===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void t.trigger('data',n)):(a=/^#EXT-X-START:?(.*)$/.exec(e),a)?(n={type:'tag',tagType:'start'},a[1]&&(n.attributes=it(a[1]),n.attributes['TIME-OFFSET']=parseFloat(n.attributes['TIME-OFFSET']),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void t.trigger('data',n)):(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e),a)?(n={type:'tag',tagType:'cue-out-cont'},n.data=a[1]?a[1]:'',void t.trigger('data',n)):(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e),a)?(n={type:'tag',tagType:'cue-out'},n.data=a[1]?a[1]:'',void t.trigger('data',n)):(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e),a?(n={type:'tag',tagType:'cue-in'},n.data=a[1]?a[1]:'',void t.trigger('data',n)):void t.trigger('data',{type:'tag',data:e.slice(4)}))})}},a.addParser=function(e){var t=this,a=e.expression,n=e.customType,r=e.dataParser,i=e.segment;'function'!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){var s=a.exec(e);if(s)return t.trigger('data',{type:'custom',data:r(e),customType:n,segment:i}),!0})},a.addTagMapper=function(e){var t=e.expression,a=e.map;this.tagMappers.push(function(e){return t.test(e)?a(e):e})},t}(at),ot=function(e){function t(){var t;t=e.call(this)||this,t.lineStream=new nt,t.parseStream=new st,t.lineStream.pipe(t.parseStream);var a=i(t),r=[],o={},l=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0,u,c;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on('data',function(e){var t,i;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=e.allowed,'allowed'in e||(this.trigger('info',{message:'defaulting allowCache to YES'}),this.manifest.allowCache=!0)},byterange:function(){var t={};'length'in e&&(o.byterange=t,t.length=e.length,!('offset'in e)&&(this.trigger('info',{message:'defaulting offset to zero'}),e.offset=0)),'offset'in e&&(o.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){'mediaSequence'in this.manifest||(this.manifest.mediaSequence=0,this.trigger('info',{message:'defaulting media sequence to zero'})),'discontinuitySequence'in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger('info',{message:'defaulting discontinuity sequence to zero'})),0<e.duration&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger('info',{message:'updating zero segment duration to a small value'})),this.manifest.segments=r},key:function(){if(!e.attributes)return void this.trigger('warn',{message:'ignoring key declaration without attribute list'});if('NONE'===e.attributes.METHOD)return void(c=null);if(!e.attributes.URI)return void this.trigger('warn',{message:'ignoring key declaration without URI'});if(e.attributes.KEYFORMAT==='urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'){return-1===['SAMPLE-AES','SAMPLE-AES-CTR','SAMPLE-AES-CENC'].indexOf(e.attributes.METHOD)?void this.trigger('warn',{message:'invalid key method provided for Widevine'}):('SAMPLE-AES-CENC'===e.attributes.METHOD&&this.trigger('warn',{message:'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'}),'data:text/plain;base64,'!==e.attributes.URI.substring(0,23))?void this.trigger('warn',{message:'invalid key URI provided for Widevine'}):e.attributes.KEYID&&'0x'===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:s(e.attributes.URI.split(',')[1])}}):void this.trigger('warn',{message:'invalid key ID provided for Widevine'})}e.attributes.METHOD||this.trigger('warn',{message:'defaulting key method to AES-128'}),c={method:e.attributes.METHOD||'AES-128',uri:e.attributes.URI},'undefined'!=typeof e.attributes.IV&&(c.iv=e.attributes.IV)},"media-sequence":function(){return isFinite(e.number)?void(this.manifest.mediaSequence=e.number):void this.trigger('warn',{message:'ignoring invalid media sequence: '+e.number})},"discontinuity-sequence":function(){return isFinite(e.number)?void(this.manifest.discontinuitySequence=e.number,p=e.number):void this.trigger('warn',{message:'ignoring invalid discontinuity sequence: '+e.number})},"playlist-type":function(){return /VOD|EVENT/.test(e.playlistType)?void(this.manifest.playlistType=e.playlistType):void this.trigger('warn',{message:'ignoring unknown playlist type: '+e.playlist})},map:function(){u={},e.uri&&(u.uri=e.uri),e.byterange&&(u.byterange=e.byterange)},"stream-inf":function(){return this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes?void(!o.attributes&&(o.attributes={}),n(o.attributes,e.attributes)):void this.trigger('warn',{message:'ignoring empty stream-inf attributes'})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,!(e.attributes&&e.attributes.TYPE&&e.attributes['GROUP-ID']&&e.attributes.NAME))return void this.trigger('warn',{message:'ignoring incomplete or missing media group'});var a=this.manifest.mediaGroups[e.attributes.TYPE];a[e.attributes['GROUP-ID']]=a[e.attributes['GROUP-ID']]||{},t=a[e.attributes['GROUP-ID']],i={default:/yes/i.test(e.attributes.DEFAULT)},i.autoselect=!!i.default||/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(i.language=e.attributes.LANGUAGE),e.attributes.URI&&(i.uri=e.attributes.URI),e.attributes['INSTREAM-ID']&&(i.instreamId=e.attributes['INSTREAM-ID']),e.attributes.CHARACTERISTICS&&(i.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(i.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=i},discontinuity:function(){p+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time":function(){'undefined'==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){return!isFinite(e.duration)||0>e.duration?void this.trigger('warn',{message:'ignoring invalid target duration: '+e.duration}):void(this.manifest.targetDuration=e.duration)},totalduration:function(){return!isFinite(e.duration)||0>e.duration?void this.trigger('warn',{message:'ignoring invalid total duration: '+e.duration}):void(this.manifest.totalDuration=e.duration)},start:function(){return!e.attributes||isNaN(e.attributes['TIME-OFFSET'])?void this.trigger('warn',{message:'ignoring start declaration without appropriate attribute list'}):void(this.manifest.start={timeOffset:e.attributes['TIME-OFFSET'],precise:e.attributes.PRECISE})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data}})[e.tagType]||l).call(a)},uri:function(){o.uri=e.uri,r.push(o),this.manifest.targetDuration&&!('duration'in o)&&(this.trigger('warn',{message:'defaulting segment duration to the target duration'}),o.duration=this.manifest.targetDuration),c&&(o.key=c),o.timeline=p,u&&(o.map=u),o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(a)}),t}r(t,e);var a=t.prototype;return a.push=function(e){this.lineStream.push(e)},a.end=function(){this.lineStream.push('\n')},a.addParser=function(e){this.parseStream.addParser(e)},a.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(at),lt=a(22),dt=a(26),pt=a.n(dt),ut=a(13),ct=a.n(ut),mt=a(57),gt=a.n(mt),yt=a(58),ht=a.n(yt),ft=void 0;ft=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]];var _t=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},bt=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),vt=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Tt=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e},kt=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],a=e[1],n=t[4],r=a[4],o=void 0,i=void 0,l=void 0,p=[],d=[],u=void 0,c=void 0,m=void 0,g=void 0,s=void 0,y=void 0;for(o=0;256>o;o++)d[(p[o]=o<<1^283*(o>>7))^o]=o;for(i=l=0;!n[i];i^=u||1,l=d[l]||1)for(g=l^l<<1^l<<2^l<<3^l<<4,g=99^(g>>8^255&g),n[i]=g,r[g]=i,m=p[c=p[u=p[i]]],y=16843009*m^65537*c^257*u^16843008*i,s=257*p[g]^16843008*g,o=0;4>o;o++)t[o][i]=s=s<<24^s>>>8,a[o][g]=y=y<<24^y>>>8;for(o=0;5>o;o++)t[o]=t[o].slice(0),a[o]=a[o].slice(0);return e},St=null,Ct=function(){function e(t){_t(this,e),St||(St=kt()),this._tables=[[St[0][0].slice(),St[0][1].slice(),St[0][2].slice(),St[0][3].slice(),St[0][4].slice()],[St[1][0].slice(),St[1][1].slice(),St[1][2].slice(),St[1][3].slice(),St[1][4].slice()]];var a=void 0,n=void 0,r=void 0,i=void 0,s=void 0,o=this._tables[0][4],l=this._tables[1],d=t.length,p=1;if(4!==d&&6!==d&&8!==d)throw new Error('Invalid aes key size');for(i=t.slice(0),s=[],this._key=[i,s],a=d;a<4*d+28;a++)r=i[a-1],(0==a%d||8===d&&4==a%d)&&(r=o[r>>>24]<<24^o[255&r>>16]<<16^o[255&r>>8]<<8^o[255&r],0==a%d&&(r=r<<8^r>>>24^p<<24,p=p<<1^283*(p>>7))),i[a]=i[a-d]^r;for(n=0;a;n++,a--)r=i[3&n?a:a-4],s[n]=4>=a||4>n?r:l[0][o[r>>>24]]^l[1][o[255&r>>16]]^l[2][o[255&r>>8]]^l[3][o[255&r]]}return e.prototype.decrypt=function(e,t,n,r,s,o){var l=this._key[1],p=e^l[0],a=r^l[1],u=n^l[2],c=t^l[3],d=void 0,m=void 0,g=void 0,y=l.length/4-2,h=void 0,f=4,_=this._tables[1],b=_[0],v=_[1],T=_[2],k=_[3],S=_[4];for(h=0;h<y;h++)d=b[p>>>24]^v[255&a>>16]^T[255&u>>8]^k[255&c]^l[f],m=b[a>>>24]^v[255&u>>16]^T[255&c>>8]^k[255&p]^l[f+1],g=b[u>>>24]^v[255&c>>16]^T[255&p>>8]^k[255&a]^l[f+2],c=b[c>>>24]^v[255&p>>16]^T[255&a>>8]^k[255&u]^l[f+3],f+=4,p=d,a=m,u=g;for(h=0;4>h;h++)s[(3&-h)+o]=S[p>>>24]<<24^S[255&a>>16]<<16^S[255&u>>8]<<8^S[255&c]^l[f++],d=p,p=a,a=u,u=c,c=d},e}(),Et=function(){function e(){_t(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var a=this.listeners[e].indexOf(t);return this.listeners[e].splice(a,1),-1<a},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var a=t.length,n=0;n<a;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),i=t.length,s=0;s<i;++s)t[s].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on('data',function(t){e.push(t)})},e}(),Lt=function(e){function t(){_t(this,t);var a=Tt(this,e.call(this,Et));return a.jobs=[],a.delay=1,a.timeout_=null,a}return vt(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(Et),wt=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},xt=function(e,t,a){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new Ct(Array.prototype.slice.call(t)),i=new Uint8Array(e.byteLength),s=new Int32Array(i.buffer),o=void 0,l=void 0,d=void 0,p=void 0,u=void 0,c=void 0,m=void 0,g=void 0,y=void 0;for(o=a[0],l=a[1],d=a[2],p=a[3],y=0;y<n.length;y+=4)u=wt(n[y]),c=wt(n[y+1]),m=wt(n[y+2]),g=wt(n[y+3]),r.decrypt(u,c,m,g,s,y),s[y]=wt(s[y]^o),s[y+1]=wt(s[y+1]^l),s[y+2]=wt(s[y+2]^d),s[y+3]=wt(s[y+3]^p),o=u,l=c,d=m,p=g;return i},Pt=function(){function e(t,a,n,r){_t(this,e);var s=e.STEP,l=new Int32Array(t.buffer),d=new Uint8Array(t.byteLength),p=0;for(this.asyncStream_=new Lt,this.asyncStream_.push(this.decryptChunk_(l.subarray(p,p+s),a,n,d)),p=s;p<l.length;p+=s)n=new Uint32Array([wt(l[p-4]),wt(l[p-3]),wt(l[p-2]),wt(l[p-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(p,p+s),a,n,d));this.asyncStream_.push(function(){r(null,o(d))})}return e.prototype.decryptChunk_=function(e,t,a,n){return function(){var r=xt(e,t,a);n.set(r,e.byteOffset)}},bt(e,null,[{key:'STEP',get:function(){return 32e3}}]),e}(),It='7.6.6',Mt=[],Dt=function(e,t){return function(a,n,r){var i=t.levels[n],s=new RegExp('^('+i+')$');if('log'!==a&&r.unshift(a.toUpperCase()+':'),r.unshift(e+':'),Mt&&Mt.push([].concat(r)),!!Ve.a.console){var o=Ve.a.console[a];o||'debug'!==a||(o=Ve.a.console.info||Ve.a.console.log),o&&i&&s.test(a)&&o[Array.isArray(r)?'apply':'call'](Ve.a.console,r)}}},Ot=l('VIDEOJS'),At=Ot.createLogger,Rt=Object.prototype.toString,Nt=function(e){return c(e)?Object.keys(e):[]},Ut=T('querySelector'),Bt=T('querySelectorAll'),Yt=Object.freeze({isReal:_,isEl:b,isInFrame:v,createEl:k,textContent:S,prependTo:C,hasClass:E,addClass:L,removeClass:w,toggleClass:x,setAttributes:P,getAttributes:I,getAttribute:M,setAttribute:D,removeAttribute:O,blockTextSelection:A,unblockTextSelection:R,getBoundingClientRect:N,findPosition:U,getPointerPosition:B,isTextNode:Y,emptyEl:F,normalizeContent:j,appendContent:H,insertContent:V,isSingleLeftClick:z,$:Ut,$$:Bt}),Ft=!1,jt=function(){if(_()&&!1!==Ht.options.autoSetup){var t=Array.prototype.slice.call(qe.a.getElementsByTagName('video')),a=Array.prototype.slice.call(qe.a.getElementsByTagName('audio')),n=Array.prototype.slice.call(qe.a.getElementsByTagName('video-js')),r=t.concat(a,n);if(r&&0<r.length){for(var s=0,i=r.length,e;s<i;s++)if(e=r[s],!(e&&e.getAttribute)){q(1);break}else if(void 0===e.player){var o=e.getAttribute('data-setup');null!==o&&Ht(e)}}else Ft||q(1)}},Ht;/**
 * @license
 * Video.js 7.6.6 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */_()&&('complete'===qe.a.readyState?W():Ve.a.addEventListener('load',W));var Vt=function(e){var t=qe.a.createElement('style');return t.className=e,t},zt=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},qt=3,Wt;Ve.a.WeakMap||(Wt=function(){function e(){this.vdata='vdata'+Math.floor(Ve.a.performance&&Ve.a.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var a=e[this.vdata]||G();return e[this.vdata]||(e[this.vdata]=a),this.data[a]=t,this},t.get=function(e){var t=e[this.vdata];return t?this.data[t]:void Ot('We have no data for this element',e)},t.has=function(e){var t=e[this.vdata];return t in this.data},t['delete']=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var Gt=Ve.a.WeakMap?new WeakMap:new Wt,Kt=!1;(function(){try{var e=Object.defineProperty({},'passive',{get:function(){Kt=!0}});Ve.a.addEventListener('test',null,e),Ve.a.removeEventListener('test',null,e)}catch(t){}})();var Xt=['touchstart','touchmove'],Jt=Object.freeze({fixEvent:J,on:Q,off:Z,trigger:ee,one:te,any:ae}),$t=30,Qt=function(e,t,a){t.guid||(t.guid=G());var n=t.bind(e);return n.guid=a?a+'_'+t.guid:t.guid,n},Zt=function(e,t){var a=Ve.a.performance.now(),n=function(){var n=Ve.a.performance.now();n-a>=t&&(e.apply(void 0,arguments),a=n)};return n},ea=function(e,t,a,n){void 0===n&&(n=Ve.a);var r=function(){n.clearTimeout(s),s=null},i=function(){var r=this,i=arguments,o=function(){s=null,o=null,a||e.apply(r,i)};!s&&a&&e.apply(r,i),n.clearTimeout(s),s=n.setTimeout(o,t)},s;return i.cancel=r,i},ta=function(){};ta.prototype.allowedEvents_={},ta.prototype.on=function(e,t){var a=this.addEventListener;this.addEventListener=function(){},Q(this,e,t),this.addEventListener=a},ta.prototype.addEventListener=ta.prototype.on,ta.prototype.off=function(e,t){Z(this,e,t)},ta.prototype.removeEventListener=ta.prototype.off,ta.prototype.one=function(e,t){var a=this.addEventListener;this.addEventListener=function(){},te(this,e,t),this.addEventListener=a},ta.prototype.any=function(e,t){var a=this.addEventListener;this.addEventListener=function(){},ae(this,e,t),this.addEventListener=a},ta.prototype.trigger=function(e){var t=e.type||e;'string'==typeof e&&(e={type:t}),e=J(e),this.allowedEvents_[t]&&this['on'+t]&&this['on'+t](e),ee(this,e)},ta.prototype.dispatchEvent=ta.prototype.trigger;var aa;ta.prototype.queueTrigger=function(e){var t=this;aa||(aa=new Map);var a=e.type||e,n=aa.get(this);n||(n=new Map,aa.set(this,n));var r=n.get(a);n['delete'](a),Ve.a.clearTimeout(r);var i=Ve.a.setTimeout(function(){0===n.size&&(n=null,aa['delete'](t)),t.trigger(e)},0);n.set(a,i)};var na=function(e){return e instanceof ta||!!e.eventBusEl_&&['on','one','off','trigger'].every(function(t){return'function'==typeof e[t]})},ra=function(e,t){na(e)?t():(!e.eventedCallbacks&&(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},ia=function(e){return'string'==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},sa=function(e){if(!e.nodeName&&!na(e))throw new Error('Invalid target; must be a DOM node or evented object.')},oa=function(e){if(!ia(e))throw new Error('Invalid event type; must be a non-empty string or array.')},la=function(e){if('function'!=typeof e)throw new Error('Invalid listener; must be a function.')},da=function(e,t){var a=3>t.length||t[0]===e||t[0]===e.eventBusEl_,n,r,i;return a?(n=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],i=t[1]):(n=t[0],r=t[1],i=t[2]),sa(n),oa(r),la(i),i=Qt(e,i),{isTargetingSelf:a,target:n,type:r,listener:i}},pa=function(e,t,a,n){sa(e),e.nodeName?Jt[t](e,a,n):e[t](a,n)},ua={on:function(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var r=da(this,a),i=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(pa(s,'on',o,l),!i){var d=function(){return e.off(s,o,l)};d.guid=l.guid;var p=function(){return e.off('dispose',d)};p.guid=l.guid,pa(this,'on','dispose',d),pa(s,'on','dispose',p)}},one:function(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var r=da(this,a),i=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(i)pa(s,'one',o,l);else{var d=function t(){e.off(s,o,t);for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];l.apply(null,n)};d.guid=l.guid,pa(s,'one',o,d)}},any:function(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var r=da(this,a),i=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(i)pa(s,'any',o,l);else{var d=function t(){e.off(s,o,t);for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];l.apply(null,n)};d.guid=l.guid,pa(s,'any',o,d)}},off:function(e,t,a){if(!e||ia(e))Z(this.eventBusEl_,e,t);else{var n=e,r=t;sa(n),oa(r),la(a),a=Qt(this,a),this.off('dispose',a),n.nodeName?(Z(n,r,a),Z(n,'dispose',a)):na(n)&&(n.off(r,a),n.off('dispose',a))}},trigger:function(e,t){return ee(this.eventBusEl_,e,t)}},ca={state:{},setState:function(e){var t=this;'function'==typeof e&&(e=e());var a;return d(e,function(e,n){t.state[n]!==e&&(a=a||{},a[n]={from:t.state[n],to:e}),t.state[n]=e}),a&&na(this)&&this.trigger({changes:a,type:'statechanged'}),a}},ma=function(e){return'string'==typeof e?e.replace(/./,function(e){return e.toLowerCase()}):e},ga=function(e){return'string'==typeof e?e.replace(/./,function(e){return e.toUpperCase()}):e},ya=function(e,t){return ga(e)===ga(t)},ha=function(){function e(e,t,a){if(this.player_=!e&&this.play?e=this:e,this.parentComponent_=null,this.options_=ie({},this.options_),t=this.options_=ie(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||'no_player';this.id_=n+'_component_'+G()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&ne(this,{eventBusKey:this.el_?'el_':null}),re(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={};var r;Ve.a.Set||(r=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t['delete']=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var a in this.set_)e.call(t,a,a,this)},e}()),this.setTimeoutIds_=Ve.a.Set?new Set:new r,this.setIntervalIds_=Ve.a.Set?new Set:new r,this.rafIds_=Ve.a.Set?new Set:new r,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(a),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(this.trigger({type:'dispose',bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Gt.has(this.el_)&&Gt['delete'](this.el_),this.el_=null),this.player_=null},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=ie(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,a){return k(e,t,a)},t.localize=function(e,t,a){void 0===a&&(a=e);var n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),i=r&&r[n],s=n&&n.split('-')[0],o=r&&r[s],l=a;return i&&i[e]?l=i[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,a){var n=t[a-1],r=n;return'undefined'==typeof n&&(r=e),r})),l},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){return e?this.childNameIndex_[e]:void 0},t.addChild=function(t,a,n){void 0===a&&(a={}),void 0===n&&(n=this.children_.length);var r,i;if('string'==typeof t){i=ga(t);var s=a.componentClass||i;a.name=i;var o=e.getComponent(s);if(!o)throw new Error('Component '+s+' does not exist');if('function'!=typeof o)return null;r=new o(this.player_||this,a)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,'function'==typeof r.id&&(this.childIndex_[r.id()]=r),i=i||r.name&&ga(r.name()),i&&(this.childNameIndex_[i]=r,this.childNameIndex_[ma(i)]=r),'function'==typeof r.el&&r.el()){var l=this.contentEl().children,d=l[n]||null;this.contentEl().insertBefore(r.el(),d)}return r},t.removeChild=function(e){if('string'==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,a=this.children_.length-1;0<=a;a--)if(this.children_[a]===e){t=!0,this.children_.splice(a,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ga(e.name())]=null,this.childNameIndex_[ma(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,a=this.options_.children;if(a){var n=this.options_,r=function(e){var a=e.name,r=e.opts;if(void 0!==n[a]&&(r=n[a]),!1!==r){!0===r&&(r={}),r.playerOptions=t.options_.playerOptions;var i=t.addChild(a,r);i&&(t[a]=i)}},i=e.getComponent('Tech'),s;s=Array.isArray(a)?a:Object.keys(a),s.concat(Object.keys(this.options_).filter(function(e){return!s.some(function(t){return'string'==typeof t?e===t:e===t.name})})).map(function(e){var n,r;return'string'==typeof e?(n=e,r=a[n]||t.options_[n]||{}):(n=e.name,r=e),{name:n,opts:r}}).filter(function(t){var a=e.getComponent(t.opts.componentClass||ga(t.name));return a&&!i.isTech(a)}).forEach(r)}},t.buildCSSClass=function(){return''},t.ready=function(e,t){return void 0===t&&(t=!1),e?this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e)):void 0},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger('ready')},1)},t.$=function(e,t){return Ut(e,t||this.contentEl())},t.$$=function(e,t){return Bt(e,t||this.contentEl())},t.hasClass=function(e){return E(this.el_,e)},t.addClass=function(e){L(this.el_,e)},t.removeClass=function(e){w(this.el_,e)},t.toggleClass=function(e,t){x(this.el_,e,t)},t.show=function(){this.removeClass('vjs-hidden')},t.hide=function(){this.addClass('vjs-hidden')},t.lockShowing=function(){this.addClass('vjs-lock-showing')},t.unlockShowing=function(){this.removeClass('vjs-lock-showing')},t.getAttribute=function(e){return M(this.el_,e)},t.setAttribute=function(e,t){D(this.el_,e,t)},t.removeAttribute=function(e){O(this.el_,e)},t.width=function(e,t){return this.dimension('width',e,t)},t.height=function(e,t){return this.dimension('height',e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,a){if(void 0!==t)return(null===t||t!==t)&&(t=0),this.el_.style[e]=-1!==(''+t).indexOf('%')||-1!==(''+t).indexOf('px')?t:'auto'===t?'':t+'px',void(a||this.trigger('componentresize'));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf('px');return-1===r?parseInt(this.el_['offset'+ga(e)],10):parseInt(n.slice(0,r),10)},t.currentDimension=function(e){var t=0;if('width'!==e&&'height'!==e)throw new Error('currentDimension only accepts width or height value');if(t=g(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){var a='offset'+ga(e);t=this.el_[a]}return t},t.currentDimensions=function(){return{width:this.currentDimension('width'),height:this.currentDimension('height')}},t.currentWidth=function(){return this.currentDimension('width')},t.currentHeight=function(){return this.currentDimension('height')},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e=0,t=null,a;this.on('touchstart',function(n){1===n.touches.length&&(t={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=Ve.a.performance.now(),a=!0)}),this.on('touchmove',function(e){if(1<e.touches.length)a=!1;else if(t){var n=e.touches[0].pageX-t.pageX,r=e.touches[0].pageY-t.pageY,i=Math.sqrt(n*n+r*r);i>10&&(a=!1)}});var n=function(){a=!1};this.on('touchleave',n),this.on('touchcancel',n),this.on('touchend',function(n){if(t=null,!0===a){var r=Ve.a.performance.now()-e;r<200&&(n.preventDefault(),this.trigger('tap'))}})},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=Qt(this.player(),this.player().reportUserActivity),t;this.on('touchstart',function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var a=function(){e(),this.clearInterval(t)};this.on('touchmove',e),this.on('touchend',a),this.on('touchcancel',a)}},t.setTimeout=function(e,t){var a=this,n;return e=Qt(this,e),this.clearTimersOnDispose_(),n=Ve.a.setTimeout(function(){a.setTimeoutIds_.has(n)&&a.setTimeoutIds_['delete'](n),e()},t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_['delete'](e),Ve.a.clearTimeout(e)),e},t.setInterval=function(e,t){e=Qt(this,e),this.clearTimersOnDispose_();var a=Ve.a.setInterval(e,t);return this.setIntervalIds_.add(a),a},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_['delete'](e),Ve.a.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t=this;if(!this.supportsRaf_)return this.setTimeout(e,1e3/60);this.clearTimersOnDispose_();var a;return e=Qt(this,e),a=Ve.a.requestAnimationFrame(function(){t.rafIds_.has(a)&&t.rafIds_['delete'](a),e()}),this.rafIds_.add(a),a},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_['delete'](e),Ve.a.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one('dispose',function(){[['rafIds_','cancelAnimationFrame'],['setTimeoutIds_','clearTimeout'],['setIntervalIds_','clearInterval']].forEach(function(t){var a=t[0],n=t[1];e[a].forEach(e[n],e)}),e.clearingTimersOnDispose_=!1}))},e.registerComponent=function(t,a){if('string'!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=e.getComponent('Tech'),r=n&&n.isTech(a),i=e===a||e.prototype.isPrototypeOf(a.prototype);if(r||!i){var s;throw s=r?'techs must be registered using Tech.registerTech()':'must be a Component subclass',new Error('Illegal component, "'+t+'"; '+s+'.')}t=ga(t),e.components_||(e.components_={});var o=e.getComponent('Player');if('Player'===t&&o&&o.players){var l=o.players,d=Object.keys(l);if(l&&0<d.length&&d.map(function(e){return l[e]}).every(Boolean))throw new Error('Can not register Player component after player has been created.')}return e.components_[t]=a,e.components_[ma(t)]=a,a},e.getComponent=function(t){return t&&e.components_?e.components_[t]:void 0},e}();ha.prototype.supportsRaf_='function'==typeof Ve.a.requestAnimationFrame&&'function'==typeof Ve.a.cancelAnimationFrame,ha.registerComponent('Component',ha);for(var fa=Ve.a.navigator&&Ve.a.navigator.userAgent||'',_a=/AppleWebKit\/([\d.]+)/i.exec(fa),ba=_a?parseFloat(_a.pop()):null,va=/iPad/i.test(fa),Ta=/iPhone/i.test(fa)&&!va,ka=/iPod/i.test(fa),Sa=Ta||va||ka,Ca=function(){var e=fa.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Ea=/Android/i.test(fa),La=function(){var e=fa.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),a=e[2]&&parseFloat(e[2]);return t&&a?parseFloat(e[1]+'.'+e[2]):t?t:null}(),wa=Ea&&5>La&&537>ba,xa=/Firefox/i.test(fa),Pa=/Edge/i.test(fa),Ia=!Pa&&(/Chrome/i.test(fa)||/CriOS/i.test(fa)),Ma=function(){var e=fa.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),Da=function(){var e=/MSIE\s(\d+)\.\d/.exec(fa),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(fa)&&/rv:11.0/.test(fa)&&(t=11),t}(),Oa=/Safari/i.test(fa)&&!Ia&&!Ea&&!Pa,Aa=(Oa||Sa)&&!Ia,Ra=/Windows/i.test(fa),Na=_()&&(('ontouchstart'in Ve.a)||Ve.a.navigator.maxTouchPoints||Ve.a.DocumentTouch&&Ve.a.document instanceof Ve.a.DocumentTouch),Ua=Object.freeze({IS_IPAD:va,IS_IPHONE:Ta,IS_IPOD:ka,IS_IOS:Sa,IOS_VERSION:Ca,IS_ANDROID:Ea,ANDROID_VERSION:La,IS_NATIVE_ANDROID:wa,IS_FIREFOX:xa,IS_EDGE:Pa,IS_CHROME:Ia,CHROME_VERSION:Ma,IE_VERSION:Da,IS_SAFARI:Oa,IS_ANY_SAFARI:Aa,IS_WINDOWS:Ra,TOUCH_ENABLED:Na}),Ba={prefixed:!0},Ya=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror','fullscreen'],['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror','-webkit-full-screen'],['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror','-moz-full-screen'],['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError','-ms-fullscreen']],Fa=Ya[0],ja=0,Ha;ja<Ya.length;ja++)if(Ya[ja][1]in qe.a){Ha=Ya[ja];break}if(Ha){for(var Va=0;Va<Ha.length;Va++)Ba[Fa[Va]]=Ha[Va];Ba.prefixed=Ha[0]!==Fa[0]}he.prototype.code=0,he.prototype.message='',he.prototype.status=null,he.errorTypes=['MEDIA_ERR_CUSTOM','MEDIA_ERR_ABORTED','MEDIA_ERR_NETWORK','MEDIA_ERR_DECODE','MEDIA_ERR_SRC_NOT_SUPPORTED','MEDIA_ERR_ENCRYPTED'],he.defaultMessages={1:'You aborted the media playback',2:'A network error caused the media download to fail part-way.',3:'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.',4:'The media could not be loaded, either because the server or network failed or because the format is not supported.',5:'The media is encrypted and we do not have the keys to decrypt it.'};for(var za=0;za<he.errorTypes.length;za++)he[he.errorTypes[za]]=za,he.prototype[he.errorTypes[za]]=za;var qa=function(e){var t=['kind','label','language','id','inBandMetadataTrackDispatchType','mode','src'].reduce(function(t,a){return e[a]&&(t[a]=e[a]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t},Wa={textTracksToJson:function(e){var t=e.$$('track'),a=Array.prototype.map.call(t,function(e){return e.track}),n=Array.prototype.map.call(t,function(e){var t=qa(e.track);return e.src&&(t.src=e.src),t});return n.concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===a.indexOf(e)}).map(qa))},jsonToTextTracks:function(e,t){return e.forEach(function(e){var a=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return a.addCue(e)})}),t.textTracks()},trackToJson_:qa},Ga='vjs-modal-dialog',Ka=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=k('div',{className:Ga+'-content'},{role:'document'}),n.descEl_=k('p',{className:Ga+'-description vjs-control-text',id:n.el().getAttribute('aria-describedby')}),S(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+'_description',"aria-hidden":'true',"aria-label":this.label(),role:'dialog'})},a.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},a.buildCSSClass=function(){return Ga+' vjs-hidden '+e.prototype.buildCSSClass.call(this)},a.label=function(){return this.localize(this.options_.label||'Modal Window')},a.description=function(){var e=this.options_.description||this.localize('This is a modal window.');return this.closeable()&&(e+=' '+this.localize('This modal can be closed by pressing the Escape key or activating the close button.')),e},a.open=function(){if(!this.opened_){var e=this.player();this.trigger('beforemodalopen'),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on('keydown',this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute('aria-hidden','false'),this.trigger('modalopen'),this.hasBeenOpened_=!0}},a.opened=function(e){return'boolean'==typeof e&&this[e?'open':'close'](),this.opened_},a.close=function(){if(this.opened_){var e=this.player();this.trigger('beforemodalclose'),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off('keydown',this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute('aria-hidden','true'),this.trigger('modalclose'),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},a.closeable=function(e){if('boolean'==typeof e){var t=this.closeable_=!!e,a=this.getChild('closeButton');if(t&&!a){var n=this.contentEl_;this.contentEl_=this.el_,a=this.addChild('closeButton',{controlText:'Close Modal Dialog'}),this.contentEl_=n,this.on(a,'close',this.close)}!t&&a&&(this.off(a,'close',this.close),this.removeChild(a),a.dispose())}return this.closeable_},a.fill=function(){this.fillWith(this.content())},a.fillWith=function(e){var t=this.contentEl(),a=t.parentNode,n=t.nextSibling;this.trigger('beforemodalfill'),this.hasBeenFilled_=!0,a.removeChild(t),this.empty(),V(t,e),this.trigger('modalfill'),n?a.insertBefore(t,n):a.appendChild(t);var r=this.getChild('closeButton');r&&a.appendChild(r.el_)},a.empty=function(){this.trigger('beforemodalempty'),F(this.contentEl()),this.trigger('modalempty')},a.content=function(e){return'undefined'!=typeof e&&(this.content_=e),this.content_},a.conditionalFocus_=function(){var e=qe.a.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},a.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},a.handleKeyDown=function(e){if(e.stopPropagation(),Xe.a.isEventKey(e,'Escape')&&this.closeable())return e.preventDefault(),void this.close();if(Xe.a.isEventKey(e,'Tab')){for(var t=this.focusableEls_(),a=this.el_.querySelector(':focus'),n=0,r;n<t.length;n++)if(a===t[n]){r=n;break}qe.a.activeElement===this.el_&&(r=0),e.shiftKey&&0===r?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===t.length-1&&(t[0].focus(),e.preventDefault())}},a.focusableEls_=function(){var e=this.el_.querySelectorAll('*');return Array.prototype.filter.call(e,function(e){return(e instanceof Ve.a.HTMLAnchorElement||e instanceof Ve.a.HTMLAreaElement)&&e.hasAttribute('href')||(e instanceof Ve.a.HTMLInputElement||e instanceof Ve.a.HTMLSelectElement||e instanceof Ve.a.HTMLTextAreaElement||e instanceof Ve.a.HTMLButtonElement)&&!e.hasAttribute('disabled')||e instanceof Ve.a.HTMLIFrameElement||e instanceof Ve.a.HTMLObjectElement||e instanceof Ve.a.HTMLEmbedElement||e.hasAttribute('tabindex')&&-1!==e.getAttribute('tabindex')||e.hasAttribute('contenteditable')})},t}(ha);Ka.prototype.options_={pauseOnOpen:!0,temporary:!0},ha.registerComponent('ModalDialog',Ka);var Xa=function(e){function t(t){var a;void 0===t&&(t=[]),a=e.call(this)||this,a.tracks_=[],Object.defineProperty(pe(a),'length',{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)a.addTrack(t[n]);return a}se(t,e);var a=t.prototype;return a.addTrack=function(e){var t=this.tracks_.length;''+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:'addtrack',target:this}))},a.removeTrack=function(e){for(var t=0,a=this.length,n;t<a;t++)if(this[t]===e){n=this[t],n.off&&n.off(),this.tracks_.splice(t,1);break}n&&this.trigger({track:n,type:'removetrack',target:this})},a.getTrackById=function(e){for(var t=null,a=0,n=this.length,r;a<n;a++)if(r=this[a],r.id===e){t=r;break}return t},t}(ta);for(var Ja in Xa.prototype.allowedEvents_={change:'change',addtrack:'addtrack',removetrack:'removetrack'},Xa.prototype.allowedEvents_)Xa.prototype['on'+Ja]=null;var $a=function(e,t){for(var a=0;a<e.length;a++)Object.keys(e[a]).length&&t.id!==e[a].id&&(e[a].enabled=!1)},Qa=function(e){function t(t){var a;void 0===t&&(t=[]);for(var n=t.length-1;0<=n;n--)if(t[n].enabled){$a(t,t[n]);break}return a=e.call(this,t)||this,a.changing_=!1,a}se(t,e);var a=t.prototype;return a.addTrack=function(t){var a=this;t.enabled&&$a(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){a.changing_||(a.changing_=!0,$a(a,t),a.changing_=!1,a.trigger('change'))},t.addEventListener('enabledchange',t.enabledChange_))},a.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener('enabledchange',t.enabledChange_),t.enabledChange_=null)},t}(Xa),Za=function(e,t){for(var a=0;a<e.length;a++)Object.keys(e[a]).length&&t.id!==e[a].id&&(e[a].selected=!1)},en=function(e){function t(t){var a;void 0===t&&(t=[]);for(var n=t.length-1;0<=n;n--)if(t[n].selected){Za(t,t[n]);break}return a=e.call(this,t)||this,a.changing_=!1,Object.defineProperty(pe(a),'selectedIndex',{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),a}se(t,e);var a=t.prototype;return a.addTrack=function(t){var a=this;t.selected&&Za(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){a.changing_||(a.changing_=!0,Za(a,t),a.changing_=!1,a.trigger('change'))},t.addEventListener('selectedchange',t.selectedChange_))},a.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener('selectedchange',t.selectedChange_),t.selectedChange_=null)},t}(Xa),tn=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.addTrack=function(t){var a=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger('change')}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger('selectedlanguagechange')}),t.addEventListener('modechange',this.queueChange_);-1===['metadata','chapters'].indexOf(t.kind)&&t.addEventListener('modechange',this.triggerSelectedlanguagechange_)},a.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener('modechange',this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener('modechange',this.triggerSelectedlanguagechange_))},t}(Xa),an=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,'length',{get:function(){return this.trackElements_.length}});for(var t=0,a=e.length;t<a;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;''+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t=0,a=this.trackElements_.length,n;t<a;t++)if(e===this.trackElements_[t].track){n=this.trackElements_[t];break}return n},t.removeTrackElement_=function(e){for(var t=0,a=this.trackElements_.length;t<a;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&'function'==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),'function'==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),nn=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,'length',{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,a=0,n=e.length;this.cues_=e,this.length_=e.length;var r=function(e){''+e in this||Object.defineProperty(this,''+e,{get:function(){return this.cues_[e]}})};if(t<n)for(a=t;a<n;a++)r.call(this,a)},t.getCueById=function(e){for(var t=null,a=0,n=this.length,r;a<n;a++)if(r=this[a],r.id===e){t=r;break}return t},e}(),rn={alternative:'alternative',captions:'captions',main:'main',sign:'sign',subtitles:'subtitles',commentary:'commentary'},sn={alternative:'alternative',descriptions:'descriptions',main:'main',"main-desc":'main-desc',translation:'translation',commentary:'commentary'},ln={subtitles:'subtitles',captions:'captions',descriptions:'descriptions',chapters:'chapters',metadata:'metadata'},dn={disabled:'disabled',hidden:'hidden',showing:'showing'},pn=function(e){function t(t){var a;void 0===t&&(t={}),a=e.call(this)||this;var n={id:t.id||'vjs_track_'+G(),kind:t.kind||'',label:t.label||'',language:t.language||''},r=function(e){Object.defineProperty(pe(a),e,{get:function(){return n[e]},set:function(){}})};for(var i in n)r(i);return a}return se(t,e),t}(ta),un=function(e){var t=['protocol','hostname','port','pathname','search','hash','host'],n=qe.a.createElement('a');n.href=e;var a=''===n.host&&'file:'!==n.protocol,r;a&&(r=qe.a.createElement('div'),r.innerHTML='<a href="'+e+'"></a>',n=r.firstChild,r.setAttribute('style','display:none; position:absolute;'),qe.a.body.appendChild(r));for(var s={},o=0;o<t.length;o++)s[t[o]]=n[t[o]];return'http:'===s.protocol&&(s.host=s.host.replace(/:80$/,'')),'https:'===s.protocol&&(s.host=s.host.replace(/:443$/,'')),s.protocol||(s.protocol=Ve.a.location.protocol),a&&qe.a.body.removeChild(r),s},cn=function(e){if(!e.match(/^https?:\/\//)){var t=qe.a.createElement('div');t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},mn=function(e){if('string'==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,a=t.exec(e);if(a)return a.pop().toLowerCase()}return''},gn=function(e){var t=Ve.a.location,a=un(e),n=':'===a.protocol?t.protocol:a.protocol,r=n+a.host!==t.protocol+t.host;return r},yn=Object.freeze({parseUrl:un,getAbsoluteURL:cn,getFileExtension:mn,isCrossOrigin:gn}),hn=function(e,t){var a=new Ve.a.WebVTT.Parser(Ve.a,Ve.a.vttjs,Ve.a.WebVTT.StringDecoder()),n=[];a.oncue=function(e){t.addCue(e)},a.onparsingerror=function(e){n.push(e)},a.onflush=function(){t.trigger({type:'loadeddata',target:t})},a.parse(e),0<n.length&&(Ve.a.console&&Ve.a.console.groupCollapsed&&Ve.a.console.groupCollapsed('Text Track parsing errors for '+t.src),n.forEach(function(e){return Ot.error(e)}),Ve.a.console&&Ve.a.console.groupEnd&&Ve.a.console.groupEnd()),a.flush()},fn=function(e,t){var a={uri:e},n=gn(e);n&&(a.cors=n),$e()(a,Qt(this,function(e,a,n){return e?Ot.error(e,a):void(t.loaded_=!0,'function'==typeof Ve.a.WebVTT?hn(n,t):t.tech_&&t.tech_.any(['vttjsloaded','vttjserror'],function(e){return'vttjserror'===e.type?void Ot.error('vttjs failed to load, stopping trying to process '+t.src):hn(n,t)}))}))},_n=function(e){function t(t){var a;if(void 0===t&&(t={}),!t.tech)throw new Error('A tech was not provided.');var n=ie(t,{kind:ln[t.kind]||'subtitles',language:t.language||t.srclang||''}),r=dn[n.mode]||'disabled',i=n['default'];('metadata'===n.kind||'chapters'===n.kind)&&(r='hidden'),a=e.call(this,n)||this,a.tech_=n.tech,a.cues_=[],a.activeCues_=[];var s=new nn(a.cues_),o=new nn(a.activeCues_),d=!1,l=Qt(pe(a),function(){this.activeCues=this.activeCues,d&&(this.trigger('cuechange'),d=!1)});return'disabled'!==r&&a.tech_.ready(function(){a.tech_.on('timeupdate',l)},!0),Object.defineProperties(pe(a),{default:{get:function(){return i},set:function(){}},mode:{get:function(){return r},set:function(e){var t=this;dn[e]&&(r=e,'disabled'===r?this.tech_.off('timeupdate',l):this.tech_.ready(function(){t.tech_.on('timeupdate',l)},!0),this.trigger('modechange'))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],a=0,n=this.cues.length,r;a<n;a++)r=this.cues[a],r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r);if(d=!1,t.length!==this.activeCues_.length)d=!0;else for(var i=0;i<t.length;i++)-1===this.activeCues_.indexOf(t[i])&&(d=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),n.src?(a.src=n.src,fn(n.src,pe(a))):a.loaded_=!0,a}se(t,e);var a=t.prototype;return a.addCue=function(e){var t=e;if(Ve.a.vttjs&&!(e instanceof Ve.a.vttjs.VTTCue)){for(var a in t=new Ve.a.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)a in t||(t[a]=e[a]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},a.removeCue=function(e){for(var t=this.cues_.length,a;t--;)if(a=this.cues_[t],a===e||a.originalCue_&&a.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}},t}(pn);_n.prototype.allowedEvents_={cuechange:'cuechange'};var bn=function(e){function t(t){var a;void 0===t&&(t={});var n=ie(t,{kind:sn[t.kind]||''});a=e.call(this,n)||this;var r=!1;return Object.defineProperty(pe(a),'enabled',{get:function(){return r},set:function(e){'boolean'!=typeof e||e===r||(r=e,this.trigger('enabledchange'))}}),n.enabled&&(a.enabled=n.enabled),a.loaded_=!0,a}return se(t,e),t}(pn),vn=function(e){function t(t){var a;void 0===t&&(t={});var n=ie(t,{kind:rn[t.kind]||''});a=e.call(this,n)||this;var r=!1;return Object.defineProperty(pe(a),'selected',{get:function(){return r},set:function(e){'boolean'!=typeof e||e===r||(r=e,this.trigger('selectedchange'))}}),n.selected&&(a.selected=n.selected),a}return se(t,e),t}(pn),Tn=0,kn=2,Sn=function(e){function t(t){var a;void 0===t&&(t={}),a=e.call(this)||this;var n=new _n(t),r;return a.kind=n.kind,a.src=n.src,a.srclang=n.language,a.label=n.label,a['default']=n['default'],Object.defineProperties(pe(a),{readyState:{get:function(){return r}},track:{get:function(){return n}}}),r=Tn,n.addEventListener('loadeddata',function(){r=kn,a.trigger({type:'load',target:pe(a)})}),a}return se(t,e),t}(ta);Sn.prototype.allowedEvents_={load:'load'},Sn.NONE=Tn,Sn.LOADING=1,Sn.LOADED=kn,Sn.ERROR=3;var Cn={audio:{ListClass:Qa,TrackClass:bn,capitalName:'Audio'},video:{ListClass:en,TrackClass:vn,capitalName:'Video'},text:{ListClass:tn,TrackClass:_n,capitalName:'Text'}};Object.keys(Cn).forEach(function(e){Cn[e].getterName=e+'Tracks',Cn[e].privateName=e+'Tracks_'});var En={remoteText:{ListClass:tn,TrackClass:_n,capitalName:'RemoteText',getterName:'remoteTextTracks',privateName:'remoteTextTracks_'},remoteTextEl:{ListClass:an,TrackClass:Sn,capitalName:'RemoteTextTrackEls',getterName:'remoteTextTrackEls',privateName:'remoteTextTrackEls_'}},Ln=ie(Cn,En);En.names=Object.keys(En),Cn.names=Object.keys(Cn),Ln.names=[].concat(En.names).concat(Cn.names);var wn=function(e){function t(t,a){var n;return void 0===t&&(t={}),void 0===a&&(a=function(){}),t.reportTouchActivity=!1,n=e.call(this,null,t,a)||this,n.hasStarted_=!1,n.on('playing',function(){this.hasStarted_=!0}),n.on('loadstart',function(){this.hasStarted_=!1}),Ln.names.forEach(function(e){var a=Ln[e];t&&t[a.getterName]&&(n[a.privateName]=t[a.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),['Text','Audio','Video'].forEach(function(e){!1===t['native'+e+'Tracks']&&(n['featuresNative'+e+'Tracks']=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?n.featuresNativeTextTracks=!1:(!0===t.nativeCaptions||!0===t.nativeTextTracks)&&(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new Ln.text.ListClass,n.initTrackListeners(),t.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||'Unknown Tech'),n}se(t,e);var a=t.prototype;return a.triggerSourceset=function(e){var t=this;this.isReady_||this.one('ready',function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:'sourceset'})},a.manualProgressOn=function(){this.on('durationchange',this.onDurationChange),this.manualProgress=!0,this.one('ready',this.trackProgress)},a.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off('durationchange',this.onDurationChange)},a.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Qt(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger('progress'),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},a.onDurationChange=function(){this.duration_=this.duration()},a.buffered=function(){return ge(0,0)},a.bufferedPercent=function(){return ye(this.buffered(),this.duration_)},a.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},a.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on('play',this.trackCurrentTime),this.on('pause',this.stopTrackingCurrentTime)},a.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off('play',this.trackCurrentTime),this.off('pause',this.stopTrackingCurrentTime)},a.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:'timeupdate',target:this,manuallyTriggered:!0})},250)},a.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:'timeupdate',target:this,manuallyTriggered:!0})},a.dispose=function(){this.clearTracks(Cn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},a.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(e){for(var a=t[e+'Tracks']()||[],n=a.length,r;n--;)r=a[n],'text'===e&&t.removeRemoteTextTrack(r),a.removeTrack(r)})},a.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length,a;t--;)a=e[t],this.removeRemoteTextTrack(a)},a.reset=function(){},a.error=function(e){return void 0!==e&&(this.error_=new he(e),this.trigger('error')),this.error_},a.played=function(){return this.hasStarted_?ge(0,0):ge()},a.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:'timeupdate',target:this,manuallyTriggered:!0})},a.initTrackListeners=function(){var e=this;Cn.names.forEach(function(t){var a=Cn[t],n=function(){e.trigger(t+'trackchange')},r=e[a.getterName]();r.addEventListener('removetrack',n),r.addEventListener('addtrack',n),e.on('dispose',function(){r.removeEventListener('removetrack',n),r.removeEventListener('addtrack',n)})})},a.addWebVttScript_=function(){var e=this;if(!Ve.a.WebVTT)if(qe.a.body.contains(this.el())){if(!this.options_['vtt.js']&&m(Ze.a)&&0<Object.keys(Ze.a).length)return void this.trigger('vttjsloaded');var t=qe.a.createElement('script');t.src=this.options_['vtt.js']||'https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js',t.onload=function(){e.trigger('vttjsloaded')},t.onerror=function(){e.trigger('vttjserror')},this.on('dispose',function(){t.onload=null,t.onerror=null}),Ve.a.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},a.emulateTextTracks=function(){var e=this,t=this.textTracks(),a=this.remoteTextTracks(),n=function(a){return t.addTrack(a.track)},r=function(a){return t.removeTrack(a.track)};a.on('addtrack',n),a.on('removetrack',r),this.addWebVttScript_();var s=function(){return e.trigger('texttrackchange')},o=function(){s();for(var e=0,a;e<t.length;e++)a=t[e],a.removeEventListener('cuechange',s),'showing'===a.mode&&a.addEventListener('cuechange',s)};o(),t.addEventListener('change',o),t.addEventListener('addtrack',o),t.addEventListener('removetrack',o),this.on('dispose',function(){a.off('addtrack',n),a.off('removetrack',r),t.removeEventListener('change',o),t.removeEventListener('addtrack',o),t.removeEventListener('removetrack',o);for(var e=0,i;e<t.length;e++)i=t[e],i.removeEventListener('cuechange',s)})},a.addTextTrack=function(e,t,a){if(!e)throw new Error('TextTrack kind is required but was not provided');return be(this,e,t,a)},a.createRemoteTextTrack=function(e){var t=ie(e,{tech:this});return new En.remoteTextEl.TrackClass(t)},a.addRemoteTextTrack=function(e,t){var a=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(Ot.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(n.track)}),n},a.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},a.getVideoPlaybackQuality=function(){return{}},a.requestPictureInPicture=function(){var e=this.options_.Promise||Ve.a.Promise;if(e)return e.reject()},a.setPoster=function(){},a.playsinline=function(){},a.setPlaysinline=function(){},a.overrideNativeAudioTracks=function(){},a.overrideNativeVideoTracks=function(){},a.canPlayType=function(){return''},t.canPlayType=function(){return''},t.canPlaySource=function(e){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,a){if(t.techs_||(t.techs_={}),!t.isTech(a))throw new Error('Tech '+e+' must be a Tech');if(!t.canPlayType)throw new Error('Techs must have a static canPlayType method on them');if(!t.canPlaySource)throw new Error('Techs must have a static canPlaySource method on them');return e=ga(e),t.techs_[e]=a,t.techs_[ma(e)]=a,'Tech'!==e&&t.defaultTechOrder_.push(e),a},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=ga(e),Ve.a&&Ve.a.videojs&&Ve.a.videojs[e])?(Ot.warn('The '+e+' tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)'),Ve.a.videojs[e]):void 0},t}(ha);Ln.names.forEach(function(e){var t=Ln[e];wn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),wn.prototype.featuresVolumeControl=!0,wn.prototype.featuresMuteControl=!0,wn.prototype.featuresFullscreenResize=!1,wn.prototype.featuresPlaybackRate=!1,wn.prototype.featuresProgressEvents=!1,wn.prototype.featuresSourceset=!1,wn.prototype.featuresTimeupdateEvents=!1,wn.prototype.featuresNativeTextTracks=!1,wn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,a){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===a&&(a=n.length),n.splice(a,0,t)},e.canPlayType=function(t){for(var a=e.sourceHandlers||[],n=0,r;n<a.length;n++)if(r=a[n].canPlayType(t),r)return r;return''},e.selectSourceHandler=function(t,a){for(var n=e.sourceHandlers||[],r=0,i;r<n.length;r++)if(i=n[r].canHandleSource(t,a),i)return n[r];return null},e.canPlaySource=function(t,a){var n=e.selectSourceHandler(t,a);return n?n.canHandleSource(t,a):''};['seekable','seeking','duration'].forEach(function(e){var t=this[e];'function'!=typeof t||(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var a=e.selectSourceHandler(t,this.options_);a||(e.nativeSourceHandler?a=e.nativeSourceHandler:Ot.error('No source handler found for the current source.')),this.disposeSourceHandler(),this.off('dispose',this.disposeSourceHandler),a!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=a.handleSource(t,this,this.options_),this.one('dispose',this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(['audio','video']),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ha.registerComponent('Tech',wn),wn.registerTech('Tech',wn),wn.defaultTechOrder_=[];var xn={},Pn={},In={},Mn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},Dn={setCurrentTime:1,setVolume:1},On={play:1,pause:1},An={opus:'video/ogg',ogv:'video/ogg',mp4:'video/mp4',mov:'video/mp4',m4v:'video/mp4',mkv:'video/x-matroska',m4a:'audio/mp4',mp3:'audio/mpeg',aac:'audio/aac',oga:'audio/ogg',m3u8:'application/x-mpegURL',jpg:'image/jpeg',jpeg:'image/jpeg',gif:'image/gif',png:'image/png',svg:'image/svg+xml',webp:'image/webp'},Rn=function(e){void 0===e&&(e='');var t=mn(e),a=An[t.toLowerCase()];return a||''},Nn=function(e,t){if(!t)return'';if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var a=e.cache_.sources.filter(function(e){return e.src===t});if(a.length)return a[0].type;for(var n=e.$$('source'),r=0,i;r<n.length;r++)if(i=n[r],i.type&&i.src&&i.src===t)return i.type;return Rn(t)},Un=function e(t){if(Array.isArray(t)){var a=[];t.forEach(function(t){t=e(t),Array.isArray(t)?a=a.concat(t):c(t)&&a.push(t)}),t=a}else t='string'==typeof t&&t.trim()?[Ie({src:t})]:c(t)&&'string'==typeof t.src&&t.src&&t.src.trim()?[Ie(t)]:[];return t},Bn=function(e){function t(t,a,n){var r=ie({createEl:!1},a),s;if(s=e.call(this,t,r,n)||this,!a.playerOptions.sources||0===a.playerOptions.sources.length)for(var o=0,i=a.playerOptions.techOrder;o<i.length;o++){var l=ga(i[o]),d=wn.getTech(l);if(l||(d=ha.getComponent(l)),d&&d.isSupported()){t.loadTech_(l);break}}else t.src(a.playerOptions.sources);return s}return se(t,e),t}(ha);ha.registerComponent('MediaLoader',Bn);var Yn=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.emitTapEvents(),n.enable(),n}se(t,e);var a=t.prototype;return a.createEl=function(t,a,n){void 0===t&&(t='div'),void 0===a&&(a={}),void 0===n&&(n={}),a=u({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},a),'button'===t&&Ot.error('Creating a ClickableComponent with an HTML element of '+t+' is not supported; use a Button instead.'),n=u({role:'button'},n),this.tabIndex_=a.tabIndex;var r=e.prototype.createEl.call(this,t,a,n);return this.createControlTextEl(r),r},a.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},a.createControlTextEl=function(e){return this.controlTextEl_=k('span',{className:'vjs-control-text'},{"aria-live":'polite'}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},a.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||'Need Text';var a=this.localize(e);this.controlText_=e,S(this.controlTextEl_,a),this.nonIconControl||t.setAttribute('title',a)},a.buildCSSClass=function(){return'vjs-control vjs-button '+e.prototype.buildCSSClass.call(this)},a.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass('vjs-disabled'),this.el_.setAttribute('aria-disabled','false'),'undefined'!=typeof this.tabIndex_&&this.el_.setAttribute('tabIndex',this.tabIndex_),this.on(['tap','click'],this.handleClick),this.on('keydown',this.handleKeyDown))},a.disable=function(){this.enabled_=!1,this.addClass('vjs-disabled'),this.el_.setAttribute('aria-disabled','true'),'undefined'!=typeof this.tabIndex_&&this.el_.removeAttribute('tabIndex'),this.off('mouseover',this.handleMouseOver),this.off('mouseout',this.handleMouseOut),this.off(['tap','click'],this.handleClick),this.off('keydown',this.handleKeyDown)},a.handleClick=function(){},a.handleKeyDown=function(t){Xe.a.isEventKey(t,'Space')||Xe.a.isEventKey(t,'Enter')?(t.preventDefault(),t.stopPropagation(),this.trigger('click')):e.prototype.handleKeyDown.call(this,t)},t}(ha);ha.registerComponent('ClickableComponent',Yn);var Fn=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.update(),t.on('posterchange',Qt(pe(n),n.update)),n}se(t,e);var a=t.prototype;return a.dispose=function(){this.player().off('posterchange',this.update),e.prototype.dispose.call(this)},a.createEl=function(){var e=k('div',{className:'vjs-poster',tabIndex:-1});return e},a.update=function(){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},a.setSrc=function(e){var t='';e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},a.handleClick=function(){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?_e(this.player_.play()):this.player_.pause())},t}(Yn);ha.registerComponent('PosterImage',Fn);var jn='#222',Hn='#ccc',Vn={monospace:'monospace',sansSerif:'sans-serif',serif:'serif',monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:'sans-serif',proportionalSerif:'serif',casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},zn=function(e){function t(t,a,n){var r=e.call(this,t,a,n)||this;var s=Qt(pe(r),r.updateDisplay);return t.on('loadstart',Qt(pe(r),r.toggleDisplay)),t.on('texttrackchange',s),t.on('loadedmetadata',Qt(pe(r),r.preselectTrack)),t.ready(Qt(pe(r),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)return void this.hide();t.on('fullscreenchange',s),t.on('playerresize',s),Ve.a.addEventListener('orientationchange',s),t.on('dispose',function(){return Ve.a.removeEventListener('orientationchange',s)});for(var e=this.options_.playerOptions.tracks||[],a=0;a<e.length;a++)this.player_.addRemoteTextTrack(e[a],!0);this.preselectTrack()})),r}se(t,e);var a=t.prototype;return a.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,n=0,r,i,s,o;n<t.length;n++)o=t[n],a&&a.enabled&&a.language&&a.language===o.language&&o.kind in e?o.kind===a.kind?s=o:!s&&(s=o):a&&!a.enabled?(s=null,r=null,i=null):o['default']&&('descriptions'!==o.kind||r?o.kind in e&&!i&&(i=o):r=o);s?s.mode='showing':i?i.mode='showing':r&&(r.mode='showing')},a.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-text-track-display'},{"aria-live":'off',"aria-atomic":'true'})},a.clearDisplay=function(){'function'==typeof Ve.a.WebVTT&&Ve.a.WebVTT.processCues(Ve.a,[],this.el_)},a.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var a=[],n=0,r;n<e.length;++n)(r=e[n],'showing'===r.mode)&&a.push(r);return void this.updateForTrack(a)}for(var s=null,o=null,l=e.length,i;l--;)i=e[l],'showing'===i.mode&&('descriptions'===i.kind?s=i:o=i);o?('off'!==this.getAttribute('aria-live')&&this.setAttribute('aria-live','off'),this.updateForTrack(o)):s&&('assertive'!==this.getAttribute('aria-live')&&this.setAttribute('aria-live','assertive'),this.updateForTrack(s))},a.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),a=e.activeCues,n=a.length,r;n--;)if(r=a[n],r){var i=r.displayState;if(t.color&&(i.firstChild.style.color=t.color),t.textOpacity&&De(i.firstChild,'color',Me(t.color||'#fff',t.textOpacity)),t.backgroundColor&&(i.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&De(i.firstChild,'backgroundColor',Me(t.backgroundColor||'#000',t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?De(i,'backgroundColor',Me(t.windowColor,t.windowOpacity)):i.style.backgroundColor=t.windowColor),t.edgeStyle&&('dropshadow'===t.edgeStyle?i.firstChild.style.textShadow='2px 2px 3px '+jn+', 2px 2px 4px '+jn+', 2px 2px 5px '+jn:'raised'===t.edgeStyle?i.firstChild.style.textShadow='1px 1px '+jn+', 2px 2px '+jn+', 3px 3px '+jn:'depressed'===t.edgeStyle?i.firstChild.style.textShadow='1px 1px '+Hn+', 0 1px '+Hn+', -1px -1px '+jn+', 0 -1px '+jn:'uniform'===t.edgeStyle&&(i.firstChild.style.textShadow='0 0 4px '+jn+', 0 0 4px '+jn+', 0 0 4px '+jn+', 0 0 4px '+jn)),t.fontPercent&&1!==t.fontPercent){var s=Ve.a.parseFloat(i.style.fontSize);i.style.fontSize=s*t.fontPercent+'px',i.style.height='auto',i.style.top='auto',i.style.bottom='2px'}t.fontFamily&&'default'!==t.fontFamily&&('small-caps'===t.fontFamily?i.firstChild.style.fontVariant='small-caps':i.firstChild.style.fontFamily=Vn[t.fontFamily])}},a.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),!('function'!=typeof Ve.a.WebVTT||e.every(function(e){return!e.activeCues}))){for(var t=[],a=0,n;a<e.length;++a){n=e[a];for(var r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r])}Ve.a.WebVTT.processCues(Ve.a,t,this.el_);for(var i=0,s;i<e.length;++i){s=e[i];for(var o=0,l;o<s.activeCues.length;++o)l=s.activeCues[o].displayState,L(l,'vjs-text-track-cue'),L(l,'vjs-text-track-cue-'+(s.language?s.language:i));this.player_.textTrackSettings&&this.updateDisplayState(s)}}},t}(ha);ha.registerComponent('TextTrackDisplay',zn);var qn=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.createEl=function(){var t=this.player_.isAudio(),a=this.localize(t?'Audio Player':'Video Player'),n=k('span',{className:'vjs-control-text',innerHTML:this.localize('{1} is loading.',[a])}),r=e.prototype.createEl.call(this,'div',{className:'vjs-loading-spinner',dir:'ltr'});return r.appendChild(n),r},t}(ha);ha.registerComponent('LoadingSpinner',qn);var Wn=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.createEl=function(e,t,a){void 0===t&&(t={}),void 0===a&&(a={}),e='button',t=u({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),a=u({type:'button'},a);var n=ha.prototype.createEl.call(this,e,t,a);return this.createControlTextEl(n),n},a.addChild=function(e,t){void 0===t&&(t={});var a=this.constructor.name;return Ot.warn('Adding an actionable (user controllable) child to a Button ('+a+') is not supported; use a ClickableComponent instead.'),ha.prototype.addChild.call(this,e,t)},a.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute('disabled')},a.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute('disabled','disabled')},a.handleKeyDown=function(t){return Xe.a.isEventKey(t,'Space')||Xe.a.isEventKey(t,'Enter')?void t.stopPropagation():void e.prototype.handleKeyDown.call(this,t)},t}(Yn);ha.registerComponent('Button',Wn);var Gn=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.mouseused_=!1,n.on('mousedown',n.handleMouseDown),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-big-play-button'},a.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return _e(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var a=this.player_.getChild('controlBar'),n=a&&a.getChild('playToggle');if(!n)return void this.player_.tech(!0).focus();var r=function(){return n.focus()};fe(t)?t.then(r,function(){}):this.setTimeout(r,1)},a.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},a.handleMouseDown=function(){this.mouseused_=!0},t}(Wn);Gn.prototype.controlText_='Play Video',ha.registerComponent('BigPlayButton',Gn);var Kn=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.controlText(a&&a.controlText||n.localize('Close')),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-close-button '+e.prototype.buildCSSClass.call(this)},a.handleClick=function(){this.trigger({type:'close',bubbles:!1})},a.handleKeyDown=function(t){Xe.a.isEventKey(t,'Esc')?(t.preventDefault(),t.stopPropagation(),this.trigger('click')):e.prototype.handleKeyDown.call(this,t)},t}(Wn);ha.registerComponent('CloseButton',Kn);var Xn=function(e){function t(t,a){var n;return void 0===a&&(a={}),n=e.call(this,t,a)||this,a.replay=void 0===a.replay||a.replay,n.on(t,'play',n.handlePlay),n.on(t,'pause',n.handlePause),a.replay&&n.on(t,'ended',n.handleEnded),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-play-control '+e.prototype.buildCSSClass.call(this)},a.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},a.handleSeeked=function(e){this.removeClass('vjs-ended'),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},a.handlePlay=function(){this.removeClass('vjs-ended'),this.removeClass('vjs-paused'),this.addClass('vjs-playing'),this.controlText('Pause')},a.handlePause=function(){this.removeClass('vjs-playing'),this.addClass('vjs-paused'),this.controlText('Play')},a.handleEnded=function(){this.removeClass('vjs-playing'),this.addClass('vjs-ended'),this.controlText('Replay'),this.one(this.player_,'seeked',this.handleSeeked)},t}(Wn);Xn.prototype.controlText_='Play',ha.registerComponent('PlayToggle',Xn);var Jn=function(e,t){e=0>e?0:e;var a=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),i=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===Infinity)&&(r=n=a='-'),r=0<r||0<s?r+':':'',n=((r||10<=i)&&10>n?'0'+n:n)+':',a=10>a?'0'+a:a,r+n+a},$n=Jn,Qn=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.throttledUpdateContent=Zt(Qt(pe(n),n.updateContent),$t),n.on(t,'timeupdate',n.throttledUpdateContent),n}se(t,e);var a=t.prototype;return a.createEl=function(){var t=this.buildCSSClass(),a=e.prototype.createEl.call(this,'div',{className:t+' vjs-time-control vjs-control',innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+'\xA0</span>'});return this.contentEl_=k('span',{className:t+'-display'},{"aria-live":'off',role:'presentation'}),this.updateTextNode_(),a.appendChild(this.contentEl_),a},a.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},a.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=qe.a.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},a.formatTime_=function(e){return Oe(e)},a.updateFormattedTime_=function(e){var t=this.formatTime_(e);t===this.formattedTime_||(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},a.updateContent=function(){},t}(ha);Qn.prototype.labelText_='Time',Qn.prototype.controlText_='Time',ha.registerComponent('TimeDisplay',Qn);var Zn=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.on(t,'ended',n.handleEnded),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-current-time'},a.updateContent=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)},a.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(Qn);Zn.prototype.labelText_='Current Time',Zn.prototype.controlText_='Current Time',ha.registerComponent('CurrentTimeDisplay',Zn);var er=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.on(t,'durationchange',n.updateContent),n.on(t,'loadstart',n.updateContent),n.on(t,'loadedmetadata',n.throttledUpdateContent),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-duration'},a.updateContent=function(){var e=this.player_.duration();this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},t}(Qn);er.prototype.labelText_='Duration',er.prototype.controlText_='Duration',ha.registerComponent('DurationDisplay',er);var tr=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-time-control vjs-time-divider',innerHTML:'<div><span>/</span></div>'},{"aria-hidden":!0})},t}(ha);ha.registerComponent('TimeDivider',tr);var ar=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.on(t,'durationchange',n.throttledUpdateContent),n.on(t,'ended',n.handleEnded),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-remaining-time'},a.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(k('span',{},{"aria-hidden":!0},'-'),this.contentEl_),t},a.updateContent=function(){'number'!=typeof this.player_.duration()||(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},a.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(0)},t}(Qn);ar.prototype.labelText_='Remaining Time',ar.prototype.controlText_='Remaining Time',ha.registerComponent('RemainingTimeDisplay',ar);var nr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.updateShowing(),n.on(n.player(),'durationchange',n.updateShowing),n}se(t,e);var a=t.prototype;return a.createEl=function(){var t=e.prototype.createEl.call(this,'div',{className:'vjs-live-control vjs-control'});return this.contentEl_=k('div',{className:'vjs-live-display',innerHTML:'<span class="vjs-control-text">'+this.localize('Stream Type')+'\xA0</span>'+this.localize('LIVE')},{"aria-live":'off'}),t.appendChild(this.contentEl_),t},a.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},a.updateShowing=function(){this.player().duration()===Infinity?this.show():this.hide()},t}(ha);ha.registerComponent('LiveDisplay',nr);var rr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,'liveedgechange',n.updateLiveEdgeStatus),n}se(t,e);var a=t.prototype;return a.createEl=function(){var t=e.prototype.createEl.call(this,'button',{className:'vjs-seek-to-live-control vjs-control'});return this.textEl_=k('span',{className:'vjs-seek-to-live-text',innerHTML:this.localize('LIVE')},{"aria-hidden":'true'}),t.appendChild(this.textEl_),t},a.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute('aria-disabled',!0),this.addClass('vjs-at-live-edge'),this.controlText('Seek to live, currently playing live')):(this.setAttribute('aria-disabled',!1),this.removeClass('vjs-at-live-edge'),this.controlText('Seek to live, currently behind live'))},a.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},a.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,'liveedgechange',this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(Wn);rr.prototype.controlText_='Seek to live, currently playing live',ha.registerComponent('SeekToLive',rr);var ir=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}se(t,e);var a=t.prototype;return a.enabled=function(){return this.enabled_},a.enable=function(){this.enabled()||(this.on('mousedown',this.handleMouseDown),this.on('touchstart',this.handleMouseDown),this.on('keydown',this.handleKeyDown),this.on('click',this.handleClick),this.on(this.player_,'controlsvisible',this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass('disabled'),this.setAttribute('tabindex',0),this.enabled_=!0)},a.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off('mousedown',this.handleMouseDown),this.off('touchstart',this.handleMouseDown),this.off('keydown',this.handleKeyDown),this.off('click',this.handleClick),this.off(this.player_,'controlsvisible',this.update),this.off(e,'mousemove',this.handleMouseMove),this.off(e,'mouseup',this.handleMouseUp),this.off(e,'touchmove',this.handleMouseMove),this.off(e,'touchend',this.handleMouseUp),this.removeAttribute('tabindex'),this.addClass('disabled'),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},a.createEl=function(t,a,n){return void 0===a&&(a={}),void 0===n&&(n={}),a.className+=' vjs-slider',a=u({tabIndex:0},a),n=u({role:'slider',"aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,a,n)},a.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;'mousedown'===e.type&&e.preventDefault(),'touchstart'!==e.type||Ia||e.preventDefault(),A(),this.addClass('vjs-sliding'),this.trigger('slideractive'),this.on(t,'mousemove',this.handleMouseMove),this.on(t,'mouseup',this.handleMouseUp),this.on(t,'touchmove',this.handleMouseMove),this.on(t,'touchend',this.handleMouseUp),this.handleMouseMove(e)},a.handleMouseMove=function(){},a.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;R(),this.removeClass('vjs-sliding'),this.trigger('sliderinactive'),this.off(e,'mousemove',this.handleMouseMove),this.off(e,'mouseup',this.handleMouseUp),this.off(e,'touchmove',this.handleMouseMove),this.off(e,'touchend',this.handleMouseUp),this.update()},a.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){('number'!=typeof e||e!==e||0>e||e===Infinity)&&(e=0);var a=(100*e).toFixed(2)+'%',n=t.el().style,r=this.vertical()?'height':'width';return n[r]!==a&&(n[r]=a),e}}},a.calculateDistance=function(e){var t=B(this.el_,e);return this.vertical()?t.y:t.x},a.handleKeyDown=function(t){Xe.a.isEventKey(t,'Left')||Xe.a.isEventKey(t,'Down')?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Xe.a.isEventKey(t,'Right')||Xe.a.isEventKey(t,'Up')?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},a.handleClick=function(e){e.stopPropagation(),e.preventDefault()},a.vertical=function(e){return void 0===e?this.vertical_||!1:void(this.vertical_=!!e,this.vertical_?this.addClass('vjs-slider-vertical'):this.addClass('vjs-slider-horizontal'))},t}(ha);ha.registerComponent('Slider',ir);var sr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.partEls_=[],n.on(t,'progress',n.update),n}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-load-progress',innerHTML:'<span class="vjs-control-text"><span>'+this.localize('Loaded')+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},a.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},a.update=function(){var e=this.player_.liveTracker,t=this.player_.buffered(),a=e&&e.isLive()?e.seekableEnd():this.player_.duration(),n=this.player_.bufferedEnd(),r=this.partEls_,s=this.$('.vjs-control-text-loaded-percentage'),o=function(e,t,a){var n=e/t||0;return n=100*(1<=n?1:n),a&&(n=n.toFixed(2)),n+'%'};this.el_.style.width=o(n,a),S(s,o(n,a,!0));for(var l=0;l<t.length;l++){var i=t.start(l),d=t.end(l),p=r[l];p||(p=this.el_.appendChild(k()),r[l]=p),p.style.left=o(i,n),p.style.width=o(d-i,n)}for(var u=r.length;u>t.length;u--)this.el_.removeChild(r[u-1]);r.length=t.length},t}(ha);ha.registerComponent('LoadProgressBar',sr);var or=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.update=Zt(Qt(pe(n),n.update),$t),n}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-time-tooltip'},{"aria-hidden":'true'})},a.update=function(e,t,a){var n=N(this.el_),r=N(this.player_.el()),i=e.width*t;if(r&&n){var s=e.left-r.left+i,o=e.width-i+(r.right-e.right),l=n.width/2;s<l?l+=l-s:o<l&&(l=o),0>l?l=0:l>n.width&&(l=n.width),this.el_.style.right='-'+l+'px',this.write(a)}},a.write=function(e){S(this.el_,e)},a.updateTime=function(e,t,a,n){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var i=r.player_.duration(),s;if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var o=r.player_.liveTracker.liveWindow(),l=o-t*o;s=(1>l?'':'-')+Oe(l,o)}else s=Oe(a,i);r.update(e,t,s),n&&n()})},t}(ha);ha.registerComponent('TimeTooltip',or);var lr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.update=Zt(Qt(pe(n),n.update),$t),n}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-play-progress vjs-slider-bar'},{"aria-hidden":'true'})},a.update=function(e,t){var a=this.getChild('timeTooltip');if(a){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(e,t,n)}},t}(ha);lr.prototype.options_={children:[]},Sa||Ea||lr.prototype.options_.children.push('timeTooltip'),ha.registerComponent('PlayProgressBar',lr);var dr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.update=Zt(Qt(pe(n),n.update),$t),n}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-mouse-display'})},a.update=function(e,t){var a=this,n=t*this.player_.duration();this.getChild('timeTooltip').updateTime(e,t,n,function(){a.el_.style.left=e.width*t+'px'})},t}(ha);dr.prototype.options_={children:['timeTooltip']},ha.registerComponent('MouseTimeDisplay',dr);var pr=5,ur=12,cr=30,mr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.setEventHandlers_(),n}se(t,e);var a=t.prototype;return a.setEventHandlers_=function(){this.update=Zt(Qt(this,this.update),cr),this.on(this.player_,'timeupdate',this.update),this.on(this.player_,'ended',this.handleEnded),this.on(this.player_,'durationchange',this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,'liveedgechange',this.update),this.updateInterval=null,this.on(this.player_,['playing'],this.enableInterval_),this.on(this.player_,['ended','pause','waiting'],this.disableInterval_),'hidden'in qe.a&&'visibilityState'in qe.a&&this.on(qe.a,'visibilitychange',this.toggleVisibility_)},a.toggleVisibility_=function(t){qe.a.hidden?this.disableInterval_(t):(this.enableInterval_(),this.requestAnimationFrame(this.update))},a.enableInterval_=function(){var e=this;this.clearInterval(this.updateInterval),this.updateInterval=this.setInterval(function(){e.requestAnimationFrame(e.update)},cr)},a.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&'ended'!==t.type||this.clearInterval(this.updateInterval)},a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-progress-holder'},{"aria-label":this.localize('Progress Bar')})},a.update_=function(e,t){var a=this.player_.liveTracker,n=this.player_.duration();a&&a.isLive()&&(n=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute('aria-valuenow',(100*t).toFixed(2)),this.el_.setAttribute('aria-valuetext',this.localize('progress bar timing: currentTime={1} duration={2}',[Oe(e,n),Oe(n,n)],'{1} of {2}')),this.bar&&this.bar.update(N(this.el_),t)},a.update=function(){if(null!==this.el().offsetParent){var t=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t}},a.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},a.handleEnded=function(){this.update_(this.player_.duration(),1)},a.getPercent=function(){var e=this.getCurrentTime_(),t=this.player_.liveTracker,a;return t&&t.isLive()?(a=(e-t.seekableStart())/t.liveWindow(),t.atLiveEdge()&&(a=1)):a=e/this.player_.duration(),1<=a?1:a||0},a.handleMouseDown=function(t){z(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},a.handleMouseMove=function(e){if(z(e)){var t=this.calculateDistance(e),a=this.player_.liveTracker,n;if(!a||!a.isLive())n=t*this.player_.duration(),n===this.player_.duration()&&(n-=.1);else{var r=a.seekableStart(),i=a.liveCurrentTime();if(n=r+t*a.liveWindow(),n>=i&&(n=i),n<=r&&(n=r+.1),n===Infinity)return}this.player_.currentTime(n)}},a.enable=function(){e.prototype.enable.call(this);var t=this.getChild('mouseTimeDisplay');t&&t.show()},a.disable=function(){e.prototype.disable.call(this);var t=this.getChild('mouseTimeDisplay');t&&t.hide()},a.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:'timeupdate',target:this,manuallyTriggered:!0}),this.videoWasPlaying&&_e(this.player_.play())},a.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+pr)},a.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-pr)},a.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},a.handleKeyDown=function(t){if(Xe.a.isEventKey(t,'Space')||Xe.a.isEventKey(t,'Enter'))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Xe.a.isEventKey(t,'Home'))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(Xe.a.isEventKey(t,'End'))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Xe()(t))){t.preventDefault(),t.stopPropagation();var a=10*(Xe.a.codes[Xe()(t)]-Xe.a.codes[0])/100;this.player_.currentTime(this.player_.duration()*a)}else Xe.a.isEventKey(t,'PgDn')?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-pr*ur)):Xe.a.isEventKey(t,'PgUp')?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+pr*ur)):e.prototype.handleKeyDown.call(this,t)},t}(ir);mr.prototype.options_={children:['loadProgressBar','playProgressBar'],barName:'playProgressBar'},Sa||Ea||mr.prototype.options_.children.splice(1,0,'mouseTimeDisplay'),ha.registerComponent('SeekBar',mr);var gr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.handleMouseMove=Zt(Qt(pe(n),n.handleMouseMove),$t),n.throttledHandleMouseSeek=Zt(Qt(pe(n),n.handleMouseSeek),$t),n.enable(),n}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-progress-control vjs-control'})},a.handleMouseMove=function(e){var t=this.getChild('seekBar');if(t){var a=t.getChild('mouseTimeDisplay'),n=t.el(),r=N(n),i=B(n,e).x;1<i?i=1:0>i&&(i=0),a&&a.update(r,i)}},a.handleMouseSeek=function(e){var t=this.getChild('seekBar');t&&t.handleMouseMove(e)},a.enabled=function(){return this.enabled_},a.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(['mousedown','touchstart'],this.handleMouseDown),this.off(this.el_,'mousemove',this.handleMouseMove),this.handleMouseUp(),this.addClass('disabled'),this.enabled_=!1)},a.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(['mousedown','touchstart'],this.handleMouseDown),this.on(this.el_,'mousemove',this.handleMouseMove),this.removeClass('disabled'),this.enabled_=!0)},a.handleMouseDown=function(e){var t=this.el_.ownerDocument,a=this.getChild('seekBar');a&&a.handleMouseDown(e),this.on(t,'mousemove',this.throttledHandleMouseSeek),this.on(t,'touchmove',this.throttledHandleMouseSeek),this.on(t,'mouseup',this.handleMouseUp),this.on(t,'touchend',this.handleMouseUp)},a.handleMouseUp=function(e){var t=this.el_.ownerDocument,a=this.getChild('seekBar');a&&a.handleMouseUp(e),this.off(t,'mousemove',this.throttledHandleMouseSeek),this.off(t,'touchmove',this.throttledHandleMouseSeek),this.off(t,'mouseup',this.handleMouseUp),this.off(t,'touchend',this.handleMouseUp)},t}(ha);gr.prototype.options_={children:['seekBar']},ha.registerComponent('ProgressControl',gr);var yr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.on(t,['enterpictureinpicture','leavepictureinpicture'],n.handlePictureInPictureChange),qe.a.pictureInPictureEnabled||n.disable(),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-picture-in-picture-control '+e.prototype.buildCSSClass.call(this)},a.handlePictureInPictureChange=function(){this.player_.isInPictureInPicture()?this.controlText('Exit Picture-in-Picture'):this.controlText('Picture-in-Picture')},a.handleClick=function(){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(Wn);yr.prototype.controlText_='Picture-in-Picture',ha.registerComponent('PictureInPictureToggle',yr);var hr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.on(t,'fullscreenchange',n.handleFullscreenChange),!1===qe.a[t.fsApi_.fullscreenEnabled]&&n.disable(),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-fullscreen-control '+e.prototype.buildCSSClass.call(this)},a.handleFullscreenChange=function(){this.player_.isFullscreen()?this.controlText('Non-Fullscreen'):this.controlText('Fullscreen')},a.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(Wn);hr.prototype.controlText_='Fullscreen',ha.registerComponent('FullscreenToggle',hr);var fr=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass('vjs-hidden'),e.on(t,'loadstart',function(){t.tech_.featuresVolumeControl?e.removeClass('vjs-hidden'):e.addClass('vjs-hidden')})},_r=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-volume-level',innerHTML:'<span class="vjs-control-text"></span>'})},t}(ha);ha.registerComponent('VolumeLevel',_r);var br=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.on('slideractive',n.updateLastVolume_),n.on(t,'volumechange',n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-volume-bar vjs-slider-bar'},{"aria-label":this.localize('Volume Level'),"aria-live":'polite'})},a.handleMouseDown=function(t){z(t)&&e.prototype.handleMouseDown.call(this,t)},a.handleMouseMove=function(e){z(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},a.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},a.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},a.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},a.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},a.updateARIAAttributes=function(){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute('aria-valuenow',e),this.el_.setAttribute('aria-valuetext',e+'%')},a.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},a.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one('sliderinactive',function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(ir);br.prototype.options_={children:['volumeLevel'],barName:'volumeLevel'},br.prototype.playerEvent='volumechange',ha.registerComponent('VolumeBar',br);var vr=function(e){function t(t,a){var n;return void 0===a&&(a={}),a.vertical=a.vertical||!1,('undefined'==typeof a.volumeBar||m(a.volumeBar))&&(a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=a.vertical),n=e.call(this,t,a)||this,fr(pe(n),t),n.throttledHandleMouseMove=Zt(Qt(pe(n),n.handleMouseMove),$t),n.on('mousedown',n.handleMouseDown),n.on('touchstart',n.handleMouseDown),n.on(n.volumeBar,['focus','slideractive'],function(){n.volumeBar.addClass('vjs-slider-active'),n.addClass('vjs-slider-active'),n.trigger('slideractive')}),n.on(n.volumeBar,['blur','sliderinactive'],function(){n.volumeBar.removeClass('vjs-slider-active'),n.removeClass('vjs-slider-active'),n.trigger('sliderinactive')}),n}se(t,e);var a=t.prototype;return a.createEl=function(){var t='vjs-volume-horizontal';return this.options_.vertical&&(t='vjs-volume-vertical'),e.prototype.createEl.call(this,'div',{className:'vjs-volume-control vjs-control '+t})},a.handleMouseDown=function(){var e=this.el_.ownerDocument;this.on(e,'mousemove',this.throttledHandleMouseMove),this.on(e,'touchmove',this.throttledHandleMouseMove),this.on(e,'mouseup',this.handleMouseUp),this.on(e,'touchend',this.handleMouseUp)},a.handleMouseUp=function(){var e=this.el_.ownerDocument;this.off(e,'mousemove',this.throttledHandleMouseMove),this.off(e,'touchmove',this.throttledHandleMouseMove),this.off(e,'mouseup',this.handleMouseUp),this.off(e,'touchend',this.handleMouseUp)},a.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(ha);vr.prototype.options_={children:['volumeBar']},ha.registerComponent('VolumeControl',vr);var Tr=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass('vjs-hidden'),e.on(t,'loadstart',function(){t.tech_.featuresMuteControl?e.removeClass('vjs-hidden'):e.addClass('vjs-hidden')})},kr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,Tr(pe(n),t),n.on(t,['loadstart','volumechange'],n.update),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-mute-control '+e.prototype.buildCSSClass.call(this)},a.handleClick=function(){var e=this.player_.volume(),t=this.player_.lastVolume_();if(0===e){var a=.1>t?.1:t;this.player_.volume(a),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},a.update=function(){this.updateIcon_(),this.updateControlText_()},a.updateIcon_=function(){var e=this.player_.volume(),t=3;Sa&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:.33>e?t=1:.67>e&&(t=2);for(var a=0;4>a;a++)w(this.el_,'vjs-vol-'+a);L(this.el_,'vjs-vol-'+t)},a.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume(),t=e?'Unmute':'Mute';this.controlText()!==t&&this.controlText(t)},t}(Wn);kr.prototype.controlText_='Mute',ha.registerComponent('MuteToggle',kr);var Sr=function(e){function t(t,a){var n;return void 0===a&&(a={}),a.inline='undefined'==typeof a.inline||a.inline,('undefined'==typeof a.volumeControl||m(a.volumeControl))&&(a.volumeControl=a.volumeControl||{},a.volumeControl.vertical=!a.inline),n=e.call(this,t,a)||this,n.on(t,['loadstart'],n.volumePanelState_),n.on(n.muteToggle,'keyup',n.handleKeyPress),n.on(n.volumeControl,'keyup',n.handleVolumeControlKeyUp),n.on('keydown',n.handleKeyPress),n.on('mouseover',n.handleMouseOver),n.on('mouseout',n.handleMouseOut),n.on(n.volumeControl,['slideractive'],n.sliderActive_),n.on(n.volumeControl,['sliderinactive'],n.sliderInactive_),n}se(t,e);var a=t.prototype;return a.sliderActive_=function(){this.addClass('vjs-slider-active')},a.sliderInactive_=function(){this.removeClass('vjs-slider-active')},a.volumePanelState_=function(){this.volumeControl.hasClass('vjs-hidden')&&this.muteToggle.hasClass('vjs-hidden')&&this.addClass('vjs-hidden'),this.volumeControl.hasClass('vjs-hidden')&&!this.muteToggle.hasClass('vjs-hidden')&&this.addClass('vjs-mute-toggle-only')},a.createEl=function(){var t='vjs-volume-panel-horizontal';return this.options_.inline||(t='vjs-volume-panel-vertical'),e.prototype.createEl.call(this,'div',{className:'vjs-volume-panel vjs-control '+t})},a.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},a.handleVolumeControlKeyUp=function(e){Xe.a.isEventKey(e,'Esc')&&this.muteToggle.focus()},a.handleMouseOver=function(){this.addClass('vjs-hover'),Q(qe.a,'keyup',Qt(this,this.handleKeyPress))},a.handleMouseOut=function(){this.removeClass('vjs-hover'),Z(qe.a,'keyup',Qt(this,this.handleKeyPress))},a.handleKeyPress=function(e){Xe.a.isEventKey(e,'Esc')&&this.handleMouseOut()},t}(ha);Sr.prototype.options_={children:['muteToggle','volumeControl']},ha.registerComponent('VolumePanel',Sr);var Cr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,a&&(n.menuButton_=a.menuButton),n.focusedChild_=-1,n.on('keydown',n.handleKeyDown),n.boundHandleBlur_=Qt(pe(n),n.handleBlur),n.boundHandleTapClick_=Qt(pe(n),n.handleTapClick),n}se(t,e);var a=t.prototype;return a.addEventListenerForItem=function(e){e instanceof ha&&(this.on(e,'blur',this.boundHandleBlur_),this.on(e,['tap','click'],this.boundHandleTapClick_))},a.removeEventListenerForItem=function(e){e instanceof ha&&(this.off(e,'blur',this.boundHandleBlur_),this.off(e,['tap','click'],this.boundHandleTapClick_))},a.removeChild=function(t){'string'==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},a.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},a.createEl=function(){var t=this.options_.contentElType||'ul';this.contentEl_=k(t,{className:'vjs-menu-content'}),this.contentEl_.setAttribute('role','menu');var a=e.prototype.createEl.call(this,'div',{append:this.contentEl_,className:'vjs-menu'});return a.appendChild(this.contentEl_),Q(a,'click',function(e){e.preventDefault(),e.stopImmediatePropagation()}),a},a.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},a.handleBlur=function(e){var t=e.relatedTarget||qe.a.activeElement;if(!this.children().some(function(e){return e.el()===t})){var a=this.menuButton_;a&&a.buttonPressed_&&t!==a.el().firstChild&&a.unpressButton()}},a.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var a=t.filter(function(t){return t.el()===e.target})[0];if(!a)return;'CaptionSettingsMenuItem'!==a.name()&&this.menuButton_.focus()}},a.handleKeyDown=function(e){Xe.a.isEventKey(e,'Left')||Xe.a.isEventKey(e,'Down')?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Xe.a.isEventKey(e,'Right')||Xe.a.isEventKey(e,'Up'))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},a.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},a.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},a.focus=function(e){void 0===e&&(e=0);var t=this.children().slice(),a=t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className);a&&t.shift(),0<t.length&&(0>e?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(ha);ha.registerComponent('Menu',Cr);var Er=function(e){function t(t,a){var n;void 0===a&&(a={}),n=e.call(this,t,a)||this,n.menuButton_=new Wn(t,a),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute('aria-haspopup','true');var r=Wn.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+' '+r,n.menuButton_.removeClass('vjs-control'),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,'tap',n.handleClick),n.on(n.menuButton_,'click',n.handleClick),n.on(n.menuButton_,'keydown',n.handleKeyDown),n.on(n.menuButton_,'mouseenter',function(){n.addClass('vjs-hover'),n.menu.show(),Q(qe.a,'keyup',Qt(pe(n),n.handleMenuKeyUp))}),n.on('mouseleave',n.handleMouseLeave),n.on('keydown',n.handleSubmenuKeyDown),n}se(t,e);var a=t.prototype;return a.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute('aria-expanded','false'),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},a.createMenu=function(){var e=new Cr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=k('li',{className:'vjs-menu-title',innerHTML:ga(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var a=new ha(this.player_,{el:t});e.addItem(a)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},a.createItems=function(){},a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:this.buildWrapperCSSClass()},{})},a.buildWrapperCSSClass=function(){var t='vjs-menu-button';t+=!0===this.options_.inline?'-inline':'-popup';var a=Wn.prototype.buildCSSClass();return'vjs-menu-button '+t+' '+a+' '+e.prototype.buildCSSClass.call(this)},a.buildCSSClass=function(){var t='vjs-menu-button';return t+=!0===this.options_.inline?'-inline':'-popup','vjs-menu-button '+t+' '+e.prototype.buildCSSClass.call(this)},a.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},a.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},a.handleClick=function(){this.buttonPressed_?this.unpressButton():this.pressButton()},a.handleMouseLeave=function(){this.removeClass('vjs-hover'),Z(qe.a,'keyup',Qt(this,this.handleMenuKeyUp))},a.focus=function(){this.menuButton_.focus()},a.blur=function(){this.menuButton_.blur()},a.handleKeyDown=function(e){Xe.a.isEventKey(e,'Esc')||Xe.a.isEventKey(e,'Tab')?(this.buttonPressed_&&this.unpressButton(),!Xe.a.isEventKey(e,'Tab')&&(e.preventDefault(),this.menuButton_.focus())):(Xe.a.isEventKey(e,'Up')||Xe.a.isEventKey(e,'Down'))&&!this.buttonPressed_&&(e.preventDefault(),this.pressButton())},a.handleMenuKeyUp=function(e){(Xe.a.isEventKey(e,'Esc')||Xe.a.isEventKey(e,'Tab'))&&this.removeClass('vjs-hover')},a.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},a.handleSubmenuKeyDown=function(e){(Xe.a.isEventKey(e,'Esc')||Xe.a.isEventKey(e,'Tab'))&&(this.buttonPressed_&&this.unpressButton(),!Xe.a.isEventKey(e,'Tab')&&(e.preventDefault(),this.menuButton_.focus()))},a.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute('aria-expanded','true'),Sa&&v())return;this.menu.focus()}},a.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute('aria-expanded','false'))},a.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass('vjs-disabled'),this.menuButton_.disable()},a.enable=function(){this.enabled_=!0,this.removeClass('vjs-disabled'),this.menuButton_.enable()},t}(ha);ha.registerComponent('MenuButton',Er);var Lr=function(e){function t(t,a){var n=a.tracks,r;if(r=e.call(this,t,a)||this,1>=r.items.length&&r.hide(),!n)return pe(r);var i=Qt(pe(r),r.update);return n.addEventListener('removetrack',i),n.addEventListener('addtrack',i),r.player_.on('ready',i),r.player_.on('dispose',function(){n.removeEventListener('removetrack',i),n.removeEventListener('addtrack',i)}),r}return se(t,e),t}(Er);ha.registerComponent('TrackButton',Lr);var wr=['Tab','Esc','Up','Down','Right','Left'],xr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.selectable=a.selectable,n.isSelected_=a.selected||!1,n.multiSelectable=a.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute('role','menuitemcheckbox'):n.el_.setAttribute('role','menuitemradio'):n.el_.setAttribute('role','menuitem'),n}se(t,e);var a=t.prototype;return a.createEl=function(t,a,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,'li',u({className:'vjs-menu-item',innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+'</span>',tabIndex:-1},a),n)},a.handleKeyDown=function(t){wr.some(function(e){return Xe.a.isEventKey(t,e)})||e.prototype.handleKeyDown.call(this,t)},a.handleClick=function(){this.selected(!0)},a.selected=function(e){this.selectable&&(e?(this.addClass('vjs-selected'),this.el_.setAttribute('aria-checked','true'),this.controlText(', selected'),this.isSelected_=!0):(this.removeClass('vjs-selected'),this.el_.setAttribute('aria-checked','false'),this.controlText(''),this.isSelected_=!1))},t}(Yn);ha.registerComponent('MenuItem',xr);var Pr=function(e){function t(t,a){var n=a.track,r=t.textTracks(),i;a.label=n.label||n.language||'Unknown',a.selected='showing'===n.mode,i=e.call(this,t,a)||this,i.track=n,i.kinds=(a.kinds||[a.kind||i.track.kind]).filter(Boolean);var s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];i.handleTracksChange.apply(pe(i),t)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];i.handleSelectedLanguageChange.apply(pe(i),t)};if(t.on(['loadstart','texttrackchange'],s),r.addEventListener('change',s),r.addEventListener('selectedlanguagechange',o),i.on('dispose',function(){t.off(['loadstart','texttrackchange'],s),r.removeEventListener('change',s),r.removeEventListener('selectedlanguagechange',o)}),void 0===r.onchange){var l;i.on(['tap','click'],function(){if('object'!=typeof Ve.a.Event)try{l=new Ve.a.Event('change')}catch(e){}l||(l=qe.a.createEvent('Event'),l.initEvent('change',!0,!0)),r.dispatchEvent(l)})}return i.handleTracksChange(),i}se(t,e);var a=t.prototype;return a.handleClick=function(t){var a=this.track,n=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),!!n)for(var r=0,i;r<n.length;r++)(i=n[r],-1!==this.kinds.indexOf(i.kind))&&(i===a?'showing'!==i.mode&&(i.mode='showing'):'disabled'!==i.mode&&(i.mode='disabled'))},a.handleTracksChange=function(){var e='showing'===this.track.mode;e!==this.isSelected_&&this.selected(e)},a.handleSelectedLanguageChange=function(){if('showing'===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},a.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(xr);ha.registerComponent('TextTrackMenuItem',Pr);var Ir=function(e){function t(t,a){return a.track={player:t,kind:a.kind,kinds:a.kinds,default:!1,mode:'disabled'},a.kinds||(a.kinds=[a.kind]),a.track.label=a.label?a.label:a.kinds.join(' and ')+' off',a.selectable=!0,a.multiSelectable=!1,e.call(this,t,a)||this}se(t,e);var a=t.prototype;return a.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!0,a=0,n=e.length,r;a<n;a++)if(r=e[a],-1<this.options_.kinds.indexOf(r.kind)&&'showing'===r.mode){t=!1;break}t!==this.isSelected_&&this.selected(t)},a.handleSelectedLanguageChange=function(){for(var e=this.player().textTracks(),t=!0,a=0,n=e.length,r;a<n;a++)if(r=e[a],-1<['captions','descriptions','subtitles'].indexOf(r.kind)&&'showing'===r.mode){t=!1;break}t&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Pr);ha.registerComponent('OffTextTrackMenuItem',Ir);var Mr=function(e){function t(t,a){return void 0===a&&(a={}),a.tracks=t.textTracks(),e.call(this,t,a)||this}se(t,e);var a=t.prototype;return a.createItems=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=Pr);var a;this.label_&&(a=this.label_+' off'),e.push(new Ir(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0,i;r<n.length;r++)if(i=n[r],-1<this.kinds_.indexOf(i.kind)){var s=new t(this.player_,{track:i,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass('vjs-'+i.kind+'-menu-item'),e.push(s)}return e},t}(Lr);ha.registerComponent('TextTrackButton',Mr);var Dr=function(e){function t(t,a){var n=a.track,r=a.cue,i=t.currentTime(),s;return a.selectable=!0,a.multiSelectable=!1,a.label=r.text,a.selected=r.startTime<=i&&i<r.endTime,s=e.call(this,t,a)||this,s.track=n,s.cue=r,n.addEventListener('cuechange',Qt(pe(s),s.update)),s}se(t,e);var a=t.prototype;return a.handleClick=function(){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},a.update=function(){var e=this.cue,t=this.player_.currentTime();this.selected(e.startTime<=t&&t<e.endTime)},t}(xr);ha.registerComponent('ChaptersTrackMenuItem',Dr);var Or=function(e){function t(t,a,n){return e.call(this,t,a,n)||this}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-chapters-button '+e.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return'vjs-chapters-button '+e.prototype.buildWrapperCSSClass.call(this)},a.update=function(t){(!this.track_||t&&('addtrack'===t.type||'removetrack'===t.type))&&this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},a.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener('load',this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode='hidden';var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener('load',this.updateHandler_)}}},a.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1,a;0<=t;t--)if(a=e[t],a.kind===this.kind_)return a},a.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ga(this.kind_))},a.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},a.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var a=0,n=t.length;a<n;a++){var r=t[a],i=new Dr(this.player_,{track:this.track_,cue:r});e.push(i)}return e},t}(Mr);Or.prototype.kind_='chapters',Or.prototype.controlText_='Chapters',ha.registerComponent('ChaptersButton',Or);var Ar=function(e){function t(t,a,n){var r=e.call(this,t,a,n)||this;var i=t.textTracks(),s=Qt(pe(r),r.handleTracksChange);return i.addEventListener('change',s),r.on('dispose',function(){i.removeEventListener('change',s)}),r}se(t,e);var a=t.prototype;return a.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!1,a=0,n=e.length,r;a<n;a++)if(r=e[a],r.kind!==this.kind_&&'showing'===r.mode){t=!0;break}t?this.disable():this.enable()},a.buildCSSClass=function(){return'vjs-descriptions-button '+e.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return'vjs-descriptions-button '+e.prototype.buildWrapperCSSClass.call(this)},t}(Mr);Ar.prototype.kind_='descriptions',Ar.prototype.controlText_='Descriptions',ha.registerComponent('DescriptionsButton',Ar);var Rr=function(e){function t(t,a,n){return e.call(this,t,a,n)||this}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-subtitles-button '+e.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return'vjs-subtitles-button '+e.prototype.buildWrapperCSSClass.call(this)},t}(Mr);Rr.prototype.kind_='subtitles',Rr.prototype.controlText_='Subtitles',ha.registerComponent('SubtitlesButton',Rr);var Nr=function(e){function t(t,a){var n;return a.track={player:t,kind:a.kind,label:a.kind+' settings',selectable:!1,default:!1,mode:'disabled'},a.selectable=!1,a.name='CaptionSettingsMenuItem',n=e.call(this,t,a)||this,n.addClass('vjs-texttrack-settings'),n.controlText(', opens '+a.kind+' settings dialog'),n}se(t,e);var a=t.prototype;return a.handleClick=function(){this.player().getChild('textTrackSettings').open()},t}(Pr);ha.registerComponent('CaptionSettingsMenuItem',Nr);var Ur=function(e){function t(t,a,n){return e.call(this,t,a,n)||this}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-captions-button '+e.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return'vjs-captions-button '+e.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')&&(t.push(new Nr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Mr);Ur.prototype.kind_='captions',Ur.prototype.controlText_='Captions',ha.registerComponent('CaptionsButton',Ur);var Br=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.createEl=function(t,a,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);'captions'===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize('Captions')+'</span>\n      '),r+='</span>';var i=e.prototype.createEl.call(this,t,u({innerHTML:r},a),n);return i},t}(Pr);ha.registerComponent('SubsCapsMenuItem',Br);var Yr=function(e){function t(t,a){var n;return void 0===a&&(a={}),n=e.call(this,t,a)||this,n.label_='subtitles',-1<['en','en-us','en-ca','fr-ca'].indexOf(n.player_.language_)&&(n.label_='captions'),n.menuButton_.controlText(ga(n.label_)),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-subs-caps-button '+e.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return'vjs-subs-caps-button '+e.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild('textTrackSettings')&&(t.push(new Nr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,Br),t},t}(Mr);Yr.prototype.kinds_=['captions','subtitles'],Yr.prototype.controlText_='Subtitles',ha.registerComponent('SubsCapsButton',Yr);var Fr=function(e){function t(t,a){var n=a.track,r=t.audioTracks(),i;a.label=n.label||n.language||'Unknown',a.selected=n.enabled,i=e.call(this,t,a)||this,i.track=n,i.addClass('vjs-'+n.kind+'-menu-item');var s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];i.handleTracksChange.apply(pe(i),t)};return r.addEventListener('change',s),i.on('dispose',function(){r.removeEventListener('change',s)}),i}se(t,e);var a=t.prototype;return a.createEl=function(t,a,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);'main-desc'===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize('Descriptions')+'</span>\n      '),r+='</span>';var i=e.prototype.createEl.call(this,t,u({innerHTML:r},a),n);return i},a.handleClick=function(t){var a=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var n=0,r;n<a.length;n++)r=a[n],r.enabled=r===this.track},a.handleTracksChange=function(){this.selected(this.track.enabled)},t}(xr);ha.registerComponent('AudioTrackMenuItem',Fr);var jr=function(e){function t(t,a){return void 0===a&&(a={}),a.tracks=t.audioTracks(),e.call(this,t,a)||this}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-audio-button '+e.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return'vjs-audio-button '+e.prototype.buildWrapperCSSClass.call(this)},a.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),a=0,n;a<t.length;a++)n=t[a],e.push(new Fr(this.player_,{track:n,selectable:!0,multiSelectable:!1}));return e},t}(Lr);jr.prototype.controlText_='Audio Track',ha.registerComponent('AudioTrackButton',jr);var Hr=function(e){function t(t,a){var n=a.rate,r=parseFloat(n,10),i;return a.label=n,a.selected=1===r,a.selectable=!0,a.multiSelectable=!1,i=e.call(this,t,a)||this,i.label=n,i.rate=r,i.on(t,'ratechange',i.update),i}se(t,e);var a=t.prototype;return a.handleClick=function(){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},a.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(xr);Hr.prototype.contentElType='button',ha.registerComponent('PlaybackRateMenuItem',Hr);var Vr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.updateVisibility(),n.updateLabel(),n.on(t,'loadstart',n.updateVisibility),n.on(t,'ratechange',n.updateLabel),n}se(t,e);var a=t.prototype;return a.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=k('div',{className:'vjs-playback-rate-value',innerHTML:'1x'}),t.appendChild(this.labelEl_),t},a.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},a.buildCSSClass=function(){return'vjs-playback-rate '+e.prototype.buildCSSClass.call(this)},a.buildWrapperCSSClass=function(){return'vjs-playback-rate '+e.prototype.buildWrapperCSSClass.call(this)},a.createMenu=function(){var e=new Cr(this.player()),t=this.playbackRates();if(t)for(var a=t.length-1;0<=a;a--)e.addChild(new Hr(this.player(),{rate:t[a]+'x'}));return e},a.updateARIAAttributes=function(){this.el().setAttribute('aria-valuenow',this.player().playbackRate())},a.handleClick=function(){for(var e=this.player().playbackRate(),t=this.playbackRates(),a=t[0],n=0;n<t.length;n++)if(t[n]>e){a=t[n];break}this.player().playbackRate(a)},a.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},a.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},a.updateVisibility=function(){this.playbackRateSupported()?this.removeClass('vjs-hidden'):this.addClass('vjs-hidden')},a.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+'x')},t}(Er);Vr.prototype.controlText_='Playback Rate',ha.registerComponent('PlaybackRateMenuButton',Vr);var zr=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-spacer '+e.prototype.buildCSSClass.call(this)},a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:this.buildCSSClass()})},t}(ha);ha.registerComponent('Spacer',zr);var qr=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-custom-control-spacer '+e.prototype.buildCSSClass.call(this)},a.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML='\xA0',t},t}(zr);ha.registerComponent('CustomControlSpacer',qr);var Wr=function(e){function t(){return e.apply(this,arguments)||this}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'div',{className:'vjs-control-bar',dir:'ltr'})},t}(ha);Wr.prototype.options_={children:['playToggle','volumePanel','currentTimeDisplay','timeDivider','durationDisplay','progressControl','liveDisplay','seekToLive','remainingTimeDisplay','customControlSpacer','playbackRateMenuButton','chaptersButton','descriptionsButton','subsCapsButton','audioTrackButton','fullscreenToggle']},'exitPictureInPicture'in qe.a&&Wr.prototype.options_.children.splice(Wr.prototype.options_.children.length-1,0,'pictureInPictureToggle'),ha.registerComponent('ControlBar',Wr);var Gr=function(e){function t(t,a){var n;return n=e.call(this,t,a)||this,n.on(t,'error',n.open),n}se(t,e);var a=t.prototype;return a.buildCSSClass=function(){return'vjs-error-display '+e.prototype.buildCSSClass.call(this)},a.content=function(){var e=this.player().error();return e?this.localize(e.message):''},t}(Ka);Gr.prototype.options_=ie(Ka.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ha.registerComponent('ErrorDisplay',Gr);var Kr='vjs-text-track-settings',Xr=['#000','Black'],Jr=['#00F','Blue'],$r=['#0FF','Cyan'],Qr=['#0F0','Green'],Zr=['#F0F','Magenta'],ei=['#F00','Red'],ti=['#FFF','White'],ai=['#FF0','Yellow'],ni=['1','Opaque'],ri=['0.5','Semi-Transparent'],ii=['0','Transparent'],si={backgroundColor:{selector:'.vjs-bg-color > select',id:'captions-background-color-%s',label:'Color',options:[Xr,ti,ei,Qr,Jr,ai,Zr,$r]},backgroundOpacity:{selector:'.vjs-bg-opacity > select',id:'captions-background-opacity-%s',label:'Transparency',options:[ni,ri,ii]},color:{selector:'.vjs-fg-color > select',id:'captions-foreground-color-%s',label:'Color',options:[ti,Xr,ei,Qr,Jr,ai,Zr,$r]},edgeStyle:{selector:'.vjs-edge-style > select',id:'%s',label:'Text Edge Style',options:[['none','None'],['raised','Raised'],['depressed','Depressed'],['uniform','Uniform'],['dropshadow','Dropshadow']]},fontFamily:{selector:'.vjs-font-family > select',id:'captions-font-family-%s',label:'Font Family',options:[['proportionalSansSerif','Proportional Sans-Serif'],['monospaceSansSerif','Monospace Sans-Serif'],['proportionalSerif','Proportional Serif'],['monospaceSerif','Monospace Serif'],['casual','Casual'],['script','Script'],['small-caps','Small Caps']]},fontPercent:{selector:'.vjs-font-percent > select',id:'captions-font-size-%s',label:'Font Size',options:[['0.50','50%'],['0.75','75%'],['1.00','100%'],['1.25','125%'],['1.50','150%'],['1.75','175%'],['2.00','200%'],['3.00','300%'],['4.00','400%']],default:2,parser:function(e){return'1.00'===e?null:+e}},textOpacity:{selector:'.vjs-text-opacity > select',id:'captions-foreground-opacity-%s',label:'Transparency',options:[ni,ri]},windowColor:{selector:'.vjs-window-color > select',id:'captions-window-color-%s',label:'Color'},windowOpacity:{selector:'.vjs-window-opacity > select',id:'captions-window-opacity-%s',label:'Transparency',options:[ii,ri,ni]}};si.windowColor.options=si.backgroundColor.options;var oi=function(e){function t(t,a){var n;return a.temporary=!1,n=e.call(this,t,a)||this,n.updateDisplay=Qt(pe(n),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=k('p',{className:'vjs-control-text',textContent:n.localize('End of dialog window.')}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===a.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$('.vjs-done-button'),'click',function(){n.saveSettings(),n.close()}),n.on(n.$('.vjs-default-button'),'click',function(){n.setDefaults(),n.updateDisplay()}),d(si,function(e){n.on(n.$(e.selector),'change',n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}se(t,e);var a=t.prototype;return a.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},a.createElSelect_=function(e,t,a){var n=this;void 0===t&&(t=''),void 0===a&&(a='label');var r=si[e],i=r.id.replace('%s',this.id_),s=[t,i].join(' ').trim();return['<'+a+' id="'+i+'" class="'+('label'===a?'vjs-label':'')+'">',this.localize(r.label),'</'+a+'>','<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=i+'-'+e[1].replace(/\W+/g,'');return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+' '+t+'">',n.localize(e[1]),'</option>'].join('')})).concat('</select>').join('')},a.createElFgColor_=function(){var e='captions-text-legend-'+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize('Text'),'</legend>',this.createElSelect_('color',e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_('textOpacity',e),'</span>','</fieldset>'].join('')},a.createElBgColor_=function(){var e='captions-background-'+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize('Background'),'</legend>',this.createElSelect_('backgroundColor',e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_('backgroundOpacity',e),'</span>','</fieldset>'].join('')},a.createElWinColor_=function(){var e='captions-window-'+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize('Window'),'</legend>',this.createElSelect_('windowColor',e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_('windowOpacity',e),'</span>','</fieldset>'].join('')},a.createElColors_=function(){return k('div',{className:'vjs-track-settings-colors',innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join('')})},a.createElFont_=function(){return k('div',{className:'vjs-track-settings-font',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_('fontPercent','','legend'),'</fieldset>','<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_('edgeStyle','','legend'),'</fieldset>','<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_('fontFamily','','legend'),'</fieldset>'].join('')})},a.createElControls_=function(){var e=this.localize('restore all settings to the default values');return k('div',{className:'vjs-track-settings-controls',innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize('Reset'),'<span class="vjs-control-text"> '+e+'</span>','</button>','<button type="button" class="vjs-done-button">'+this.localize('Done')+'</button>'].join('')})},a.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},a.label=function(){return this.localize('Caption Settings Dialog')},a.description=function(){return this.localize('Beginning of dialog window. Escape will cancel and close the window.')},a.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+' vjs-text-track-settings'},a.getValues=function(){var e=this;return p(si,function(t,a,n){var r=Re(e.$(a.selector),a.parser);return void 0!==r&&(t[n]=r),t},{})},a.setValues=function(e){var t=this;d(si,function(a,n){Ne(t.$(a.selector),e[n],a.parser)})},a.setDefaults=function(){var e=this;d(si,function(t){var a=t.hasOwnProperty('default')?t['default']:0;e.$(t.selector).selectedIndex=a})},a.restoreSettings=function(){var e;try{e=JSON.parse(Ve.a.localStorage.getItem(Kr))}catch(e){Ot.warn(e)}e&&this.setValues(e)},a.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Ve.a.localStorage.setItem(Kr,JSON.stringify(e)):Ve.a.localStorage.removeItem(Kr)}catch(e){Ot.warn(e)}}},a.updateDisplay=function(){var e=this.player_.getChild('textTrackDisplay');e&&e.updateDisplay()},a.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,a=e&&e.captionsButton;t?t.focus():a&&a.focus()},t}(Ka);ha.registerComponent('TextTrackSettings',oi);var li=function(e){function t(t,a){var n=a.ResizeObserver||Ve.a.ResizeObserver,r;null===a.ResizeObserver&&(n=!1);var i=ie({createEl:!n,reportTouchActivity:!1},a);return r=e.call(this,t,i)||this,r.ResizeObserver=a.ResizeObserver||Ve.a.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=ea(function(){r.resizeHandler()},100,!1,pe(r)),n?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(t.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){Z(this,'resize',e),Z(this,'unload',t),t=null};Q(r.el_.contentWindow,'unload',t),Q(r.el_.contentWindow,'resize',e)}},r.one('load',r.loadListener_)),r}se(t,e);var a=t.prototype;return a.createEl=function(){return e.prototype.createEl.call(this,'iframe',{className:'vjs-resize-manager',tabIndex:-1},{"aria-hidden":'true'})},a.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger('playerresize')},a.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off('load',this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(ha);ha.registerComponent('ResizeManager',li);var di=function(e){var t=Math.floor(e.length/2),a=[].concat(e).sort(function(e,t){return e-t});return 0==e.length%2?(a[t-1]+a[t])/2:a[t]},pi=function(e){function t(t,a){var n=ie({createEl:!1},a),r;return r=e.call(this,t,n)||this,r.reset_(),r.on(r.player_,'durationchange',r.handleDurationchange),Da&&'hidden'in qe.a&&'visibilityState'in qe.a&&r.on(qe.a,'visibilitychange',r.handleVisibilityChange),r}se(t,e);var a=t.prototype;return a.handleVisibilityChange=function(){this.player_.duration()!==Infinity||(qe.a.hidden?this.stopTracking():this.startTracking())},a.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),a=2*this.seekableIncrement_+.07;return e!==Infinity&&e-a>=t},a.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e=this.player_.seekable();if(e&&e.length){var t=this.seekableEnd();t!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(t-this.lastSeekEnd_)),3<this.seekableIncrementList_.length&&(this.seekableIncrement_=di(this.seekableIncrementList_))),this.pastSeekEnd_=0,this.lastSeekEnd_=t,this.trigger('seekableendchange')),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger('liveedgechange'))}},a.handleDurationchange=function(){this.player_.duration()===Infinity?this.startTracking():this.stopTracking()},a.startTracking=function(){var e=this;this.isTracking()||(!this.timeupdateSeen_&&(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,'play',this.trackLive_),this.on(this.player_,'pause',this.trackLive_),!this.timeupdateSeen_&&(this.one(this.player_,'play',this.handlePlay),this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,'timeupdate',this.handleTimeupdate)))},a.handlePlay=function(){this.one(this.player_,'timeupdate',this.seekToLiveEdge)},a.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,'play',this.trackLive_),this.off(this.player_,'pause',this.trackLive_),this.off(this.player_,'play',this.handlePlay),this.off(this.player_,'timeupdate',this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,'timeupdate',this.handleTimeupdate),this.handleTimeupdate=null)},a.stopTracking=function(){this.isTracking()&&this.reset_()},a.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],a=e?e.length:0;a--;)t.push(e.end(a));return t.length?t.sort()[t.length-1]:Infinity},a.seekableStart=function(){for(var e=this.player_.seekable(),t=[],a=e?e.length:0;a--;)t.push(e.start(a));return t.length?t.sort()[0]:0},a.liveWindow=function(){var e=this.liveCurrentTime();return e===Infinity?Infinity:e-this.seekableStart()},a.isLive=function(){return this.isTracking()},a.atLiveEdge=function(){return!this.behindLiveEdge()},a.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},a.pastSeekEnd=function(){return this.pastSeekEnd_},a.behindLiveEdge=function(){return this.behindLiveEdge_},a.isTracking=function(){return'number'==typeof this.trackingInterval_},a.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},a.dispose=function(){this.stopTracking(),e.prototype.dispose.call(this)},t}(ha);ha.registerComponent('LiveTracker',pi);var ui=function(e){var t=e.el();if(t.hasAttribute('src'))return e.triggerSourceset(t.src),!0;var a=e.$$('source'),n=[],r='';if(!a.length)return!1;for(var s=0,i;s<a.length;s++)i=a[s].src,i&&-1===n.indexOf(i)&&n.push(i);return!!n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),!0)},ci=Object.defineProperty({},'innerHTML',{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=qe.a.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var a=qe.a.createDocumentFragment();t.childNodes.length;)a.appendChild(t.childNodes[0]);return this.innerText='',Ve.a.Element.prototype.appendChild.call(this,a),this.innerHTML}}),mi=function(e,t){for(var a={},n=0;n<e.length&&(a=Object.getOwnPropertyDescriptor(e[n],t),!(a&&a.set&&a.get));n++);return a.enumerable=!0,a.configurable=!0,a},gi=function(e){return mi([e.el(),Ve.a.HTMLMediaElement.prototype,Ve.a.Element.prototype,ci],'innerHTML')},yi=function(e){var t=e.el();if(!t.resetSourceWatch_){var a={},n=gi(e),r=function(a){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=a.apply(t,r);return ui(e),s}};['append','appendChild','insertAdjacentHTML'].forEach(function(e){t[e]&&(a[e]=t[e],t[e]=r(a[e]))}),Object.defineProperty(t,'innerHTML',ie(n,{set:r(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(a).forEach(function(e){t[e]=a[e]}),Object.defineProperty(t,'innerHTML',n)},e.one('sourceset',t.resetSourceWatch_)}},hi=Object.defineProperty({},'src',{get:function(){return this.hasAttribute('src')?cn(Ve.a.Element.prototype.getAttribute.call(this,'src')):''},set:function(e){return Ve.a.Element.prototype.setAttribute.call(this,'src',e),e}}),fi=function(e){return mi([e.el(),Ve.a.HTMLMediaElement.prototype,hi],'src')},_i=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var a=fi(e),r=t.setAttribute,n=t.load;Object.defineProperty(t,'src',ie(a,{set:function(n){var r=a.set.call(t,n);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(a,n){var i=r.call(t,a,n);return /src/i.test(a)&&e.triggerSourceset(t.src),i},t.load=function(){var a=n.call(t);return ui(e)||(e.triggerSourceset(''),yi(e)),a},t.currentSrc?e.triggerSourceset(t.currentSrc):!ui(e)&&yi(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=n,t.setAttribute=r,Object.defineProperty(t,'src',a),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},bi=function(e){function t(t,a){var n=e.call(this,t,a)||this;var r=t.source,s=!1;if(r&&(n.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var o=n.el_.childNodes,l=o.length,d=[];l--;){var p=o[l],u=p.nodeName.toLowerCase();'track'===u&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(p),n.remoteTextTracks().addTrack(p.track),n.textTracks().addTrack(p.track),!s&&!n.el_.hasAttribute('crossorigin')&&gn(p.src)&&(s=!0)):d.push(p))}for(var c=0;c<d.length;c++)n.el_.removeChild(d[c])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&s&&Ot.warn('Text Tracks are being loaded from another origin but the crossorigin attribute isn\'t used.\nThis may prevent text tracks from loading.'),n.restoreMetadataTracksInIOSNativePlayer_(),(Na||Ta||wa)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}se(t,e);var a=t.prototype;return a.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},a.setupSourcesetHandling_=function(){_i(this)},a.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=function(){a=[];for(var t=0,n;t<e.length;t++)n=e[t],'metadata'===n.kind&&a.push({track:n,storedMode:n.mode})},a;t(),e.addEventListener('change',t),this.on('dispose',function(){return e.removeEventListener('change',t)});var n=function t(){for(var n=0,r;n<a.length;n++)r=a[n],'disabled'===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode);e.removeEventListener('change',t)};this.on('webkitbeginfullscreen',function(){e.removeEventListener('change',t),e.removeEventListener('change',n),e.addEventListener('change',n)}),this.on('webkitendfullscreen',function(){e.removeEventListener('change',t),e.addEventListener('change',t),e.removeEventListener('change',n)})},a.overrideNative_=function(e,t){var a=this;if(t===this['featuresNative'+e+'Tracks']){var n=e.toLowerCase();this[n+'TracksListeners_']&&Object.keys(this[n+'TracksListeners_']).forEach(function(e){var t=a.el()[n+'Tracks'];t.removeEventListener(e,a[n+'TracksListeners_'][e])}),this['featuresNative'+e+'Tracks']=!t,this[n+'TracksListeners_']=null,this.proxyNativeTracksForType_(n)}},a.overrideNativeAudioTracks=function(e){this.overrideNative_('Audio',e)},a.overrideNativeVideoTracks=function(e){this.overrideNative_('Video',e)},a.proxyNativeTracksForType_=function(e){var t=this,a=Cn[e],n=this.el()[a.getterName],r=this[a.getterName]();if(this['featuresNative'+a.capitalName+'Tracks']&&n&&n.addEventListener){var i={change:function(){r.trigger({type:'change',target:r,currentTarget:r,srcElement:r})},addtrack:function(t){r.addTrack(t.track)},removetrack:function(t){r.removeTrack(t.track)}},s=function(){for(var e=[],t=0,a;t<r.length;t++){a=!1;for(var i=0;i<n.length;i++)if(n[i]===r[t]){a=!0;break}a||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[a.getterName+'Listeners_']=i,Object.keys(i).forEach(function(e){var a=i[e];n.addEventListener(e,a),t.on('dispose',function(){return n.removeEventListener(e,a)})}),this.on('loadstart',s),this.on('dispose',function(){return t.off('loadstart',s)})}},a.proxyNativeTracks_=function(){var e=this;Cn.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},a.createEl=function(){var e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){var a=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(a,e),t.disposeMediaElement(e),e=a}else{e=qe.a.createElement('video');var n=this.options_.tag&&I(this.options_.tag),r=ie({},n);Na&&!0===this.options_.nativeControlsForTouch||delete r.controls,P(e,u(r,{id:this.options_.techId,class:'vjs-tech'}))}e.playerId=this.options_.playerId}'undefined'!=typeof this.options_.preload&&D(e,'preload',this.options_.preload);for(var s=['loop','muted','playsinline','autoplay'],o=0;o<s.length;o++){var i=s[o],l=this.options_[i];'undefined'!=typeof l&&(l?D(e,i,i):O(e,i),e[i]=l)}return e},a.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,a=function(){t=!0};this.on('loadstart',a);var n=function(){t||this.trigger('loadstart')};return this.on('loadedmetadata',n),void this.ready(function(){this.off('loadstart',a),this.off('loadedmetadata',n),t||this.trigger('loadstart')})}var r=['loadstart'];r.push('loadedmetadata'),2<=e.readyState&&r.push('loadeddata'),3<=e.readyState&&r.push('canplay'),4<=e.readyState&&r.push('canplaythrough'),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},a.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(t){Ot(t,'Video is not ready. (Video.js)')}},a.duration=function(){var e=this;if(this.el_.duration===Infinity&&Ea&&Ia&&0===this.el_.currentTime){var t=function t(){0<e.el_.currentTime&&(e.el_.duration===Infinity&&e.trigger('durationchange'),e.off('timeupdate',t))};return this.on('timeupdate',t),NaN}return this.el_.duration||NaN},a.width=function(){return this.el_.offsetWidth},a.height=function(){return this.el_.offsetHeight},a.proxyWebkitFullscreen_=function(){var e=this;if('webkitDisplayingFullscreen'in this.el_){var t=function(){this.trigger('fullscreenchange',{isFullscreen:!1})},a=function(){'webkitPresentationMode'in this.el_&&'picture-in-picture'!==this.el_.webkitPresentationMode&&(this.one('webkitendfullscreen',t),this.trigger('fullscreenchange',{isFullscreen:!0}))};this.on('webkitbeginfullscreen',a),this.on('dispose',function(){e.off('webkitbeginfullscreen',a),e.off('webkitendfullscreen',t)})}},a.supportsFullScreen=function(){if('function'==typeof this.el_.webkitEnterFullScreen){var e=Ve.a.navigator&&Ve.a.navigator.userAgent||'';if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},a.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},a.exitFullScreen=function(){this.el_.webkitExitFullScreen()},a.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},a.src=function(e){return void 0===e?this.el_.src:void this.setSrc(e)},a.reset=function(){t.resetMediaElement(this.el_)},a.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},a.setControls=function(e){this.el_.controls=!!e},a.addTextTrack=function(t,a,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,a,n):e.prototype.addTextTrack.call(this,t,a,n)},a.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var a=qe.a.createElement('track');return t.kind&&(a.kind=t.kind),t.label&&(a.label=t.label),(t.language||t.srclang)&&(a.srclang=t.language||t.srclang),t['default']&&(a['default']=t['default']),t.id&&(a.id=t.id),t.src&&(a.src=t.src),a},a.addRemoteTextTrack=function(t,a){var n=e.prototype.addRemoteTextTrack.call(this,t,a);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},a.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var a=this.$$('track'),n=a.length;n--;)(t===a[n]||t===a[n].track)&&this.el().removeChild(a[n])},a.getVideoPlaybackQuality=function(){if('function'==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return'undefined'!=typeof this.el().webkitDroppedFrameCount&&'undefined'!=typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Ve.a.performance&&'function'==typeof Ve.a.performance.now?e.creationTime=Ve.a.performance.now():Ve.a.performance&&Ve.a.performance.timing&&'number'==typeof Ve.a.performance.timing.navigationStart&&(e.creationTime=Ve.a.Date.now()-Ve.a.performance.timing.navigationStart),e},t}(wn);if(_()){bi.TEST_VID=qe.a.createElement('video');var vi=qe.a.createElement('track');vi.kind='captions',vi.srclang='en',vi.label='English',bi.TEST_VID.appendChild(vi)}bi.isSupported=function(){try{bi.TEST_VID.volume=.5}catch(t){return!1}return!!(bi.TEST_VID&&bi.TEST_VID.canPlayType)},bi.canPlayType=function(e){return bi.TEST_VID.canPlayType(e)},bi.canPlaySource=function(e){return bi.canPlayType(e.type)},bi.canControlVolume=function(){try{var e=bi.TEST_VID.volume;return bi.TEST_VID.volume=e/2+.1,e!==bi.TEST_VID.volume}catch(t){return!1}},bi.canMuteVolume=function(){try{var e=bi.TEST_VID.muted;return bi.TEST_VID.muted=!e,bi.TEST_VID.muted?D(bi.TEST_VID,'muted','muted'):O(bi.TEST_VID,'muted','muted'),e!==bi.TEST_VID.muted}catch(t){return!1}},bi.canControlPlaybackRate=function(){if(Ea&&Ia&&58>Ma)return!1;try{var e=bi.TEST_VID.playbackRate;return bi.TEST_VID.playbackRate=e/2+.1,e!==bi.TEST_VID.playbackRate}catch(t){return!1}},bi.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(qe.a.createElement('video'),'src',{get:e,set:e}),Object.defineProperty(qe.a.createElement('audio'),'src',{get:e,set:e}),Object.defineProperty(qe.a.createElement('video'),'innerHTML',{get:e,set:e}),Object.defineProperty(qe.a.createElement('audio'),'innerHTML',{get:e,set:e})}catch(t){return!1}return!0},bi.supportsNativeTextTracks=function(){return Aa||Sa&&Ia},bi.supportsNativeVideoTracks=function(){return!!(bi.TEST_VID&&bi.TEST_VID.videoTracks)},bi.supportsNativeAudioTracks=function(){return!!(bi.TEST_VID&&bi.TEST_VID.audioTracks)},bi.Events=['loadstart','suspend','abort','error','emptied','stalled','loadedmetadata','loadeddata','canplay','canplaythrough','playing','waiting','seeking','seeked','ended','durationchange','timeupdate','progress','play','pause','ratechange','resize','volumechange'],bi.prototype.featuresVolumeControl=bi.canControlVolume(),bi.prototype.featuresMuteControl=bi.canMuteVolume(),bi.prototype.featuresPlaybackRate=bi.canControlPlaybackRate(),bi.prototype.featuresSourceset=bi.canOverrideAttributes(),bi.prototype.movingMediaElementInDOM=!Sa,bi.prototype.featuresFullscreenResize=!0,bi.prototype.featuresProgressEvents=!0,bi.prototype.featuresTimeupdateEvents=!0,bi.prototype.featuresNativeTextTracks=bi.supportsNativeTextTracks(),bi.prototype.featuresNativeVideoTracks=bi.supportsNativeVideoTracks(),bi.prototype.featuresNativeAudioTracks=bi.supportsNativeAudioTracks();var Ti=bi.TEST_VID&&bi.TEST_VID.constructor.prototype.canPlayType,ki=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;bi.patchCanPlayType=function(){!(4<=La)||xa||Ia||(bi.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&ki.test(e)?'maybe':Ti.call(this,e)})},bi.unpatchCanPlayType=function(){var e=bi.TEST_VID.constructor.prototype.canPlayType;return bi.TEST_VID.constructor.prototype.canPlayType=Ti,e},bi.patchCanPlayType(),bi.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute('src'),'function'==typeof e.load&&function(){try{e.load()}catch(t){}}()}},bi.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll('source'),a=t.length;a--;)e.removeChild(t[a]);e.removeAttribute('src'),'function'==typeof e.load&&function(){try{e.load()}catch(t){}}()}},['muted','defaultMuted','autoplay','controls','loop','playsinline'].forEach(function(e){bi.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),['muted','defaultMuted','autoplay','loop','playsinline'].forEach(function(e){bi.prototype['set'+ga(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),['paused','currentTime','buffered','volume','poster','preload','error','seeking','seekable','ended','playbackRate','defaultPlaybackRate','played','networkState','readyState','videoWidth','videoHeight'].forEach(function(e){bi.prototype[e]=function(){return this.el_[e]}}),['volume','src','poster','preload','playbackRate','defaultPlaybackRate'].forEach(function(e){bi.prototype['set'+ga(e)]=function(t){this.el_[e]=t}}),['pause','load','play'].forEach(function(e){bi.prototype[e]=function(){return this.el_[e]()}}),wn.withSourceHandlers(bi),bi.nativeSourceHandler={},bi.nativeSourceHandler.canPlayType=function(e){try{return bi.TEST_VID.canPlayType(e)}catch(t){return''}},bi.nativeSourceHandler.canHandleSource=function(e){if(e.type)return bi.nativeSourceHandler.canPlayType(e.type);if(e.src){var t=mn(e.src);return bi.nativeSourceHandler.canPlayType('video/'+t)}return''},bi.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},bi.nativeSourceHandler.dispose=function(){},bi.registerSourceHandler(bi.nativeSourceHandler),wn.registerTech('Html5',bi);var Si=['progress','abort','suspend','emptied','stalled','loadedmetadata','loadeddata','timeupdate','resize','volumechange','texttrackchange'],Ci={canplay:'CanPlay',canplaythrough:'CanPlayThrough',playing:'Playing',seeked:'Seeked'},Ei=['tiny','xsmall','small','medium','large','xlarge','huge'],Li={};Ei.forEach(function(e){var t='x'===e.charAt(0)?'x-'+e.substring(1):e;Li[e]='vjs-layout-'+t});var wi={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},xi=function(e){function t(a,n,r){var i;if(a.id=a.id||n.id||'vjs_video_'+G(),n=u(t.getTagSettings(a),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if('function'==typeof a.closest){var s=a.closest('[lang]');s&&s.getAttribute&&(n.language=s.getAttribute('lang'))}else for(var o=a;o&&1===o.nodeType;){if(I(o).hasOwnProperty('lang')){n.language=o.getAttribute('lang');break}o=o.parentNode}if(i=e.call(this,null,n,r)||this,i.boundDocumentFullscreenChange_=Qt(pe(i),i.documentFullscreenChange_),i.boundFullWindowOnEscKey_=Qt(pe(i),i.fullWindowOnEscKey),i.log=At(i.id_),i.fsApi_=Ba,i.isPosterFromTech_=!1,i.queuedCallbacks_=[],i.isReady_=!1,i.hasStarted_=!1,i.userActive_=!1,!i.options_||!i.options_.techOrder||!i.options_.techOrder.length)throw new Error('No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?');if(i.tag=a,i.tagAttributes=a&&I(a),i.language(i.options_.language),n.languages){var l={};Object.getOwnPropertyNames(n.languages).forEach(function(e){l[e.toLowerCase()]=n.languages[e]}),i.languages_=l}else i.languages_=t.prototype.options_.languages;i.resetCache_(),i.poster_=n.poster||'',i.controls_=!!n.controls,a.controls=!1,a.removeAttribute('controls'),i.changingSrc_=!1,i.playCallbacks_=[],i.playTerminatedQueue_=[],a.hasAttribute('autoplay')?i.autoplay(!0):i.autoplay(i.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(function(e){if('function'!=typeof i[e])throw new Error('plugin "'+e+'" does not exist')}),i.scrubbing_=!1,i.el_=i.createEl(),ne(pe(i),{eventBusKey:'el_'}),i.fluid_&&i.on('playerreset',i.updateStyleEl_);var d=ie(i.options_);n.plugins&&Object.keys(n.plugins).forEach(function(e){i[e](n.plugins[e])}),i.options_.playerOptions=d,i.middleware_=[],i.initChildren(),i.isAudio('audio'===a.nodeName.toLowerCase()),i.controls()?i.addClass('vjs-controls-enabled'):i.addClass('vjs-controls-disabled'),i.el_.setAttribute('role','region'),i.isAudio()?i.el_.setAttribute('aria-label',i.localize('Audio Player')):i.el_.setAttribute('aria-label',i.localize('Video Player')),i.isAudio()&&i.addClass('vjs-audio'),i.flexNotSupported_()&&i.addClass('vjs-no-flex'),Na&&i.addClass('vjs-touch-enabled'),Sa||i.addClass('vjs-workinghover'),t.players[i.id_]=pe(i);var p=It.split('.')[0];return i.addClass('vjs-v'+p),i.userActive(!0),i.reportUserActivity(),i.one('play',i.listenForUserActivity_),i.on('stageclick',i.handleStageClick_),i.on('keydown',i.handleKeyDown),i.breakpoints(i.options_.breakpoints),i.responsive(i.options_.responsive),i}se(t,e);var a=t.prototype;return a.dispose=function(){var a=this;this.trigger('dispose'),this.off('dispose'),Z(qe.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Z(qe.a,'keydown',this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=''),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),we(this),Ln.names.forEach(function(e){var t=Ln[e],n=a[t.getterName]();n&&n.off&&n.off()}),e.prototype.dispose.call(this)},a.createEl=function(){var t=this.tag,a=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute('data-vjs-player'),n='video-js'===this.tag.tagName.toLowerCase(),r;a?r=this.el_=t.parentNode:!n&&(r=this.el_=e.prototype.createEl.call(this,'div'));var s=I(t);if(n){for(r=this.el_=t,t=this.tag=qe.a.createElement('video');r.children.length;)t.appendChild(r.firstChild);E(r,'video-js')||L(r,'video-js'),r.appendChild(t),a=this.playerElIngest_=r,Object.keys(r).forEach(function(e){try{t[e]=r[e]}catch(t){}})}if(t.setAttribute('tabindex','-1'),s.tabindex='-1',(Da||Ia&&Ra)&&(t.setAttribute('role','application'),s.role='application'),t.removeAttribute('width'),t.removeAttribute('height'),'width'in s&&delete s.width,'height'in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(e){n&&'class'===e||r.setAttribute(e,s[e]),n&&t.setAttribute(e,s[e])}),t.playerId=t.id,t.id+='_html5_api',t.className='vjs-tech',t.player=r.player=this,this.addClass('vjs-paused'),!0!==Ve.a.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Vt('vjs-styles-dimensions');var o=Ut('.vjs-styles-defaults'),l=Ut('head');l.insertBefore(this.styleEl_,o?o.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var d=t.getElementsByTagName('a'),p=0,i;p<d.length;p++)i=d.item(p),L(i,'vjs-hidden'),i.setAttribute('hidden','hidden');return t.initNetworkState_=t.networkState,t.parentNode&&!a&&t.parentNode.insertBefore(r,t),C(t,r),this.children_.unshift(t),this.el_.setAttribute('lang',this.language_),this.el_=r,r},a.width=function(e){return this.dimension('width',e)},a.height=function(e){return this.dimension('height',e)},a.dimension=function(e,t){var a=e+'_';if(void 0===t)return this[a]||0;if(''===t)return this[a]=void 0,void this.updateStyleEl_();var n=parseFloat(t);return isNaN(n)?void Ot.error('Improper value "'+t+'" supplied for for '+e):void(this[a]=n,this.updateStyleEl_())},a.fluid=function(e){return void 0===e?!!this.fluid_:void(this.fluid_=!!e,na(this)&&this.off('playerreset',this.updateStyleEl_),e?(this.addClass('vjs-fluid'),this.fill(!1),ra(function(){this.on('playerreset',this.updateStyleEl_)})):this.removeClass('vjs-fluid'),this.updateStyleEl_())},a.fill=function(e){return void 0===e?!!this.fill_:void(this.fill_=!!e,e?(this.addClass('vjs-fill'),this.fluid(!1)):this.removeClass('vjs-fill'))},a.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error('Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.');this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},a.updateStyleEl_=function(){if(!0===Ve.a.VIDEOJS_NO_DYNAMIC_STYLE){var e='number'==typeof this.width_?this.width_:this.options_.width,t='number'==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();return void(a&&(0<=e&&(a.width=e),0<=t&&(a.height=t)))}var n,r,i,s;i=void 0!==this.aspectRatio_&&'auto'!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+':'+this.videoHeight():'16:9';var o=i.split(':'),l=o[1]/o[0];n=void 0===this.width_?void 0===this.height_?this.videoWidth()||300:this.height_/l:this.width_,r=void 0===this.height_?n*l:this.height_,s=/^[^a-zA-Z]/.test(this.id())?'dimensions-'+this.id():this.id()+'-dimensions',this.addClass(s),zt(this.styleEl_,'\n      .'+s+' {\n        width: '+n+'px;\n        height: '+r+'px;\n      }\n\n      .'+s+'.vjs-fluid {\n        padding-top: '+100*l+'%;\n      }\n    ')},a.loadTech_=function(e,t){var a=this;this.tech_&&this.unloadTech_();var n=ga(e),r=e.charAt(0).toLowerCase()+e.slice(1);'Html5'!==n&&this.tag&&(wn.getTech('Html5').disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var i='string'!=typeof this.autoplay()&&this.autoplay(),s={source:t,autoplay:i,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+'_'+r+'_api',playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_['vtt.js'],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ln.names.forEach(function(e){var t=Ln[e];s[t.getterName]=a[t.privateName]}),u(s,this.options_[n]),u(s,this.options_[r]),u(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime);var o=wn.getTech(e);if(!o)throw new Error('No Tech named \''+n+'\' exists! \''+n+'\' should be registered using videojs.registerTech()\'');this.tech_=new o(s),this.tech_.ready(Qt(this,this.handleTechReady_),!0),Wa.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Si.forEach(function(e){a.on(a.tech_,e,a['handleTech'+ga(e)+'_'])}),Object.keys(Ci).forEach(function(e){a.on(a.tech_,e,function(t){return 0===a.tech_.playbackRate()&&a.tech_.seeking()?void a.queuedCallbacks_.push({callback:a['handleTech'+Ci[e]+'_'].bind(a),event:t}):void a['handleTech'+Ci[e]+'_'](t)})}),this.on(this.tech_,'loadstart',this.handleTechLoadStart_),this.on(this.tech_,'sourceset',this.handleTechSourceset_),this.on(this.tech_,'waiting',this.handleTechWaiting_),this.on(this.tech_,'ended',this.handleTechEnded_),this.on(this.tech_,'seeking',this.handleTechSeeking_),this.on(this.tech_,'play',this.handleTechPlay_),this.on(this.tech_,'firstplay',this.handleTechFirstPlay_),this.on(this.tech_,'pause',this.handleTechPause_),this.on(this.tech_,'durationchange',this.handleTechDurationChange_),this.on(this.tech_,'fullscreenchange',this.handleTechFullscreenChange_),this.on(this.tech_,'enterpictureinpicture',this.handleTechEnterPictureInPicture_),this.on(this.tech_,'leavepictureinpicture',this.handleTechLeavePictureInPicture_),this.on(this.tech_,'error',this.handleTechError_),this.on(this.tech_,'loadedmetadata',this.updateStyleEl_),this.on(this.tech_,'posterchange',this.handleTechPosterChange_),this.on(this.tech_,'textdata',this.handleTechTextData_),this.on(this.tech_,'ratechange',this.handleTechRateChange_),this.usingNativeControls(this.techGet_('controls')),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||'Html5'===n&&this.tag||C(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},a.unloadTech_=function(){var e=this;Ln.names.forEach(function(t){var a=Ln[t];e[a.privateName]=e[a.getterName]()}),this.textTracksJson_=Wa.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_='',this.trigger('posterchange')),this.isPosterFromTech_=!1},a.tech=function(e){return void 0===e&&Ot.warn('Using the tech directly can be dangerous. I hope you know what you\'re doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n'),this.tech_},a.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,'mouseup',this.handleTechClick_),this.on(this.tech_,'dblclick',this.handleTechDoubleClick_),this.on(this.tech_,'touchstart',this.handleTechTouchStart_),this.on(this.tech_,'touchmove',this.handleTechTouchMove_),this.on(this.tech_,'touchend',this.handleTechTouchEnd_),this.on(this.tech_,'tap',this.handleTechTap_)},a.removeTechControlsListeners_=function(){this.off(this.tech_,'tap',this.handleTechTap_),this.off(this.tech_,'touchstart',this.handleTechTouchStart_),this.off(this.tech_,'touchmove',this.handleTechTouchMove_),this.off(this.tech_,'touchend',this.handleTechTouchEnd_),this.off(this.tech_,'mouseup',this.handleTechClick_),this.off(this.tech_,'dblclick',this.handleTechDoubleClick_)},a.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_('setVolume',this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},a.handleTechLoadStart_=function(){this.removeClass('vjs-ended'),this.removeClass('vjs-seeking'),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger('loadstart')):(this.trigger('loadstart'),this.trigger('firstplay')),this.manualAutoplay_(this.autoplay())},a.manualAutoplay_=function(e){var t=this;if(this.tech_&&'string'==typeof e){var a=function(){var e=t.muted();t.muted(!0);var a=function(){t.muted(e)};t.playTerminatedQueue_.push(a);var n=t.play();return fe(n)?n['catch'](a):void 0},n;return'any'===e&&!0!==this.muted()?(n=this.play(),fe(n)&&(n=n['catch'](a))):'muted'===e&&!0!==this.muted()?n=a():n=this.play(),fe(n)?n.then(function(){t.trigger({type:'autoplay-success',autoplay:e})})['catch'](function(){t.trigger({type:'autoplay-failure',autoplay:e})}):void 0}},a.updateSourceCaches_=function(e){void 0===e&&(e='');var t=e,a='';'string'!=typeof t&&(t=e.src,a=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!a&&(a=Nn(this,t)),this.cache_.source=ie({},e,{src:t,type:a});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],s=this.$$('source'),o=[],l=0,i;l<s.length;l++)i=I(s[l]),r.push(i),i.src&&i.src===t&&o.push(i.src);o.length&&!n.length?this.cache_.sources=r:!n.length&&(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},a.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var a=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(a=function(){}),a(r),e.src||this.tech_.any(['sourceset','loadstart'],function(a){if('sourceset'!==a.type){var e=t.techGet('currentSrc');t.lastSource_.tech=e,t.updateSourceCaches_(e)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:'sourceset'})},a.hasStarted=function(e){return void 0===e?this.hasStarted_:void(e===this.hasStarted_||(this.hasStarted_=e,this.hasStarted_?(this.addClass('vjs-has-started'),this.trigger('firstplay')):this.removeClass('vjs-has-started')))},a.handleTechPlay_=function(){this.removeClass('vjs-ended'),this.removeClass('vjs-paused'),this.addClass('vjs-playing'),this.hasStarted(!0),this.trigger('play')},a.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger('ratechange')},a.handleTechWaiting_=function(){var e=this;this.addClass('vjs-waiting'),this.trigger('waiting');var t=this.currentTime();this.on('timeupdate',function a(){t!==e.currentTime()&&(e.removeClass('vjs-waiting'),e.off('timeupdate',a))})},a.handleTechCanPlay_=function(){this.removeClass('vjs-waiting'),this.trigger('canplay')},a.handleTechCanPlayThrough_=function(){this.removeClass('vjs-waiting'),this.trigger('canplaythrough')},a.handleTechPlaying_=function(){this.removeClass('vjs-waiting'),this.trigger('playing')},a.handleTechSeeking_=function(){this.addClass('vjs-seeking'),this.trigger('seeking')},a.handleTechSeeked_=function(){this.removeClass('vjs-seeking'),this.removeClass('vjs-ended'),this.trigger('seeked')},a.handleTechFirstPlay_=function(){this.options_.starttime&&(Ot.warn('Passing the `starttime` option to the player will be deprecated in 6.0'),this.currentTime(this.options_.starttime)),this.addClass('vjs-has-started'),this.trigger('firstplay')},a.handleTechPause_=function(){this.removeClass('vjs-playing'),this.addClass('vjs-paused'),this.trigger('pause')},a.handleTechEnded_=function(){this.addClass('vjs-ended'),this.options_.loop?(this.currentTime(0),this.play()):!this.paused()&&this.pause(),this.trigger('ended')},a.handleTechDurationChange_=function(){this.duration(this.techGet_('duration'))},a.handleTechClick_=function(e){z(e)&&this.controls_&&(this.paused()?_e(this.play()):this.pause())},a.handleTechDoubleClick_=function(e){if(this.controls_){var t=Array.prototype.some.call(this.$$('.vjs-control-bar, .vjs-modal-dialog'),function(t){return t.contains(e.target)});t||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&'function'==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},a.handleTechTap_=function(){this.userActive(!this.userActive())},a.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},a.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},a.handleTechTouchEnd_=function(e){e.preventDefault()},a.handleStageClick_=function(){this.reportUserActivity()},a.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass('vjs-fullscreen'):this.removeClass('vjs-fullscreen')},a.documentFullscreenChange_=function(){var e=this.el(),t=qe.a[this.fsApi_.fullscreenElement]===e;!t&&e.matches?t=e.matches(':'+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(':'+this.fsApi_.fullscreen)),this.isFullscreen(t),!1===this.isFullscreen()&&Z(qe.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed&&this.trigger('fullscreenchange')},a.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger('fullscreenchange')},a.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass('vjs-picture-in-picture'):this.removeClass('vjs-picture-in-picture')},a.handleTechEnterPictureInPicture_=function(){this.isInPictureInPicture(!0)},a.handleTechLeavePictureInPicture_=function(){this.isInPictureInPicture(!1)},a.handleTechError_=function(){var e=this.tech_.error();this.error(e)},a.handleTechTextData_=function(){var e=null;1<arguments.length&&(e=arguments[1]),this.trigger('textdata',e)},a.getCache=function(){return this.cache_},a.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:'',source:{},sources:[],volume:1}},a.techCall_=function(e,t){this.ready(function(){if(e in Dn)return Se(this.middleware_,this.tech_,e,t);if(e in On)return Ce(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(t){throw Ot(t),t}},!0)},a.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Mn)return ke(this.middleware_,this.tech_,t);if(t in On)return Ce(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(a){if(void 0===this.tech_[t])throw Ot('Video.js: '+t+' method not defined for '+this.techName_+' playback technology.',a),a;if('TypeError'===a.name)throw Ot('Video.js: '+t+' unavailable on '+this.techName_+' playback technology element.',a),this.tech_.isReady_=!1,a;throw Ot(a),a}}},a.play=function(){var e=this,t=this.options_.Promise||Ve.a.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},a.play_=function(e){var t=this;void 0===e&&(e=_e),this.playCallbacks_.push(e);var a=!!(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(['ready','loadstart'],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a)return this.waitToPlay_=function(){t.play_()},this.one(['ready','loadstart'],this.waitToPlay_),void(!a&&(Aa||Sa)&&this.load());var n=this.techGet_('play');null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},a.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},a.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},a.pause=function(){this.techCall_('pause')},a.paused=function(){return!1!==this.techGet_('paused')},a.played=function(){return this.techGet_('played')||ge(0,0)},a.scrubbing=function(e){return'undefined'==typeof e?this.scrubbing_:void(this.scrubbing_=!!e,e?this.addClass('vjs-scrubbing'):this.removeClass('vjs-scrubbing'))},a.currentTime=function(e){return'undefined'==typeof e?(this.cache_.currentTime=this.techGet_('currentTime')||0,this.cache_.currentTime):(0>e&&(e=0),void this.techCall_('setCurrentTime',e))},a.duration=function(e){return void 0===e?void 0===this.cache_.duration?NaN:this.cache_.duration:void(e=parseFloat(e),0>e&&(e=Infinity),e!==this.cache_.duration&&(this.cache_.duration=e,e===Infinity?(this.addClass('vjs-live'),this.options_.liveui&&this.player_.liveTracker&&this.addClass('vjs-liveui')):(this.removeClass('vjs-live'),this.removeClass('vjs-liveui')),!isNaN(e)&&this.trigger('durationchange')))},a.remainingTime=function(){return this.duration()-this.currentTime()},a.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},a.buffered=function(){var e=this.techGet_('buffered');return e&&e.length||(e=ge(0,0)),e},a.bufferedPercent=function(){return ye(this.buffered(),this.duration())},a.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),a=e.end(e.length-1);return a>t&&(a=t),a},a.volume=function(e){var t;return void 0===e?(t=parseFloat(this.techGet_('volume')),isNaN(t)?1:t):(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_('setVolume',t),void(0<t&&this.lastVolume_(t)))},a.muted=function(e){return void 0===e?this.techGet_('muted')||!1:void this.techCall_('setMuted',e)},a.defaultMuted=function(e){return void 0===e?this.techGet_('defaultMuted')||!1:this.techCall_('setDefaultMuted',e)},a.lastVolume_=function(e){return void 0!==e&&0!==e?void(this.cache_.lastVolume=e):this.cache_.lastVolume},a.supportsFullScreen=function(){return this.techGet_('supportsFullScreen')||!1},a.isFullscreen=function(e){return void 0===e?!!this.isFullscreen_:(this.isFullscreen_=!!e,void this.toggleFullscreenClass_())},a.requestFullscreen=function(e){var t;this.isFullscreen(!0),this.fsApi_.requestFullscreen?(Q(qe.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),!this.fsApi_.prefixed&&(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),_e(this.el_[this.fsApi_.requestFullscreen](t))):this.tech_.supportsFullScreen()?this.techCall_('enterFullScreen'):(this.enterFullWindow(),this.trigger('fullscreenchange'))},a.exitFullscreen=function(){this.isFullscreen(!1),this.fsApi_.requestFullscreen?_e(qe.a[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_('exitFullScreen'):(this.exitFullWindow(),this.trigger('fullscreenchange'))},a.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=qe.a.documentElement.style.overflow,Q(qe.a,'keydown',this.boundFullWindowOnEscKey_),qe.a.documentElement.style.overflow='hidden',L(qe.a.body,'vjs-full-window'),this.trigger('enterFullWindow')},a.fullWindowOnEscKey=function(e){Xe.a.isEventKey(e,'Esc')&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},a.exitFullWindow=function(){this.isFullWindow=!1,Z(qe.a,'keydown',this.boundFullWindowOnEscKey_),qe.a.documentElement.style.overflow=this.docOrigOverflow,w(qe.a.body,'vjs-full-window'),this.trigger('exitFullWindow')},a.isInPictureInPicture=function(e){return void 0===e?!!this.isInPictureInPicture_:(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_())},a.requestPictureInPicture=function(){if('pictureInPictureEnabled'in qe.a)return this.techGet_('requestPictureInPicture')},a.exitPictureInPicture=function(){if('pictureInPictureEnabled'in qe.a)return qe.a.exitPictureInPicture()},a.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){var a=function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if('input'===t)return-1===['button','checkbox','hidden','radio','reset','submit'].indexOf(e.type);return-1!==['textarea'].indexOf(t)};a(this.el_.ownerDocument.activeElement)||('function'==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},a.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},a=t.fullscreenKey,n=void 0===a?function(e){return Xe.a.isEventKey(e,'f')}:a,r=t.muteKey,i=void 0===r?function(e){return Xe.a.isEventKey(e,'m')}:r,s=t.playPauseKey,o=void 0===s?function(e){return Xe.a.isEventKey(e,'k')||Xe.a.isEventKey(e,'Space')}:s;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();var l=ha.getComponent('FullscreenToggle');!1!==qe.a[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var d=ha.getComponent('MuteToggle');d.prototype.handleClick.call(this,e)}else if(o.call(this,e)){e.preventDefault(),e.stopPropagation();var p=ha.getComponent('PlayToggle');p.prototype.handleClick.call(this,e)}},a.canPlayType=function(e){for(var t=0,a=this.options_.techOrder,n;t<a.length;t++){var r=a[t],i=wn.getTech(r);if(i||(i=ha.getComponent(r)),!i){Ot.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.');continue}if(i.isSupported()&&(n=i.canPlayType(e),n))return n}return''},a.selectSource=function(e){var t=this,a=this.options_.techOrder.map(function(e){return[e,wn.getTech(e)]}).filter(function(e){var t=e[0],a=e[1];return a?a.isSupported():(Ot.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),n=function(e,t,a){var n;return e.some(function(e){return t.some(function(t){if(n=a(e,t),n)return!0})}),n},r=function(e,a){var n=e[0],r=e[1];if(r.canPlaySource(a,t.options_[n.toLowerCase()]))return{source:a,tech:n}},i;return i=this.options_.sourceOrder?n(e,a,function(e){return function(t,a){return e(a,t)}}(r)):n(a,e,r),i||!1},a.src=function(e){var t=this;if('undefined'==typeof e)return this.cache_.src||'';var a=Un(e);return a.length?void(this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),ve(this,a[0],function(e,n){t.middleware_=n,t.cache_.sources=a,t.updateSourceCaches_(e);var r=t.src_(e);return r?1<a.length?t.src(a.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady()):void Te(n,t.tech_)})):void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},a.src_=function(e){var t=this,a=this.selectSource([e]);return!a||(ya(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty('setSource')?this.techCall_('setSource',e):this.techCall_('src',e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){t.changingSrc_=!1}),!1))},a.load=function(){this.techCall_('load')},a.reset=function(){var e=this,t=this.options_.Promise||Ve.a.Promise;if(this.paused()||!t)this.doReset_();else{var a=this.play();_e(a.then(function(){return e.doReset_()}))}},a.doReset_=function(){this.tech_&&this.tech_.clearTracks('text'),this.resetCache_(),this.poster(''),this.loadTech_(this.options_.techOrder[0],null),this.techCall_('reset'),this.resetControlBarUI_(),na(this)&&this.trigger('playerreset')},a.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},a.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,a=e.remainingTimeDisplay;t&&t.updateContent(),a&&a.updateContent()},a.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},a.resetVolumeBar_=function(){this.volume(1),this.trigger('volumechange')},a.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},a.currentSource=function(){return this.cache_.source||{}},a.currentSrc=function(){return this.currentSource()&&this.currentSource().src||''},a.currentType=function(){return this.currentSource()&&this.currentSource().type||''},a.preload=function(e){return void 0===e?this.techGet_('preload'):(this.techCall_('setPreload',e),void(this.options_.preload=e))},a.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;'string'==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t='undefined'==typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_('setAutoplay',t)},a.playsinline=function(e){return void 0===e?this.techGet_('playsinline'):(this.techCall_('setPlaysinline',e),this.options_.playsinline=e,this)},a.loop=function(e){return void 0===e?this.techGet_('loop'):(this.techCall_('setLoop',e),void(this.options_.loop=e))},a.poster=function(e){return void 0===e?this.poster_:void(e||(e=''),e===this.poster_||(this.poster_=e,this.techCall_('setPoster',e),this.isPosterFromTech_=!1,this.trigger('posterchange')))},a.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||'';e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger('posterchange'))}},a.controls=function(e){return void 0===e?!!this.controls_:void(e=!!e,this.controls_===e||(this.controls_=e,this.usingNativeControls()&&this.techCall_('setControls',e),this.controls_?(this.removeClass('vjs-controls-disabled'),this.addClass('vjs-controls-enabled'),this.trigger('controlsenabled'),!this.usingNativeControls()&&this.addTechControlsListeners_()):(this.removeClass('vjs-controls-enabled'),this.addClass('vjs-controls-disabled'),this.trigger('controlsdisabled'),!this.usingNativeControls()&&this.removeTechControlsListeners_())))},a.usingNativeControls=function(e){return void 0===e?!!this.usingNativeControls_:void(e=!!e,this.usingNativeControls_===e||(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass('vjs-using-native-controls'),this.trigger('usingnativecontrols')):(this.removeClass('vjs-using-native-controls'),this.trigger('usingcustomcontrols'))))},a.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&e.message&&e.message===this.localize(this.options_.notSupportedMessage)){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(['click','touchstart'],t),void this.one('loadstart',function(){this.off(['click','touchstart'],t)})}return null===e?(this.error_=e,this.removeClass('vjs-error'),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new he(e),this.addClass('vjs-error'),Ot.error('(CODE:'+this.error_.code+' '+he.errorTypes[this.error_.code]+')',this.error_.message,this.error_),void this.trigger('error'))},a.reportUserActivity=function(){this.userActivity_=!0},a.userActive=function(e){return void 0===e?this.userActive_:(e=!!e,e!==this.userActive_)?(this.userActive_=e,this.userActive_?(this.userActivity_=!0,this.removeClass('vjs-user-inactive'),this.addClass('vjs-user-active'),void this.trigger('useractive')):void(this.tech_&&this.tech_.one('mousemove',function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass('vjs-user-active'),this.addClass('vjs-user-inactive'),this.trigger('userinactive'))):void 0},a.listenForUserActivity_=function(){var t=Qt(this,this.reportUserActivity),e=function(a){(a.screenX!==i||a.screenY!==s)&&(i=a.screenX,s=a.screenY,t())},a=function(){t(),this.clearInterval(r),r=this.setInterval(t,250)},n=function(){t(),this.clearInterval(r)},r,i,s;this.on('mousedown',a),this.on('mousemove',e),this.on('mouseup',n);var o=this.getChild('controlBar');!o||Sa||Ea||(o.on('mouseenter',function(){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),o.on('mouseleave',function(){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on('keydown',t),this.on('keyup',t);var l;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(l);var e=this.options_.inactivityTimeout;0>=e||(l=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},a.playbackRate=function(e){return void 0===e?this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_('playbackRate'):1:void this.techCall_('setPlaybackRate',e)},a.defaultPlaybackRate=function(e){return void 0===e?this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_('defaultPlaybackRate'):1:this.techCall_('setDefaultPlaybackRate',e)},a.isAudio=function(e){return void 0===e?!!this.isAudio_:void(this.isAudio_=!!e)},a.addTextTrack=function(e,t,a){if(this.tech_)return this.tech_.addTextTrack(e,t,a)},a.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},a.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e,a=t.track;if(a||(a=e),this.tech_)return this.tech_.removeRemoteTextTrack(a)},a.getVideoPlaybackQuality=function(){return this.techGet_('getVideoPlaybackQuality')},a.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},a.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},a.language=function(e){return void 0===e?this.language_:void(this.language_=(e+'').toLowerCase())},a.languages=function(){return ie(t.prototype.options_.languages,this.languages_)},a.toJSON=function(){var e=ie(this.options_),t=e.tracks;e.tracks=[];for(var a=0,n;a<t.length;a++)n=t[a],n=ie(n),n.player=void 0,e.tracks[a]=n;return e},a.createModal=function(e,t){var a=this;t=t||{},t.content=e||'';var n=new Ka(this,t);return this.addChild(n),n.on('dispose',function(){a.removeChild(n)}),n.open(),n},a.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),a=0;a<Ei.length;a++){var n=Ei[a],r=this.breakpoints_[n];if(t<=r){if(e===n)return;e&&this.removeClass(Li[e]),this.addClass(Li[n]),this.breakpoint_=n;break}}},a.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_='',e&&this.removeClass(e)},a.breakpoints=function(e){return void 0===e?u(this.breakpoints_):(this.breakpoint_='',this.breakpoints_=u({},wi,e),this.updateCurrentBreakpoint_(),u(this.breakpoints_))},a.responsive=function(e){if(void 0===e)return this.responsive_;e=!!e;var t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on('playerresize',this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off('playerresize',this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e},a.currentBreakpoint=function(){return this.breakpoint_},a.currentBreakpointClass=function(){return Li[this.breakpoint_]||''},a.loadMedia=function(e,t){var a=this;if(e&&'object'==typeof e){this.reset(),this.cache_.media=ie(e);var n=this.cache_.media,r=n.artwork,i=n.poster,s=n.src,o=n.textTracks;!r&&i&&(this.cache_.media.artwork=[{src:i,type:Rn(i)}]),s&&this.src(s),i&&this.poster(i),Array.isArray(o)&&o.forEach(function(e){return a.addRemoteTextTrack(e,!1)}),this.ready(t)}},a.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t=this.currentSources(),a=Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}),n={src:t,textTracks:a};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:Rn(n.poster)}]),n}return ie(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},a=I(e),n=a['data-setup'];if(E(e,'vjs-fill')&&(a.fill=!0),E(e,'vjs-fluid')&&(a.fluid=!0),null!==n){var r=Ge()(n||'{}'),s=r[0],o=r[1];s&&Ot.error(s),u(a,o)}if(u(t,a),e.hasChildNodes())for(var l=e.childNodes,d=0,i=l.length;d<i;d++){var p=l[d],c=p.nodeName.toLowerCase();'source'===c?t.sources.push(I(p)):'track'===c&&t.tracks.push(I(p))}return t},a.flexNotSupported_=function(){var e=qe.a.createElement('i');return!('flexBasis'in e.style||'webkitFlexBasis'in e.style||'mozFlexBasis'in e.style||'msFlexBasis'in e.style||'msFlexOrder'in e.style)},t}(ha);Ln.names.forEach(function(e){var t=Ln[e];xi.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),xi.players={};var Pi=Ve.a.navigator;xi.prototype.options_={techOrder:wn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:['mediaLoader','posterImage','textTrackDisplay','loadingSpinner','bigPlayButton','liveTracker','controlBar','errorDisplay','textTrackSettings','resizeManager'],language:Pi&&(Pi.languages&&Pi.languages[0]||Pi.userLanguage||Pi.language)||'en',languages:{},notSupportedMessage:'No compatible source was found for this media.',fullscreen:{options:{navigationUI:'hide'}},breakpoints:{},responsive:!1},['ended','seeking','seekable','networkState','readyState'].forEach(function(e){xi.prototype[e]=function(){return this.techGet_(e)}}),Si.forEach(function(e){xi.prototype['handleTech'+ga(e)+'_']=function(){return this.trigger(e)}}),ha.registerComponent('Player',xi);var Ii='plugin',Mi='activePlugins_',Di={},Oi=function(e){return Di.hasOwnProperty(e)},Ai=function(e){return Oi(e)?Di[e]:void 0},Ri=function(e,t){e[Mi]=e[Mi]||{},e[Mi][t]=!0},Ni=function(e,t,a){var n=(a?'before':'')+'pluginsetup';e.trigger(n,t),e.trigger(n+':'+t.name,t)},Ui=function(e,t){var a=function(){Ni(this,{name:e,plugin:t,instance:null},!0);var a=t.apply(this,arguments);return Ri(this,e),Ni(this,{name:e,plugin:t,instance:a}),a};return Object.keys(t).forEach(function(e){a[e]=t[e]}),a},Bi=function(e,t){return t.prototype.name=e,function(){Ni(this,{name:e,plugin:t,instance:null},!0);for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];var i=de(t,[this].concat(n));return this[e]=function(){return i},Ni(this,i.getEventHash()),i}},Yi=function(){function e(t){if(this.constructor===e)throw new Error('Plugin must be sub-classed; not directly instantiated.');this.player=t,ne(this),delete this.trigger,re(this,this.constructor.defaultState),Ri(t,this.name),this.dispose=Qt(this,this.dispose),t.on('dispose',this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),ee(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(){},t.dispose=function(){var e=this.name,t=this.player;this.trigger('dispose'),this.off(),t.off('dispose',this.dispose),t[Mi][e]=!1,this.player=this.state=null,t[e]=Bi(e,Di[e])},e.isBasic=function(t){var a='string'==typeof t?Ai(t):t;return'function'==typeof a&&!e.prototype.isPrototypeOf(a.prototype)},e.registerPlugin=function(t,a){if('string'!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+'.');if(Oi(t))Ot.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(xi.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if('function'!=typeof a)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof a+'.');return Di[t]=a,t!==Ii&&(e.isBasic(a)?xi.prototype[t]=Ui(t,a):xi.prototype[t]=Bi(t,a)),a},e.deregisterPlugin=function(e){if(e===Ii)throw new Error('Cannot de-register base plugin.');Oi(e)&&(delete Di[e],delete xi.prototype[e])},e.getPlugins=function(e){void 0===e&&(e=Object.keys(Di));var t;return e.forEach(function(e){var a=Ai(e);a&&(t=t||{},t[e]=a)}),t},e.getPluginVersion=function(e){var t=Ai(e);return t&&t.VERSION||''},e}();Yi.getPlugin=Ai,Yi.BASE_PLUGIN_NAME=Ii,Yi.registerPlugin(Ii,Yi),xi.prototype.usingPlugin=function(e){return!!this[Mi]&&!0===this[Mi][e]},xi.prototype.hasPlugin=function(e){return!!Oi(e)};var Fi=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},ji=function(e){return 0===e.indexOf('#')?e.slice(1):e};if(Ue.hooks_={},Ue.hooks=function(e,t){return Ue.hooks_[e]=Ue.hooks_[e]||[],t&&(Ue.hooks_[e]=Ue.hooks_[e].concat(t)),Ue.hooks_[e]},Ue.hook=function(e,t){Ue.hooks(e,t)},Ue.hookOnce=function(e,t){Ue.hooks(e,[].concat(t).map(function(t){return function a(){return Ue.removeHook(e,a),t.apply(void 0,arguments)}}))},Ue.removeHook=function(e,t){var a=Ue.hooks(e).indexOf(t);return!(-1>=a)&&(Ue.hooks_[e]=Ue.hooks_[e].slice(),Ue.hooks_[e].splice(a,1),!0)},!0!==Ve.a.VIDEOJS_NO_DYNAMIC_STYLE&&_()){var Hi=Ut('.vjs-styles-defaults');if(!Hi){Hi=Vt('vjs-styles-defaults');var Vi=Ut('head');Vi&&Vi.insertBefore(Hi,Vi.firstChild),zt(Hi,'\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ')}}q(1,Ue),Ue.VERSION=It,Ue.options=xi.prototype.options_,Ue.getPlayers=function(){return xi.players},Ue.getPlayer=function(e){var t=xi.players,a;if('string'==typeof e){var n=ji(e),r=t[n];if(r)return r;a=Ut('#'+n)}else a=e;if(b(a)){var i=a,s=i.player,o=i.playerId;if(s||t[o])return s||t[o]}},Ue.getAllPlayers=function(){return Object.keys(xi.players).map(function(e){return xi.players[e]}).filter(Boolean)},Ue.players=xi.players,Ue.getComponent=ha.getComponent,Ue.registerComponent=function(e,t){wn.isTech(t)&&Ot.warn('The '+e+' tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)'),ha.registerComponent.call(ha,e,t)},Ue.getTech=wn.getTech,Ue.registerTech=wn.registerTech,Ue.use=function(e,t){xn[e]=xn[e]||[],xn[e].push(t)},Object.defineProperty(Ue,'middleware',{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ue.middleware,'TERMINATOR',{value:In,writeable:!1,enumerable:!0}),Ue.browser=Ua,Ue.TOUCH_ENABLED=Na,Ue.extend=function(e,t){void 0===t&&(t={});var a=function(){e.apply(this,arguments)},n={};for(var r in'object'==typeof t?(t.constructor!==Object.prototype.constructor&&(a=t.constructor),n=t):'function'==typeof t&&(a=t),Fi(a,e),n)n.hasOwnProperty(r)&&(a.prototype[r]=n[r]);return a},Ue.mergeOptions=ie,Ue.bind=Qt,Ue.registerPlugin=Yi.registerPlugin,Ue.deregisterPlugin=Yi.deregisterPlugin,Ue.plugin=function(e,t){return Ot.warn('videojs.plugin() is deprecated; use videojs.registerPlugin() instead'),Yi.registerPlugin(e,t)},Ue.getPlugins=Yi.getPlugins,Ue.getPlugin=Yi.getPlugin,Ue.getPluginVersion=Yi.getPluginVersion,Ue.addLanguage=function(e,t){var a;return e=(''+e).toLowerCase(),Ue.options.languages=ie(Ue.options.languages,(a={},a[e]=t,a)),Ue.options.languages[e]},Ue.log=Ot,Ue.createLogger=At,Ue.createTimeRange=Ue.createTimeRanges=ge,Ue.formatTime=Oe,Ue.setFormatTime=function(e){$n=e},Ue.resetFormatTime=function(){$n=Jn},Ue.parseUrl=un,Ue.isCrossOrigin=gn,Ue.EventTarget=ta,Ue.on=Q,Ue.one=te,Ue.off=Z,Ue.trigger=ee,Ue.xhr=$e.a,Ue.TextTrack=_n,Ue.AudioTrack=bn,Ue.VideoTrack=vn,['isEl','isTextNode','createEl','hasClass','addClass','removeClass','toggleClass','setAttributes','getAttributes','emptyEl','appendContent','insertContent'].forEach(function(e){Ue[e]=function(){return Ot.warn('videojs.'+e+'() is deprecated; use videojs.dom.'+e+'() instead'),Yt[e].apply(null,arguments)}}),Ue.computedStyle=g,Ue.dom=Yt,Ue.url=yn;/**
 * @videojs/http-streaming
 * @version 1.10.6
 * @copyright 2019 Brightcove, Inc
 * @license Apache-2.0
 */var zi=function(e,t){return /^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=tt.a.buildAbsoluteURL(Ve.a.location.href,e)),tt.a.buildAbsoluteURL(e,t))},qi=function(e,t,a){return e&&a.responseURL&&t!==a.responseURL?a.responseURL:t},Wi=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},Gi=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Ki=function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if('value'in r)return r.value;var s=r.get;return void 0===s?void 0:s.call(n)},Xi=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Ji=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e},$i=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(a.push(o.value),!(t&&a.length===t));n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s['return']&&s['return']()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),Qi=Ue.mergeOptions,Zi=Ue.EventTarget,es=Ue.log,ts=function(e,t){['AUDIO','SUBTITLES'].forEach(function(a){for(var n in e.mediaGroups[a])for(var r in e.mediaGroups[a][n]){var i=e.mediaGroups[a][n][r];t(i,a,n,r)}})},as=function(e,t,a){var n=t.slice();a=a||0;for(var r=Math.min(e.length,t.length+a),s=a;s<r;s++)n[s-a]=Qi(e[s],n[s-a]);return n},ns=function(e,t){e.resolvedUri||(e.resolvedUri=zi(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=zi(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=zi(t,e.map.uri))},rs=function(e,t){var a=Qi(e,{}),n=a.playlists[t.uri];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var r=Qi(n,t);n.segments&&(r.segments=as(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){ns(e,r.resolvedUri)});for(var s=0;s<a.playlists.length;s++)a.playlists[s].uri===t.uri&&(a.playlists[s]=r);return a.playlists[t.uri]=r,a},is=function(e){for(var t=e.playlists.length,a;t--;)a=e.playlists[t],e.playlists[a.uri]=a,a.resolvedUri=zi(e.uri,a.uri),a.id=t,a.attributes||(a.attributes={},es.warn('Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.'))},ss=function(e){ts(e,function(t){t.uri&&(t.resolvedUri=zi(e.uri,t.uri))})},os=function(e,t){var a=e.segments[e.segments.length-1],n=void 0;return n=t&&a&&a.duration?1e3*a.duration:500*(e.targetDuration||10),n},ls=function(e){function t(e,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Wi(this,t);var r=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=n.withCredentials,s=n.handleManifestRedirects;r.srcUrl=e,r.hls_=a,r.withCredentials=void 0!==i&&i,r.handleManifestRedirects=void 0!==s&&s;var o=a.options_;if(r.customTagParsers=o&&o.customTagParsers||[],r.customTagMappers=o&&o.customTagMappers||[],!r.srcUrl)throw new Error('A non-empty playlist URL is required');return r.state='HAVE_NOTHING',r.on('mediaupdatetimeout',function(){'HAVE_METADATA'!==r.state||(r.state='HAVE_CURRENT_METADATA',r.request=r.hls_.xhr({uri:zi(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e){return r.request?e?r.playlistRequestError(r.request,r.media().uri,'HAVE_METADATA'):void r.haveMetadata(r.request,r.media().uri):void 0}))}),r}return Xi(t,e),Gi(t,[{key:'playlistRequestError',value:function(e,t,a){this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[t],status:e.status,message:'HLS playlist request error at URL: '+t+'.',responseText:e.responseText,code:500<=e.status?4:2},this.trigger('error')}},{key:'haveMetadata',value:function(e,t){var a=this;this.request=null,this.state='HAVE_METADATA';var n=new ot;this.customTagParsers.forEach(function(e){return n.addParser(e)}),this.customTagMappers.forEach(function(e){return n.addTagMapper(e)}),n.push(e.responseText),n.end(),n.manifest.uri=t,n.manifest.attributes=n.manifest.attributes||{};var r=rs(this.master,n.manifest);this.targetDuration=n.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[n.manifest.uri]):this.trigger('playlistunchanged'),this.media().endList||(Ve.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=Ve.a.setTimeout(function(){a.trigger('mediaupdatetimeout')},os(this.media(),!!r))),this.trigger('loadedplaylist')}},{key:'dispose',value:function(){this.stopRequest(),Ve.a.clearTimeout(this.mediaUpdateTimeout),Ve.a.clearTimeout(this.finalRenditionTimeout)}},{key:'stopRequest',value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:'media',value:function(e,t){var a=this;if(!e)return this.media_;if('HAVE_NOTHING'===this.state)throw new Error('Cannot switch media playlist from '+this.state);if('string'==typeof e){if(!this.master.playlists[e])throw new Error('Unknown playlist URI: '+e);e=this.master.playlists[e]}if(Ve.a.clearTimeout(this.finalRenditionTimeout),t){var n=1e3*(e.targetDuration/2)||5000;return void(this.finalRenditionTimeout=Ve.a.setTimeout(this.media.bind(this,e,!1),n))}var r=this.state,i=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state='HAVE_METADATA',this.media_=e,void(i&&(this.trigger('mediachanging'),this.trigger('mediachange')));if(i){if(this.state='SWITCHING_MEDIA',this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger('mediachanging'),this.request=this.hls_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(t,n){if(a.request)return e.resolvedUri=qi(a.handleManifestRedirects,e.resolvedUri,n),t?a.playlistRequestError(a.request,e.uri,r):void(a.haveMetadata(n,e.uri),'HAVE_MASTER'===r?a.trigger('loadedmetadata'):a.trigger('mediachange'))})}}},{key:'pause',value:function(){this.stopRequest(),Ve.a.clearTimeout(this.mediaUpdateTimeout),'HAVE_NOTHING'===this.state&&(this.started=!1),'SWITCHING_MEDIA'===this.state?this.media_?this.state='HAVE_METADATA':this.state='HAVE_MASTER':'HAVE_CURRENT_METADATA'===this.state&&(this.state='HAVE_METADATA')}},{key:'load',value:function(e){var t=this;Ve.a.clearTimeout(this.mediaUpdateTimeout);var a=this.media();if(e){var n=a?1e3*(a.targetDuration/2):5000;return void(this.mediaUpdateTimeout=Ve.a.setTimeout(function(){return t.load()},n))}return this.started?void(a&&!a.endList?this.trigger('mediaupdatetimeout'):this.trigger('loadedplaylist')):void this.start()}},{key:'start',value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,a){if(e.request){if(e.request=null,t)return e.error={status:a.status,message:'HLS playlist request error at URL: '+e.srcUrl+'.',responseText:a.responseText,code:2},'HAVE_NOTHING'===e.state&&(e.started=!1),e.trigger('error');var n=new ot;return(e.customTagParsers.forEach(function(e){return n.addParser(e)}),e.customTagMappers.forEach(function(e){return n.addTagMapper(e)}),n.push(a.responseText),n.end(),e.state='HAVE_MASTER',e.srcUrl=qi(e.handleManifestRedirects,e.srcUrl,a),n.manifest.uri=e.srcUrl,n.manifest.playlists)?(e.master=n.manifest,is(e.master),ss(e.master),e.trigger('loadedplaylist'),void(e.request||e.media(n.manifest.playlists[0]))):(e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Ve.a.location.href,playlists:[{uri:e.srcUrl,id:0,resolvedUri:e.srcUrl,attributes:{}}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.haveMetadata(a,e.srcUrl),e.trigger('loadedmetadata'))}})}}]),t}(Zi),ds=Ue.createTimeRange,ps=function(e,t){var a=0,n=t-e.mediaSequence,r=e.segments[n];if(r){if('undefined'!=typeof r.start)return{result:r.start,precise:!0};if('undefined'!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;n--;){if(r=e.segments[n],'undefined'!=typeof r.end)return{result:a+r.end,precise:!0};if(a+=r.duration,'undefined'!=typeof r.start)return{result:a+r.start,precise:!0}}return{result:a,precise:!1}},us=function(e,t){for(var a=0,n=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if(n=e.segments[r],'undefined'!=typeof n.start)return{result:n.start-a,precise:!0};if(a+=n.duration,'undefined'!=typeof n.end)return{result:n.end-a,precise:!0}}return{result:-1,precise:!1}},cs=function(e,t,a){var n=void 0,r=void 0;return('undefined'==typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)?0:(n=ps(e,t),n.precise)?n.result:(r=us(e,t),r.precise?r.result:n.result+a)},ms=function(e,t,a){if(!e)return 0;if('number'!=typeof a&&(a=0),'undefined'==typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Ve.a.Infinity}return cs(e,t,a)},gs=function(e,t,a){var n=0;if(t>a){var r=[a,t];t=r[0],a=r[1]}if(0>t){for(var s=t;s<Math.min(0,a);s++)n+=e.targetDuration;t=0}for(var i=t;i<a;i++)n+=e.segments[i].duration;return n},ys=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,a=e.segments[t].duration||e.targetDuration,n=a+2*e.targetDuration;t--&&(a+=e.segments[t].duration,!(a>=n)););return Math.max(0,t)},hs=function(e,t,a){if(!e||!e.segments)return null;if(e.endList)return ms(e);if(null===t)return null;t=t||0;var n=a?ys(e):e.segments.length;return cs(e,e.mediaSequence+n,t)},fs=function(e){return 0==e-Math.floor(e)},_s=function(e,t){if(fs(t))return t+.1*e;for(var a=t.toString().split('.')[1].length,n=1;n<=a;n++){var r=Math.pow(10,n),i=t*r;if(fs(i)||n===a)return(i+e)/r}},bs=_s.bind(null,1),vs=_s.bind(null,-1),Ts=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},ks=function(e){return e.excludeUntil&&e.excludeUntil===Infinity},Ss=function(e){var t=Ts(e);return!e.disabled&&!t},Cs=function(e,t){return t.attributes&&t.attributes[e]},Es=function(e,t){if(1===e.playlists.length)return!0;var a=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Ss(e)&&(e.attributes.BANDWIDTH||0)<a}).length},Ls={duration:ms,seekable:function(e,t){var a=hs(e,t,!0);return null===a?ds():ds(t||0,a)},safeLiveIndex:ys,getMediaInfoForTime:function(e,t,a,n){var r=void 0,s=void 0,o=e.segments.length,l=t-n;if(0>l){if(0<a)for(r=a-1;0<=r;r--)if(s=e.segments[r],l+=vs(s.duration),0<l)return{mediaIndex:r,startTime:n-gs(e,a,r)};return{mediaIndex:0,startTime:t}}if(0>a){for(r=a;0>r;r++)if(l-=e.targetDuration,0>l)return{mediaIndex:0,startTime:t};a=0}for(r=a;r<o;r++)if(s=e.segments[r],l-=bs(s.duration),0>l)return{mediaIndex:r,startTime:n+gs(e,a,r)};return{mediaIndex:o-1,startTime:t}},isEnabled:Ss,isDisabled:function(e){return e.disabled},isBlacklisted:Ts,isIncompatible:ks,playlistEnd:hs,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Cs,estimateSegmentRequestTime:function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!Cs('BANDWIDTH',a))return NaN;var r=e*a.attributes.BANDWIDTH;return(r-8*n)/t},isLowestEnabledRendition:Es},ws=Ue.xhr,xs=Ue.mergeOptions,Ps=function(){return function e(t,a){t=xs({timeout:45e3},t);var n=e.beforeRequest||Ue.Hls.xhr.beforeRequest;if(n&&'function'==typeof n){var r=n(t);r&&(t=r)}var i=ws(t,function(e,t){var n=i.response;!e&&n&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=n.byteLength||n.length,!i.bandwidth&&(i.bandwidth=Math.floor(1e3*(8*(i.bytesReceived/i.roundTripTime))))),t.headers&&(i.responseHeaders=t.headers),e&&'ETIMEDOUT'===e.code&&(i.timedout=!0),e||i.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error('XHR Failed with a response of: '+(i&&(n||i.responseText)))),a(e,i)}),s=i.abort;return i.abort=function(){return i.aborted=!0,s.apply(i,arguments)},i.uri=t.uri,i.requestTime=Date.now(),i}},Is=function(e){var t=void 0,a=void 0;return a=e.offset+e.length-1,t=e.offset,'bytes='+t+'-'+a},Ms=function(e){var t={};return e.byterange&&(t.Range=Is(e.byterange)),t},Ds=function(e,t){return e.start(t)+'-'+e.end(t)},Os=function(t,e){var a=t.toString(16);return'00'.substring(0,2-a.length)+a+(e%2?' ':'')},As=function(t){return 32<=t&&126>t?String.fromCharCode(t):'.'},Rs=function(e){var t={};return Object.keys(e).forEach(function(a){var n=e[a];t[a]=ArrayBuffer.isView(n)?{bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:n}),t},Ns=function(e){var t=e.byterange||{length:Infinity,offset:0};return[t.length,t.offset,e.resolvedUri].join(',')},Us=function(e){return e.resolvedUri},Bs=function(e){for(var t=Array.prototype.slice.call(e),a=16,n='',r=void 0,i=void 0,s=0;s<t.length/a;s++)r=t.slice(s*a,s*a+a).map(Os).join(''),i=t.slice(s*a,s*a+a).map(As).join(''),n+=r+' '+i+'\n';return n},Ys=Object.freeze({createTransferableMessage:Rs,initSegmentId:Ns,segmentKeyId:Us,hexDump:Bs,tagDump:function(e){var t=e.bytes;return Bs(t)},textRanges:function(e){var t='',a=void 0;for(a=0;a<e.length;a++)t+=Ds(e,a)+' ';return t}}),Fs=.25,js=function(e,t){if(!t.dateTimeObject)return null;var a=t.videoTimingInfo.transmuxerPrependedSeconds,n=t.videoTimingInfo.transmuxedPresentationStart;return new Date(t.dateTimeObject.getTime()+1e3*(e-(n+a)))},Hs=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},Vs=function(e,t){var a;try{a=new Date(e)}catch(t){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(a<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1;r++){n=t.segments[r];var i=t.segments[r+1].dateTimeObject;if(a<i)break}var s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?Hs(s.videoTimingInfo):s.duration+s.duration*Fs,d=new Date(o.getTime()+1e3*l);return a>d?null:(a>o&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Ls.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?'accurate':'estimate'})},zs=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var a=0,n=void 0,r=0;r<t.segments.length&&(n=t.segments[r],a=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:a+n.duration,!(e<=a));r++);var i=t.segments[t.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>a){if(e>a+i.duration*Fs)return null;n=i}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:a-n.duration,type:n.videoTimingInfo?'accurate':'estimate'}},qs=function(e,t){var a=void 0,n=void 0;try{a=new Date(e),n=new Date(t)}catch(t){}var r=a.getTime(),i=n.getTime();return(i-r)/1e3},Ws=function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0,a;t<e.segments.length;t++)if(a=e.segments[t],!a.dateTimeObject)return!1;return!0},Gs=function(e){var t=e.playlist,a=e.time,n=void 0===a?void 0:a,r=e.callback;if(!r)throw new Error('getProgramTime: callback must be provided');if(!t||void 0===n)return r({message:'getProgramTime: playlist and time must be provided'});var i=zs(n,t);if(!i)return r({message:'valid programTime was not found'});if('estimate'===i.type)return r({message:'Accurate programTime could not be determined. Please seek to e.seekTime and try again',seekTime:i.estimatedStart});var s={mediaSeconds:n},o=js(n,i.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)},Ks=function e(t){var a=t.programTime,n=t.playlist,r=t.retryCount,i=void 0===r?2:r,s=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,d=t.tech,p=t.callback;if(!p)throw new Error('seekToProgramTime: callback must be provided');if('undefined'==typeof a||!n||!s)return p({message:'seekToProgramTime: programTime, seekTo and playlist must be provided'});if(!n.endList&&!d.hasStarted_)return p({message:'player must be playing a live stream to start buffering'});if(!Ws(n))return p({message:'programDateTime tags must be provided in the manifest '+n.resolvedUri});var u=Vs(a,n);if(!u)return p({message:a+' was not found in the stream'});var c=u.segment,m=qs(c.dateTimeObject,a);if('estimate'===u.type)return 0===i?p({message:a+' is not buffered yet. Try again'}):(s(u.estimatedStart+m),void d.one('seeked',function(){e({programTime:a,playlist:n,retryCount:i-1,seekTo:s,pauseAfterSeek:l,tech:d,callback:p})}));var g=c.start+m;d.one('seeked',function(){return p(null,d.currentTime())}),l&&d.pause(),s(g)},Xs=1/30,Js=3*Xs,$s=function(e,t){var a=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&a.push([e.start(n),e.end(n)]);return Ue.createTimeRanges(a)},Qs=function(e,t){return $s(e,function(e,a){return e-Js<=t&&a+Js>=t})},Zs=function(e,t){return $s(e,function(e){return e-Xs>=t})},eo=function(e){if(2>e.length)return Ue.createTimeRanges();for(var t=[],a=1;a<e.length;a++){var n=e.end(a-1),r=e.start(a);t.push([n,r])}return Ue.createTimeRanges(t)},to=function(e){var t=[];if(!e||!e.length)return'';for(var a=0;a<e.length;a++)t.push(e.start(a)+' => '+e.end(a));return t.join(', ')},ao=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=e.length?e.end(e.length-1):0;return(n-t)/a},no=function(e){for(var t=[],a=0;a<e.length;a++)t.push({start:e.start(a),end:e.end(a)});return t},ro=function(e,t,a){var n=t.player_;if(a.captions&&a.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),a.captionStreams)if(!e.inbandTextTracks_[r]){n.tech_.trigger({type:'usage',name:'hls-608'});var i=n.textTracks().getTrackById(r);e.inbandTextTracks_[r]=i?i:n.addRemoteTextTrack({kind:'captions',id:r,label:r},!1).track}a.metadata&&a.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=n.addRemoteTextTrack({kind:'metadata',label:'Timed Metadata'},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=a.metadata.dispatchType)},io=function(e,t,a){var n=void 0,r=void 0;if(a&&a.cues)for(n=a.cues.length;n--;)r=a.cues[n],r.startTime<=t&&r.endTime>=e&&a.removeCue(r)},so=function(e){Object.defineProperties(e.frame,{id:{get:function(){return Ue.log.warn('cue.frame.id is deprecated. Use cue.value.key instead.'),e.value.key}},value:{get:function(){return Ue.log.warn('cue.frame.value is deprecated. Use cue.value.data instead.'),e.value.data}},privateData:{get:function(){return Ue.log.warn('cue.frame.privateData is deprecated. Use cue.value.data instead.'),e.value.data}}})},oo=function(e){var t;return t=isNaN(e)||Math.abs(e)===Infinity?Number.MAX_VALUE:e,t},lo=function(e,t,a){var n=Ve.a.WebKitDataCue||Ve.a.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new n(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),a){var r=oo(e.mediaSource_.duration);if(a.forEach(function(e){var t=e.cueTime+this.timestampOffset;'number'!=typeof t||Ve.a.isNaN(t)||0>t||!(t<Infinity)||e.frames.forEach(function(e){var a=new n(t,t,e.value||e.url||e.data||'');a.frame=e,a.value=e,so(a),this.metadataTrack_.addCue(a)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var s=e.metadataTrack_.cues,o=[],l=0;l<s.length;l++)s[l]&&o.push(s[l]);var i=o.reduce(function(e,t){var a=e[t.startTime]||[];return a.push(t),e[t.startTime]=a,e},{}),d=Object.keys(i).sort(function(e,t){return+e-+t});d.forEach(function(e,t){var a=i[e],n=+d[t+1]||r;a.forEach(function(e){e.endTime=n})})}}},po='undefined'==typeof window?{}:window,uo='undefined'==typeof Symbol?'__target':Symbol(),co='application/javascript',mo=po.BlobBuilder||po.WebKitBlobBuilder||po.MozBlobBuilder||po.MSBlobBuilder,go=po.URL||po.webkitURL||go&&go.msURL,yo=po.Worker;if(yo){var ho=Ye('self.onmessage = function () {}'),fo=new Uint8Array(1),_o;try{_o=new yo(ho),_o.postMessage(fo,[fo.buffer])}catch(t){yo=null}finally{go.revokeObjectURL(ho),_o&&_o.terminate()}}var bo=new Be('./transmuxer-worker.worker.js',function(){var e=this,t=function(){var t=function(){this.init=function(){var e={};this.on=function(t,a){e[t]||(e[t]=[]),e[t]=e[t].concat(a)},this.off=function(t,a){var n;return!!e[t]&&(n=e[t].indexOf(a),e[t]=e[t].slice(),e[t].splice(n,1),-1<n)},this.trigger=function(t){var a,n,r,i;if(a=e[t],!!a)if(2===arguments.length)for(r=a.length,n=0;n<r;++n)a[n].call(this,arguments[1]);else{for(i=[],n=arguments.length,n=1;n<arguments.length;++n)i.push(arguments[n]);for(r=a.length,n=0;n<r;++n)a[n].apply(this,i)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on('data',function(t){e.push(t)}),this.on('done',function(t){e.flush(t)}),this.on('partialdone',function(t){e.partialFlush(t)}),this.on('endedtimeline',function(t){e.endTimeline(t)}),this.on('reset',function(t){e.reset(t)}),e},t.prototype.push=function(e){this.trigger('data',e)},t.prototype.flush=function(e){this.trigger('done',e)},t.prototype.partialFlush=function(e){this.trigger('partialdone',e)},t.prototype.endTimeline=function(e){this.trigger('endedtimeline',e)},t.prototype.reset=function(e){this.trigger('reset',e)};var a=t,n=Math.pow(2,32)-1,r,i,s,o,l,d,p,u,c,m,g,y,h,f,_,b,v,T,k,S,C,E,L,w,x,P,I,M,D,O,A,R,N,U,B,Y;(function(){if(L={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},'undefined'!=typeof Uint8Array){for(var e in L)L.hasOwnProperty(e)&&(L[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);w=new Uint8Array([105,115,111,109]),P=new Uint8Array([97,118,99,49]),x=new Uint8Array([0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),M=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:I,audio:M},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),N=new Uint8Array([0,0,0,0,0,0,0,0]),U=N,B=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Y=N,O=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),r=function(e){var t=[],a=0,n,r,i;for(n=1;n<arguments.length;n++)t.push(arguments[n]);for(n=t.length;n--;)a+=t[n].byteLength;for(r=new Uint8Array(a+8),i=new DataView(r.buffer,r.byteOffset,r.byteLength),i.setUint32(0,r.byteLength),r.set(e,4),(n=0,a=8);n<t.length;n++)r.set(t[n],a),a+=t[n].byteLength;return r},i=function(){return r(L.dinf,r(L.dref,R))},s=function(e){return r(L.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},o=function(){return r(L.ftyp,w,x,w,P)},b=function(e){return r(L.hdlr,D[e])},l=function(e){return r(L.mdat,e)},_=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,255&e.duration>>>24,255&e.duration>>>16,255&e.duration>>>8,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=255&e.samplerate>>>24,t[13]=255&e.samplerate>>>16,t[14]=255&e.samplerate>>>8,t[15]=255&e.samplerate),r(L.mdhd,t)},f=function(e){return r(L.mdia,_(e),b(e.type),p(e))},d=function(e){return r(L.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},p=function(e){return r(L.minf,'video'===e.type?r(L.vmhd,O):r(L.smhd,A),i(),T(e))},u=function(e,t){for(var a=[],n=t.length;n--;)a[n]=S(t[n]);return r.apply(null,[L.moof,d(e)].concat(a))},c=function(e){for(var t=e.length,a=[];t--;)a[t]=y(e[t]);return r.apply(null,[L.moov,g(4294967295)].concat(a).concat(m(e)))},m=function(e){for(var t=e.length,a=[];t--;)a[t]=C(e[t]);return r.apply(null,[L.mvex].concat(a))},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return r(L.mvhd,t)},v=function(e){var t=e.samples||[],a=new Uint8Array(4+t.length),n,s;for(s=0;s<t.length;s++)n=t[s].flags,a[s+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return r(L.sdtp,a)},T=function(e){return r(L.stbl,k(e),r(L.stts,Y),r(L.stsc,U),r(L.stsz,B),r(L.stco,N))},function(){var e,t;k=function(a){return r(L.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),'video'===a.type?e(a):t(a))},e=function(e){var t=e.sps||[],a=e.pps||[],n=[],s=[],o,i;for(o=0;o<t.length;o++)n.push((65280&t[o].byteLength)>>>8),n.push(255&t[o].byteLength),n=n.concat(Array.prototype.slice.call(t[o]));for(o=0;o<a.length;o++)s.push((65280&a[o].byteLength)>>>8),s.push(255&a[o].byteLength),s=s.concat(Array.prototype.slice.call(a[o]));if(i=[L.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r(L.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([t.length],n,[a.length],s))),r(L.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],d=e.sarRatio[1];i.push(r(L.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d])))}return r.apply(null,i)},t=function(e){return r(L.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),s(e))}}(),h=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return r(L.tkhd,t)},S=function(e){var t,a,i,s,o,l,d;return(t=r(L.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),l=Math.floor(e.baseMediaDecodeTime/(n+1)),d=Math.floor(e.baseMediaDecodeTime%(n+1)),a=r(L.tfdt,new Uint8Array([1,0,0,0,255&l>>>24,255&l>>>16,255&l>>>8,255&l,255&d>>>24,255&d>>>16,255&d>>>8,255&d])),o=92,'audio'===e.type)?(i=E(e,o),r(L.traf,t,a,i)):(s=v(e),i=E(e,s.length+o),r(L.traf,t,a,i,s))},y=function(e){return e.duration=e.duration||4294967295,r(L.trak,h(e),f(e))},C=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return'video'!==e.type&&(t[t.length-1]=0),r(L.trex,t)},function(){var e,t,a;a=function(e,t){var a=0,n=0,r=0,i=0;return e.length&&(void 0!==e[0].duration&&(a=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(i=8)),[0,0,a|n|r|i,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var n,s,o,l;for(s=e.samples||[],t+=20+16*s.length,n=a(s,t),l=0;l<s.length;l++)o=s[l],n=n.concat([(4278190080&o.duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size,o.flags.isLeading<<2|o.flags.dependsOn,o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,61440&o.flags.degradationPriority,15&o.flags.degradationPriority,(4278190080&o.compositionTimeOffset)>>>24,(16711680&o.compositionTimeOffset)>>>16,(65280&o.compositionTimeOffset)>>>8,255&o.compositionTimeOffset]);return r(L.trun,new Uint8Array(n))},e=function(e,t){var n,s,o,l;for(s=e.samples||[],t+=20+8*s.length,n=a(s,t),l=0;l<s.length;l++)o=s[l],n=n.concat([(4278190080&o.duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size]);return r(L.trun,new Uint8Array(n))},E=function(a,n){return'audio'===a.type?e(a,n):t(a,n)}}();var F={ftyp:o,mdat:l,moof:u,moov:c,initSegment:function(e){var t=o(),a=c(e),n;return n=new Uint8Array(t.byteLength+a.byteLength),n.set(t),n.set(a,t.byteLength),n}},j=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},H=function(e,t){var a=j();return a.dataOffset=t,a.compositionTimeOffset=e.pts-e.dts,a.duration=e.duration,a.size=4*e.length,a.size+=e.byteLength,e.keyFrame&&(a.flags.dependsOn=2,a.flags.isNonSyncSample=0),a},V={groupNalsIntoFrames:function(e){var t=[],a=[],n,r;for(a.byteLength=0,a.nalCount=0,a.duration=0,t.byteLength=0,n=0;n<e.length;n++)r=e[n],'access_unit_delimiter_rbsp'===r.nalUnitType?(t.length&&(t.duration=r.dts-t.dts,a.byteLength+=t.byteLength,a.nalCount+=t.length,a.duration+=t.duration,a.push(t)),t=[r],t.byteLength=r.data.byteLength,t.pts=r.pts,t.dts=r.dts):('slice_layer_without_partitioning_rbsp_idr'===r.nalUnitType&&(t.keyFrame=!0),t.duration=r.dts-t.dts,t.byteLength+=r.data.byteLength,t.push(r));return a.length&&(!t.duration||0>=t.duration)&&(t.duration=a[a.length-1].duration),a.byteLength+=t.byteLength,a.nalCount+=t.length,a.duration+=t.duration,a.push(t),a},groupFramesIntoGops:function(e){var t=[],a=[],n,r;for(t.byteLength=0,t.nalCount=0,t.duration=0,t.pts=e[0].pts,t.dts=e[0].dts,a.byteLength=0,a.nalCount=0,a.duration=0,a.pts=e[0].pts,a.dts=e[0].dts,n=0;n<e.length;n++)r=e[n],r.keyFrame?(t.length&&(a.push(t),a.byteLength+=t.byteLength,a.nalCount+=t.nalCount,a.duration+=t.duration),t=[r],t.nalCount=r.length,t.byteLength=r.byteLength,t.pts=r.pts,t.dts=r.dts,t.duration=r.duration):(t.duration+=r.duration,t.nalCount+=r.length,t.byteLength+=r.byteLength,t.push(r));return a.length&&0>=t.duration&&(t.duration=a[a.length-1].duration),a.byteLength+=t.byteLength,a.nalCount+=t.nalCount,a.duration+=t.duration,a.push(t),a},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var a=t||0,n=[],r,s,i,o,l;for(r=0;r<e.length;r++)for(o=e[r],s=0;s<o.length;s++)l=o[s],i=H(l,a),a+=i.size,n.push(i);return n},concatenateNalData:function(e){var t=0,a=e.byteLength,n=e.nalCount,r=new Uint8Array(a+4*n),s=new DataView(r.buffer),o,l,i,d,p,u;for(o=0;o<e.length;o++)for(d=e[o],l=0;l<d.length;l++)for(p=d[l],i=0;i<p.length;i++)u=p[i],s.setUint32(t,u.data.byteLength),t+=4,r.set(u.data,t),t+=u.data.byteLength;return r},generateSampleTableForFrame:function(e,t){var a=[],n;return n=H(e,t||0),a.push(n),a},concatenateNalDataForFrame:function(e){var t=0,a=e.byteLength,n=e.length,r=new Uint8Array(a+4*n),s=new DataView(r.buffer),o,i;for(o=0;o<e.length;o++)i=e[o],s.setUint32(t,i.data.byteLength),t+=4,r.set(i.data,t),t+=i.data.byteLength;return r}},z=[33,16,5,32,164,27],q=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],W=function(e){for(var t=[];e--;)t.push(0);return t},G={96e3:[z,[227,64],W(154),[56]],88200:[z,[231],W(170),[56]],64e3:[z,[248,192],W(240),[56]],48e3:[z,[255,192],W(268),[55,148,128],W(54),[112]],44100:[z,[255,192],W(268),[55,163,128],W(84),[112]],32e3:[z,[255,192],W(268),[55,234],W(226),[112]],24e3:[z,[255,192],W(268),[55,255,128],W(268),[111,112],W(126),[224]],16e3:[z,[255,192],W(268),[55,255,128],W(268),[111,255],W(269),[223,108],W(195),[1,192]],12e3:[q,W(268),[3,127,248],W(268),[6,255,240],W(268),[13,255,224],W(268),[27,253,128],W(259),[56]],11025:[q,W(268),[3,127,248],W(268),[6,255,240],W(268),[13,255,224],W(268),[27,255,192],W(268),[55,175,128],W(108),[112]],8e3:[q,W(268),[3,121,16],W(47),[7]]},K=function(e){return Object.keys(e).reduce(function(t,a){return t[a]=new Uint8Array(e[a].reduce(function(e,t){return e.concat(t)},[])),t},{})}(G),X=9e4,J,$,Q,Z,ee,te,ae;J=function(e){return e*X},$=function(e,t){return e*t},Q=function(e){return e/X},Z=function(e,t){return e/t},ee=function(e,t){return J(Z(e,t))},te=function(e,t){return $(Q(e),t)},ae=function(e,t,a){return Q(a?e:e-t)};var ne={ONE_SECOND_IN_TS:X,secondsToVideoTs:J,secondsToAudioTs:$,videoTsToSeconds:Q,audioTsToSeconds:Z,audioTsToVideoTs:ee,videoTsToAudioTs:te,metadataTsToSeconds:ae},re=function(e){var t=0,a,n;for(a=0;a<e.length;a++)n=e[a],t+=n.data.byteLength;return t},ie={prefixWithSilence:function(e,t,a,n){var r=0,s=0,o=0,l=0,d,p,u,i;if(t.length&&(d=ne.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),r=Math.ceil(ne.ONE_SECOND_IN_TS/(e.samplerate/1024)),a&&n&&(s=d-Math.max(a,n),o=Math.floor(s/r),l=o*r),!(1>o||l>ne.ONE_SECOND_IN_TS/2))){for(p=K[e.samplerate],p||(p=t[0].data),u=0;u<o;u++)i=t[0],t.splice(0,0,{data:p,dts:i.dts-r,pts:i.pts-r});e.baseMediaDecodeTime-=Math.floor(ne.videoTsToAudioTs(l,e.samplerate))}},trimAdtsFramesByEarliestDts:function(e,t,a){return t.minSegmentDts>=a?e:(t.minSegmentDts=Infinity,e.filter(function(e){return!!(e.dts>=a)&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},generateSampleTable:function(e){var t=[],a,n;for(a=0;a<e.length;a++)n=e[a],t.push({size:n.data.byteLength,duration:1024});return t},concatenateFrameData:function(e){var t=0,a=new Uint8Array(re(e)),n,r;for(n=0;n<e.length;n++)r=e[n],a.set(r.data,t),t+=r.data.byteLength;return a}},se=ne.ONE_SECOND_IN_TS,oe={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var a=e.minSegmentDts,n,r;return t||(a-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=a,n=Math.max(0,n),'audio'===e.type&&(r=e.samplerate/se,n*=r,n=Math.floor(n)),n},collectDtsInfo:function(e,t){'number'==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),e.minSegmentPts=void 0===e.minSegmentPts?t.pts:Math.min(e.minSegmentPts,t.pts),e.maxSegmentPts=void 0===e.maxSegmentPts?t.pts:Math.max(e.maxSegmentPts,t.pts)),'number'==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),e.minSegmentDts=void 0===e.minSegmentDts?t.dts:Math.min(e.minSegmentDts,t.dts),e.maxSegmentDts=void 0===e.maxSegmentDts?t.dts:Math.max(e.maxSegmentDts,t.dts))}},le=4,de={parseSei:function(e){for(var t=0,a={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&e[t]!==128;){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!a.payload&&n===le){a.payloadType=n,a.payloadSize=r,a.payload=e.subarray(t,t+r);break}t+=r,n=0,r=0}return a},parseUserData:function(e){return 181===e.payload[0]?49==(e.payload[1]<<8|e.payload[2])?'GA94'===String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?3===e.payload[7]?e.payload.subarray(8,e.payload.length-1):null:null:null:null},parseCaptionPackets:function(e,t){var a=[],n,r,i,s;if(!(64&t[0]))return a;for(r=31&t[0],n=0;n<r;n++)i=3*n,s={type:3&t[i+2],pts:e},4&t[i+2]&&(s.ccData=t[i+3]<<8|t[i+4],a.push(s));return a},discardEmulationPreventionBytes:function(e){for(var t=e.byteLength,a=[],n=1,r,i;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;r=t-a.length,i=new Uint8Array(r);var s=0;for(n=0;n<r;s++,n++)s===a[0]&&(s++,a.shift()),i[n]=e[s];return i},USER_DATA_REGISTERED_ITU_T_T35:le},pe=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new he(0,0),new he(0,1),new he(1,0),new he(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on('data',this.trigger.bind(this,'data')),e.on('partialdone',this.trigger.bind(this,'partialdone')),e.on('done',this.trigger.bind(this,'done'))},this)};pe.prototype=new a,pe.prototype.push=function(e){var t,a,n;if('sei_rbsp'===e.nalUnitType)return(t=de.parseSei(e.escapedRBSP),t.payloadType===de.USER_DATA_REGISTERED_ITU_T_T35)?(a=de.parseUserData(t),a?e.dts<this.latestDts_?void(this.ignoreNextEqualDts_=!0):e.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1))):void(n=de.parseCaptionPackets(e.pts,a),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts):void 0):void 0},pe.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return'flush'===e?t.flush():t.partialFlush()},this)},pe.prototype.flushStream=function(e){return this.captionPackets_.length?void(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){2>e.type&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):void this.flushCCStreams(e)},pe.prototype.flush=function(){return this.flushStream('flush')},pe.prototype.partialFlush=function(){return this.flushStream('partialFlush')},pe.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},pe.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null===this.activeCea608Channel_[e.type]||this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},pe.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},pe.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},pe.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var ue={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ce=function(e){return null===e?'':(e=ue[e]||e,String.fromCharCode(e))},me=14,ge=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ye=function(){for(var e=[],t=me+1;t--;)e.push('');return e},he=function e(t,a){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=a||0,this.name_='CC'+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(e){var t,a,n,r,i;if(t=32639&e.ccData,t===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_='popOn';else if(t===this.END_OF_CAPTION_)this.mode_='popOn',this.clearFormatting(e.pts),this.flushDisplayed(e.pts),a=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=a,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)'popOn'===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ye();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ye();else if(t===this.RESUME_DIRECT_CAPTIONING_)'paintOn'!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ye()),this.mode_='paintOn',this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))n=(3&n)<<8,i=ce(n|r),this[this.mode_](e.pts,i),this.column_++;else if(this.isExtCharacter(n,r))'popOn'===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),n=(3&n)<<8,i=ce(n|r),this[this.mode_](e.pts,i),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts,' '),this.column_++,14==(14&r)&&this.addFormatting(e.pts,['i']),1==(1&r)&&this.addFormatting(e.pts,['u']);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=ge.indexOf(7968&t);'rollUp'===this.mode_&&(0>s-this.rollUpRows_+1&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf('u')&&this.addFormatting(e.pts,['u']),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,['i'])}else this.isNormalChar(n)&&(0===r&&(r=null),i=ce(n),i+=ce(r),this[this.mode_](e.pts,i),this.column_+=i.length)}};he.prototype=new a,he.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(t){return console.error('Skipping malformed caption.'),''}}).join('\n').replace(/^\n+|\n+$/g,'');t.length&&this.trigger('data',{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},he.prototype.reset=function(){this.mode_='popOn',this.topRow_=0,this.startPts_=0,this.displayed_=ye(),this.nonDisplayed_=ye(),this.lastControlCode_=null,this.column_=0,this.row_=me,this.rollUpRows_=2,this.formatting_=[]},he.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},he.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&63>=t},he.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&63>=t},he.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&47>=t},he.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&35>=t},he.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&127>=t},he.prototype.isColorPAC=function(e){return 64<=e&&79>=e||96<=e&&127>=e},he.prototype.isNormalChar=function(e){return 32<=e&&127>=e},he.prototype.setRollUp=function(e,t){if('rollUp'!==this.mode_&&(this.row_=me,this.mode_='rollUp',this.flushDisplayed(e),this.nonDisplayed_=ye(),this.displayed_=ye()),void 0!==t&&t!==this.row_)for(var a=0;a<this.rollUpRows_;a++)this.displayed_[t-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]='';void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},he.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var a=t.reduce(function(e,t){return e+'<'+t+'>'},'');this[this.mode_](e,a)},he.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+'</'+t+'>'},'');this.formatting_=[],this[this.mode_](e,t)}},he.prototype.popOn=function(e,t){var a=this.nonDisplayed_[this.row_];a+=t,this.nonDisplayed_[this.row_]=a},he.prototype.rollUp=function(e,t){var a=this.displayed_[this.row_];a+=t,this.displayed_[this.row_]=a},he.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]='';for(e=this.row_+1;e<me+1;e++)this.displayed_[e]='';for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=''},he.prototype.paintOn=function(e,t){var a=this.displayed_[this.row_];a+=t,this.displayed_[this.row_]=a};var fe={CaptionStream:pe,Cea608Stream:he},_e={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},be='shared',ve=function(e,t){var a=1;for(e>t&&(a=-1);Math.abs(t-e)>4294967296;)e+=a*8589934592;return e},Te=function e(t){var a,n;e.prototype.init.call(this),this.type_=t||be,this.push=function(e){this.type_!==be&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=ve(e.dts,n),e.pts=ve(e.pts,n),a=e.dts,this.trigger('data',e))},this.flush=function(){n=a,this.trigger('done')},this.endTimeline=function(){this.flush(),this.trigger('endedtimeline')},this.discontinuity=function(){n=void 0,a=void 0},this.reset=function(){this.discontinuity(),this.trigger('reset')}};Te.prototype=new a;var ke=function(e,t,a){var n='',r;for(r=t;r<a;r++)n+='%'+('00'+e[r].toString(16)).slice(-2);return n},Se=function(e,t,a){return decodeURIComponent(ke(e,t,a))},Ce=function(e,t,a){return unescape(ke(e,t,a))},Ee=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Le={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Se(e.data,1,t),e.value=Se(e.data,t+1,e.data.length).replace(/\0*$/,'');break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Se(e.data,1,t),e.url=Se(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Ce(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}},we;we=function(e){var t={debug:!!(e&&e.debug),descriptor:e&&e.descriptor},a=0,n=[],r=0,s;if(we.prototype.init.call(this),this.dispatchType=_e.METADATA_STREAM_TYPE.toString(16),t.descriptor)for(s=0;s<t.descriptor.length;s++)this.dispatchType+=('00'+t.descriptor[s].toString(16)).slice(-2);this.push=function(e){var s,o,l,p,u,i;if('timed-metadata'===e.type){if(e.dataAlignmentIndicator&&(r=0,n.length=0),0===n.length&&(10>e.data.length||73!==e.data[0]||68!==e.data[1]||51!==e.data[2]))return void(t.debug&&console.log('Skipping unrecognized metadata packet'));if(n.push(e),r+=e.data.byteLength,1===n.length&&(a=Ee(e.data.subarray(6,10)),a+=10),!(r<a)){for(s={data:new Uint8Array(a),frames:[],pts:n[0].pts,dts:n[0].dts},u=0;u<a;)s.data.set(n[0].data.subarray(0,a-u),u),u+=n[0].data.byteLength,r-=n[0].data.byteLength,n.shift();o=10,64&s.data[5]&&(o+=4,o+=Ee(s.data.subarray(10,14)),a-=Ee(s.data.subarray(16,20)));do{if(l=Ee(s.data.subarray(o+4,o+8)),1>l)return console.log('Malformed ID3 frame encountered. Skipping metadata parsing.');if(i=String.fromCharCode(s.data[o],s.data[o+1],s.data[o+2],s.data[o+3]),p={id:i,data:s.data.subarray(o+10,o+l+10)},p.key=p.id,Le[p.id]&&(Le[p.id](p),'com.apple.streaming.transportStreamTimestamp'===p.owner)){var c=p.data,d=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;d*=4,d+=3&c[7],p.timeStamp=d,void 0===s.pts&&void 0===s.dts&&(s.pts=p.timeStamp,s.dts=p.timeStamp),this.trigger('timestamp',p)}s.frames.push(p),o+=10,o+=l}while(o<a);this.trigger('data',s)}}}},we.prototype=new a;var xe=we,Pe={TimestampRolloverStream:Te,handleRollover:ve}.TimestampRolloverStream,Ie=188,Me=71,De,Oe,Ae;De=function(){var e=new Uint8Array(Ie),t=0;De.prototype.init.call(this),this.push=function(a){var n=0,r=Ie,i;for(t?(i=new Uint8Array(a.byteLength+t),i.set(e.subarray(0,t)),i.set(a,t),t=0):i=a;r<i.byteLength;){if(i[n]===Me&&i[r]===Me){this.trigger('data',i.subarray(n,r)),n+=Ie,r+=Ie;continue}n++,r++}n<i.byteLength&&(e.set(i.subarray(n),0),t=i.byteLength-n)},this.flush=function(){t==Ie&&e[0]===Me&&(this.trigger('data',e),t=0),this.trigger('done')},this.endTimeline=function(){this.flush(),this.trigger('endedtimeline')},this.reset=function(){t=0,this.trigger('reset')}},De.prototype=new a,Oe=function(){var e,t,a,n;Oe.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var r=0;n.payloadUnitStartIndicator&&(r+=e[r]+1),'pat'===n.type?t(e.subarray(r),n):a(e.subarray(r),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},a=function(e,t){var a,r,i,s;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},a=(15&e[1])<<8|e[2],r=3+a-4,i=(15&e[10])<<8|e[11],s=12+i;s<r;){var o=e[s],l=(31&e[s+1])<<8|e[s+2];o===_e.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=l:o===_e.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=l:o===_e.METADATA_STREAM_TYPE&&(n.programMapTable['timed-metadata'][l]=o),s+=((15&e[s+3])<<8|e[s+4])+5}t.programMapTable=n.programMapTable}},this.push=function(t){var a={},n=4;if(a.payloadUnitStartIndicator=!!(64&t[1]),a.pid=31&t[1],a.pid<<=8,a.pid|=t[2],1<(48&t[3])>>>4&&(n+=t[n]+1),0===a.pid)a.type='pat',e(t.subarray(n),a),this.trigger('data',a);else if(a.pid===this.pmtPid)for(a.type='pmt',e(t.subarray(n),a),this.trigger('data',a);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,a]):this.processPes_(t,n,a)},this.processPes_=function(e,t,a){a.streamType=a.pid===this.programMapTable.video?_e.H264_STREAM_TYPE:a.pid===this.programMapTable.audio?_e.ADTS_STREAM_TYPE:this.programMapTable['timed-metadata'][a.pid],a.type='pes',a.data=e.subarray(t),this.trigger('data',a)}},Oe.prototype=new a,Oe.STREAM_TYPES={h264:27,adts:15},Ae=function(){var e=this,t={data:[],size:0},a={data:[],size:0},n={data:[],size:0},r=function(e,t){var a;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),a=e[7],192&a&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&a&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},i=function(t,a,n){var s=new Uint8Array(t.size),o={type:a},l=0,i=0,d=!1,p;if(t.data.length&&!(9>t.size)){for(o.trackId=t.data[0].pid,l=0;l<t.data.length;l++)p=t.data[l],s.set(p.data,i),i+=p.data.byteLength;r(s,o),d='video'===a||o.packetLength<=t.size,(n||d)&&(t.size=0,t.data.length=0),d&&e.trigger('data',o)}},s;Ae.prototype.init.call(this),this.push=function(r){({pat:function(){},pes:function(){var e,s;switch(r.streamType){case _e.H264_STREAM_TYPE:case _e.H264_STREAM_TYPE:e=t,s='video';break;case _e.ADTS_STREAM_TYPE:e=a,s='audio';break;case _e.METADATA_STREAM_TYPE:e=n,s='timed-metadata';break;default:return;}r.payloadUnitStartIndicator&&i(e,s,!0),e.data.push(r),e.size+=r.data.byteLength},pmt:function(){var t={type:'metadata',tracks:[]};s=r.programMapTable,null!==s.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+s.video,codec:'avc',type:'video'}),null!==s.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+s.audio,codec:'adts',type:'audio'}),e.trigger('data',t)}})[r.type]()},this.reset=function(){t.size=0,t.data.length=0,a.size=0,a.data.length=0,this.trigger('reset')},this.flushStreams_=function(){i(t,'video'),i(a,'audio'),i(n,'timed-metadata')},this.flush=function(){this.flushStreams_(),this.trigger('done')}},Ae.prototype=new a;var Re={PAT_PID:0,MP2T_PACKET_LENGTH:Ie,TransportPacketStream:De,TransportParseStream:Oe,ElementaryStream:Ae,TimestampRolloverStream:Pe,CaptionStream:fe.CaptionStream,Cea608Stream:fe.Cea608Stream,MetadataStream:xe};for(var Ne in _e)_e.hasOwnProperty(Ne)&&(Re[Ne]=_e[Ne]);var Ue=Re,Be=ne.ONE_SECOND_IN_TS,Ye=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Fe;Fe=function(e){var t=0,a;Fe.prototype.init.call(this),this.push=function(n){var r=0,i,s,o,l,d,p;if(e||(t=0),'audio'===n.type)for(a?(l=a,a=new Uint8Array(l.byteLength+n.data.byteLength),a.set(l),a.set(n.data,l.byteLength)):a=n.data;r+5<a.length;){if(255!==a[r]||240!=(246&a[r+1])){r++;continue}if(s=2*(1&~a[r+1]),i=(3&a[r+3])<<11|a[r+4]<<3|(224&a[r+5])>>5,d=1024*((3&a[r+6])+1),p=d*Be/Ye[(60&a[r+2])>>>2],o=r+i,a.byteLength<o)return;if(this.trigger('data',{pts:n.pts+t*p,dts:n.dts+t*p,sampleCount:d,audioobjecttype:(3&a[r+2]>>>6)+1,channelcount:(1&a[r+2])<<2|(192&a[r+3])>>>6,samplerate:Ye[(60&a[r+2])>>>2],samplingfrequencyindex:(60&a[r+2])>>>2,samplesize:16,data:a.subarray(r+7+s,o)}),t++,a.byteLength===o)return void(a=void 0);a=a.subarray(o)}},this.flush=function(){t=0,this.trigger('done')},this.reset=function(){a=void 0,this.trigger('reset')},this.endTimeline=function(){a=void 0,this.trigger('endedtimeline')}},Fe.prototype=new a;var je=Fe,He;He=function(e){var t=e.byteLength,a=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var r=e.byteLength-t,i=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error('no bytes available');i.set(e.subarray(r,r+s)),a=new DataView(i.buffer).getUint32(0),n=8*s,t-=s},this.skipBits=function(e){var r;n>e?(a<<=e,n-=e):(e-=n,r=Math.floor(e/8),e-=8*r,t-=r,this.loadWord(),a<<=e,n-=e)},this.readBits=function(e){var r=Math.min(n,e),i=a>>>32-r;return n-=r,0<n?a<<=r:0<t&&this.loadWord(),r=e-r,0<r?i<<r|this.readBits(r):i},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(a&2147483648>>>e))return a<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Ve=He,ze,qe,We;qe=function(){var e=0,t,a;qe.prototype.init.call(this),this.push=function(n){var r;a?(r=new Uint8Array(a.byteLength+n.data.byteLength),r.set(a),r.set(n.data,a.byteLength),a=r):a=n.data;for(var i=a.byteLength;e<i-3;e++)if(1===a[e+2]){t=e+5;break}for(;t<i;)switch(a[t]){case 0:if(0!==a[t-1]){t+=2;break}else if(0!==a[t-2]){t++;break}e+3!=t-2&&this.trigger('data',a.subarray(e+3,t-2));do t++;while(1!==a[t]&&t<i);e=t-2,t+=3;break;case 1:if(0!==a[t-1]||0!==a[t-2]){t+=3;break}this.trigger('data',a.subarray(e+3,t-2)),e=t-2,t+=3;break;default:t+=3;}a=a.subarray(e),t-=e,e=0},this.reset=function(){a=null,e=0,this.trigger('reset')},this.flush=function(){a&&3<a.byteLength&&this.trigger('data',a.subarray(e+3)),a=null,e=0,this.trigger('done')},this.endTimeline=function(){this.flush(),this.trigger('endedtimeline')}},qe.prototype=new a,We={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ze=function(){var e=new qe,t,a,n,r,i,s,o;ze.prototype.init.call(this),t=this,this.push=function(t){'video'!==t.type||(a=t.trackId,n=t.pts,r=t.dts,e.push(t))},e.on('data',function(e){var o={trackId:a,pts:n,dts:r,data:e};switch(31&e[0]){case 5:o.nalUnitType='slice_layer_without_partitioning_rbsp_idr';break;case 6:o.nalUnitType='sei_rbsp',o.escapedRBSP=i(e.subarray(1));break;case 7:o.nalUnitType='seq_parameter_set_rbsp',o.escapedRBSP=i(e.subarray(1)),o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType='pic_parameter_set_rbsp';break;case 9:o.nalUnitType='access_unit_delimiter_rbsp';break;default:}t.trigger('data',o)}),e.on('done',function(){t.trigger('done')}),e.on('partialdone',function(){t.trigger('partialdone')}),e.on('reset',function(){t.trigger('reset')}),e.on('endedtimeline',function(){t.trigger('endedtimeline')}),this.flush=function(){e.flush()},this.partialFlush=function(){e.partialFlush()},this.reset=function(){e.reset()},this.endTimeline=function(){e.endTimeline()},o=function(e,t){var a=8,n=8,r,i;for(r=0;r<e;r++)0!=n&&(i=t.readExpGolomb(),n=(a+i+256)%256),a=0==n?a:n},i=function(e){for(var t=e.byteLength,a=[],n=1,r,i;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;r=t-a.length,i=new Uint8Array(r);var s=0;for(n=0;n<r;s++,n++)s===a[0]&&(s++,a.shift()),i[n]=e[s];return i},s=function(e){var t=0,a=0,n=0,r=0,s=1,l,d,p,u,c,m,g,y,h,f,_,b,v,T;if(l=new Ve(e),d=l.readUnsignedByte(),u=l.readUnsignedByte(),p=l.readUnsignedByte(),l.skipUnsignedExpGolomb(),We[d]&&(c=l.readUnsignedExpGolomb(),3===c&&l.skipBits(1),l.skipUnsignedExpGolomb(),l.skipUnsignedExpGolomb(),l.skipBits(1),l.readBoolean()))for(_=3===c?12:8,T=0;T<_;T++)l.readBoolean()&&(6>T?o(16,l):o(64,l));if(l.skipUnsignedExpGolomb(),m=l.readUnsignedExpGolomb(),0===m)l.readUnsignedExpGolomb();else if(1===m)for(l.skipBits(1),l.skipExpGolomb(),l.skipExpGolomb(),g=l.readUnsignedExpGolomb(),T=0;T<g;T++)l.skipExpGolomb();if(l.skipUnsignedExpGolomb(),l.skipBits(1),y=l.readUnsignedExpGolomb(),h=l.readUnsignedExpGolomb(),f=l.readBits(1),0===f&&l.skipBits(1),l.skipBits(1),l.readBoolean()&&(t=l.readUnsignedExpGolomb(),a=l.readUnsignedExpGolomb(),n=l.readUnsignedExpGolomb(),r=l.readUnsignedExpGolomb()),l.readBoolean()&&l.readBoolean()){switch(v=l.readUnsignedByte(),v){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:{b=[l.readUnsignedByte()<<8|l.readUnsignedByte(),l.readUnsignedByte()<<8|l.readUnsignedByte()];break}}b&&(s=b[0]/b[1])}return{profileIdc:d,levelIdc:p,profileCompatibility:u,width:Math.ceil((16*(y+1)-2*t-2*a)*s),height:16*((2-f)*(h+1))-2*n-2*r,sarRatio:b}}},ze.prototype=new a;var Ge={H264Stream:ze,NalByteStream:qe},Ke=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Xe=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Je=function(e,t,a){var n='',r;for(r=t;r<a;r++)n+='%'+('00'+e[r].toString(16)).slice(-2);return n},$e=function(e,t,a){return unescape(Je(e,t,a))},Qe={isLikelyAacData:function(e){return 73===e[0]&&68===e[1]&&51===e[2]},parseId3TagSize:function(e,t){var a=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],n=e[t+5];return(16&n)>>4?a+20:a+10},parseAdtsSize:function(e,t){var a=(224&e[t+5])>>5,n=e[t+4]<<3,r=6144&e[t+3];return r|n|a},parseType:function(e,t){return 73===e[t]&&68===e[t+1]&&51===e[t+2]?'timed-metadata':!0&e[t]&&240==(240&e[t+1])?'audio':null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255!==e[t]||240!=(246&e[t+1])){t++;continue}return Ke[(60&e[t+2])>>>2]}return null},parseAacTimestamp:function(e){var t,a,n,r;t=10,64&e[5]&&(t+=4,t+=Xe(e.subarray(10,14)));do{if(a=Xe(e.subarray(t+4,t+8)),1>a)return null;if(r=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),'PRIV'===r){n=e.subarray(t+10,t+a+10);for(var s=0;s<n.byteLength;s++)if(0===n[s]){var i=$e(n,0,s);if('com.apple.streaming.transportStreamTimestamp'===i){var o=n.subarray(s+1),l=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return l*=4,l+=3&o[7],l}break}}t+=10,t+=a}while(t<e.byteLength);return null}},Ze;Ze=function(){var e=new Uint8Array,t=0;Ze.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(a){var n=0,r=0,i,s,o,l;for(e.length?(l=e.length,e=new Uint8Array(a.byteLength+l),e.set(e.subarray(0,l)),e.set(a,l)):e=a;3<=e.length-r;){if(73===e[r]&&68===e[r+1]&&51===e[r+2]){if(10>e.length-r)break;if(n=Qe.parseId3TagSize(e,r),r+n>e.length)break;s={type:'timed-metadata',data:e.subarray(r,r+n)},this.trigger('data',s),r+=n;continue}else if(255==(255&e[r])&&240==(240&e[r+1])){if(7>e.length-r)break;if(n=Qe.parseAdtsSize(e,r),r+n>e.length)break;o={type:'audio',data:e.subarray(r,r+n),pts:t,dts:t},this.trigger('data',o),r+=n;continue}r++}i=e.length-r,e=0<i?e.subarray(r):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger('reset')},this.endTimeline=function(){e=new Uint8Array,this.trigger('endedtimeline')}},Ze.prototype=new a;var et=Ze,tt=Ge.H264Stream,at=Qe.isLikelyAacData,nt=ne.ONE_SECOND_IN_TS,rt=['audioobjecttype','channelcount','samplerate','samplingfrequencyindex','samplesize'],it=['width','height','profileIdc','levelIdc','profileCompatibility','sarRatio'],st=function(e,t){var a;if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0},ot=function(e,t,a,n,r,i){return{start:{dts:e,pts:e+(a-t)},end:{dts:e+(n-t),pts:e+(r-a)},prependedContentDuration:i,baseMediaDecodeTime:e}},lt,dt,pt,ut;dt=function(e,t){var a=[],n=0,r=0,i=0,s=Infinity;t=t||{},dt.prototype.init.call(this),this.push=function(t){oe.collectDtsInfo(e,t),e&&rt.forEach(function(a){e[a]=t[a]}),a.push(t)},this.setEarliestDts=function(t){r=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){i=e},this.flush=function(){var o,l,d,p,u;return 0===a.length?void this.trigger('done','AudioSegmentStream'):void(o=ie.trimAdtsFramesByEarliestDts(a,e,r),e.baseMediaDecodeTime=oe.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),ie.prefixWithSilence(e,o,i,s),e.samples=ie.generateSampleTable(o),d=F.mdat(ie.concatenateFrameData(o)),a=[],l=F.moof(n,[e]),p=new Uint8Array(l.byteLength+d.byteLength),n++,p.set(l),p.set(d,l.byteLength),oe.clearDtsInfo(e),u=Math.ceil(1024*nt/e.samplerate),o.length&&this.trigger('timingInfo',{start:o[0].dts,end:o[0].dts+o.length*u}),this.trigger('data',{track:e,boxes:p}),this.trigger('done','AudioSegmentStream'))},this.reset=function(){oe.clearDtsInfo(e),a=[],this.trigger('reset')}},dt.prototype=new a,lt=function(e,t){var a=0,n=[],r=[],i,s;t=t||{},lt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){oe.collectDtsInfo(e,t),'seq_parameter_set_rbsp'!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],it.forEach(function(t){e[t]=i[t]},this)),'pic_parameter_set_rbsp'!==t.nalUnitType||s||(s=t.data,e.pps=[t.data]),n.push(t)},this.flush=function(){for(var i=0,s,o,l,d,p,u,c,m;n.length&&'access_unit_delimiter_rbsp'!==n[0].nalUnitType;)n.shift();if(0===n.length)return this.resetStream_(),void this.trigger('done','VideoSegmentStream');if(s=V.groupNalsIntoFrames(n),l=V.groupFramesIntoGops(s),l[0][0].keyFrame||(o=this.getGopForFusion_(n[0],e),o?(i=o.duration,l.unshift(o),l.byteLength+=o.byteLength,l.nalCount+=o.nalCount,l.pts=o.pts,l.dts=o.dts,l.duration+=o.duration):l=V.extendFirstKeyFrame(l)),r.length){var g;if(g=t.alignGopsAtEnd?this.alignGopsAtEnd_(l):this.alignGopsAtStart_(l),!g)return this.gopCache_.unshift({gop:l.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),n=[],this.resetStream_(),void this.trigger('done','VideoSegmentStream');oe.clearDtsInfo(e),l=g}oe.collectDtsInfo(e,l),e.samples=V.generateSampleTable(l),p=F.mdat(V.concatenateNalData(l)),e.baseMediaDecodeTime=oe.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger('processedGopsInfo',l.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),c=l[0],m=l[l.length-1],this.trigger('segmentTimingInfo',ot(e.baseMediaDecodeTime,c.dts,c.pts,m.dts+m.duration,m.pts+m.duration,i)),this.trigger('timingInfo',{start:l[0].dts,end:l[l.length-1].dts+l[l.length-1].duration}),this.gopCache_.unshift({gop:l.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),n=[],this.trigger('baseMediaDecodeTime',e.baseMediaDecodeTime),this.trigger('timelineStartInfo',e.timelineStartInfo),d=F.moof(a,[e]),u=new Uint8Array(d.byteLength+p.byteLength),a++,u.set(d),u.set(p,d.byteLength),this.trigger('data',{track:e,boxes:u}),this.resetStream_(),this.trigger('done','VideoSegmentStream')},this.reset=function(){this.resetStream_(),n=[],this.gopCache_.length=0,r.length=0,this.trigger('reset')},this.resetStream_=function(){oe.clearDtsInfo(e),i=void 0,s=void 0},this.getGopForFusion_=function(t){var a=Infinity,n,r,s,o,l;for(l=0;l<this.gopCache_.length;l++)(o=this.gopCache_[l],s=o.gop,e.pps&&st(e.pps[0],o.pps[0])&&e.sps&&st(e.sps[0],o.sps[0]))&&(s.dts<e.timelineStartInfo.dts||(n=t.dts-s.dts-s.duration,n>=-1e4&&n<=45e3&&(!r||a>n)&&(r=o,a=n)));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,a,n,i,s,o,l,d;for(s=e.byteLength,o=e.nalCount,l=e.duration,t=a=0;t<r.length&&a<e.length&&(n=r[t],i=e[a],n.pts!==i.pts);){if(i.pts>n.pts){t++;continue}a++,s-=i.byteLength,o-=i.nalCount,l-=i.duration}return 0===a?e:a===e.length?null:(d=e.slice(a),d.byteLength=s,d.duration=l,d.nalCount=o,d.pts=d[0].pts,d.dts=d[0].dts,d)},this.alignGopsAtEnd_=function(e){var t,a,n,i,s,o;for(t=r.length-1,a=e.length-1,s=null,o=!1;0<=t&&0<=a;){if(n=r[t],i=e[a],n.pts===i.pts){o=!0;break}if(n.pts>i.pts){t--;continue}t===r.length-1&&(s=a),a--}if(!o&&null===s)return null;var l;if(l=o?a:s,0===l)return e;var d=e.slice(l),p=d.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return d.byteLength=p.byteLength,d.duration=p.duration,d.nalCount=p.nalCount,d.pts=d[0].pts,d.dts=d[0].dts,d},this.alignGopsWith=function(e){r=e}},lt.prototype=new a,ut=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},this.remuxTracks='undefined'==typeof e.remux||!!e.remux,this.keepOriginalTimestamps='boolean'==typeof e.keepOriginalTimestamps&&e.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ut.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):void(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,'video'===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),'audio'===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes)))}},ut.prototype=new a,ut.prototype.flush=function(e){var t=0,a={captions:[],captionStreams:{},metadata:[],info:{}},n=0,r,s,o,l;if(this.pendingTracks.length<this.numberOfTracks){if('VideoSegmentStream'!==e&&'AudioSegmentStream'!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger('done'),this.emittedTracks=0))}if(this.videoTrack?(n=this.videoTrack.timelineStartInfo.pts,it.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(n=this.audioTrack.timelineStartInfo.pts,rt.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(a.type=1===this.pendingTracks.length?this.pendingTracks[0].type:'combined',this.emittedTracks+=this.pendingTracks.length,o=F.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(o.byteLength),a.initSegment.set(o),a.data=new Uint8Array(this.pendingBytes),l=0;l<this.pendingBoxes.length;l++)a.data.set(this.pendingBoxes[l],t),t+=this.pendingBoxes[l].byteLength;for(l=0;l<this.pendingCaptions.length;l++)r=this.pendingCaptions[l],r.startTime=ne.metadataTsToSeconds(r.startPts,n,this.keepOriginalTimestamps),r.endTime=ne.metadataTsToSeconds(r.endPts,n,this.keepOriginalTimestamps),a.captionStreams[r.stream]=!0,a.captions.push(r);for(l=0;l<this.pendingMetadata.length;l++)s=this.pendingMetadata[l],s.cueTime=ne.metadataTsToSeconds(s.pts,n,this.keepOriginalTimestamps),a.metadata.push(s);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger('data',a),l=0;l<a.captions.length;l++)r=a.captions[l],this.trigger('caption',r);for(l=0;l<a.metadata.length;l++)s=a.metadata[l],this.trigger('id3Frame',s)}this.emittedTracks>=this.numberOfTracks&&(this.trigger('done'),this.emittedTracks=0)},ut.prototype.setRemux=function(e){this.remuxTracks=e},pt=function(e){var t=this,a=!0,n,r;pt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var a={};this.transmuxPipeline_=a,a.type='aac',a.metadataStream=new Ue.MetadataStream,a.aacStream=new et,a.audioTimestampRolloverStream=new Ue.TimestampRolloverStream('audio'),a.timedMetadataTimestampRolloverStream=new Ue.TimestampRolloverStream('timed-metadata'),a.adtsStream=new je,a.coalesceStream=new ut(e,a.metadataStream),a.headOfPipeline=a.aacStream,a.aacStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream),a.aacStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream),a.metadataStream.on('timestamp',function(e){a.aacStream.setTimestamp(e.timeStamp)}),a.aacStream.on('data',function(i){'timed-metadata'!==i.type||a.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:'adts',type:'audio'},a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new dt(r,e),a.audioSegmentStream.on('timingInfo',t.trigger.bind(t,'audioTimingInfo')),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream)),t.trigger('trackinfo',{hasAudio:!!r,hasVideo:!!n})}),a.coalesceStream.on('data',this.trigger.bind(this,'data')),a.coalesceStream.on('done',this.trigger.bind(this,'done'))},this.setupTsPipeline=function(){var a={};this.transmuxPipeline_=a,a.type='ts',a.metadataStream=new Ue.MetadataStream,a.packetStream=new Ue.TransportPacketStream,a.parseStream=new Ue.TransportParseStream,a.elementaryStream=new Ue.ElementaryStream,a.timestampRolloverStream=new Ue.TimestampRolloverStream,a.adtsStream=new je,a.h264Stream=new tt,a.captionStream=new Ue.CaptionStream,a.coalesceStream=new ut(e,a.metadataStream),a.headOfPipeline=a.packetStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream).pipe(a.timestampRolloverStream),a.timestampRolloverStream.pipe(a.h264Stream),a.timestampRolloverStream.pipe(a.adtsStream),a.timestampRolloverStream.pipe(a.metadataStream).pipe(a.coalesceStream),a.h264Stream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on('data',function(s){var o;if('metadata'===s.type){for(o=s.tracks.length;o--;)n||'video'!==s.tracks[o].type?r||'audio'!==s.tracks[o].type||(r=s.tracks[o],r.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime):(n=s.tracks[o],n.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime);n&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new lt(n,e),a.videoSegmentStream.on('timelineStartInfo',function(e){r&&(r.timelineStartInfo=e,a.audioSegmentStream.setEarliestDts(e.dts))}),a.videoSegmentStream.on('processedGopsInfo',t.trigger.bind(t,'gopInfo')),a.videoSegmentStream.on('segmentTimingInfo',t.trigger.bind(t,'videoSegmentTimingInfo')),a.videoSegmentStream.on('baseMediaDecodeTime',function(e){r&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),a.videoSegmentStream.on('timingInfo',t.trigger.bind(t,'videoTimingInfo')),a.h264Stream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),r&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new dt(r,e),a.audioSegmentStream.on('timingInfo',t.trigger.bind(t,'audioTimingInfo')),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream)),t.trigger('trackinfo',{hasAudio:!!r,hasVideo:!!n})}}),a.coalesceStream.on('data',this.trigger.bind(this,'data')),a.coalesceStream.on('id3Frame',function(e){e.dispatchType=a.metadataStream.dispatchType,t.trigger('id3Frame',e)}),a.coalesceStream.on('caption',this.trigger.bind(this,'caption')),a.coalesceStream.on('done',this.trigger.bind(this,'done'))},this.setBaseMediaDecodeTime=function(t){var a=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=t),r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,oe.clearDtsInfo(r),!e.keepOriginalTimestamps&&(r.timelineStartInfo.baseMediaDecodeTime=t),a.audioTimestampRolloverStream&&a.audioTimestampRolloverStream.discontinuity()),n&&(a.videoSegmentStream&&(a.videoSegmentStream.gopCache_=[]),n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,oe.clearDtsInfo(n),a.captionStream.reset(),!e.keepOriginalTimestamps&&(n.timelineStartInfo.baseMediaDecodeTime=t)),a.timestampRolloverStream&&a.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var a=this.transmuxPipeline_;e.remux=t,a&&a.coalesceStream&&a.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){n&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(a){var t=at(e);t&&'aac'!==this.transmuxPipeline_.type?this.setupAacPipeline():!t&&'ts'!==this.transmuxPipeline_.type&&this.setupTsPipeline(),a=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){a=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},pt.prototype=new a;var ct={Transmuxer:pt,VideoSegmentStream:lt,AudioSegmentStream:dt,AUDIO_PROPERTIES:rt,VIDEO_PROPERTIES:it,generateVideoSegmentTimingInfo:ot},mt=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},gt=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),yt=function(e,t){t.on('data',function(t){var a=t.initSegment;t.initSegment={data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:'data',segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.captionStream&&t.captionStream.on('data',function(t){e.postMessage({action:'caption',data:t})}),t.on('done',function(){e.postMessage({action:'done'})}),t.on('gopInfo',function(t){e.postMessage({action:'gopInfo',gopInfo:t})}),t.on('videoSegmentTimingInfo',function(t){e.postMessage({action:'videoSegmentTimingInfo',videoSegmentTimingInfo:t})})},ht=function(){function e(t,a){mt(this,e),this.options=a||{},this.self=t,this.init()}return gt(e,[{key:'init',value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ct.Transmuxer(this.options),yt(this.self,this.transmuxer)}},{key:'push',value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:'reset',value:function(){this.init()}},{key:'setTimestampOffset',value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:'setAudioAppendStart',value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:'flush',value:function(){this.transmuxer.flush()}},{key:'resetCaptions',value:function(){this.transmuxer.resetCaptions()}},{key:'alignGopsWith',value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}(),ft=new function(e){e.onmessage=function(t){return'init'===t.data.action&&t.data.options?void(this.messageHandlers=new ht(e,t.data.options)):void(!this.messageHandlers&&(this.messageHandlers=new ht(e)),t.data&&t.data.action&&'init'!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(e);return ft}()}),vo={videoCodec:'avc1',videoObjectTypeIndicator:'.4d400d',audioProfile:'2'},To=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,a){var n=('00'+(+t).toString(16)).slice(-2),r=('00'+(+a).toString(16)).slice(-2);return'avc1.'+n+'00'+r})})},ko=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',t={codecCount:0},a=void 0;return t.codecCount=e.split(',').length,t.codecCount=t.codecCount||2,a=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e),a&&(t.videoCodec=a[2],t.videoObjectTypeIndicator=a[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},So=function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return To([e])[0]})},Co=function(e,t,a){return e+'/'+t+'; codecs="'+a.filter(function(e){return!!e}).join(', ')+'"'},Eo=function(e){return e.segments&&e.segments.length&&e.segments[0].map?'mp4':'mp2t'},Lo=function(e){var t=e.attributes||{};return t.CODECS?ko(t.CODECS):vo},wo=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var a=e.mediaGroups.AUDIO[t];if(!a)return null;for(var n in a){var r=a[n];if(r['default']&&r.playlists)return ko(r.playlists[0].attributes.CODECS).audioProfile}return null},xo=function(e,t){var a=Eo(t),n=Lo(t),r=t.attributes||{},i=!0,s=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&r.AUDIO){var o=e.mediaGroups.AUDIO[r.AUDIO];if(o)for(var l in s=!0,i=!1,o)if(!o[l].uri&&!o[l].playlists){i=!0;break}}s&&!n.audioProfile&&(!i&&(n.audioProfile=wo(e,r.AUDIO)),!n.audioProfile&&(Ue.log.warn('Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)'),n.audioProfile=vo.audioProfile));var d={};n.videoCodec&&(d.video=''+n.videoCodec+n.videoObjectTypeIndicator),n.audioProfile&&(d.audio='mp4a.40.'+n.audioProfile);var p=Co('audio',a,[d.audio]),u=Co('video',a,[d.video]),c=Co('video',a,[d.video,d.audio]);return s?!i&&d.video?[u,p]:i||d.video?[c,p]:[p,p]:d.video?[c]:[p]},Po=function(e){var t={type:'',parameters:{}},a=e.trim().split(';');return t.type=a.shift().trim(),a.forEach(function(e){var a=e.trim().split('=');if(1<a.length){var n=a[0].replace(/"/g,'').trim(),r=a[1].replace(/"/g,'').trim();t.parameters[n]=r}}),t},Io=function(e){return /mp4a\.\d+.\d+/i.test(e)},Mo=function(e){return /avc1\.[\da-f]+/i.test(e)},Do=function(e,t,a){if('undefined'==typeof t||null===t||!e.length)return[];var n=Math.ceil(9e4*(t-a+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>n);r++);return e.slice(r)},Oo=function(e,t,a){if(!t.length)return e;if(a)return t.slice();var n=t[0].pts,r=0;for(r;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)},Ao=function(e,t,a,n){for(var r=Math.ceil(9e4*(t-n)),s=Math.ceil(9e4*(a-n)),o=e.slice(),l=e.length;l--&&!(e[l].pts<=s););if(-1===l)return o;for(var i=l+1;i--&&!(e[i].pts<=r););return i=Math.max(i,0),o.splice(i,l-i+1),o},Ro=function(e,t,a){var n=null,r=null,i=0,s=[],o=[];if(!e&&!t)return Ue.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(a)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Ue.createTimeRange();for(var l=e.buffered,d=t.buffered,p=l.length;p--;)s.push({time:l.start(p),type:'start'}),s.push({time:l.end(p),type:'end'});for(p=d.length;p--;)s.push({time:d.start(p),type:'start'}),s.push({time:d.end(p),type:'end'});for(s.sort(function(e,t){return e.time-t.time}),p=0;p<s.length;p++)'start'===s[p].type?(i++,2==i&&(n=s[p].time)):'end'===s[p].type&&(i--,1==i&&(r=s[p].time)),null!==n&&null!==r&&(o.push([n,r]),n=null,r=null);return Ue.createTimeRanges(o)},No=9e4,Uo=function(e,t){var a=e.addSourceBuffer(t),n=Object.create(null);n.updating=!1,n.realBuffer_=a;var r=function(e){'function'==typeof a[e]?n[e]=function(){return a[e].apply(a,arguments)}:'undefined'==typeof n[e]&&Object.defineProperty(n,e,{get:function(){return a[e]},set:function(t){return a[e]=t}})};for(var i in a)r(i);return n},Bo=function(e){function t(e,a){Wi(this,t);var n=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ue.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=a,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=Ue.browser.IE_VERSION;var r={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){Io(e)?n.audioCodec_=e:Mo(e)&&(n.videoCodec_=e)}),n.transmuxer_=new bo,n.transmuxer_.postMessage({action:'init',options:r}),n.transmuxer_.onmessage=function(e){return'data'===e.data.action?n.data_(e):'done'===e.data.action?n.done_(e):'gopInfo'===e.data.action?n.appendGopInfo_(e):'videoSegmentTimingInfo'===e.data.action?n.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,'timestampOffset',{get:function(){return this.timestampOffset_},set:function(e){'number'==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:'setTimestampOffset',timestampOffset:e}))}}),Object.defineProperty(n,'appendWindowStart',{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,'updating',{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,'buffered',{get:function(){return Ro(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return Xi(t,e),Gi(t,[{key:'data_',value:function(e){var t=e.data.segment;return t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),ro(this,this.mediaSource_,t),void this.pendingBuffers_.push(t)}},{key:'done_',value:function(){return'closed'===this.mediaSource_.readyState?void(this.pendingBuffers_.length=0):void this.processPendingSegments_()}},{key:'videoSegmentTimingInfo_',value:function(e){var t={start:{decode:e.start.dts/No,presentation:e.start.pts/No},end:{decode:e.end.dts/No,presentation:e.end.pts/No},baseMediaDecodeTime:e.baseMediaDecodeTime/No};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/No),this.trigger({type:'videoSegmentTimingInfo',videoSegmentTimingInfo:t})}},{key:'createRealSourceBuffers_',value:function(){var e=this,t=['audio','video'];t.forEach(function(a){if(e[a+'Codec_']&&!e[a+'Buffer_']){var n=null;if(e.mediaSource_[a+'Buffer_'])n=e.mediaSource_[a+'Buffer_'],n.updating=!1;else{var r=a+'/mp4;codecs="'+e[a+'Codec_']+'"';n=Uo(e.mediaSource_.nativeMediaSource_,r),e.mediaSource_[a+'Buffer_']=n}e[a+'Buffer_']=n,['update','updatestart','updateend'].forEach(function(r){n.addEventListener(r,function(){if(!('audio'===a&&e.audioDisabled_)){'updateend'===r&&(e[a+'Buffer_'].updating=!1);var n=t.every(function(n){return!!('audio'===n&&e.audioDisabled_)||!(a!==n&&e[n+'Buffer_']&&e[n+'Buffer_'].updating)});if(n)return e.trigger(r)}})})}})}},{key:'appendBuffer',value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:'setAudioAppendStart',appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:'alignGopsWith',gopsToAlignWith:Do(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:'push',data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:'flush'})}},{key:'appendGopInfo_',value:function(e){this.gopBuffer_=Oo(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:'remove',value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=Ao(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),io(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var a in this.inbandTextTracks_)io(e,t,this.inbandTextTracks_[a])}},{key:'processPendingSegments_',value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger('updateend'),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce(function(e,t){var a=t.type,n=t.data,r=t.initSegment;return e[a].segments.push(n),e[a].bytes+=n.byteLength,e[a].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[a].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:'audioinfo',info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:'videoinfo',info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)&&(t=!0),lo(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger('updateend'),this.bufferUpdating_=!1}},{key:'concatAndAppendSegments_',value:function(e,t){var a=0,n=void 0;if(e.bytes){n=new Uint8Array(e.bytes),e.segments.forEach(function(e){n.set(e,a),a+=e.byteLength});try{t.updating=!0,t.appendBuffer(n)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:'APPEND_BUFFER_ERR',message:e.message,originalError:e})}}}},{key:'abort',value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:'reset'}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(Ue.EventTarget),Yo=function(e){function t(){Wi(this,t);var e=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=void 0;for(a in e.nativeMediaSource_=new Ve.a.MediaSource,e.nativeMediaSource_)a in t.prototype||'function'!=typeof e.nativeMediaSource_[a]||(e[a]=e.nativeMediaSource_[a].bind(e.nativeMediaSource_));return e.duration_=NaN,Object.defineProperty(e,'duration',{get:function(){return this.duration_===Infinity?this.duration_:this.nativeMediaSource_.duration},set:function(e){if(this.duration_=e,e!==Infinity)return void(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(e,'seekable',{get:function(){return this.duration_===Infinity?Ue.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(e,'readyState',{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(e,'activeSourceBuffers',{get:function(){return this.activeSourceBuffers_}}),e.sourceBuffers=[],e.activeSourceBuffers_=[],e.updateActiveSourceBuffers_=function(){if(e.activeSourceBuffers_.length=0,1===e.sourceBuffers.length){var t=e.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void e.activeSourceBuffers_.push(t)}for(var a=!1,n=!0,r=0,i;r<e.player_.audioTracks().length;r++)if(i=e.player_.audioTracks()[r],i.enabled&&'main'!==i.kind){a=!0,n=!1;break}e.sourceBuffers.forEach(function(t,r){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=a;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,n=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=r?n:!n,t.audioDisabled_))return;e.activeSourceBuffers_.push(t)})},e.onPlayerMediachange_=function(){e.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},e.onHlsReset_=function(){e.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:'resetCaptions'})})},e.onHlsSegmentTimeMapping_=function(t){e.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},['sourceopen','sourceclose','sourceended'].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},e),e.on('sourceopen',function(){var t=qe.a.querySelector('[src="'+e.url_+'"]');t&&(e.player_=Ue(t.parentNode),e.player_&&(e.player_.tech_.on('hls-reset',e.onHlsReset_),e.player_.tech_.on('hls-segment-time-mapping',e.onHlsSegmentTimeMapping_),e.player_.audioTracks&&e.player_.audioTracks()&&(e.player_.audioTracks().on('change',e.updateActiveSourceBuffers_),e.player_.audioTracks().on('addtrack',e.updateActiveSourceBuffers_),e.player_.audioTracks().on('removetrack',e.updateActiveSourceBuffers_)),e.player_.on('mediachange',e.onPlayerMediachange_)))}),e.on('sourceended',function(){for(var t=oo(e.duration),a=0;a<e.sourceBuffers.length;a++){var n=e.sourceBuffers[a],r=n.metadataTrack_&&n.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),e.on('sourceclose',function(){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off('change',this.updateActiveSourceBuffers_),this.player_.audioTracks().off('addtrack',this.updateActiveSourceBuffers_),this.player_.audioTracks().off('removetrack',this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off('mediachange',this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off('hls-reset',this.onHlsReset_),this.player_.tech_.off('hls-segment-time-mapping',this.onHlsSegmentTimeMapping_)))}),e}return Xi(t,e),Gi(t,[{key:'addSeekableRange_',value:function(e,t){var a;if(this.duration!==Infinity)throw a=new Error('MediaSource.addSeekableRange() can only be invoked when the duration is Infinity'),a.name='InvalidStateError',a.code=11,a;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:'addSourceBuffer',value:function(e){var t=void 0,a=Po(e);if(/^(video|audio)\/mp2t$/i.test(a.type)){var n=[];a.parameters&&a.parameters.codecs&&(n=a.parameters.codecs.split(','),n=To(n),n=n.filter(function(e){return Io(e)||Mo(e)})),0===n.length&&(n=['avc1.4d400d','mp4a.40.2']),t=new Bo(this,n),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),t}(Ue.EventTarget),Fo=0;Ue.mediaSources={};var jo=function(e,t){var a=Ue.mediaSources[e];if(a)a.trigger({type:'sourceopen',swfId:t});else throw new Error('Media Source not found (Video.js)')},Ho=function(){return!!Ve.a.MediaSource&&!!Ve.a.MediaSource.isTypeSupported&&Ve.a.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Vo=function(){if(this.MediaSource={open:jo,supportsNativeMediaSources:Ho},Ho())return new Yo;throw new Error('Cannot use create a virtual MediaSource for this video')};Vo.open=jo,Vo.supportsNativeMediaSources=Ho;var zo={createObjectURL:function(e){var t=void 0;return e instanceof Yo?(t=Ve.a.URL.createObjectURL(e.nativeMediaSource_),e.url_=t,t):e instanceof Yo?(t='blob:vjs-media-source/'+Fo,Fo++,Ue.mediaSources[t]=e,t):(t=Ve.a.URL.createObjectURL(e),e.url_=t,t)}};Ue.MediaSource=Vo,Ue.URL=zo;var qo=Ue.EventTarget,Wo=Ue.mergeOptions,Go=function(e,t){for(var a=void 0,n=Wo(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0,i;r<t.playlists.length;r++)i=rs(n,t.playlists[r]),i?n=i:a=!0;return ts(t,function(e,t,r,i){if(e.playlists&&e.playlists.length){var s=e.playlists[0].uri,o=rs(n,e.playlists[0]);o&&(n=o,n.mediaGroups[t][r][i].playlists[0]=n.playlists[s],a=!1)}}),a?null:n},Ko=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+'-'+e.byterange.offset+'-'+t},Xo=function(e,t){var a=!(e.map||t.map),n=a||!!(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return n&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Jo=function(e,t){var a={};for(var n in e){var r=e[n],i=r.sidx;if(i){var s=Ko(i);if(!t[s])break;var o=t[s].sidxInfo;Xo(o,i)&&(a[s]=t[s])}}return a},$o=function(e,t,a,n){var r=Object(lt.a)(e,{manifestUri:t,clientOffset:a}),i=Jo(r.playlists,n),s=i;return ts(r,function(e){if(e.playlists&&e.playlists.length){var t=e.playlists;s=Wo(s,Jo(t,n))}}),s},Qo=function(e,t,a,n,r){var i={uri:qi(n.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t},s=Ue.mergeOptions(i,{responseType:'arraybuffer',headers:Ms(i)});return a(s,r)},Zo=function(e){function t(e,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];Wi(this,t);var i=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),s=n.withCredentials,o=n.handleManifestRedirects;if(i.hls_=a,i.withCredentials=void 0!==s&&s,i.handleManifestRedirects=void 0!==o&&o,!e)throw new Error('A non-empty playlist URL or playlist is required');return(i.on('minimumUpdatePeriod',function(){i.refreshXml_()}),i.on('mediaupdatetimeout',function(){i.refreshMedia_(i.media().uri)}),i.state='HAVE_NOTHING',i.loadedPlaylists_={},'string'==typeof e)?(i.srcUrl=e,i.sidxMapping_={},Ji(i)):(i.setupChildLoader(r,e),i)}return Xi(t,e),Gi(t,[{key:'setupChildLoader',value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:'dispose',value:function(){this.stopRequest(),this.loadedPlaylists_={},Ve.a.clearTimeout(this.minimumUpdatePeriodTimeout_),Ve.a.clearTimeout(this.mediaRequest_),Ve.a.clearTimeout(this.mediaUpdateTimeout)}},{key:'hasPendingRequest',value:function(){return this.request||this.mediaRequest_}},{key:'stopRequest',value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:'sidxRequestFinished_',value:function(e,t,a,n){var r=this;return function(i,s){if(r.request){if(r.request=null,i)return r.error={status:s.status,message:'DASH playlist request error at URL: '+e.uri,response:s.response,code:2},a&&(r.state=a),r.trigger('error'),n(t,null);var o=new Uint8Array(s.response),l=pt.a.parseSidx(o.subarray(8));return n(t,l)}}}},{key:'media',value:function(e){var t=this;if(!e)return this.media_;if('HAVE_NOTHING'===this.state)throw new Error('Cannot switch media playlist from '+this.state);var a=this.state;if('string'==typeof e){if(!this.master.playlists[e])throw new Error('Unknown playlist URI: '+e);e=this.master.playlists[e]}var n=!this.media_||e.uri!==this.media_.uri;if(n&&this.loadedPlaylists_[e.uri]&&this.loadedPlaylists_[e.uri].endList)return this.state='HAVE_METADATA',this.media_=e,void(n&&(this.trigger('mediachanging'),this.trigger('mediachange')));if(n){if(this.media_&&this.trigger('mediachanging'),!e.sidx)return void(this.mediaRequest_=Ve.a.setTimeout(this.haveMetadata.bind(this,{startingState:a,playlist:e}),0));var r=void 0,i=void 0;this.masterPlaylistLoader_?(r=this.masterPlaylistLoader_.master,i=this.masterPlaylistLoader_.sidxMapping_):(r=this.master,i=this.sidxMapping_);var s=Ko(e.sidx);i[s]={sidxInfo:e.sidx},this.request=Qo(e.sidx,e,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(e,r,a,function(n,r){if(!n||!r)throw new Error('failed to request sidx');i[s].sidx=r,t.haveMetadata({startingState:a,playlist:n.playlists[e.uri]})}))}}},{key:'haveMetadata',value:function(e){var t=e.startingState,a=e.playlist;this.state='HAVE_METADATA',this.loadedPlaylists_[a.uri]=a,this.mediaRequest_=null,this.refreshMedia_(a.uri),'HAVE_MASTER'===t?this.trigger('loadedmetadata'):this.trigger('mediachange')}},{key:'pause',value:function(){this.stopRequest(),Ve.a.clearTimeout(this.mediaUpdateTimeout),Ve.a.clearTimeout(this.minimumUpdatePeriodTimeout_),'HAVE_NOTHING'===this.state&&(this.started=!1)}},{key:'load',value:function(e){var t=this;Ve.a.clearTimeout(this.mediaUpdateTimeout),Ve.a.clearTimeout(this.minimumUpdatePeriodTimeout_);var a=this.media();if(e){var n=a?1e3*(a.targetDuration/2):5000;return void(this.mediaUpdateTimeout=Ve.a.setTimeout(function(){return t.load()},n))}return this.started?void this.trigger('loadedplaylist'):void this.start()}},{key:'parseMasterXml',value:function(){var e=Object(lt.a)(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});e.uri=this.srcUrl;for(var t=0,a;t<e.playlists.length;t++)a='placeholder-uri-'+t,e.playlists[t].uri=a,e.playlists[a]=e.playlists[t];return ts(e,function(t,a,n,r){if(t.playlists&&t.playlists.length){var i='placeholder-uri-'+a+'-'+n+'-'+r;t.playlists[0].uri=i,e.playlists[i]=t.playlists[0]}}),is(e),ss(e),e}},{key:'start',value:function(){var e=this;return this.started=!0,this.masterPlaylistLoader_?void(this.mediaRequest_=Ve.a.setTimeout(this.haveMaster_.bind(this),0)):void(this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,a){if(e.request)return e.request=null,t?(e.error={status:a.status,message:'DASH playlist request error at URL: '+e.srcUrl,responseText:a.responseText,code:2},'HAVE_NOTHING'===e.state&&(e.started=!1),e.trigger('error')):void(e.masterXml_=a.responseText,e.masterLoaded_=a.responseHeaders&&a.responseHeaders.date?Date.parse(a.responseHeaders.date):Date.now(),e.srcUrl=qi(e.handleManifestRedirects,e.srcUrl,a),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e)))}))}},{key:'syncClientServerClock_',value:function(e){var t=this,a=Object(lt.b)(this.masterXml_);return null===a?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):'DIRECT'===a.method?(this.clientOffset_=a.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:zi(this.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(n,r){if(t.request){if(n)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var i;i='HEAD'===a.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.clientOffset_=i-Date.now(),e()}}))}},{key:'haveMaster_',value:function(){this.state='HAVE_MASTER',this.mediaRequest_=null,this.masterPlaylistLoader_?!this.media_&&this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger('loadedplaylist'))}},{key:'onClientServerClockSync_',value:function(){var e=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=Ve.a.setTimeout(function(){e.trigger('minimumUpdatePeriod')},this.master.minimumUpdatePeriod))}},{key:'refreshXml_',value:function(){var e=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,a){if(e.request){if(e.request=null,t)return e.error={status:a.status,message:'DASH playlist request error at URL: '+e.srcUrl,responseText:a.responseText,code:2},'HAVE_NOTHING'===e.state&&(e.started=!1),e.trigger('error');e.masterXml_=a.responseText,e.sidxMapping_=$o(e.masterXml_,e.srcUrl,e.clientOffset_,e.sidxMapping_);var n=e.parseMasterXml(),r=Go(e.master,n),i=e.media().sidx;if(r)if(i){var s=Ko(i);if(!e.sidxMapping_[s]){var o=e.media();e.request=Qo(o.sidx,o,e.hls_.xhr,{handleManifestRedirects:e.handleManifestRedirects},e.sidxRequestFinished_(o,n,e.state,function(t,a){if(!t||!a)throw new Error('failed to request sidx on minimumUpdatePeriod');return e.sidxMapping_[s].sidx=a,e.minimumUpdatePeriodTimeout_=Ve.a.setTimeout(function(){e.trigger('minimumUpdatePeriod')},e.master.minimumUpdatePeriod),void e.refreshMedia_(e.media().uri)}))}}else e.master=r;e.minimumUpdatePeriodTimeout_=Ve.a.setTimeout(function(){e.trigger('minimumUpdatePeriod')},e.master.minimumUpdatePeriod)}})}},{key:'refreshMedia_',value:function(e){var t=this;if(!e)throw new Error('refreshMedia_ must take a media uri');var a=void 0,n=void 0;this.masterPlaylistLoader_?(a=this.masterPlaylistLoader_.master,n=this.masterPlaylistLoader_.parseMasterXml()):(a=this.master,n=this.parseMasterXml());var r=Go(a,n);r?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=r:this.master=r,this.media_=r.playlists[e]):(this.media_=n.playlists[e],this.trigger('playlistunchanged')),this.media().endList||(this.mediaUpdateTimeout=Ve.a.setTimeout(function(){t.trigger('mediaupdatetimeout')},os(this.media(),!!r))),this.trigger('loadedplaylist')}}]),t}(qo),el=function(e){return Ue.log.debug?Ue.log.debug.bind(Ue,'VHS:',e+' >'):function(){}},tl=function(){function e(t,a,n,r){Wi(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=n,this.mimeType_=a,this.logger_=el('SourceUpdater['+n+']['+a+']'),'closed'===t.readyState?t.addEventListener('sourceopen',this.createSourceBuffer_.bind(this,a,r)):this.createSourceBuffer_(a,r)}return Gi(e,[{key:'createSourceBuffer_',value:function(e,t){var a=this;return this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_('created SourceBuffer'),t&&(t.trigger('sourcebufferadded'),2>this.mediaSource.sourceBuffers.length)?void t.on('sourcebufferadded',function(){a.start_()}):void this.start_()}},{key:'start_',value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.sourceBuffer_.removing=!1,e.logger_('buffered ['+to(e.buffered())+']'),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener('updateend',this.onUpdateendCallback_),this.runCallback_()}},{key:'abort',value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:'appendBuffer',value:function(e,t){var a=this;this.processedAppend_=!0,this.queueCallback_(function(){e.videoSegmentTimingInfoCallback&&a.sourceBuffer_.addEventListener('videoSegmentTimingInfo',e.videoSegmentTimingInfoCallback),a.sourceBuffer_.appendBuffer(e.bytes)},function(){e.videoSegmentTimingInfoCallback&&a.sourceBuffer_.removeEventListener('videoSegmentTimingInfo',e.videoSegmentTimingInfoCallback),t()})}},{key:'buffered',value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Ue.createTimeRanges()}},{key:'remove',value:function(e,t){var a=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:je;this.processedAppend_&&this.queueCallback_(function(){a.logger_('remove ['+e+' => '+t+']'),a.sourceBuffer_.removing=!0,a.sourceBuffer_.remove(e,t)},n)}},{key:'updating',value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==je}},{key:'timestampOffset',value:function(e){var t=this;return'undefined'!=typeof e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),this.timestampOffset_=e),this.timestampOffset_}},{key:'queueCallback_',value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:'runCallback_',value:function(){var e;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:'dispose',value:function(){var e=this,t=function t(){e.sourceBuffer_&&'open'===e.mediaSource.readyState&&e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener('updateend',t)};this.sourceBuffer_.removeEventListener('updateend',this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener('updateend',t):t()}}]),e}(),al={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},nl={FAILURE:2,TIMEOUT:-101,ABORTED:-102},rl=function(e){e.forEach(function(e){e.abort()})},il=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},sl=function(e){var t=e.target,a=Date.now()-t.requestTime,n={bandwidth:Infinity,bytesReceived:0,roundTripTime:a||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(1e3*(8*(n.bytesReceived/n.roundTripTime))),n},ol=function(e,t){return t.timedout?{status:t.status,message:'HLS request timed-out at URL: '+t.uri,code:nl.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:'HLS request aborted at URL: '+t.uri,code:nl.ABORTED,xhr:t}:e?{status:t.status,message:'HLS request errored at URL: '+t.uri,code:nl.FAILURE,xhr:t}:null},ll=function(e,t){return function(a,n){var r=n.response,i=ol(a,n);if(i)return t(i,e);if(16!==r.byteLength)return t({status:n.status,message:'Invalid HLS key at URL: '+n.uri,code:nl.FAILURE,xhr:n},e);var s=new DataView(r);return e.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),t(null,e)}},dl=function(e,t,a){return function(n,r){var i=r.response,s=ol(n,r);return s?a(s,e):0===i.byteLength?a({status:r.status,message:'Empty HLS segment content at URL: '+r.uri,code:nl.FAILURE,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),t&&!t.isInitialized()&&t.init(),e.map.timescales=ct.a.timescale(e.map.bytes),e.map.videoTrackIds=ct.a.videoTrackIds(e.map.bytes),a(null,e))}},pl=function(e,t,a){return function(n,r){var i=r.response,s=ol(n,r),o=void 0;return s?a(s,e):0===i.byteLength?a({status:r.status,message:'Empty HLS segment content at URL: '+r.uri,code:nl.FAILURE,xhr:r},e):(e.stats=il(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),t&&e.map&&e.map.bytes&&(!t.isInitialized()&&t.init(),o=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales),o&&o.captions&&(e.captionStreams=o.captionStreams,e.fmp4Captions=o.captions)),a(null,e))}},ul=function(e,t,a){e.addEventListener('message',function n(r){if(r.data.source===t.requestId){e.removeEventListener('message',n);var i=r.data.decrypted;return t.bytes=new Uint8Array(i.bytes,i.byteOffset,i.byteLength),a(null,t)}});var n;n=t.key.bytes.slice?t.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.key.bytes)),e.postMessage(Rs({source:t.requestId,encrypted:t.encryptedBytes,key:n,iv:t.key.iv}),[t.encryptedBytes.buffer,n.buffer])},cl=function(e,t,a){var n=0,r=!1;return function(i,s){if(!r)return i?(r=!0,rl(e),a(i,s)):(n+=1,n===e.length)?(s.endOfAllRequests=Date.now(),s.encryptedBytes?ul(t,s,a):a(null,s)):void 0}},ml=function(e,t){return function(a){return e.stats=Ue.mergeOptions(e.stats,sl(a)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(a,e)}},gl=function(e,t,a,n,r,i,s){var o=[],l=cl(o,a,s);if(r.key&&!r.key.bytes){var d=Ue.mergeOptions(t,{uri:r.key.resolvedUri,responseType:'arraybuffer'}),p=ll(r,l),u=e(d,p);o.push(u)}if(r.map&&!r.map.bytes){var c=Ue.mergeOptions(t,{uri:r.map.resolvedUri,responseType:'arraybuffer',headers:Ms(r.map)}),m=dl(r,n,l),g=e(c,m);o.push(g)}var y=Ue.mergeOptions(t,{uri:r.resolvedUri,responseType:'arraybuffer',headers:Ms(r)}),h=pl(r,n,l),f=e(y,h);return f.addEventListener('progress',ml(r,i)),o.push(f),function(){return rl(o)}},yl=function(e,t){var a;return e?(a=Ve.a.getComputedStyle(e),a?a[t]:''):''},hl=function(e,t){var a=e.slice();e.sort(function(e,n){var r=t(e,n);return 0===r?a.indexOf(e)-a.indexOf(n):r})},fl=function(e,t){var a=void 0,n=void 0;return e.attributes.BANDWIDTH&&(a=e.attributes.BANDWIDTH),a=a||Ve.a.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||Ve.a.Number.MAX_VALUE,a-n},_l=function(e,t,a,n,r){var i=e.playlists.map(function(e){var t=void 0,a=void 0,n=void 0;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,a=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,n=e.attributes.BANDWIDTH,n=n||Ve.a.Number.MAX_VALUE,{bandwidth:n,width:t,height:a,playlist:e}});hl(i,function(e,t){return e.bandwidth-t.bandwidth}),i=i.filter(function(e){return!Ls.isIncompatible(e.playlist)});var s=i.filter(function(e){return Ls.isEnabled(e.playlist)});s.length||(s=i.filter(function(e){return!Ls.isDisabled(e.playlist)}));var o=s.filter(function(e){return e.bandwidth*al.BANDWIDTH_VARIANCE<t}),l=o[o.length-1],d=o.filter(function(e){return e.bandwidth===l.bandwidth})[0];if(!1===r){var p=d||s[0]||i[0];return p?p.playlist:null}var u=o.filter(function(e){return e.width&&e.height});hl(u,function(e,t){return e.width-t.width});var c=u.filter(function(e){return e.width===a&&e.height===n});l=c[c.length-1];var m=c.filter(function(e){return e.bandwidth===l.bandwidth})[0],g=void 0,y=void 0,h=void 0;m||(g=u.filter(function(e){return e.width>a||e.height>n}),y=g.filter(function(e){return e.width===g[0].width&&e.height===g[0].height}),l=y[y.length-1],h=y.filter(function(e){return e.bandwidth===l.bandwidth})[0]);var f=h||m||d||s[0]||i[0];return f?f.playlist:null},bl=function(e){var t=e.master,a=e.currentTime,n=e.bandwidth,r=e.duration,i=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,d=t.playlists.filter(function(e){return!Ls.isIncompatible(e)}),p=d.filter(Ls.isEnabled);p.length||(p=d.filter(function(e){return!Ls.isDisabled(e)}));var u=p.filter(Ls.hasAttribute.bind(null,'BANDWIDTH')),c=u.map(function(e){var t=l.getSyncPoint(e,r,o,a),d=t?1:2,p=Ls.estimateSegmentRequestTime(i,n,e);return{playlist:e,rebufferingImpact:p*d-s}}),m=c.filter(function(e){return 0>=e.rebufferingImpact});return(hl(m,function(e,t){return fl(t.playlist,e.playlist)}),m.length)?m[0]:(hl(c,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),c[0]||null)},vl=function(e,t,a){for(var n in a)if(!e[n]){t.trigger({type:'usage',name:'hls-608'});var r=t.textTracks().getTrackById(n);e[n]=r?r:t.addRemoteTextTrack({kind:'captions',id:n,label:n},!1).track}},Tl=function(e){var t=e.inbandTextTracks,a=e.captionArray,n=e.timestampOffset;if(a){var r=window.WebKitDataCue||window.VTTCue;a.forEach(function(e){var a=e.stream,i=e.startTime,s=e.endTime;t[a]&&(i+=n,s+=n,t[a].addCue(new r(i,s,e.text)))})}},kl=function(e,t,a){if(!e||!t)return!1;var n=e.segments,r=a===n.length;return e.endList&&'open'===t.readyState&&r},Sl=function(e){return'number'==typeof e&&isFinite(e)},Cl=function(e,t,a){return'main'===e&&t&&a?a.containsAudio||a.containsVideo?t.containsVideo&&!a.containsVideo?'Only audio found in segment when we expected video. We can\'t switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.':!t.containsVideo&&a.containsVideo?'Video found in segment when we expected only audio. We can\'t switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.':null:'Neither audio nor video found in segment.':null},El=function(e,t,a){var n;return n=e.length&&0<e.start(0)&&e.start(0)<t?e.start(0):t-30,Math.min(n,t-a)},Ll=function(e){var t=e.segment,a=t.start,n=t.end,r=e.playlist,i=r.mediaSequence,s=r.id,o=r.segments,l=void 0===o?[]:o,d=e.mediaIndex,p=e.timeline;return['appending ['+d+'] of ['+i+', '+(i+l.length)+'] from playlist ['+s+']','['+a+' => '+n+'] in timeline ['+p+']'].join(' ')},wl=function(e){function t(e){Wi(this,t);var a=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e)throw new TypeError('Initialization settings are required');if('function'!=typeof e.currentTime)throw new TypeError('No currentTime getter specified');if(!e.mediaSource)throw new TypeError('No MediaSource specified');return a.bandwidth=e.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.hasPlayed_=e.hasPlayed,a.currentTime_=e.currentTime,a.seekable_=e.seekable,a.seeking_=e.seeking,a.duration_=e.duration,a.mediaSource_=e.mediaSource,a.hls_=e.hls,a.loaderType_=e.loaderType,a.startingMedia_=void 0,a.segmentMetadataTrack_=e.segmentMetadataTrack,a.goalBufferLength_=e.goalBufferLength,a.sourceType_=e.sourceType,a.inbandTextTracks_=e.inbandTextTracks,a.state_='INIT',a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.mimeType_=null,a.sourceUpdater_=null,a.xhrOptions_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=e.cacheEncryptionKeys,a.keyCache_={},a.captionParser_='main'===a.loaderType_?new gt.a:null,a.decrypter_=e.decrypter,a.syncController_=e.syncController,a.syncPoint_={segmentIndex:0,time:0},a.syncController_.on('syncinfoupdate',function(){return a.trigger('syncinfoupdate')}),a.mediaSource_.addEventListener('sourceopen',function(){return a.ended_=!1}),a.fetchAtBuffer_=!1,a.logger_=el('SegmentLoader['+a.loaderType_+']'),Object.defineProperty(a,'state',{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+' -> '+e),this.state_=e)}}),a}return Xi(t,e),Gi(t,[{key:'resetStats_',value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:'dispose',value:function(){this.state='DISPOSED',this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:'abort',value:function(){return'WAITING'===this.state?void(this.abort_(),this.state='READY',!this.paused()&&this.monitorBuffer_()):void(this.pendingSegment_&&(this.pendingSegment_=null))}},{key:'abort_',value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:'error',value:function(e){return'undefined'!=typeof e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:'endOfStream',value:function(){this.ended_=!0,this.pause(),this.trigger('ended')}},{key:'buffered_',value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Ue.createTimeRanges()}},{key:'initSegment',value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!e)return null;var a=Ns(e),n=this.initSegments_[a];return t&&!n&&e.bytes&&(this.initSegments_[a]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),n||e}},{key:'segmentKey',value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!e)return null;var a=Us(e),n=this.keyCache_[a];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[a]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(n||e).resolvedUri};return n&&(r.bytes=n.bytes),r}},{key:'couldBeginLoading_',value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&'INIT'===this.state)&&!this.paused()}},{key:'load',value:function(){if(this.monitorBuffer_(),!!this.playlist_)return this.syncController_.setDateTimeMapping(this.playlist_),'INIT'===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||'READY'!==this.state&&'INIT'!==this.state||(this.state='READY'))}},{key:'init_',value:function(){return this.state='READY',this.sourceUpdater_=new tl(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:'playlist',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e){var a=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=null;if(a&&(a.id?r=a.id:a.uri&&(r=a.uri)),this.logger_('playlist update ['+r+' => '+(e.id||e.uri)+']'),this.trigger('syncinfoupdate'),'INIT'===this.state&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==e.uri)return void(null!==this.mediaIndex&&this.resyncLoader());var i=e.mediaSequence-a.mediaSequence;this.logger_('live window shift ['+i+']'),null!==this.mediaIndex&&(this.mediaIndex-=i),n&&(n.mediaIndex-=i,0<=n.mediaIndex&&(n.segment=e.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(a,e)}}},{key:'pause',value:function(){this.checkBufferTimeout_&&(Ve.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:'paused',value:function(){return null===this.checkBufferTimeout_}},{key:'mimeType',value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,'INIT'===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:'resetEverything',value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger('reseteverything')}},{key:'resetLoader',value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:'resyncLoader',value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:'remove',value:function(e,t,a){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,a),io(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)io(e,t,this.inbandTextTracks_[n])}},{key:'monitorBuffer_',value:function(){this.checkBufferTimeout_&&Ve.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ve.a.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:'monitorBufferTick_',value:function(){'READY'===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Ve.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ve.a.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:'fillBuffer_',value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);return e?this.isEndOfStream_(e.mediaIndex)?void this.endOfStream():void(e.mediaIndex===this.playlist_.segments.length-1&&'ended'===this.mediaSource_.readyState&&!this.seeking_()||(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e))):void 0}}},{key:'isEndOfStream_',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.playlist_;return kl(t,this.mediaSource_,e)&&!this.sourceUpdater_.updating()}},{key:'checkBuffer_',value:function(e,t,a,n,r,i){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var l=Math.max(0,s-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!n&&1<=l)return null;if(null===i)return a=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,a,null,!0);if(null!==a){t.segments[a];return o=s,this.generateSegmentInfo_(t,a+1,o,!1)}if(this.fetchAtBuffer_){var d=Ls.getMediaInfoForTime(t,s,i.segmentIndex,i.time);a=d.mediaIndex,o=d.startTime}else{var p=Ls.getMediaInfoForTime(t,r,i.segmentIndex,i.time);a=p.mediaIndex,o=p.startTime}return this.generateSegmentInfo_(t,a,o,!1)}},{key:'getSyncSegmentCandidate_',value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var a=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return a.length?a[Math.min(a.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:'generateSegmentInfo_',value:function(e,t,a,n){if(0>t||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:'segment-loader-'+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:a,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:'abortRequestEarly_',value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(1e3>Date.now()-(e.firstBytesReceivedAt||Date.now()))return!1;var t=this.currentTime_(),a=e.bandwidth,n=this.pendingSegment_.duration,r=Ls.estimateSegmentRequestTime(n,a,this.playlist_,e.bytesReceived),i=ao(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=i)return!1;var s=bl({master:this.hls_.playlists.master,currentTime:t,bandwidth:a,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:i,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-i-s.rebufferingImpact,l=.5;return(i<=Xs&&(l=1),s.playlist&&s.playlist.uri!==this.playlist_.uri&&!(o<l))&&(this.bandwidth=s.playlist.attributes.BANDWIDTH*al.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger('earlyabort'),!0)}}},{key:'handleProgress_',value:function(e,t){!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(t.stats)||this.trigger('progress')}},{key:'loadSegment_',value:function(e){this.state='WAITING',this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=gl(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:'trimBackBuffer_',value:function(){var e=El(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<e&&this.remove(0,e)}},{key:'createSimplifiedSegmentObj_',value:function(e){var t=e.segment,a={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=n}return t.map&&(a.map=this.initSegment(t.map)),a}},{key:'segmentRequestFinished_',value:function(e,t){return this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_?t.requestId===this.pendingSegment_.requestId?e?(this.pendingSegment_=null,this.state='READY',e.code===nl.ABORTED)?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===nl.TIMEOUT)?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger('bandwidthupdate')):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger('error')):void(this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)):void 0:void(this.mediaRequestsAborted+=1)}},{key:'processSegmentResponse_',value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(vl(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),Tl({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:'handleSegment_',value:function(){var e=this;if(!this.pendingSegment_)return void(this.state='READY');var t=this.pendingSegment_,a=t.segment,n=this.syncController_.probeSegmentInfo(t);'undefined'==typeof this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var r=Cl(this.loaderType_,this.startingMedia_,n);if(r)return this.error({message:r,blacklistDuration:Infinity}),void this.trigger('error');if(t.isSyncRequest)return this.trigger('syncinfoupdate'),this.pendingSegment_=null,void(this.state='READY');if(null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(n&&n.segmentTimestampInfo){var i=n.segmentTimestampInfo[0].ptsTime,s=n.segmentTimestampInfo[0].dtsTime;t.timestampOffset-=i-s}this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger('timestampoffset')}var o=this.syncController_.mappingForTimeline(t.timeline);if(null!==o&&this.trigger({type:'segmenttimemapping',mapping:o}),this.state='APPENDING',a.map){var l=Ns(a.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==l){var d=this.initSegment(a.map);this.sourceUpdater_.appendBuffer({bytes:d.bytes},function(){e.activeInitSegmentId_=l})}}t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+='number'==typeof a.start&&'number'==typeof a.end?a.end-a.start:a.duration,this.logger_(Ll(t)),this.sourceUpdater_.appendBuffer({bytes:t.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId)},this.handleUpdateEnd_.bind(this))}},{key:'handleVideoSegmentTimingInfo_',value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var a=this.pendingSegment_.segment;a.videoTimingInfo||(a.videoTimingInfo={}),a.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,a.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,a.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,a.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:'handleUpdateEnd_',value:function(){if(!this.pendingSegment_)return this.state='READY',void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,a=null!==this.mediaIndex;return this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state='READY',this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger('syncinfoupdate'),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?void this.resetEverything():void(a&&this.trigger('bandwidthupdate'),this.trigger('progress'),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),!this.paused()&&this.monitorBuffer_())}},{key:'recordThroughput_',value:function(e){var t=this.throughput.rate,a=Date.now()-e.endOfAllRequests+1,n=Math.floor(1e3*(8*(e.byteLength/a)));this.throughput.rate+=(n-t)/++this.throughput.count}},{key:'addSegmentMetadataCue_',value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,a=t.start,n=t.end;if(Sl(a)&&Sl(n)){io(a,n,this.segmentMetadataTrack_);var r=Ve.a.WebKitDataCue||Ve.a.VTTCue,i={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:a,end:n},s=JSON.stringify(i),o=new r(a,n,s);o.value=i,this.segmentMetadataTrack_.addCue(o)}}}}]),t}(Ue.EventTarget),xl=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Pl=new Uint8Array(['\n','\n'].map(function(e){return e.charCodeAt(0)})),Il=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Wi(this,t);var n=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return Xi(t,e),Gi(t,[{key:'buffered_',value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Ue.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,a=e[e.length-1].startTime;return Ue.createTimeRanges([[t,a]])}},{key:'initSegment',value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!e)return null;var a=Ns(e),n=this.initSegments_[a];if(t&&!n&&e.bytes){var r=Pl.byteLength+e.bytes.byteLength,i=new Uint8Array(r);i.set(e.bytes),i.set(Pl,e.bytes.byteLength),this.initSegments_[a]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:i}}return n||e}},{key:'couldBeginLoading_',value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:'init_',value:function(){return this.state='READY',this.resetEverything(),this.monitorBuffer_()}},{key:'track',value:function(e){return'undefined'==typeof e?this.subtitlesTrack_:(this.subtitlesTrack_=e,'INIT'===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:'remove',value:function(e,t){io(e,t,this.subtitlesTrack_)}},{key:'fillBuffer_',value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t),!!t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){var a=function(){e.state='READY',e.paused()||e.monitorBuffer_()};return this.syncController_.one('timestampoffset',a),void(this.state='WAITING_ON_TIMELINE')}this.loadSegment_(t)}}},{key:'skipEmptySegments_',value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:'handleSegment_',value:function(){var e=this;if(!this.pendingSegment_||!this.subtitlesTrack_)return void(this.state='READY');this.state='APPENDING';var t=this.pendingSegment_,a=t.segment;if('function'!=typeof Ve.a.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=void 0,r=function(){e.subtitlesTrack_.tech_.off('vttjsloaded',n),e.error({message:'Error loading vtt.js'}),e.state='READY',e.pause(),e.trigger('error')};return n=function(){e.subtitlesTrack_.tech_.off('vttjserror',r),e.handleSegment_()},this.state='WAITING_ON_VTTJS',this.subtitlesTrack_.tech_.one('vttjsloaded',n),void this.subtitlesTrack_.tech_.one('vttjserror',r)}a.requested=!0;try{this.parseVTTCues_(t)}catch(t){return this.error({message:t.message}),this.state='READY',this.pause(),this.trigger('error')}return this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest?(this.trigger('syncinfoupdate'),this.pendingSegment_=null,void(this.state='READY')):void(t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,t.cues.length&&this.remove(t.cues[0].endTime,t.cues[t.cues.length-1].endTime),t.cues.forEach(function(t){e.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_())}},{key:'parseVTTCues_',value:function(e){var t=void 0,a=!1;'function'==typeof Ve.a.TextDecoder?t=new Ve.a.TextDecoder('utf8'):(t=Ve.a.WebVTT.StringDecoder(),a=!0);var n=new Ve.a.WebVTT.Parser(Ve.a,Ve.a.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){return e.timestampmap=t},n.onparsingerror=function(e){Ue.log.warn('Error encountered when parsing cues: '+e.message)},e.segment.map){var r=e.segment.map.bytes;a&&(r=xl(r)),n.parse(r)}var i=e.bytes;a&&(i=xl(i)),n.parse(i),n.flush()}},{key:'updateTimeMapping_',value:function(e,t,a){var n=e.segment;if(t){if(!e.cues.length)return void(n.empty=!0);var r=e.timestampmap,i=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=i,e.endTime+=i}),!a.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:Math.min(s,o-n.duration)}}}}}]),t}(wl),Ml=function(e,t){for(var a=e.cues,n=0,r;n<a.length;n++)if(r=a[n],t>=r.adStartTime&&t<=r.adEndTime)return r;return null},Dl=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var n=a,r=void 0,s=0,i;s<e.segments.length;s++){if(i=e.segments[s],r||(r=Ml(t,n+i.duration/2)),r){if('cueIn'in i){r.endTime=n,r.adEndTime=n,n+=i.duration,r=null;continue}if(n<r.endTime){n+=i.duration;continue}r.endTime+=i.duration}else if('cueOut'in i&&(r=new Ve.a.VTTCue(n,n+i.duration,i.cueOut),r.adStartTime=n,r.adEndTime=n+parseFloat(i.cueOut),t.addCue(r)),'cueOutCont'in i){var o=void 0,l=void 0,d=i.cueOutCont.split('/').map(parseFloat),p=$i(d,2);o=p[0],l=p[1],r=new Ve.a.VTTCue(n,n+i.duration,''),r.adStartTime=n-o,r.adEndTime=r.adStartTime+l,t.addCue(r)}n+=i.duration}},Ol=ht.a.inspect,Al=[{name:'VOD',run:function(e,t,a){if(a!==Infinity){return{time:0,segmentIndex:0}}return null}},{name:'ProgramDateTime',run:function(e,t,a,n,r){if(!e.datetimeToDisplayTime)return null;var s=t.segments||[],o=null,l=null;r=r||0;for(var d=0,p;d<s.length;d++)if(p=s[d],p.dateTimeObject){var u=p.dateTimeObject.getTime()/1e3,c=u+e.datetimeToDisplayTime,m=Math.abs(r-c);if(null!==l&&(0===m||l<m))break;l=m,o={time:c,segmentIndex:d}}return o}},{name:'Segment',run:function(e,t,a,n,r){var s=t.segments||[],o=null,l=null;r=r||0;for(var d=0,p;d<s.length;d++)if(p=s[d],p.timeline===n&&'undefined'!=typeof p.start){var u=Math.abs(r-p.start);if(null!==l&&l<u)break;(!o||null===l||l>=u)&&(l=u,o={time:p.start,segmentIndex:d})}return o}},{name:'Discontinuity',run:function(e,t,a,n,r){var s=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,l=0;l<t.discontinuityStarts.length;l++){var i=t.discontinuityStarts[l],d=t.discontinuitySequence+l+1,p=e.discontinuities[d];if(p){var u=Math.abs(r-p.time);if(null!==o&&o<u)break;(!s||null===o||o>=u)&&(o=u,s={time:p.time,segmentIndex:i})}}return s}},{name:'Playlist',run:function(e,t){if(t.syncInfo){var a={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence};return a}return null}}],Rl=function(e){function t(){Wi(this,t);var e=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=el('SyncController'),e}return Xi(t,e),Gi(t,[{key:'getSyncPoint',value:function(e,t,a,n){var r=this.runStrategies_(e,t,a,n);return r.length?this.selectSyncPoint_(r,{key:'time',value:n}):null}},{key:'getExpiredTime',value:function(e,t){if(!e||!e.segments)return null;var a=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!a.length)return null;var n=this.selectSyncPoint_(a,{key:'segmentIndex',value:0});return 0<n.segmentIndex&&(n.time*=-1),Math.abs(n.time+gs(e,n.segmentIndex,0))}},{key:'runStrategies_',value:function(e,t,a,n){for(var r=[],s=0;s<Al.length;s++){var i=Al[s],o=i.run(this,e,t,a,n);o&&(o.strategy=i.name,r.push({strategy:i.name,syncPoint:o}))}return r}},{key:'selectSyncPoint_',value:function(e,t){for(var a=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,s=1,i;s<e.length;s++)i=Math.abs(e[s].syncPoint[t.key]-t.value),i<n&&(n=i,a=e[s].syncPoint,r=e[s].strategy);return this.logger_('syncPoint for ['+t.key+': '+t.value+'] chosen with strategy'+(' ['+r+']: [time:'+a.time+',')+(' segmentIndex:'+a.segmentIndex+']')),a}},{key:'saveExpiredSegmentInfo',value:function(e,t){for(var a=t.mediaSequence-e.mediaSequence,n=a-1,r;0<=n;n--)if(r=e.segments[n],r&&'undefined'!=typeof r.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_('playlist refresh sync: [time:'+t.syncInfo.time+','+(' mediaSequence: '+t.syncInfo.mediaSequence+']')),this.trigger('syncinfoupdate');break}}},{key:'setDateTimeMapping',value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:'reset',value:function(){this.inspectCache_=void 0}},{key:'probeSegmentInfo',value:function(e){var t=e.segment,a=e.playlist,n=void 0;return n=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e),n&&this.calculateSegmentTimeMapping_(e,n)&&(this.saveDiscontinuitySyncInfo_(e),!a.syncInfo&&(a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:t.start})),n}},{key:'probeMp4Segment_',value:function(e){var t=e.segment,a=ct.a.timescale(t.map.bytes),n=ct.a.startTime(a,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=n),{start:n,end:n+t.duration}}},{key:'probeTsSegment_',value:function(e){var t=Ol(e.bytes,this.inspectCache_),a=void 0,n=void 0,r=void 0;if(!t)return null;t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,a=t.video[0].dtsTime,n=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,a=t.audio[0].dtsTime,n=t.audio[1].dtsTime,r=t.audio);var i={segmentTimestampInfo:r,start:a,end:n,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length};return i}},{key:'timestampOffsetForTimeline',value:function(e){return'undefined'==typeof this.timelines[e]?null:this.timelines[e].time}},{key:'mappingForTimeline',value:function(e){return'undefined'==typeof this.timelines[e]?null:this.timelines[e].mapping}},{key:'calculateSegmentTimeMapping_',value:function(e,t){var a=e.segment,n=this.timelines[e.timeline];if(null!==e.timestampOffset)n={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=n,this.trigger('timestampoffset'),this.logger_('time mapping for timeline '+e.timeline+': '+('[time: '+n.time+'] [mapping: '+n.mapping+']')),a.start=e.startOfSegment,a.end=t.end+n.mapping;else if(n)a.start=t.start+n.mapping,a.end=t.end+n.mapping;else return!1;return!0}},{key:'saveDiscontinuitySyncInfo_',value:function(e){var t=e.playlist,a=e.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],i=t.discontinuitySequence+n+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[i]||this.discontinuities[i].accuracy>o){var l=void 0;l=0>s?a.start-gs(t,e.mediaIndex,r):a.end+gs(t,e.mediaIndex+1,r),this.discontinuities[i]={time:l,accuracy:o}}}}}]),t}(Ue.EventTarget),Nl=new Be('./decrypter-worker.worker.js',function(){var e=this,t=function(){function t(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var a=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},n=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},i=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e},s=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],a=e[1],n=t[4],r=a[4],o=void 0,i=void 0,l=void 0,p=[],d=[],u=void 0,c=void 0,m=void 0,g=void 0,s=void 0,y=void 0;for(o=0;256>o;o++)d[(p[o]=o<<1^283*(o>>7))^o]=o;for(i=l=0;!n[i];i^=u||1,l=d[l]||1)for(g=l^l<<1^l<<2^l<<3^l<<4,g=99^(g>>8^255&g),n[i]=g,r[g]=i,m=p[c=p[u=p[i]]],y=16843009*m^65537*c^257*u^16843008*i,s=257*p[g]^16843008*g,o=0;4>o;o++)t[o][i]=s=s<<24^s>>>8,a[o][g]=y=y<<24^y>>>8;for(o=0;5>o;o++)t[o]=t[o].slice(0),a[o]=a[o].slice(0);return e},o=null,l=function(){function e(t){a(this,e),o||(o=s()),this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var n=void 0,r=void 0,i=void 0,l=void 0,d=void 0,p=this._tables[0][4],u=this._tables[1],c=t.length,m=1;if(4!==c&&6!==c&&8!==c)throw new Error('Invalid aes key size');for(l=t.slice(0),d=[],this._key=[l,d],n=c;n<4*c+28;n++)i=l[n-1],(0==n%c||8===c&&4==n%c)&&(i=p[i>>>24]<<24^p[255&i>>16]<<16^p[255&i>>8]<<8^p[255&i],0==n%c&&(i=i<<8^i>>>24^m<<24,m=m<<1^283*(m>>7))),l[n]=l[n-c]^i;for(r=0;n;r++,n--)i=l[3&r?n:n-4],d[r]=4>=n||4>r?i:u[0][p[i>>>24]]^u[1][p[255&i>>16]]^u[2][p[255&i>>8]]^u[3][p[255&i]]}return e.prototype.decrypt=function(e,t,n,r,s,o){var l=this._key[1],p=e^l[0],a=r^l[1],u=n^l[2],c=t^l[3],d=void 0,m=void 0,g=void 0,y=l.length/4-2,h=void 0,f=4,_=this._tables[1],b=_[0],v=_[1],T=_[2],k=_[3],S=_[4];for(h=0;h<y;h++)d=b[p>>>24]^v[255&a>>16]^T[255&u>>8]^k[255&c]^l[f],m=b[a>>>24]^v[255&u>>16]^T[255&c>>8]^k[255&p]^l[f+1],g=b[u>>>24]^v[255&c>>16]^T[255&p>>8]^k[255&a]^l[f+2],c=b[c>>>24]^v[255&p>>16]^T[255&a>>8]^k[255&u]^l[f+3],f+=4,p=d,a=m,u=g;for(h=0;4>h;h++)s[(3&-h)+o]=S[p>>>24]<<24^S[255&a>>16]<<16^S[255&u>>8]<<8^S[255&c]^l[f++],d=p,p=a,a=u,u=c,c=d},e}(),d=function(){function e(){a(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var a=this.listeners[e].indexOf(t);return this.listeners[e].splice(a,1),-1<a},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var a=t.length,n=0;n<a;++n)t[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),i=t.length,s=0;s<i;++s)t[s].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on('data',function(t){e.push(t)})},e}(),p=function(e){function t(){a(this,t);var n=i(this,e.call(this,d));return n.jobs=[],n.delay=1,n.timeout_=null,n}return r(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(d),u=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},c=function(e,t,a){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new l(Array.prototype.slice.call(t)),i=new Uint8Array(e.byteLength),s=new Int32Array(i.buffer),o=void 0,d=void 0,p=void 0,c=void 0,m=void 0,g=void 0,y=void 0,h=void 0,f=void 0;for(o=a[0],d=a[1],p=a[2],c=a[3],f=0;f<n.length;f+=4)m=u(n[f]),g=u(n[f+1]),y=u(n[f+2]),h=u(n[f+3]),r.decrypt(m,g,y,h,s,f),s[f]=u(s[f]^o),s[f+1]=u(s[f+1]^d),s[f+2]=u(s[f+2]^p),s[f+3]=u(s[f+3]^c),o=m,d=g,p=y,c=h;return i},m=function(){function e(n,r,s,o){a(this,e);var l=e.STEP,d=new Int32Array(n.buffer),c=new Uint8Array(n.byteLength),m=0;for(this.asyncStream_=new p,this.asyncStream_.push(this.decryptChunk_(d.subarray(m,m+l),r,s,c)),m=l;m<d.length;m+=l)s=new Uint32Array([u(d[m-4]),u(d[m-3]),u(d[m-2]),u(d[m-1])]),this.asyncStream_.push(this.decryptChunk_(d.subarray(m,m+l),r,s,c));this.asyncStream_.push(function(){o(null,t(c))})}return e.prototype.decryptChunk_=function(e,t,a,n){return function(){var r=c(e,t,a);n.set(r,e.byteOffset)}},n(e,null,[{key:'STEP',get:function(){return 32e3}}]),e}(),g=function(e){var t={};return Object.keys(e).forEach(function(a){var n=e[a];t[a]=ArrayBuffer.isView(n)?{bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:n}),t},y=new function(e){e.onmessage=function(t){var a=t.data,n=new Uint8Array(a.encrypted.bytes,a.encrypted.byteOffset,a.encrypted.byteLength),r=new Uint32Array(a.key.bytes,a.key.byteOffset,a.key.byteLength/4),i=new Uint32Array(a.iv.bytes,a.iv.byteOffset,a.iv.byteLength/4);new m(n,r,i,function(t,n){e.postMessage(g({source:a.source,decrypted:n}),[n.buffer])})}}(e);return y}()}),Ul=function(e){var t=e['default']?'main':'alternative';return e.characteristics&&0<=e.characteristics.indexOf('public.accessibility.describes-video')&&(t='main-desc'),t},Bl=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Yl=function(e,t){t.activePlaylistLoader=e,e.load()},Fl=function(e,t){return function(){var a=t.segmentLoaders,n=a[e],r=a.main,i=t.mediaTypes[e],s=i.activeTrack(),o=i.activeGroup(s),l=i.activePlaylistLoader;return Bl(n,i),o?o.playlistLoader?void(n.resyncLoader(),Yl(o.playlistLoader,i)):void(l&&r.resetEverything()):void 0}},jl=function(e,t){return function(){var a=t.segmentLoaders,n=a[e],r=a.main,i=t.mediaTypes[e],s=i.activeTrack(),o=i.activeGroup(s),l=i.activePlaylistLoader;return Bl(n,i),o?o.playlistLoader?l===o.playlistLoader?void Yl(o.playlistLoader,i):void(n.track&&n.track(s),n.resetEverything(),Yl(o.playlistLoader,i)):void r.resetEverything():void 0}},Hl={AUDIO:function(e,t){return function(){var a=t.segmentLoaders[e],n=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;Bl(a,n);var i=n.activeTrack(),s=n.activeGroup(),o=(s.filter(function(e){return e['default']})[0]||s[0]).id,l=n.tracks[o];if(i===l)return void r({message:'Problem encountered loading the default audio track.'});for(var d in Ue.log.warn('Problem encountered loading the alternate audio track.Switching back to default.'),n.tracks)n.tracks[d].enabled=n.tracks[d]===l;n.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var a=t.segmentLoaders[e],n=t.mediaTypes[e];Ue.log.warn('Problem encountered loading the subtitle track.Disabling subtitle track.'),Bl(a,n);var r=n.activeTrack();r&&(r.mode='disabled'),n.onTrackChanged()}}},Vl={AUDIO:function(e,t,a){if(t){var n=a.tech,r=a.requestOptions,i=a.segmentLoaders[e];t.on('loadedmetadata',function(){var e=t.media();i.playlist(e,r),(!n.paused()||e.endList&&'none'!==n.preload())&&i.load()}),t.on('loadedplaylist',function(){i.playlist(t.media(),r),n.paused()||i.load()}),t.on('error',Hl[e](e,a))}},SUBTITLES:function(e,t,a){var n=a.tech,r=a.requestOptions,i=a.segmentLoaders[e],s=a.mediaTypes[e];t.on('loadedmetadata',function(){var e=t.media();i.playlist(e,r),i.track(s.activeTrack()),(!n.paused()||e.endList&&'none'!==n.preload())&&i.load()}),t.on('loadedplaylist',function(){i.playlist(t.media(),r),n.paused()||i.load()}),t.on('error',Hl[e](e,a))}},zl={AUDIO:function(e,t){var a=t.hls,n=t.sourceType,r=t.segmentLoaders[e],i=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],l=o.groups,d=o.tracks,p=t.masterPlaylistLoader;for(var u in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}}),s[e])for(var c in l[u]||(l[u]=[]),s[e][u]){var m=s[e][u][c],g=void 0;if(g=m.resolvedUri?new ls(m.resolvedUri,a,i):m.playlists&&'dash'===n?new Zo(m.playlists[0],a,i,p):null,m=Ue.mergeOptions({id:c,playlistLoader:g},m),Vl[e](e,m.playlistLoader,t),l[u].push(m),'undefined'==typeof d[c]){var y=new Ue.AudioTrack({id:c,kind:Ul(m),enabled:!1,language:m.language,default:m['default'],label:c});d[c]=y}}r.on('error',Hl[e](e,t))},SUBTITLES:function(e,t){var a=t.tech,n=t.hls,r=t.sourceType,i=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],d=l.groups,p=l.tracks,u=t.masterPlaylistLoader;for(var c in o[e])for(var m in d[c]||(d[c]=[]),o[e][c])if(!o[e][c][m].forced){var g=o[e][c][m],y=void 0;if('hls'===r?y=new ls(g.resolvedUri,n,s):'dash'===r&&(y=new Zo(g.playlists[0],n,s,u)),g=Ue.mergeOptions({id:m,playlistLoader:y},g),Vl[e](e,g.playlistLoader,t),d[c].push(g),'undefined'==typeof p[m]){var h=a.addRemoteTextTrack({id:m,kind:'subtitles',default:g['default']&&g.autoselect,language:g.language,label:m},!1).track;p[m]=h}}i.on('error',Hl[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var a=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],i=r.groups,s=r.tracks;for(var o in n[e])for(var l in i[o]||(i[o]=[]),n[e][o]){var d=n[e][o][l];if(d.instreamId.match(/CC\d/)&&(i[o].push(Ue.mergeOptions({id:l},d)),'undefined'==typeof s[l])){var p=a.addRemoteTextTrack({id:d.instreamId,kind:'captions',default:d['default']&&d.autoselect,language:d.language,label:l},!1).track;s[l]=p}}}},ql=function(e,t){return function(a){var n=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,i=n.media();if(!i)return null;var s=null;return i.attributes[e]&&(s=r[i.attributes[e]]),s=s||r.main,'undefined'==typeof a?s:null===a?null:s.filter(function(e){return e.id===a.id})[0]||null}},Wl={AUDIO:function(e,t){return function(){var a=t.mediaTypes[e].tracks;for(var n in a)if(a[n].enabled)return a[n];return null}},SUBTITLES:function(e,t){return function(){var a=t.mediaTypes[e].tracks;for(var n in a)if('showing'===a[n].mode)return a[n];return null}}},Gl=function(e){['AUDIO','SUBTITLES','CLOSED-CAPTIONS'].forEach(function(t){zl[t](t,e)});var t=e.mediaTypes,a=e.masterPlaylistLoader,n=e.tech,r=e.hls;['AUDIO','SUBTITLES'].forEach(function(a){t[a].activeGroup=ql(a,e),t[a].activeTrack=Wl[a](a,e),t[a].onGroupChanged=Fl(a,e),t[a].onTrackChanged=jl(a,e)});var i=t.AUDIO.activeGroup(),s=(i.filter(function(e){return e['default']})[0]||i[0]).id;t.AUDIO.tracks[s].enabled=!0,t.AUDIO.onTrackChanged(),a.on('mediachange',function(){['AUDIO','SUBTITLES'].forEach(function(e){return t[e].onGroupChanged()})});var o=function(){t.AUDIO.onTrackChanged(),n.trigger({type:'usage',name:'hls-audio-change'})};for(var l in n.audioTracks().addEventListener('change',o),n.remoteTextTracks().addEventListener('change',t.SUBTITLES.onTrackChanged),r.on('dispose',function(){n.audioTracks().removeEventListener('change',o),n.remoteTextTracks().removeEventListener('change',t.SUBTITLES.onTrackChanged)}),n.clearTracks('audio'),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[l])},Kl=function(){var e={};return['AUDIO','SUBTITLES','CLOSED-CAPTIONS'].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:je,activeTrack:je,onGroupChanged:je,onTrackChanged:je}}),e},Xl=void 0,Jl=['mediaRequests','mediaRequestsAborted','mediaRequestsTimedout','mediaRequestsErrored','mediaTransferDuration','mediaBytesTransferred'],$l=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Ql=function(e){function t(e){Wi(this,t);var a=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.url,r=e.handleManifestRedirects,i=e.withCredentials,s=e.tech,o=e.bandwidth,l=e.externHls,d=e.useCueTags,p=e.blacklistDuration,u=e.enableLowInitialPlaylist,c=e.sourceType,m=e.seekTo,g=e.cacheEncryptionKeys;if(!n)throw new Error('A non-empty playlist URL is required');Xl=l,a.withCredentials=i,a.tech_=s,a.hls_=s.hls,a.seekTo_=m,a.sourceType_=c,a.useCueTags_=d,a.blacklistDuration=p,a.enableLowInitialPlaylist=u,a.useCueTags_&&(a.cueTagsTrack_=a.tech_.addTextTrack('metadata','ad-cues'),a.cueTagsTrack_.inBandMetadataTrackDispatchType=''),a.requestOptions_={withCredentials:i,handleManifestRedirects:r,timeout:null},a.mediaTypes_=Kl(),a.mediaSource=new Ue.MediaSource,a.mediaSource.addEventListener('sourceopen',a.handleSourceOpen_.bind(a)),a.seekable_=Ue.createTimeRanges(),a.hasPlayed_=function(){return!1},a.syncController_=new Rl(e),a.segmentMetadataTrack_=s.addRemoteTextTrack({kind:'metadata',label:'segment-metadata'},!1).track,a.decrypter_=new Nl,a.inbandTextTracks_={};var y={hls:a.hls_,mediaSource:a.mediaSource,currentTime:a.tech_.currentTime.bind(a.tech_),seekable:function(){return a.seekable()},seeking:function(){return a.tech_.seeking()},duration:function(){return a.mediaSource.duration},hasPlayed:function(){return a.hasPlayed_()},goalBufferLength:function(){return a.goalBufferLength()},bandwidth:o,syncController:a.syncController_,decrypter:a.decrypter_,sourceType:a.sourceType_,inbandTextTracks:a.inbandTextTracks_,cacheEncryptionKeys:g};return a.masterPlaylistLoader_='dash'===a.sourceType_?new Zo(n,a.hls_,a.requestOptions_):new ls(n,a.hls_,a.requestOptions_),a.setupMasterPlaylistLoaderListeners_(),a.mainSegmentLoader_=new wl(Ue.mergeOptions(y,{segmentMetadataTrack:a.segmentMetadataTrack_,loaderType:'main'}),e),a.audioSegmentLoader_=new wl(Ue.mergeOptions(y,{loaderType:'audio'}),e),a.subtitleSegmentLoader_=new Il(Ue.mergeOptions(y,{loaderType:'vtt'}),e),a.setupSegmentLoaderListeners_(),Jl.forEach(function(e){a[e+'_']=$l.bind(a,e)}),a.logger_=el('MPC'),a.masterPlaylistLoader_.load(),a}return Xi(t,e),Gi(t,[{key:'setupMasterPlaylistLoaderListeners_',value:function(){var t=this;this.masterPlaylistLoader_.on('loadedmetadata',function(){var e=t.masterPlaylistLoader_.media(),a=1e3*(1.5*e.targetDuration);t.requestOptions_.timeout=Es(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:a,e.endList&&'none'!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load()),Gl({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),e);try{t.setupSourceBuffers_()}catch(a){return Ue.log.warn('Failed to create SourceBuffers',a),t.mediaSource.endOfStream('decode')}t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger('selectedinitialmedia'):t.mediaTypes_.AUDIO.activePlaylistLoader.one('loadedmetadata',function(){t.trigger('selectedinitialmedia')})}),this.masterPlaylistLoader_.on('loadedplaylist',function(){var e=t.masterPlaylistLoader_.media();if(!e){t.excludeUnsupportedVariants_();var a;return t.enableLowInitialPlaylist&&(a=t.selectInitialPlaylist()),a||(a=t.selectPlaylist()),t.initialMedia_=a,void t.masterPlaylistLoader_.media(t.initialMedia_)}if(t.useCueTags_&&t.updateAdCues_(e),t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.updateDuration(),t.tech_.paused()||(t.mainSegmentLoader_.load(),t.audioSegmentLoader_&&t.audioSegmentLoader_.load()),!e.endList){var n=function(){var e=t.seekable();0!==e.length&&t.mediaSource.addSeekableRange_(e.start(0),e.end(0))};if(t.duration()!==Infinity){var r=function e(){t.duration()===Infinity?n():t.tech_.one('durationchange',e)};t.tech_.one('durationchange',r)}else n()}}),this.masterPlaylistLoader_.on('error',function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on('mediachanging',function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on('mediachange',function(){var e=t.masterPlaylistLoader_.media(),a=1e3*(1.5*e.targetDuration);t.requestOptions_.timeout=Es(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:a,t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:'mediachange',bubbles:!0})}),this.masterPlaylistLoader_.on('playlistunchanged',function(){var e=t.masterPlaylistLoader_.media(),a=t.stuckAtPlaylistEnd_(e);a&&(t.blacklistCurrentPlaylist({message:'Playlist no longer updating.'}),t.tech_.trigger('playliststuck'))}),this.masterPlaylistLoader_.on('renditiondisabled',function(){t.tech_.trigger({type:'usage',name:'hls-rendition-disabled'})}),this.masterPlaylistLoader_.on('renditionenabled',function(){t.tech_.trigger({type:'usage',name:'hls-rendition-enabled'})})}},{key:'triggerPresenceUsage_',value:function(e,t){var a=e.mediaGroups||{},n=!0,r=Object.keys(a.AUDIO);for(var i in a.AUDIO)for(var s in a.AUDIO[i]){var o=a.AUDIO[i][s];o.uri||(n=!1)}n&&this.tech_.trigger({type:'usage',name:'hls-demuxed'}),Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:'usage',name:'hls-webvtt'}),Xl.Playlist.isAes(t)&&this.tech_.trigger({type:'usage',name:'hls-aes'}),Xl.Playlist.isFmp4(t)&&this.tech_.trigger({type:'usage',name:'hls-fmp4'}),r.length&&1<Object.keys(a.AUDIO[r[0]]).length&&this.tech_.trigger({type:'usage',name:'hls-alternate-audio'}),this.useCueTags_&&this.tech_.trigger({type:'usage',name:'hls-playlist-cue-tags'})}},{key:'setupSegmentLoaderListeners_',value:function(){var e=this;this.mainSegmentLoader_.on('bandwidthupdate',function(){var t=e.selectPlaylist(),a=e.masterPlaylistLoader_.media(),n=e.tech_.buffered(),r=n.length?n.end(n.length-1)-e.tech_.currentTime():0,i=e.bufferLowWaterLine();(!a.endList||e.duration()<al.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<a.attributes.BANDWIDTH||r>=i)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger('bandwidthupdate')}),this.mainSegmentLoader_.on('progress',function(){e.trigger('progress')}),this.mainSegmentLoader_.on('error',function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on('syncinfoupdate',function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on('timestampoffset',function(){e.tech_.trigger({type:'usage',name:'hls-timestamp-offset'})}),this.audioSegmentLoader_.on('syncinfoupdate',function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on('ended',function(){e.onEndOfStream()}),this.mainSegmentLoader_.on('earlyabort',function(){e.blacklistCurrentPlaylist({message:'Aborted early because there isn\'t enough bandwidth to complete the request without rebuffering.'},120)}),this.mainSegmentLoader_.on('reseteverything',function(){e.tech_.trigger('hls-reset')}),this.mainSegmentLoader_.on('segmenttimemapping',function(t){e.tech_.trigger({type:'hls-segment-time-mapping',mapping:t.mapping})}),this.audioSegmentLoader_.on('ended',function(){e.onEndOfStream()})}},{key:'mediaSecondsLoaded_',value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:'load',value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:'smoothQualityChange_',value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:'fastQualityChange_',value:function(){var e=this,t=this.selectPlaylist();t===this.masterPlaylistLoader_.media()||(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){Ue.browser.IE_VERSION||Ue.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:'play',value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===Infinity&&this.tech_.currentTime()<e.start(0))return this.seekTo_(e.end(e.length-1))}}},{key:'setupFirstPlay',value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var a=this.seekable();if(!a.length)return!1;if(Ue.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one('loadedmetadata',function(){e.trigger('firstplay'),e.seekTo_(a.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger('firstplay'),this.seekTo_(a.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:'handleSourceOpen_',value:function(){try{this.setupSourceBuffers_()}catch(t){return Ue.log.warn('Failed to create Source Buffers',t),this.mediaSource.endOfStream('decode')}if(this.tech_.autoplay()){var e=this.tech_.play();'undefined'!=typeof e&&'function'==typeof e.then&&e.then(null,function(){})}this.trigger('sourceopen')}},{key:'onEndOfStream',value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_),!!e){this.logger_('calling mediaSource.endOfStream()');try{this.mediaSource.endOfStream()}catch(t){Ue.log.warn('Failed to call media source endOfStream',t)}}}},{key:'stuckAtPlaylistEnd_',value:function(e){var t=this.seekable();if(!t.length)return!1;var a=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===a)return!1;var n=Xl.Playlist.playlistEnd(e,a),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=Js;var s=i.end(i.length-1);return s-r<=Js&&n-s<=Js}},{key:'blacklistCurrentPlaylist',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=void 0,n=void 0;if(a=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!a){this.error=e;try{return this.mediaSource.endOfStream('network')}catch(t){return this.trigger('error')}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(Ss).length,i=this.masterPlaylistLoader_.master.playlists;return 1===i.length?(Ue.log.warn('Problem encountered with the current HLS playlist. Trying again since it is the only playlist.'),this.tech_.trigger('retryplaylist'),this.masterPlaylistLoader_.load(r)):(r&&(Ue.log.warn('Removing all playlists from the blacklist because the last rendition is about to be blacklisted.'),i.forEach(function(e){e.excludeUntil!==Infinity&&delete e.excludeUntil}),this.tech_.trigger('retryplaylist')),a.excludeUntil=Date.now()+1e3*t,this.tech_.trigger('blacklistplaylist'),this.tech_.trigger({type:'usage',name:'hls-rendition-blacklisted'}),n=this.selectPlaylist(),Ue.log.warn('Problem encountered with the current HLS playlist.'+(e.message?' '+e.message:'')+' Switching to another playlist.'),this.masterPlaylistLoader_.media(n,r))}},{key:'pauseLoading',value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:'setCurrentTime',value:function(e){var t=Qs(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()?this.masterPlaylistLoader_.media().segments?t&&t.length?e:void(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()):0:0}},{key:'duration',value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Xl.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:'seekable',value:function(){return this.seekable_}},{key:'onSyncInfoUpdate_',value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(a){var n=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null!==n&&(e=Xl.Playlist.seekable(a,n),0!==e.length)){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(a,this.mediaSource.duration),null===n)return;if(t=Xl.Playlist.seekable(a,n),0===t.length)return}var r=void 0,i=void 0;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),i=this.seekable_.start(0)),this.seekable_=t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?e:Ue.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===i||(this.logger_('seekable updated ['+to(this.seekable_)+']'),this.tech_.trigger('seekablechanged'))}}}}},{key:'updateDuration',value:function(){var e=this,t=this.mediaSource.duration,a=Xl.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),r=function t(){e.logger_('Setting duration from '+e.mediaSource.duration+' => '+a);try{e.mediaSource.duration=a}catch(t){Ue.log.warn('Failed to set media source duration',t)}e.tech_.trigger('durationchange'),e.mediaSource.removeEventListener('sourceopen',t)};0<n.length&&(a=Math.max(a,n.end(n.length-1))),t!==a&&('open'===this.mediaSource.readyState?r():this.mediaSource.addEventListener('sourceopen',r))}},{key:'dispose',value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),['AUDIO','SUBTITLES'].forEach(function(t){var a=e.mediaTypes_[t].groups;for(var n in a)a[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:'master',value:function(){return this.masterPlaylistLoader_.master}},{key:'media',value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:'setupSourceBuffers_',value:function(){var e=this.masterPlaylistLoader_.media(),t=void 0;if(e&&'open'===this.mediaSource.readyState)return t=xo(this.masterPlaylistLoader_.master,e),1>t.length?(this.error='No compatible SourceBuffer configuration for the variant stream:'+e.resolvedUri,this.mediaSource.endOfStream('decode')):void(this.configureLoaderMimeTypes_(t),this.excludeIncompatibleVariants_(e))}},{key:'configureLoaderMimeTypes_',value:function(e){var t=1<e.length&&-1===e[0].indexOf(',')&&e[0]!==e[1]?new Ue.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:'excludeUnsupportedVariants_',value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&Ve.a.MediaSource&&Ve.a.MediaSource.isTypeSupported&&!Ve.a.MediaSource.isTypeSupported('video/mp4; codecs="'+So(e.attributes.CODECS)+'"')&&(e.excludeUntil=Infinity)})}},{key:'excludeIncompatibleVariants_',value:function(e){var t=2,a=null,n=void 0;e.attributes.CODECS&&(n=ko(e.attributes.CODECS),a=n.videoCodec,t=n.codecCount),this.master().playlists.forEach(function(e){var n={codecCount:2,videoCodec:null};e.attributes.CODECS&&(n=ko(e.attributes.CODECS)),n.codecCount!==t&&(e.excludeUntil=Infinity),n.videoCodec!==a&&(e.excludeUntil=Infinity)})}},{key:'updateAdCues_',value:function(e){var t=0,a=this.seekable();a.length&&(t=a.start(0)),Dl(e,this.cueTagsTrack_,t)}},{key:'goalBufferLength',value:function(){var e=this.tech_.currentTime(),t=al.GOAL_BUFFER_LENGTH,a=al.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,al.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*a,n)}},{key:'bufferLowWaterLine',value:function(){var e=this.tech_.currentTime(),t=al.BUFFER_LOW_WATER_LINE,a=al.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,al.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*a,n)}}]),t}(Ue.EventTarget),Zl=function(e,t,a){return function(n){var r=e.master.playlists[t],i=ks(r),s=Ss(r);return'undefined'==typeof n?s:(n?delete r.disabled:r.disabled=!0,n===s||i||(a(),n?e.trigger('renditionenabled'):e.trigger('renditiondisabled')),n)}},ed=function e(t,a,n){Wi(this,e);var r=t.masterPlaylistController_,i=t.options_.smoothQualityChange,s=i?'smooth':'fast',o=r[s+'QualityChange_'].bind(r);if(a.attributes.RESOLUTION){var l=a.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=a.attributes.BANDWIDTH,this.id=n,this.enabled=Zl(t.playlists,a.uri,o)},td=function(t){var e=t.playlists;t.representations=function(){return e.master.playlists.filter(function(e){return!ks(e)}).map(function(a){return new ed(t,a,a.uri)})}},ad=['seeking','seeked','pause','playing','error'],nd=function(){function e(t){var a=this;Wi(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.seekTo=t.seekTo,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=el('PlaybackWatcher'),this.logger_('initialize');var n=function(){return a.monitorCurrentTime_()},r=function(){return a.techWaiting_()},i=function(){return a.cancelTimer_()},s=function(){return a.fixesBadSeeks_()};this.tech_.on('seekablechanged',s),this.tech_.on('waiting',r),this.tech_.on(ad,i),this.tech_.on('canplay',n),this.dispose=function(){a.logger_('dispose'),a.tech_.off('seekablechanged',s),a.tech_.off('waiting',r),a.tech_.off(ad,i),a.tech_.off('canplay',n),a.checkCurrentTimeTimeout_&&Ve.a.clearTimeout(a.checkCurrentTimeTimeout_),a.cancelTimer_()}}return Gi(e,[{key:'monitorCurrentTime_',value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Ve.a.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Ve.a.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:'checkCurrentTime_',value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!(this.tech_.paused()||this.tech_.seeking())){var e=this.tech_.currentTime(),t=this.tech_.buffered();return this.lastRecordedTime===e&&(!t.length||e+Js>=t.end(t.length-1))?this.techWaiting_():void(5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e))}}},{key:'cancelTimer_',value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_('cancelTimer_'),clearTimeout(this.timer_)),this.timer_=null}},{key:'fixesBadSeeks_',value:function(){var e=this.tech_.seeking();if(!e)return!1;var t=this.seekable(),a=this.tech_.currentTime(),n=this.afterSeekableWindow_(t,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),r=void 0;if(n){var i=t.end(t.length-1);r=i}if(this.beforeSeekableWindow_(t,a)){var s=t.start(0);r=s+Js}return'undefined'!=typeof r&&(this.logger_('Trying to seek outside of seekable at time '+a+' with '+('seekable range '+to(t)+'. Seeking to ')+(r+'.')),this.seekTo(r),!0)}},{key:'waiting_',value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),a=Qs(t,e);if(a.length&&e+3<=a.end(0))return this.cancelTimer_(),this.seekTo(e),this.logger_('Stopped at '+e+' while inside a buffered region '+('['+a.start(0)+' -> '+a.end(0)+']. Attempting to resume playback by seeking to the current time.')),void this.tech_.trigger({type:'usage',name:'hls-unknown-waiting'})}}},{key:'techWaiting_',value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var a=e.end(e.length-1);return this.logger_('Fell out of live window at time '+t+'. Seeking to '+('live point (seekable end) '+a)),this.cancelTimer_(),this.seekTo(a),this.tech_.trigger({type:'usage',name:'hls-live-resync'}),!0}var n=this.tech_.buffered(),r=Zs(n,t);if(this.videoUnderflow_(r,n,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:'usage',name:'hls-video-underflow'}),!0;if(0<r.length){var i=r.start(0)-t;return this.logger_('Stopped at '+t+', setting timer for '+i+', seeking '+('to '+r.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*i,t),!0}return!1}},{key:'afterSeekableWindow_',value:function(e,t,a){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];if(!e.length)return!1;var r=e.end(e.length-1)+Js,i=!a.endList;return i&&n&&(r=e.end(e.length-1)+3*a.targetDuration),!!(t>r)}},{key:'beforeSeekableWindow_',value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-Js)}},{key:'videoUnderflow_',value:function(e,t,a){if(0===e.length){var n=this.gapFromVideoUnderflow_(t,a);if(n)return this.logger_('Encountered a gap in video from '+n.start+' to '+n.end+'. '+('Seeking to current time '+a)),!0}return!1}},{key:'skipTheGap_',value:function(e){var t=this.tech_.buffered(),a=this.tech_.currentTime(),n=Zs(t,a);this.cancelTimer_(),0===n.length||a!==e||(this.logger_('skipTheGap_:','currentTime:',a,'scheduled currentTime:',e,'nextRange start:',n.start(0)),this.seekTo(n.start(0)+Xs),this.tech_.trigger({type:'usage',name:'hls-gap-skip'}))}},{key:'gapFromVideoUnderflow_',value:function(e,t){for(var a=eo(e),n=0;n<a.length;n++){var r=a.start(n),i=a.end(n);if(4>t-r&&2<t-r)return{start:r,end:i}}return null}}]),e}(),rd={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),a=t.currentSource_;return e(a)}},id=function e(t,a){var n=0,r=0,i=Ue.mergeOptions(rd,a);t.ready(function(){t.trigger({type:'usage',name:'hls-error-reload-initialized'})});var s=function(){r&&t.currentTime(r)},o=function(e){null===e||void 0===e||(r=t.duration()!==Infinity&&t.currentTime()||0,t.one('loadedmetadata',s),t.src(e),t.trigger({type:'usage',name:'hls-error-reload'}),t.play())},l=function(){return Date.now()-n<1e3*i.errorInterval?void t.trigger({type:'usage',name:'hls-error-reload-canceled'}):i.getSource&&'function'==typeof i.getSource?(n=Date.now(),i.getSource.call(t,o)):void Ue.log.error('ERROR: reloadSourceOnError - The option getSource must be a function!')},d=function e(){t.off('loadedmetadata',s),t.off('error',l),t.off('dispose',e)};t.on('error',l),t.on('dispose',d),t.reloadSourceOnError=function(a){d(),e(t,a)}},sd=function(e){id(this,e)};Ue.use('*',function(e){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.tech_.currentTime())}}});var od={PlaylistLoader:ls,Playlist:Ls,Decrypter:Pt,AsyncStream:Lt,decrypt:xt,utils:Ys,STANDARD_PLAYLIST_SELECTOR:function(){return _l(this.playlists.master,this.systemBandwidth,parseInt(yl(this.tech_.el(),'width'),10),parseInt(yl(this.tech_.el(),'height'),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Ls.isEnabled);hl(e,function(e,t){return fl(e,t)});var t=e.filter(function(e){return ko(e.attributes.CODECS).videoCodec});return t[0]||null},comparePlaylistBandwidth:fl,comparePlaylistResolution:function(e,t){var a=void 0,n=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(a=e.attributes.RESOLUTION.width),a=a||Ve.a.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||Ve.a.Number.MAX_VALUE,a===n&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:a-n},xhr:Ps()};['GOAL_BUFFER_LENGTH','MAX_GOAL_BUFFER_LENGTH','GOAL_BUFFER_LENGTH_RATE','BUFFER_LOW_WATER_LINE','MAX_BUFFER_LOW_WATER_LINE','BUFFER_LOW_WATER_LINE_RATE','BANDWIDTH_VARIANCE'].forEach(function(e){Object.defineProperty(od,e,{get:function(){return Ue.log.warn('using Hls.'+e+' is UNSAFE be sure you know what you are doing'),al[e]},set:function(t){return Ue.log.warn('using Hls.'+e+' is UNSAFE be sure you know what you are doing'),'number'!=typeof t||0>t?void Ue.log.warn('value of Hls.'+e+' must be greater than or equal to 0'):void(al[e]=t)}})});var ld='videojs-vhs',dd=function(e){var t=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(t.test(e))return'hls';var a=/^application\/dash\+xml/i;return a.test(e)?'dash':null},pd=function(e,t){for(var a=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===a.uri){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:'change'})},ud=function(e,t){t.representations().forEach(function(t){e.addQualityLevel(t)}),pd(e,t.playlists)};od.canPlaySource=function(){return Ue.log.warn('HLS is no longer a tech. Please remove it from your player\'s techOrder.')};var cd=function(e,t,a){if(!e)return e;var n={};for(var r in e)n[r]={audioContentType:'audio/mp4; codecs="'+a.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(n[r].pssh=t.contentProtection[r].pssh),'string'==typeof e[r]&&(n[r].url=e[r]);return Ue.mergeOptions(e,n)},md=function(e){if('dash'===e.options_.sourceType){var t=Ue.players[e.tech_.options_.playerId];if(t.eme){var a=cd(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());a&&(t.currentSource().keySystems=a,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}},gd=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem(ld);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},yd=function(e){if(!window.localStorage)return!1;var t=gd();t=t?Ue.mergeOptions(t,e):e;try{window.localStorage.setItem(ld,JSON.stringify(t))}catch(t){return!1}return t};od.supportsNativeHls=function(){var e=qe.a.createElement('video');if(!Ue.getTech('Html5').isSupported())return!1;return['application/vnd.apple.mpegurl','audio/mpegurl','audio/x-mpegurl','application/x-mpegurl','video/x-mpegurl','video/mpegurl','application/mpegurl'].some(function(t){return /maybe|probably/i.test(e.canPlayType(t))})}(),od.supportsNativeDash=function(){return!!Ue.getTech('Html5').isSupported()&&/maybe|probably/i.test(qe.a.createElement('video').canPlayType('application/dash+xml'))}(),od.supportsTypeNatively=function(e){return'hls'===e?od.supportsNativeHls:'dash'===e&&od.supportsNativeDash},od.isSupported=function(){return Ue.log.warn('HLS is no longer a tech. Please remove it from your player\'s techOrder.')};var hd=Ue.getComponent('Component'),fd=function(e){function t(e,a,n){Wi(this,t);var r=Ji(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,n.hls));if(a.options_&&a.options_.playerId){var i=Ue(a.options_.playerId);i.hasOwnProperty('hls')||Object.defineProperty(i,'hls',{get:function(){return Ue.log.warn('player.hls is deprecated. Use player.tech().hls instead.'),a.trigger({type:'usage',name:'hls-player-access'}),r},configurable:!0}),i.vhs=r,i.dash=r,r.player_=i}if(r.tech_=a,r.source_=e,r.stats={},r.setOptions_(),r.options_.overrideNative&&a.overrideNativeAudioTracks&&a.overrideNativeVideoTracks)a.overrideNativeAudioTracks(!0),a.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(a.featuresNativeVideoTracks||a.featuresNativeAudioTracks))throw new Error('Overriding native HLS requires emulated tracks. See https://git.io/vMpjB');return r.on(qe.a,['fullscreenchange','webkitfullscreenchange','mozfullscreenchange','MSFullscreenChange'],function(){var e=qe.a.fullscreenElement||qe.a.webkitFullscreenElement||qe.a.mozFullScreenElement||qe.a.msFullscreenElement;e&&e.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()}),r.on(r.tech_,'seeking',function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),r.on(r.tech_,'error',function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),r.on(r.tech_,'play',r.play),r}return Xi(t,e),Gi(t,[{key:'setOptions_',value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage='undefined'==typeof this.source_.useBandwidthFromLocalStorage?this.options_.useBandwidthFromLocalStorage||!1:this.source_.useBandwidthFromLocalStorage,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,'number'!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),'number'!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=gd();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:'usage',name:'hls-bandwidth-from-local-storage'})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:'usage',name:'hls-throughput-from-local-storage'}))}'number'!=typeof this.options_.bandwidth&&(this.options_.bandwidth=al.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===al.INITIAL_BANDWIDTH,['withCredentials','limitRenditionByPlayerDimensions','bandwidth','smoothQualityChange','customTagParsers','customTagMappers','handleManifestRedirects','cacheEncryptionKeys'].forEach(function(t){'undefined'!=typeof e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:'src',value:function(e,t){var a=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=od,this.options_.sourceType=dd(t),this.options_.seekTo=function(e){a.tech_.setCurrentTime(e),a.setCurrentTime(e)},this.masterPlaylistController_=new Ql(this.options_),this.playbackWatcher_=new nd(Ue.mergeOptions(this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()}})),this.masterPlaylistController_.on('error',function(){var e=Ue.players[a.tech_.options_.playerId];e.error(a.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):od.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=od.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;t=0<this.throughput?1/this.throughput:0;var a=Math.floor(1/(e+t));return a},set:function(){Ue.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return no(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return no(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one('canplay',this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on('bandwidthupdate',function(){a.options_.useBandwidthFromLocalStorage&&yd({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on('selectedinitialmedia',function(){td(a),md(a)}),this.on(this.masterPlaylistController_,'progress',function(){this.tech_.trigger('progress')}),this.tech_.ready(function(){return a.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Ue.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:'setupQualityLevels_',value:function(){var e=this,t=Ue.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on('selectedinitialmedia',function(){ud(e.qualityLevels_,e)}),this.playlists.on('mediachange',function(){pd(e.qualityLevels_,e.playlists)}))}},{key:'play',value:function(){this.masterPlaylistController_.play()}},{key:'setCurrentTime',value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:'duration',value:function(){return this.masterPlaylistController_.duration()}},{key:'seekable',value:function(){return this.masterPlaylistController_.seekable()}},{key:'dispose',value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,Ki(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'dispose',this).call(this)}},{key:'convertToProgramTime',value:function(e,t){return Gs({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:'seekToProgramTime',value:function(e,t){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2;return Ks({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),t}(hd),_d={name:'videojs-http-streaming',VERSION:'1.10.6',canHandleSource:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=Ue.mergeOptions(Ue.options,t);return _d.canPlayType(e.type,a)},handleSource:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Ue.mergeOptions(Ue.options,a);return t.hls=new fd(e,t,n),t.hls.xhr=Ps(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=Ue.mergeOptions(Ue.options,t),n=a.hls.overrideNative,r=dd(e),i=r&&(!od.supportsTypeNatively(r)||n);return i?'maybe':''}};('undefined'==typeof Ue.MediaSource||'undefined'==typeof Ue.URL)&&(Ue.MediaSource=Vo,Ue.URL=zo),Vo.supportsNativeMediaSources()&&Ue.getTech('Html5').registerSourceHandler(_d,0),Ue.HlsHandler=fd,Ue.HlsSourceHandler=_d,Ue.Hls=od,Ue.use||Ue.registerComponent('Hls',od),Ue.options.hls=Ue.options.hls||{},Ue.registerPlugin?Ue.registerPlugin('reloadSourceOnError',sd):Ue.plugin('reloadSourceOnError',sd);t['default']=Ue},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default={MAIN_SERVER:'MAIN_SERVER',VIMEO_API_KEY:'VIMEO_API_KEY',DEFAULT_VIDEO_ID:'DEFAULT_VIDEO_ID',API_KEY:'API_KEY',GOOGLE_MAP_API_KEY:'GOOGLE_MAP_API_KEY',GOOGLE_ANALYTICS_TRACKING_CODE:'GOOGLE_ANALYTICS_TRACKING_CODE',IP_STACK_API_KEY:'IP_STACK_API_KEY'}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default={Default:0,Destination:1,Hotel:2,GoingOut:3,Tour:4,Mixed:5}},function(e,t,a){'use strict';var n=a(39).toUnsigned,r=a(39).toHexString,s,o,i,l,d,p;s=function(e,t){var a=[],r,i,l,d,p;if(!t.length)return null;for(r=0;r<e.byteLength;)i=n(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),l=o(e.subarray(r+4,r+8)),d=1<i?r+i:e.byteLength,l===t[0]&&(1===t.length?a.push(e.subarray(r+8,d)):(p=s(e.subarray(r+8,d),t.slice(1)),p.length&&(a=a.concat(p)))),r=d;return a},o=function(e){var t='';return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3]),t},i=function(e){var t=s(e,['moov','trak']);return t.reduce(function(e,t){var a,r,i,o,l;return(a=s(t,['tkhd'])[0],!a)?null:(r=a[0],i=0===r?12:20,o=n(a[i]<<24|a[i+1]<<16|a[i+2]<<8|a[i+3]),l=s(t,['mdia','mdhd'])[0],!l)?null:(r=l[0],i=0===r?12:20,e[o]=n(l[i]<<24|l[i+1]<<16|l[i+2]<<8|l[i+3]),e)},{})},l=function(e,t){var a,r,i;return a=s(t,['moof','traf']),r=[].concat.apply([],a.map(function(t){return s(t,['tfhd']).map(function(a){var r,i,o;return r=n(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),i=e[r]||9e4,o=s(t,['tfdt']).map(function(e){var t,a;return t=e[0],a=n(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(a*=Math.pow(2,32),a+=n(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),a})[0],o=o||Infinity,o/i})})),i=Math.min.apply(null,r),isFinite(i)?i:0},d=function(e){var t=s(e,['moov','trak']),a=[];return t.forEach(function(e){var t=s(e,['mdia','hdlr']),n=s(e,['tkhd']);t.forEach(function(e,t){var r=o(e.subarray(8,12)),i=n[t],s,l,d;'vide'===r&&(s=new DataView(i.buffer,i.byteOffset,i.byteLength),l=s.getUint8(0),d=0===l?s.getUint32(12):s.getUint32(20),a.push(d))})}),a},p=function(e){var t=s(e,['moov','trak']),a=[];return t.forEach(function(e){var t={},i=s(e,['tkhd'])[0],l,d;i&&(l=new DataView(i.buffer,i.byteOffset,i.byteLength),d=l.getUint8(0),t.id=0===d?l.getUint32(12):l.getUint32(20));var p=s(e,['mdia','hdlr'])[0];if(p){var u=o(p.subarray(8,12));t.type='vide'===u?'video':'soun'===u?'audio':u}var c=s(e,['mdia','minf','stbl','stsd'])[0];if(c){var m=c.subarray(8);t.codec=o(m.subarray(4,8));var g=s(m,[t.codec])[0],y,h;g&&(/^[a-z]vc[1-9]$/i.test(t.codec)?(y=g.subarray(78),h=o(y.subarray(4,8)),'avcC'===h&&11<y.length?(t.codec+='.',t.codec+=r(y[9]),t.codec+=r(y[10]),t.codec+=r(y[11])):t.codec='avc1.4d400d'):/^mp4[a,v]$/i.test(t.codec)&&(y=g.subarray(28),h=o(y.subarray(4,8)),'esds'===h&&20<y.length&&0!==y[19]?(t.codec+='.'+r(y[19]),t.codec+='.'+r(63&y[20]>>>2).replace(/^0/,'')):t.codec='mp4a.40.2'))}var f=s(e,['mdia','mdhd'])[0];if(f&&i){var _=0===d?12:20;t.timescale=n(f[_]<<24|f[_+1]<<16|f[_+2]<<8|f[_+3])}a.push(t)}),a},e.exports={findBox:s,parseType:o,timescale:i,startTime:l,videoTrackIds:d,tracks:p}},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.UserDataService=void 0;var i=a(4),s=n(i),o=a(24),l=n(o),d=a(8),u=n(d),p=a(11),c=n(p),m=t.UserDataService=function(){function e(){r(this,e),this.data={initialized:!1,airport:'...',airportCode:'-',countryCode:null,currencyCode:'EUR',currencySymbol:'\u20AC',city:'-',latitude:null,longitude:null,geolocationon:!1},this.registeredCallbacks=[],this._initialized=!1}return e.prototype.intialize=function(){var e=this,t=function(){e.data.initialized=!0,e.registeredCallbacks.forEach(function(t){return t(e.data)}),e.registeredCallbacks=[]};this.getGeolocation().then(function(){return s.default.getCurrency(e.data.countryCode)}).then(function(a){var n=a.response;'ok'===n.status?(e.data.currencyCode=n.details.currency_code,e.data.currencySymbol=n.details.symbol):(console.warn(n.message),e.data.currencyCode='EUR',e.data.currencySymbol='\u20AC'),t()}).catch(function(){e.data.currencyCode='EUR',e.data.currencySymbol='\u20AC',t()})},e.prototype.getGeolocation=function(){var e=this;return new Promise(function(t,a){var n=(0,o.makeJSONp)('https://api.ipstack.com/check?access_key='+u.default.getValue(c.default.IP_STACK_API_KEY)+'&format=1'),r=function(n,r){s.default.getNearestAirport(n,r).then(function(a){var n=a.response;e.data.city=n[0].city_name,e.data.airport=n[0].airport_name,e.data.airportCode=n[0].airport,t(e.data)}).catch(function(e){a(e)})},i=function(){navigator.geolocation.getCurrentPosition(function(t){e.data.latitude=t.coords.latitude,e.data.longitude=t.coords.longitude,e.data.countryCode='FR',e.data.geolocation=!0,r(e.data.latitude,e.data.longitude)},function(e){a(e)})};n.then(function(t){t.error?i():(e.data.latitude=t.latitude,e.data.longitude=t.longitude,e.data.geolocation=!0,e.data.countryCode=t.country_code,r(e.data.latitude,e.data.longitude))}).catch(function(){i()})})},e.prototype.ready=function(e){this.data.initialized?e():(this.registeredCallbacks.push(e),!this._initialized&&(this.intialize(),this._initialized=!0))},e}();t.default=new m},function(e,a,n){var r,s;!function(o,i){r=[a,n(116)],s=function(t,a){i(o.i18n=t,a)}.apply(a,r),!(s!==void 0&&(e.exports=s))}(this,function(r,o){function t(){this._entities={},this._default=n,this._language=this._default;var e=o.observable();this.on=e.on,this.off=e.off,this.trigger=e.trigger,this.on('lang',this.setLanguage)}var n='en';t.prototype.dictionary=function(e){this._entities=e},t.prototype.defaultLanguage=function(e){this._default=e},t.prototype.localise=function(r,i){function l(n,i,t,e){e=e||'',i=i||{},t=t||0;var s=n&&!n.length,a=s?Object.keys(n).length:0;if(s&&0<a){for(var o in n)e.split('.').length>t&&(e=e.split('.').splice(0,t).join('.')),e=0==t?o:e+'.'+o,i=l(n[o],i,t+1,e)}else i[e]=n;return i}var t,e;if(this._entities[this._language]||(t=r),t||(e=l(this._entities[this._language]),t=e[r]?e[r]:r),i){var n=l(i),s;for(s in n)t=t.replace(new RegExp('{'+s+'}','g'),n[s])}return t},t.prototype.setLanguage=function(e){this._language=e||this._default,this.trigger('update')},t.prototype.getLanguage=function(){return this._language};var e=new t,a;for(a in e)r[a]=e[a];o.mixin('i18n',{i18n:r}),o.tag2('i1-8n','<span ref="localised" name="localised"></span> <span ref="original" name="original" class="original"><yield></yield></span>','i1-8n,[riot-tag="i1-8n"],[data-is="i1-8n"]{ display: inline-block; } i1-8n .original,[riot-tag="i1-8n"] .original,[data-is="i1-8n"] .original{ display: none; }','',function(){this.mixin('i18n'),this.i18n.on('update',function(){this.update()}.bind(this)),this.on('mount',function(){this.hasRefs=void 0!=this.refs,this.localise()}),this.on('update',function(){this.localise()}),this.localise=function(){var e=this.hasRefs?this.refs:this;e.localised.innerHTML=this.i18n.localise(e.original.innerHTML)}})})},function(e,t,a){'use strict';function n(e){try{return localStorage.getItem(e)}catch(t){return null}}function r(e,t){try{localStorage.setItem(e,t)}catch(t){console.error('Unable to store value',t)}}function i(e){try{return sessionStorage.getItem(e)}catch(t){return null}}function s(e,t){try{sessionStorage.setItem(e,t)}catch(t){}}Object.defineProperty(t,'__esModule',{value:!0}),t.getLocalStorageValue=n,t.setLocalStorageValue=r,t.getSessionStorageValue=i,t.setSessionStorageValue=s,t.getKey=function(e,t){return e===l.Store.COOKIE?(0,o.getCookie)(t):e===l.Store.LOCAL_STORAGE?n(t):e===l.Store.SESSION_STORAGE?i(t):null},t.setKey=function(e,t,a,n){if('undefined'!=typeof a&&null!==a)switch(e){case l.Store.COOKIE:(0,o.setCookie)(t,a,n);break;case l.Store.LOCAL_STORAGE:r(t,a);break;case l.Store.SESSION_STORAGE:s(t,a);break;default:}},t.isLocalStorageAuthorized=function(){try{return r('tc-ls',!0),n('tc-ls')}catch(t){return!1}},t.isSessionStorageAuthorized=function(){return s('tc-ls','true'),'true'===i('tc-ls')};var o=a(23),l=a(17),d=a(8),p=function(e){return e&&e.__esModule?e:{default:e}}(d);try{localStorage.setItem('localStorage',1),localStorage.removeItem('localStorage')}catch(t){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},console.warn('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.')}},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.TemplateType=t.Environment=t.Network=t.Profile=t.Store=void 0;var r=a(71),i=n(r),s=a(33),o=n(s),l=a(72),d=n(l),p=a(11),u=n(p),c=a(12),m=n(c);t.Store=i.default,t.Profile=o.default,t.Network=d.default,t.Environment=u.default,t.TemplateType=m.default},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.EventService=void 0;var i=a(8),s=n(i),o=a(16),l=a(4),d=n(l),p=a(33),u=n(p),c=a(11),m=n(c),g=a(74),y=n(g),h=a(75),f=function(){function e(){r(this,e),this.videoDimensions={},this.poiDimensions={},this.analyticDimensions={},this.additionalTrackingCodes=[],this.additionalTrackers_={},this.enabled_=!0,this.initialized_=!1,this.gaDimensionRegExp=/dimension\d{1,}/gi}return e.prototype.initialize=function(e){y.default.initialize(s.default.getValue(m.default.GOOGLE_ANALYTICS_TRACKING_CODE)),e=e||[],this.additionalTrackingCodes=Array.isArray(e)?e:[e],this.additionalTrackingCodes.forEach(function(e){'string'==typeof e?y.default.create(e,'tracking-'+e):console.warn('Cannot add tracking code. Is parameter a string:',e)}),this.additionalTrackers_=this.additionalTrackingCodes.map(function(e){return{trackingCode:e,tracker:y.default.name('tracking-'+e)}}).reduce(function(e,t){return e[t.trackingCode]=t.tracker,e},{}),this.initialized_=!0},e.prototype.setVideoDimensions=function(e){if(this.initialized_){var t=this.sanitize(e);this.videoDimensions=t,this.updateDimensions()}else console.warn('Service should be initialized before using calling this function')},e.prototype.setPoiDimensions=function(e){if(this.initialized_){var t=this.sanitize(e);this.poiDimensions=t,this.updateDimensions()}else console.warn('Service should be initialized before using calling this function')},e.prototype.sanitize=function(e){var t=this,a={};return Object.keys(e).reduce(function(n,r){return null!==r.match(t.gaDimensionRegExp)&&(a[r]=e[r]),n},{}),a},e.prototype.updateDimensions=function(){var e=this;if(this.initialized_){this.analyticDimensions=Object.assign({},this.videoDimensions,this.poiDimensions);var t=function(t){Object.keys(e.analyticDimensions).forEach(function(a){return t.custom(a,e.analyticDimensions[a])})};this._applyToAllTrackers(t)}else console.warn('Service should be initialized before using calling this function')},e.prototype.enabled=function(e){this.enabled_=e},e.prototype.send=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'';if(this.initialized_&&this.enabled_){var n=(0,o.getLocalStorageValue)('auth_profile')||'0';if(n!==u.default.ADMIN){var r=parent===window?document.location.href:document.referrer,i=Object.assign({},this.analyticDimensions,t),s=i.dimension4;d.default.event({action:e.tc,action_name:e.ga,rsrc:s,event_details:i,label:a,referrer:r});var l=function(n){'event'===e.ga_type?(t.eventValue=-1,t.eventLabel=a,n.event(e.category,e.ga,t)):n.pageview(e.ga,t)};this._applyToAllTrackers(l)}}else console.warn('Service should be initialized and enabled before using calling this function')},e.prototype.getTrackerFor=function(e){return this.additionalTrackers_[e]||null},e.prototype._applyToAllTrackers=function(e){var t=this;e(y.default),this.additionalTrackingCodes.map(function(e){return t.getTrackerFor(e)}).forEach(function(t){return e(t)})},e}();t.EventService=f,t.default=new f},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.Events={LOADED:{tc:0,ga:'/player/loaded',category:'Video',ga_type:'pageview'},START:{tc:10,ga:'START',category:'Video',ga_type:'event'},PAUSE:{tc:20,ga:'PAUSE',category:'Video',ga_type:'event'},ENDED:{tc:25,ga:'/player/ended',category:'Video',ga_type:'pageview'},CTRLBRPOI_CLICKED:{tc:37,ga:'CTRLBRPOI_CLICK',category:'Poi',ga_type:'event'},FULLSCREEN:{tc:85,ga:'FULLSCREEN',category:'Video',ga_type:'event'},DETAILS_PANEL:{tc:100,ga:'DETAILS_PANEL',category:'Interaction',ga_type:'event'},DETAILS_PANEL_HIDE:{tc:101,ga:'DETAILS_PANEL_HIDE',category:'Interaction',ga_type:'event'},DEEPLINK_CLICKED:{tc:120,ga:'DEEPLINK_CLICK',category:'Interaction',ga_type:'event'},PLAY_TIME:{tc:270,ga:'/player/playtime',category:'Video',ga_type:'pageview'},PLAY_TIME_ERROR:{tc:271,ga:'/player/playtime/error',category:'Video',ga_type:'pageview'},VIDEO_COMPLETED:{tc:280,ga:'/player/completed',category:'Video',ga_type:'pageview'},VIDEO_VIEWS:{tc:290,ga:'/player/videoviewed',category:'Video',ga_type:'pageview'},VIMEO_ERROR:{tc:300,ga:'VIMEO_ERROR',category:'Vimeo',ga_type:'event'}}},function(e,t,a){var n=a(3);n.tag2('loading','<div class="loading"> <div class="loading-bar"></div> <div class="loading-bar"></div> <div class="loading-bar"></div> <div class="loading-bar"></div> </div>','','',function(){}),!1},function(e,t,a){var n=a(3);n.tag2('raw','','','',function(e){'use strict';var t=this;this.root.innerHTML=e.content,this.on('update',function(){t.root.innerHTML=e.content})}),!1},function(e,t,a){'use strict';(function(e){function n(e){for(var t=s.a.atob(e),a=new Uint8Array(t.length),n=0;n<t.length;n++)a[n]=t.charCodeAt(n);return a}a.d(t,'a',function(){return ie}),a.d(t,'b',function(){return se});var r=a(0),s=a.n(r),i=function(e){return!!e&&'object'==typeof e},o=function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.reduce(function(t,a){return Object.keys(a).forEach(function(n){t[n]=Array.isArray(t[n])&&Array.isArray(a[n])?t[n].concat(a[n]):i(t[n])&&i(a[n])?e(t[n],a[n]):a[n]}),t},{})},l=function(e){return Object.keys(e).map(function(t){return e[t]})},d=function(e,t){for(var a=[],n=e;n<t;n++)a.push(n);return a},p=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},u=function(e){if(!e.length)return[];for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t},c=function(e,t){return e.reduce(function(n,a,e){return a[t]&&n.push(e),n},[])},m={INVALID_NUMBER_OF_PERIOD:'INVALID_NUMBER_OF_PERIOD',DASH_EMPTY_MANIFEST:'DASH_EMPTY_MANIFEST',DASH_INVALID_XML:'DASH_INVALID_XML',NO_BASE_URL:'NO_BASE_URL',MISSING_SEGMENT_INFORMATION:'MISSING_SEGMENT_INFORMATION',SEGMENT_TIME_UNSPECIFIED:'SEGMENT_TIME_UNSPECIFIED',UNSUPPORTED_UTC_TIMING_SCHEME:'UNSUPPORTED_UTC_TIMING_SCHEME'},g='undefined'==typeof window?'undefined'==typeof e?'undefined'==typeof self?{}:self:e:window,y=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){(function(){var t=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,i={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),t=t.trim(),!t){if(!n.alwaysNormalize)return e;var r=i.parseURL(e);if(!r)throw new Error('Error trying to parse base URL.');return r.path=i.normalizePath(r.path),i.buildURLFromParts(r)}var s=i.parseURL(t);if(!s)throw new Error('Error trying to parse relative URL.');if(s.scheme)return n.alwaysNormalize?(s.path=i.normalizePath(s.path),i.buildURLFromParts(s)):t;var o=i.parseURL(e);if(!o)throw new Error('Error trying to parse base URL.');if(!o.netLoc&&o.path&&'/'!==o.path[0]){var l=a.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path='/');var d={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(d.netLoc=o.netLoc,'/'!==s.path[0]))if(!s.path)d.path=o.path,s.params||(d.params=o.params,!s.query&&(d.query=o.query));else{var p=o.path,u=p.substring(0,p.lastIndexOf('/')+1)+s.path;d.path=i.normalizePath(u)}return null===d.path&&(d.path=n.alwaysNormalize?i.normalizePath(s.path):s.path),i.buildURLFromParts(d)},parseURL:function(e){var a=t.exec(e);return a?{scheme:a[1]||'',netLoc:a[2]||'',path:a[3]||'',params:a[4]||'',query:a[5]||'',fragment:a[6]||''}:null},normalizePath:function(e){for(e=e.split('').reverse().join('').replace(n,'');e.length!==(e=e.replace(r,'')).length;);return e.split('').reverse().join('')},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=i})(g)}),h=function(e,t){return /^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=y.buildAbsoluteURL(s.a.location.href,e)),y.buildAbsoluteURL(e,t))},f=function(e){var t=e.baseUrl,a=void 0===t?'':t,n=e.source,r=void 0===n?'':n,i=e.range,s=void 0===i?'':i,o=e.indexRange,l=void 0===o?'':o,d={uri:r,resolvedUri:h(a||'',r)};if(s||l){var p=s?s:l,u=p.split('-'),c=parseInt(u[0],10),m=parseInt(u[1],10);d.byterange={length:m-c+1,offset:c}}return d},_=function(e){var t=e.offset+e.length-1;return e.offset+'-'+t},b={static:function(e){var t=e.duration,a=e.timescale,n=void 0===a?1:a,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/n))}},dynamic:function(e){var t=e.NOW,a=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,i=void 0===r?1:r,s=e.duration,o=e.start,l=void 0===o?0:o,d=e.minimumUpdatePeriod,p=void 0===d?0:d,u=e.timeShiftBufferDepth,c=void 0===u?Infinity:u,m=(t+a)/1e3,g=n+l,y=Math.ceil((m+p-g)*i/s),h=Math.floor((m-g-c)*i/s),f=Math.floor((m-g)*i/s);return{start:Math.max(0,h),end:Math.min(y,f)}}},v=function(e){return function(t,a){var n=e.duration,r=e.timescale,i=void 0===r?1:r,s=e.periodIndex,o=e.startNumber,l=void 0===o?1:o;return{number:l+t,duration:n/i,timeline:s,time:a*n}}},T=function(e){var t=e.type,a=void 0===t?'static':t,n=e.duration,r=e.timescale,i=void 0===r?1:r,s=e.sourceDuration,o=b[a](e),l=o.start,p=o.end,u=d(l,p).map(v(e));if('static'===a){var c=u.length-1;u[c].duration=s-n/i*c}return u},k=function(e){var t=e.baseUrl,a=e.initialization,n=void 0===a?{}:a,r=e.sourceDuration,i=e.timescale,s=void 0===i?1:i,o=e.indexRange,l=void 0===o?'':o,d=e.duration;if(!t)throw new Error(m.NO_BASE_URL);var p=f({baseUrl:t,source:n.sourceURL,range:n.range}),u=f({baseUrl:t,source:t,indexRange:l});if(u.map=p,d){var c=T(e);c.length&&(u.duration=c[0].duration,u.timeline=c[0].timeline)}else r&&(u.duration=r/s,u.timeline=0);return u.number=0,[u]},S=function(e,t,a){for(var n=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,d=t.timescale,p=t.references.filter(function(e){return 1!==e.referenceType}),u=[],c=l+t.firstOffset,m=0;m<p.length;m++){var i=t.references[m],g=i.referencedSize,y=i.subsegmentDuration,h=c+g-1,f=c+'-'+h,_=k({baseUrl:a,timescale:d,timeline:s,periodIndex:s,duration:y,sourceDuration:r,indexRange:f})[0];n&&(_.map=n),u.push(_),c+=g}return e.segments=u,e},C=function(e){var t=l(e.reduce(function(e,t){var a=t.attributes.id+(t.attributes.lang||'');if(e[a]){var n;t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[a].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[a].attributes.contentProtection=t.attributes.contentProtection)}else e[a]=t;return e},{}));return t.map(function(e){return e.discontinuityStarts=c(e.segments,'discontinuity'),e})},E=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var a in e){var n=e[a];if(n.sidx){var r=n.sidx.uri+'-'+_(n.sidx.byterange),i=t[r]&&t[r].sidx;n.sidx&&i&&S(n,i,n.sidx.resolvedUri)}}return e},L=function(e){var t=e.attributes,a=e.segments,n=e.sidx,r={attributes:(i={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},i['PROGRAM-ID']=1,i),uri:'',endList:'static'===(t.type||'static'),timeline:t.periodIndex,resolvedUri:'',targetDuration:t.duration,segments:a,mediaSequence:a.length?a[0].number:1},i;return t.contentProtection&&(r.contentProtection=t.contentProtection),n&&(r.sidx=n),r},w=function(e){var t=e.attributes,a=e.segments,n;return'undefined'==typeof a&&(a=[{uri:t.baseUrl,timeline:t.periodIndex,resolvedUri:t.baseUrl||'',duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration),{attributes:(n={NAME:t.id,BANDWIDTH:t.bandwidth},n['PROGRAM-ID']=1,n),uri:'',endList:'static'===(t.type||'static'),timeline:t.periodIndex,resolvedUri:t.baseUrl||'',targetDuration:t.duration,segments:a,mediaSequence:a.length?a[0].number:1}},x=function(e,t){void 0===t&&(t={});var a=e.reduce(function(e,a){var r=a.attributes.role&&a.attributes.role.value||'',i=a.attributes.lang||'',s='main';if(i){var o=r?' ('+r+')':'';s=''+a.attributes.lang+o}return e[s]&&e[s].playlists[0].attributes.BANDWIDTH>a.attributes.bandwidth?e:(e[s]={language:i,autoselect:!0,default:'main'===r,playlists:E([L(a)],t),uri:''},'undefined'==typeof n&&'main'===r&&(n=a,n.default=!0),e)},{}),n;if(!n){var r=Object.keys(a)[0];a[r].default=!0}return a},P=function(e,t){return void 0===t&&(t={}),e.reduce(function(e,a){var n=a.attributes.lang||'text';return e[n]?e:(e[n]={language:n,default:!1,autoselect:!1,playlists:E([w(a)],t),uri:''},e)},{})},I=function(e){var t=e.attributes,a=e.segments,n=e.sidx,r={attributes:(i={NAME:t.id,AUDIO:'audio',SUBTITLES:'subs',RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth},i['PROGRAM-ID']=1,i),uri:'',endList:'static'===(t.type||'static'),timeline:t.periodIndex,resolvedUri:'',targetDuration:t.duration,segments:a,mediaSequence:a.length?a[0].number:1},i;return t.contentProtection&&(r.contentProtection=t.contentProtection),n&&(r.sidx=n),r},M=function(e,t){var a;if(void 0===t&&(t={}),!e.length)return{};var n=e[0].attributes,r=n.sourceDuration,i=n.minimumUpdatePeriod,s=void 0===i?0:i,o=C(e.filter(function(e){var t=e.attributes;return'video/mp4'===t.mimeType||'video'===t.contentType})).map(I),l=C(e.filter(function(e){var t=e.attributes;return'audio/mp4'===t.mimeType||'audio'===t.contentType})),d=e.filter(function(e){var t=e.attributes;return'text/vtt'===t.mimeType||'text'===t.contentType}),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(a={AUDIO:{},VIDEO:{}},a['CLOSED-CAPTIONS']={},a.SUBTITLES={},a),uri:'',duration:r,playlists:E(o,t),minimumUpdatePeriod:1e3*s};return l.length&&(p.mediaGroups.AUDIO.audio=x(l,t)),d.length&&(p.mediaGroups.SUBTITLES.subs=P(d,t)),p},D=function(e,t,a){var n=e.NOW,r=e.clientOffset,i=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,l=e.start,d=void 0===l?0:l,p=e.minimumUpdatePeriod,u=void 0===p?0:p;return Math.ceil((((n+r)/1e3+u-(i+d))*o-t)/a)},O=function(e,t){for(var a=e.type,n=void 0===a?'static':a,r=e.minimumUpdatePeriod,i=void 0===r?0:r,s=e.media,o=void 0===s?'':s,l=e.sourceDuration,d=e.timescale,p=void 0===d?1:d,u=e.startNumber,c=void 0===u?1:u,m=e.periodIndex,g=[],y=-1,h=0;h<t.length;h++){var f=t[h],_=f.d,b=f.r||0,v=f.t||0;0>y&&(y=v),v&&v>y&&(y=v);var T=void 0;if(0>b){var k=h+1;T=k===t.length?'dynamic'===n&&0<i&&0<o.indexOf('$Number$')?D(e,y,_):(l*p-y)/_:(t[k].t-y)/_}else T=b+1;for(var S=c+g.length+T,C=c+g.length;C<S;)g.push({number:C,duration:_/p,time:y,timeline:m}),y+=_,C++}return g},A=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,R=function(e){return function(t,a,n,r){if('$$'===t)return'$';if('undefined'==typeof e[a])return t;var i=''+e[a];return'RepresentationID'===a?i:(r=n?parseInt(r,10):1,i.length>=r?i:''+Array(r-i.length+1).join('0')+i)}},N=function(e,t){return e.replace(A,R(t))},U=function(e,t){return e.duration||t?e.duration?T(e):O(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]},B=function(e,t){var a={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,r=void 0===n?{sourceURL:'',range:''}:n,i=f({baseUrl:e.baseUrl,source:N(r.sourceURL,a),range:r.range}),s=U(e,t);return s.map(function(t){a.Number=t.number,a.Time=t.time;var n=N(e.media||'',a);return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:h(e.baseUrl||'',n),map:i,number:t.number}})},Y=function(e,t){var a=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=f({baseUrl:a,source:r.sourceURL,range:r.range}),s=f({baseUrl:a,source:t.media,range:t.mediaRange});return s.map=i,s},F=function(e,t){var a=e.duration,n=e.segmentUrls,r=void 0===n?[]:n;if(!a&&!t||a&&t)throw new Error(m.SEGMENT_TIME_UNSPECIFIED);var i=r.map(function(t){return Y(e,t)}),s;a&&(s=T(e)),t&&(s=O(e,t));var o=s.map(function(e,t){if(i[t]){var a=i[t];return a.timeline=e.timeline,a.duration=e.duration,a.number=e.number,a}}).filter(function(e){return e});return o},j=function(e){var t=e.attributes,a=e.segmentInfo,n,r;a.template?(r=B,n=o(t,a.template)):a.base?(r=k,n=o(t,a.base)):a.list&&(r=F,n=o(t,a.list));var i={attributes:t};if(!r)return i;var s=r(n,a.timeline);if(n.duration){var l=n,d=l.duration,p=l.timescale,u=void 0===p?1:p;n.duration=d/u}else n.duration=s.length?s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):0;return i.attributes=n,i.segments=s,a.base&&n.indexRange&&(i.sidx=s[0],i.segments=[]),i},H=function(e){return e.map(j)},V=function(e,t){return u(e.childNodes).filter(function(e){var a=e.tagName;return a===t})},z=function(e){return e.textContent.trim()},q=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,a=t.exec(e);if(!a)return 0;var n=a.slice(1),r=n[0],i=n[1],s=n[2],o=n[3],l=n[4],d=n[5];return parseFloat(r||0)*31536000+parseFloat(i||0)*2592000+parseFloat(s||0)*86400+parseFloat(o||0)*3600+parseFloat(l||0)*60+parseFloat(d||0)},W=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+='Z'),Date.parse(e)},G={mediaPresentationDuration:function(e){return q(e)},availabilityStartTime:function(e){return W(e)/1e3},minimumUpdatePeriod:function(e){return q(e)},timeShiftBufferDepth:function(e){return q(e)},start:function(e){return q(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?q(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},K=function(e){return e&&e.attributes?u(e.attributes).reduce(function(t,a){var e=G[a.name]||G.DEFAULT;return t[a.name]=e(a.value),t},{}):{}},X={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":'org.w3.clearkey',"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":'com.widevine.alpha',"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":'com.microsoft.playready',"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":'com.adobe.primetime'},J=function(e,t){return t.length?p(e.map(function(e){return t.map(function(t){return h(e,z(t))})})):e},$=function(e){var t=V(e,'SegmentTemplate')[0],a=V(e,'SegmentList')[0],n=a&&V(a,'SegmentURL').map(function(e){return o({tag:'SegmentURL'},K(e))}),r=V(e,'SegmentBase')[0],i=a||t,s=i&&V(i,'SegmentTimeline')[0],l=a||r||t,d=l&&V(l,'Initialization')[0],p=t&&K(t);p&&d?p.initialization=d&&K(d):p&&p.initialization&&(p.initialization={sourceURL:p.initialization});var u={template:p,timeline:s&&V(s,'S').map(function(e){return K(e)}),list:a&&o(K(a),{segmentUrls:n,initialization:K(d)}),base:r&&o(K(r),{initialization:K(d)})};return Object.keys(u).forEach(function(e){u[e]||delete u[e]}),u},Q=function(e,t,a){return function(n){var r=V(n,'BaseURL'),i=J(t,r),s=o(e,K(n)),l=$(n);return i.map(function(e){return{segmentInfo:o(a,l),attributes:o(s,{baseUrl:e})}})}},Z=function(e){return e.reduce(function(e,t){var a=K(t),r=X[a.schemeIdUri];if(r){e[r]={attributes:a};var i=V(t,'cenc:pssh')[0];if(i){var s=z(i),o=s&&n(s);e[r].pssh=o}}return e},{})},ee=function(e,t,a){return function(n){var r=K(n),i=J(t,V(n,'BaseURL')),s=V(n,'Role')[0],l={role:K(s)},d=o(e,r,l),u=Z(V(n,'ContentProtection'));Object.keys(u).length&&(d=o(d,{contentProtection:u}));var c=$(n),m=V(n,'Representation'),g=o(a,c);return p(m.map(Q(d,i,g)))}},te=function(e,t){return function(a,n){var r=J(t,V(a,'BaseURL')),i=K(a),l=parseInt(i.id,10),d=s.a.isNaN(l)?n:l,u=o(e,{periodIndex:d}),c=V(a,'AdaptationSet'),m=$(a);return p(c.map(ee(u,r,m)))}},ae=function(e,t){void 0===t&&(t={});var a=t,n=a.manifestUri,r=void 0===n?'':n,i=a.NOW,s=void 0===i?Date.now():i,o=a.clientOffset,l=void 0===o?0:o,d=V(e,'Period');if(!d.length)throw new Error(m.INVALID_NUMBER_OF_PERIOD);var u=K(e),c=J([r],V(e,'BaseURL'));return u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=s,u.clientOffset=l,p(d.map(te(u,c)))},ne=function(e){if(''===e)throw new Error(m.DASH_EMPTY_MANIFEST);var t=new s.a.DOMParser,a=t.parseFromString(e,'application/xml'),n=a&&'MPD'===a.documentElement.tagName?a.documentElement:null;if(!n||n&&0<n.getElementsByTagName('parsererror').length)throw new Error(m.DASH_INVALID_XML);return n},re=function(e){var t=V(e,'UTCTiming')[0];if(!t)return null;var a=K(t);switch(a.schemeIdUri){case'urn:mpeg:dash:utc:http-head:2014':case'urn:mpeg:dash:utc:http-head:2012':a.method='HEAD';break;case'urn:mpeg:dash:utc:http-xsdate:2014':case'urn:mpeg:dash:utc:http-iso:2014':case'urn:mpeg:dash:utc:http-xsdate:2012':case'urn:mpeg:dash:utc:http-iso:2012':a.method='GET';break;case'urn:mpeg:dash:utc:direct:2014':case'urn:mpeg:dash:utc:direct:2012':a.method='DIRECT',a.value=Date.parse(a.value);break;case'urn:mpeg:dash:utc:http-ntp:2014':case'urn:mpeg:dash:utc:ntp:2014':case'urn:mpeg:dash:utc:sntp:2014':default:throw new Error(m.UNSUPPORTED_UTC_TIMING_SCHEME);}return a},ie=function(e,t){return void 0===t&&(t={}),M(H(ae(ne(e),t)),t.sidxMapping)},se=function(e){return re(ne(e))};/*! @name mpd-parser @version 0.8.1 @license Apache-2.0 */}).call(this,a(7))},function(e,t,a){'use strict';function n(e){for(var t=e+'=',a=document.cookie.split(';'),n=0,r;n<a.length;n++){for(r=a[n];' '==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function r(e,t,a){var n=new Date;n.setTime(n.getTime()+1e3*(60*(60*(24*a))));var r='expires='+n.toUTCString();document.cookie=e+'='+t+';'+r+';path=/'}Object.defineProperty(t,'__esModule',{value:!0}),t.getCookie=n,t.setCookie=r,t.eraseCookie=function(e){r(e,'',-1)},t.isCookieAuthorized=function(){r('tc-ck','true',1);var e=n('tc-ck');return'true'===e};var i=a(8),s=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,a){'use strict';function n(){var e=null;if(!(window.XMLHttpRequest||window.ActiveXObject))return alert('Votre navigateur ne supporte pas l\'objet XMLHTTPRequest...'),null;if(window.ActiveXObject)try{e=new ActiveXObject('Msxml2.XMLHTTP')}catch(t){e=new ActiveXObject('Microsoft.XMLHTTP')}else e=new XMLHttpRequest;return e}function r(e){var t=e.getAllResponseHeaders(),a=t.split('\r\n'),n={};return a.forEach(function(e){var t=e.split(': ');0<t[0].length&&(n[t[0]]=t[1])}),n}Object.defineProperty(t,'__esModule',{value:!0}),t.makeJSONp=function(e){return new Promise(function(t,a){var n='_'+Math.round(1e4*Math.random()),r='jsonp_callback_'+n;window[r]=function(e){delete window[r];var a=document.getElementById(n);a.parentNode.removeChild(a),t(e)};var i=e+'&callback='+r;0>e.indexOf('?')&&(i=e+'?callback='+r);var s=document.createElement('script');s.src=i,s.id=n,s.addEventListener('error',a),(document.getElementsByTagName('head')[0]||document.body||document.documentElement).appendChild(s)})},t.default=function(e){return new Promise(function(t,a){var i=n(),s=e.params;s&&(s=Object.keys(s).filter(function(e){return null!==s[e]}).map(function(e){return encodeURIComponent(e)+'='+encodeURIComponent(s[e])}).join('&'));var o=e.url;s&&s.length&&(o=o+'?'+s),i.open(e.method,o);var l=function(e){var t={status:e,statusText:i.statusText};a(t)};i.onload=function(){if(200<=this.status&&300>this.status){var a=i.response;e.hasOwnProperty('json')&&e.json&&(a=JSON.parse(a)),t({response:a,headers:r(i)})}else l(this.status)},i.onerror=function(){e.onerror&&e.onerror(),l(this.status)},e.headers?Object.keys(e.headers).forEach(function(t){i.setRequestHeader(t,e.headers[t])}):i.setRequestHeader('Content-Type','application/x-www-form-urlencoded'),e.hasOwnProperty('body')?i.send(JSON.stringify(e.body)):i.send()})};a(70)},function(e,t,a){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.SkinService=void 0;var r=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=t.SkinService=function(){function e(){n(this,e),this.skin={variables:{}},this.registeredCallbacks=[],this.initialized=!1}return e.prototype.initialize=function(e){var t=this;this.skin={variables:{}},i.default.getSkin(e).then(function(a){var n=a.response;if(n){var r=n.split(/\n/gi);r.map(t.extract).reduce(function(e,t){return null!==t&&e.push(t),e},[]).forEach(function(e){t.skin.variables[e.key]=e.value});var i=Object.keys(t.skin.variables);i.length?t._onReady():t._onReady(new Error(e+' does not expose varibales'))}else t._onReady(new Error(e+' does not expose varibales'))}).catch(function(){t._onReady(new Error(e+' does not exist'))})},e.prototype.getValue=function(e){return this.skin.variables[e]||null},e.prototype.extract=function(e){var t=null,a=e.match(/^([^:]*):(.*)$/);return a&&3===a.length&&(t={key:a[1].trim(),value:a[2].trim().replace(/,+$/,'')}),t},e.prototype.ready=function(){var e=this;return this.initialized?Promise.resolve(this.unsupported):new Promise(function(t,a){e.registeredCallbacks.push({resolve:t,reject:a})})},e.prototype._onReady=function(e){this.initialized=!0,this.registeredCallbacks.forEach(function(t){'undefined'==typeof e?t.resolve():t.reject(e)}),this.registeredCallbacks=[]},e}();t.default=new s},function(e,t,a){'use strict';var n=a(13).parseType,r=function(e){return new Date(1e3*e-20828448e5)},i=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},s=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=[],n,r;for(n=0;n+4<e.length;n+=r){if(r=t.getUint32(n),n+=4,0>=r){a.push('<span style=\'color:red;\'>MALFORMED DATA</span>');continue}switch(31&e[n]){case 1:a.push('slice_layer_without_partitioning_rbsp');break;case 5:a.push('slice_layer_without_partitioning_rbsp_idr');break;case 6:a.push('sei_rbsp');break;case 7:a.push('seq_parameter_set_rbsp');break;case 8:a.push('pic_parameter_set_rbsp');break;case 9:a.push('access_unit_delimiter_rbsp');break;default:a.push(31&'UNKNOWN NAL - '+e[n]);}}return a},o={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:l(e.subarray(78,e.byteLength))}},avcC:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},n=31&e[5],r,s,o,l;for(o=6,l=0;l<n;l++)s=t.getUint16(o),o+=2,a.sps.push(new Uint8Array(e.subarray(o,o+s))),o+=s;for(r=e[o],o++,l=0;l<r;l++)s=t.getUint16(o),o+=2,a.pps.push(new Uint8Array(e.subarray(o,o+s))),o+=s;return a},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:63&e[12]>>>2,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:31&e[26]>>>3,samplingFrequencyIndex:(7&e[26])<<1|1&e[27]>>>7,channelConfiguration:15&e[27]>>>3}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={majorBrand:n(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)a.compatibleBrands.push(n(e.subarray(r,r+4))),r+=4;return a},dinf:function(e){return{boxes:l(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:l(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:n(e.subarray(8,12)),name:''},r=8;for(r=24;r<e.byteLength;r++){if(0===e[r]){r++;break}a.name+=String.fromCharCode(e[r])}return a.name=decodeURIComponent(escape(a.name)),a},mdat:function(e){return{byteLength:e.byteLength,nals:s(e)}},mdhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:''},i;return 1===n.version?(a+=4,n.creationTime=r(t.getUint32(a)),a+=8,n.modificationTime=r(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=8,n.duration=t.getUint32(a)):(n.creationTime=r(t.getUint32(a)),a+=4,n.modificationTime=r(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=4,n.duration=t.getUint32(a)),a+=4,i=t.getUint16(a),n.language+=String.fromCharCode((i>>10)+96),n.language+=String.fromCharCode(((992&i)>>5)+96),n.language+=String.fromCharCode((31&i)+96),n},mdia:function(e){return{boxes:l(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:l(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(a.streamDescriptor=l(e.subarray(28))[0]),a},moof:function(e){return{boxes:l(e)}},moov:function(e){return{boxes:l(e)}},mvex:function(e){return{boxes:l(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(a+=4,n.creationTime=r(t.getUint32(a)),a+=8,n.modificationTime=r(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=8,n.duration=t.getUint32(a)):(n.creationTime=r(t.getUint32(a)),a+=4,n.modificationTime=r(t.getUint32(a)),a+=4,n.timescale=t.getUint32(a),a+=4,n.duration=t.getUint32(a)),a+=4,n.rate=t.getUint16(a)+t.getUint16(a+2)/16,a+=4,n.volume=t.getUint8(a)+t.getUint8(a+1)/8,a+=2,a+=2,a+=8,n.matrix=new Uint32Array(e.subarray(a,a+36)),a+=36,a+=24,n.nextTrackId=t.getUint32(a),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},a;for(a=4;a<e.byteLength;a++)t.samples.push({dependsOn:(48&e[a])>>4,isDependedOn:(12&e[a])>>2,hasRedundancy:3&e[a]});return t},sidx:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},n=t.getUint16(22),r;for(r=24;n;r+=12,n--)a.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return a},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:l(e)}},stco:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},n=t.getUint32(4),r;for(r=8;n;r+=4,n--)a.chunkOffsets.push(t.getUint32(r));return a},stsc:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=t.getUint32(4),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]},r;for(r=8;a;r+=12,a--)n.sampleToChunks.push({firstChunk:t.getUint32(r),samplesPerChunk:t.getUint32(r+4),sampleDescriptionIndex:t.getUint32(r+8)});return n},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:l(e.subarray(8))}},stsz:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:t.getUint32(4),entries:[]},n;for(n=12;n<e.byteLength;n+=4)a.entries.push(t.getUint32(n));return a},stts:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},n=t.getUint32(4),r;for(r=8;n;r+=8,n--)a.timeToSamples.push({sampleCount:t.getUint32(r),sampleDelta:t.getUint32(r+4)});return a},styp:function(e){return o.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},n=1&a.flags[2],r=2&a.flags[2],s=8&a.flags[2],o=16&a.flags[2],l=32&a.flags[2],d=65536&a.flags[0],p=131072&a.flags[0],u;return u=8,n&&(u+=4,a.baseDataOffset=t.getUint32(12),u+=4),r&&(a.sampleDescriptionIndex=t.getUint32(u),u+=4),s&&(a.defaultSampleDuration=t.getUint32(u),u+=4),o&&(a.defaultSampleSize=t.getUint32(u),u+=4),l&&(a.defaultSampleFlags=t.getUint32(u)),d&&(a.durationIsEmpty=!0),!n&&p&&(a.baseDataOffsetIsMoof=!0),a},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(a+=4,n.creationTime=r(t.getUint32(a)),a+=8,n.modificationTime=r(t.getUint32(a)),a+=4,n.trackId=t.getUint32(a),a+=4,a+=8,n.duration=t.getUint32(a)):(n.creationTime=r(t.getUint32(a)),a+=4,n.modificationTime=r(t.getUint32(a)),a+=4,n.trackId=t.getUint32(a),a+=4,a+=4,n.duration=t.getUint32(a)),a+=4,a+=8,n.layer=t.getUint16(a),a+=2,n.alternateGroup=t.getUint16(a),a+=2,n.volume=t.getUint8(a)+t.getUint8(a+1)/8,a+=2,a+=2,n.matrix=new Uint32Array(e.subarray(a,a+36)),a+=36,n.width=t.getUint16(a)+t.getUint16(a+2)/16,a+=4,n.height=t.getUint16(a)+t.getUint16(a+2)/16,n},traf:function(e){return{boxes:l(e)}},trak:function(e){return{boxes:l(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},a=new DataView(e.buffer,e.byteOffset,e.byteLength),n=1&t.flags[2],r=4&t.flags[2],s=1&t.flags[1],o=2&t.flags[1],l=4&t.flags[1],d=8&t.flags[1],p=a.getUint32(4),u=8,c;for(n&&(t.dataOffset=a.getInt32(u),u+=4),r&&p&&(c={flags:i(e.subarray(u,u+4))},u+=4,s&&(c.duration=a.getUint32(u),u+=4),o&&(c.size=a.getUint32(u),u+=4),d&&(c.compositionTimeOffset=a.getUint32(u),u+=4),t.samples.push(c),p--);p--;)c={},s&&(c.duration=a.getUint32(u),u+=4),o&&(c.size=a.getUint32(u),u+=4),l&&(c.flags=i(e.subarray(u,u+4)),u+=4),d&&(c.compositionTimeOffset=a.getUint32(u),u+=4),t.samples.push(c);return t},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},l,d;l=function(e){for(var t=0,a=[],r=new ArrayBuffer(e.length),i=new Uint8Array(r),s=0,l,d,p,u,c;s<e.length;++s)i[s]=e[s];for(l=new DataView(r);t<e.byteLength;)d=l.getUint32(t),p=n(e.subarray(t+4,t+8)),u=1<d?t+d:e.byteLength,c=(o[p]||function(e){return{data:e}})(e.subarray(t+8,u)),c.size=d,c.type=p,a.push(c),t=u;return a},d=function(e,t){var a;return t=t||0,a=Array(2*t+1).join(' '),e.map(function(e){return a+e.type+'\n'+Object.keys(e).filter(function(e){return'type'!==e&&'boxes'!==e}).map(function(t){var n=a+'  '+t+': ',r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var i=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(e){return' '+('00'+e.toString(16)).slice(-2)}).join('').match(/.{1,24}/g);return i?1===i.length?n+'<'+i.join('').slice(1)+'>':n+'<\n'+i.map(function(e){return a+'  '+e}).join('\n')+'\n'+a+'  >':n+'<>'}return n+JSON.stringify(r,null,2).split('\n').map(function(e,t){return 0===t?e:a+'  '+e}).join('\n')}).join('\n')+(e.boxes?'\n'+d(e.boxes,t+1):'')}).join('\n')},e.exports={inspect:l,textify:d,parseTfdt:o.tfdt,parseHdlr:o.hdlr,parseTfhd:o.tfhd,parseTrun:o.trun,parseSidx:o.sidx}},function(e,t,a){'use strict';function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function r(e,t,a){var n=e;return d(t)?(a=t,'string'==typeof e&&(n={uri:e})):n=u(t,{uri:e}),n.callback=a,n}function i(e,t,a){return t=r(e,t,a),s(t)}function s(e){function t(){4===u.readyState&&setTimeout(s,0)}function a(){var e;if(e=u.response?u.response:u.responseText||o(u),f)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(T),e instanceof Error||(e=new Error(''+(e||'Unknown XMLHttpRequest Error'))),e.statusCode=0,d(e,_)}function s(){if(!v){var t;clearTimeout(T),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var n=_,r=null;return 0===t?r=new Error('Internal XMLHttpRequest Error'):(n={body:a(),statusCode:t,method:m,headers:{},url:c,rawRequest:u},u.getAllResponseHeaders&&(n.headers=p(u.getAllResponseHeaders()))),d(r,n,n.body)}}if('undefined'==typeof e.callback)throw new Error('callback argument missing');var l=!1,d=function(t,a,n){l||(l=!0,e.callback(t,a,n))},u=e.xhr||null;u||(e.cors||e.useXDR?u=new i.XDomainRequest:u=new i.XMLHttpRequest);var c=u.url=e.uri||e.url,m=u.method=e.method||'GET',g=e.body||e.data,y=u.headers=e.headers||{},h=!!e.sync,f=!1,_={body:void 0,headers:{},statusCode:0,method:m,url:c,rawRequest:u},b,v,T;if('json'in e&&!1!==e.json&&(f=!0,y.accept||y.Accept||(y.Accept='application/json'),'GET'!==m&&'HEAD'!==m&&(y['content-type']||y['Content-Type']||(y['Content-Type']='application/json'),g=JSON.stringify(!0===e.json?g:e.json))),u.onreadystatechange=t,u.onload=s,u.onerror=r,u.onprogress=function(){},u.onabort=function(){v=!0},u.ontimeout=r,u.open(m,c,!h,e.username,e.password),h||(u.withCredentials=!!e.withCredentials),!h&&0<e.timeout&&(T=setTimeout(function(){if(!v){v=!0,u.abort('timeout');var t=new Error('XMLHttpRequest timeout');t.code='ETIMEDOUT',r(t)}},e.timeout)),u.setRequestHeader)for(b in y)y.hasOwnProperty(b)&&u.setRequestHeader(b,y[b]);else if(e.headers&&!n(e.headers))throw new Error('Headers cannot be set on an XDomainRequest object');return'responseType'in e&&(u.responseType=e.responseType),'beforeSend'in e&&'function'==typeof e.beforeSend&&e.beforeSend(u),u.send(g||null),u}function o(e){if('document'===e.responseType)return e.responseXML;var t=e.responseXML&&'parsererror'===e.responseXML.documentElement.nodeName;return''!==e.responseType||t?null:e.responseXML}var l=a(0),d=a(93),p=a(94),u=a(95);e.exports=i,i.XMLHttpRequest=l.XMLHttpRequest||function(){},i.XDomainRequest='withCredentials'in new i.XMLHttpRequest?i.XMLHttpRequest:l.XDomainRequest,function(e,t){for(var a=0;a<e.length;a++)t(e[a])}(['get','put','post','patch','head','delete'],function(e){i['delete'===e?'del':e]=function(t,a,n){return a=r(t,a,n),a.method=e.toUpperCase(),s(a)}})},function(e,t,a){var n=a(0),r=e.exports={WebVTT:a(96),VTTCue:a(97),VTTRegion:a(98)};n.vttjs=r,n.WebVTT=r.WebVTT;var i=r.VTTCue,s=r.VTTRegion,o=n.VTTCue,l=n.VTTRegion;r.shim=function(){n.VTTCue=i,n.VTTRegion=s},r.restore=function(){n.VTTCue=o,n.VTTRegion=l},n.VTTCue||r.shim()},function(e){(function(){var t=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,i={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),t=t.trim(),!t){if(!n.alwaysNormalize)return e;var r=i.parseURL(e);if(!r)throw new Error('Error trying to parse base URL.');return r.path=i.normalizePath(r.path),i.buildURLFromParts(r)}var s=i.parseURL(t);if(!s)throw new Error('Error trying to parse relative URL.');if(s.scheme)return n.alwaysNormalize?(s.path=i.normalizePath(s.path),i.buildURLFromParts(s)):t;var o=i.parseURL(e);if(!o)throw new Error('Error trying to parse base URL.');if(!o.netLoc&&o.path&&'/'!==o.path[0]){var l=a.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path='/');var d={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(d.netLoc=o.netLoc,'/'!==s.path[0]))if(!s.path)d.path=o.path,s.params||(d.params=o.params,!s.query&&(d.query=o.query));else{var p=o.path,u=p.substring(0,p.lastIndexOf('/')+1)+s.path;d.path=i.normalizePath(u)}return null===d.path&&(d.path=n.alwaysNormalize?i.normalizePath(s.path):s.path),i.buildURLFromParts(d)},parseURL:function(e){var a=t.exec(e);return a?{scheme:a[1]||'',netLoc:a[2]||'',path:a[3]||'',params:a[4]||'',query:a[5]||'',fragment:a[6]||''}:null},normalizePath:function(e){for(e=e.split('').reverse().join('').replace(n,'');e.length!==(e=e.replace(r,'')).length;);return e.split('').reverse().join('')},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=i})(this)},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default=function(e){var t={airport:'plane',bar:'glass',cafe:'coffee',lodging:'bed',museum:'university',night_club:'ticket',park:'leaf',restaurant:'cutlery',shopping_mall:'shopping-bag',store:'shopping-bag',zoo:'paw',food:'cutlery'};return Array.isArray(e)?e.filter(function(e){return t.hasOwnProperty(e)}).map(function(e){return t[e]}):[]}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.getDefaultPOIConfiguration=function(){return{template_type:0,google_place_photos:!0,cta_label:'',cta_url:'',zoomLevel:5,inline:!1}},t.getDefaultMarkerPluginConfiguration=function(){return{markerStyle:{width:'7px',"border-radius":'30%',"background-color":'red'},markerTip:{display:!0,text:function(e){return'Break: '+e.text},time:function(e){return e.time}},breakOverlay:{display:!1,displayTime:3,text:function(e){return'Break overlay: '+e.overlayText},style:{width:'100%',height:'20%',"background-color":'rgba(0,0,0,0.7)',color:'white',"font-size":'17px'}},onMarkerClick:function(){},onMarkerReached:function(){},markers:[]}}},function(e,t,a){'use strict';function n(e){var t=(0,s.getKey)(e,'tc-env');return t=t?'-'+t:'','tc-cookie'+t}function r(){var e=o.Store.NONE;return e=(0,i.isCookieAuthorized)()?o.Store.COOKIE:(0,s.isLocalStorageAuthorized)()?o.Store.LOCAL_STORAGE:(0,s.isSessionStorageAuthorized)()?o.Store.SESSION_STORAGE:o.Store.NONE,e}Object.defineProperty(t,'__esModule',{value:!0}),t.getTravelCastKeyName=n,t.getAuthorizedStore=r,t.getToken=function(){return(0,s.getKey)(r(),n(r()))};var i=a(23),s=a(16),o=a(17)},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default={NONE:'0',USER:'1',ADMIN:'2'}},function(e,t,a){var n=a(3);n.tag2('carousel','<div id="photos-carousel" class="photos-container"> <div class="carousel slide"> <div class="carousel-inner" role="listbox"> <div each="{ref,index in opts.photos}" class="{item:true, active:index === current, \u2057slide-img\u2057:true}" riot-style="background-image:url(\'{ref}\');"> </div> <div class="no-picture" if="{!opts.photos || !opts.photos.length}"> <img src="https://storage.googleapis.com/travelcast/images/no-picture.svg"> </div> </div> </div> <ol class="carousel-indicators" if="{canNavigate()}"> <li each="{ref,index in opts.photos}" class="{active:index === current, indicator:true}" onclick="{show.bind(this, index)}"></li> </ol> </div>','','',function(e){'use strict';var t=this,n=a(6),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(n);a(9),this.mixin('versioned'),this.currentID=null,this.intervalID=null,this.current=0,this.on('mount',function(){t.addInterval()}),this.on('update',function(){var a=t.getVersion();e.marker&&a!==t.currentID&&(t.current=0,t.currentID=a,t.clearInterval(),t.addInterval())}),this.on('unmount',function(){t.clearInterval()}),this.addInterval=function(){if(!e.editable){var a=e.interval||1e4;t.intervalID=window.setInterval(t.onTick.bind(t),a)}},this.clearInterval=function(){t.intervalID&&window.clearInterval(t.intervalID)},this.onTick=function(){e.photos&&1<e.photos.length&&t.show((t.current+1)%e.photos.length)},this.canNavigate=function(){return e.photos&&1<e.photos.length},this.show=function(e){t.canNavigate()&&(t.current=e,t.update())}}),!1},function(e,t,a){var n=a(3);n.tag2('hotel','<div class="vertical-wrapper"> <div class="from"> <localize>template.label.bestoffer</localize> </div> <div class="price"> <a class="hyperlink" href="{parent.getCTALink()}" target="_blank" if="{!loading}"> <span if="{hotel.amountAfterTaxes}" class="hotel-amount"> <raw content="{hotel.amountAfterTaxes}"></raw> </span> <span if="{!hotel.amountAfterTaxes}" class="not-found"> <localize>template.label.pricenotfound</localize> </span> </a> <loading class="loading" if="{loading}"></loading> </div> <div class="subtitle"> <localize if="{!opts.editable}">template.label.pernight</localize> <localize if="{opts.editable}">template.label.livedata</localize> </div> <div if="{user.data.initialized && !user.data.geolocation && !opts.editable}"> <div class="localisation-error"> <localize>template.error.localisation</localize> </div> </div> </div>','','',function(e){'use strict';function t(e){return e&&e.__esModule?e:{default:e}}var n=this,r=a(4),i=t(r),s=a(14),o=t(s);a(20),a(21),a(9),this.mixin('versioned'),this.loading=!0,this.user=o.default,this.date=moment().endOf('month').add(1,'d'),this.currentID=null,this.details=null,this.hotel={amountAfterTaxes:0},this.on('mount',function(){return n.fakeData()}),this.on('update',function(){if(!e.editable){var t=n.getVersion();e.marker&&t!==n.currentID&&(n.currentID=t,n.user.ready(n.getData.bind(n)))}else n.loading=!1}),this.fakeData=function(){e.marker.deeplinks=e.marker.deeplinks||{},e.marker.deeplinks.hotel='javascript:void(0)'},this.getData=function(){var t,a,r,s,l;return regeneratorRuntime.async(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,regeneratorRuntime.awrap(i.default.getPOI(e.marker.poi_id));case 3:if(n.details=d.sent,e.marker.deeplinks=e.marker.deeplinks||{},e.marker.deeplinks.hotel=n.generateHotelDeeplink(),t=n.date.startOf('month').format('YYYY-MM-DD'),a=n.date.startOf('month').add(1,'day').format('YYYY-MM-DD'),r=o.default.data.currencyCode,!e.cfg){d.next=23;break}if('undefined'==typeof e.cfg.property_code||''==e.cfg.property_code){d.next=17;break}return d.next=13,regeneratorRuntime.awrap(i.default.getHotelsByID(e.cfg.property_code,t,a));case 13:s=d.sent,n.onHotelReceived(s.response),d.next=23;break;case 17:if(l={converted:e.cfg.value},e.cfg.currency.toLowerCase()===o.default.data.currencyCode.toLowerCase()){d.next=22;break}return d.next=21,regeneratorRuntime.awrap(i.default.convertCurrency(e.cfg.currency,o.default.data.currencyCode,e.cfg.value));case 21:l=d.sent;case 22:n.onConvertionReceived(l);case 23:d.next=28;break;case 25:d.prev=25,d.t0=d['catch'](0),n.loading=!1;case 28:return d.prev=28,n.update(),d.finish(28);case 31:case'end':return d.stop();}},null,n,[[0,25,28,31]])},this.onConvertionReceived=function(e){n.loading=!1;var t=parseInt(e.converted,10);isNaN(t)||(n.hotel={amountAfterTaxes:n.formatPrice(t)})},this.onHotelReceived=function(e){n.loading=!1,n.hotel=e,n.hotel.amountAfterTaxes=n.formatPrice(n.hotel.amountAfterTaxes)},this.generateHotelDeeplink=function(){var e='';if(null!==n.details){var t=n.date.startOf('month').format('YYYY-MM-DD'),a=n.date.startOf('month').add(1,'d').format('YYYY-MM-DD'),r=n.details.city_code||n.details.city||n.details.city_name;e='https://www.skyscanner.com/hotels/?sd='+t+'&ed='+a+'&na=1&nr=1&s-f_iplace='+r}return e},this.formatPrice=function(e){return e?i18n.localise('format.currency',{value:Math.round(e),symbol:o.default.data.currencySymbol}):o.default.data.currencySymbol}}),!1},function(e,t,a){var n=a(3);n.tag2('flight','<div class="vertical-wrapper"> <div class="from"> <localize>template.label.roundtrip_from</localize> </div> <div class="price"> <a href="{parent.getCTALink()}" target="_blank" class="hyperlink" if="{!loading}"> <span if="{opts.marker.flight_amount}" class="flight-amount"> <raw content="{opts.marker.flight_amount}"></raw> </span> <span if="{!opts.marker.flight_amount}" class="not-found"> <localize>template.label.pricenotfound</localize> </span> </a> <loading if="{loading}"></loading> </div> <div class="subtitle" if="{(user.data.initialized && user.data.geolocation) || opts.editable}"> <span if="{!opts.editable}"> {getUserCity()} <localize>template.label.to</localize> {getFormattedItinerary()} </span> <localize if="{opts.editable}">template.label.livedata</localize> </div> <div if="{user.data.initialized && !user.data.geolocation && !opts.editable}"> <div class="localisation-error"> <localize>template.error.localisation</localize> </div> </div> </div>','','',function(e){'use strict';function t(e){return e&&e.__esModule?e:{default:e}}var n=this,r=a(4),i=t(r),s=a(14),o=t(s);a(20),a(21),a(9),this.mixin('versioned'),this.user=o.default,this.loading=!0,this.currentID=null,this.date=moment().endOf('month').add(1,'d'),this.monthTag=this.date.format(i18n.localise('YYYY-MM')),this.details=null,this.airportDetails=null,this.on('mount',function(){return n.fakeData()}),this.on('update',function(){if(!e.editable){var t=n.getVersion();e.marker&&t!==n.currentID&&(n.currentID=t,n.loading=!0,n.user.ready(n.getData.bind(n)))}else n.loading=!1}),this.getUserCity=function(){return n.user.data.city||'&mdash;'},this.getFormattedItinerary=function(){var e='-',t='-';return n.details&&(e=n.airportDetails?n.airportDetails.city_name:'-',t=n.airportDetails?n.airportDetails.airport:'-'),e+'('+t+')'},this.fakeData=function(){e.marker.flight_amount=i18n.localise('format.currency',{value:'---',symbol:n.user.data.currencySymbol}),e.marker.deeplinks=e.marker.deeplinks||{},e.marker.deeplinks.flight='javascript:void(0)'},this.getData=function(){var t,a,r,s;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,regeneratorRuntime.awrap(i.default.getPlace(e.marker.place_id));case 3:if(n.details=o.sent,t=n.date.format('YYYY-MM'),!(e.marker&&n.details&&n.details.geometry)){o.next=22;break}return o.next=8,regeneratorRuntime.awrap(i.default.getAirportDetailsByLocation(n.details.geometry.location));case 8:if(a=o.sent,!a.length){o.next=20;break}return n.airportDetails=a[0],r={},e.marker.poi_id&&(r.poi_id=e.marker.poi_id),e.marker.video_id&&(r.video_id=e.marker.video_id),o.next=16,regeneratorRuntime.awrap(i.default.getFares(n.user.data.airportCode,n.airportDetails.airport,t,r));case 16:s=o.sent,n.onFlightsRecieved(s),o.next=22;break;case 20:n.airportDetails='',n.onFlightsRecievedError();case 22:o.next=28;break;case 24:o.prev=24,o.t0=o['catch'](0),console.warn('Unable to get place',e.marker.place_id),n.onFlightsRecievedError();case 28:return o.prev=28,n.update(),o.finish(28);case 31:case'end':return o.stop();}},null,n,[[0,24,28,31]])},this.onFlightsRecieved=function(t){t?(t=t.filter(function(e){return e.amount=n.formatPrice(e.amount),e}),n.origin=n.user.data.airportCode,n.destination=n.details.airport_code,n.airportCity=n.details.city,n.flights=t,n.updateMarker(e.marker)):n.flights=null,n.update(),n.loading=!1},this.onFlightsRecievedError=function(){n.loading=!1,n.opts.marker.flight_amount=0},this.updateMarker=function(e){if(n.flights&&n.flights.filter){var t=n.flights.filter(function(e){return moment(e.depdate,'YYYY-MM-DD').format('YYYY-MM')===n.monthTag});if(0<t.length){e.flight_amount=t[0].amount,e.deeplinks=e.deeplinks||{};var a=moment().endOf('month').add(1,'d'),r=a.startOf('month').format('YYMMDD'),i=a.endOf('month').format('YYMMDD');e.deeplinks.flight=void 0!==t[0].deeplink&&''!==t[0].deeplink?e.deeplink=t[0].deeplink:'https://www.skyscanner.com/transport/vols/'+n.user.data.airportCode+'/'+n.airportDetails.airport+'/'+r+'/'+i+'/'}}},this.formatPrice=function(e){return e?i18n.localise('format.currency',{value:Math.round(e),symbol:n.user.data.currencySymbol}):n.user.data.currencySymbol}}),!1},function(e,t,a){var n=a(3);n.tag2('additional-info','<div class="vertical-wrapper"> <div class="box "> <i class="fa fa-heart" aria-hidden="true"></i> <small> <localize>template.label.rating</localize> </small> <span class="rating" if="{opts.marker && details}"> <i each="{ref in stars}" class="{fa:true, \u2057fa-star\u2057:isPlain(ref), \u2057fa-star-o\u2057:isEmpty(ref), \u2057fa-star-half-o\u2057:isHalf(ref)}"></i> <span class="value">{details.rating}/5</span> </span> </div> <div class="box"> <i class="fa fa-phone" aria-hidden="true"></i> <small> <localize>template.label.contactinfo</localize> </small> <a href="{\u2057tel:\u2057+details.international_phone_number}" class="phone hyperlink " if="{opts.marker && details && details.international_phone_number}"> {details.international_phone_number} </a> </div> </div>','','',function(e){'use strict';var t=this,n=a(4),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(9),this.mixin('versioned'),this.stars=[0,1,2,3,4],this.details=null,this.currentID=null,this.loading=!0,this.on('update',function(){var a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.getVersion(),!(e.marker&&a!==t.currentID)){n.next=16;break}return t.currentID=a,n.prev=3,n.next=6,regeneratorRuntime.awrap(r.default.getPlace(e.marker.place_id));case 6:t.details=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n['catch'](3),console.warn('Unable to get place',e.marker.place_id);case 12:return n.prev=12,t.loading=!1,t.update(),n.finish(12);case 16:case'end':return n.stop();}},null,t,[[3,9,12,16]])}),this.isPlain=function(a){return e.marker&&t.details&&1<t.details.rating-a},this.isHalf=function(a){return e.marker&&t.details&&0<t.details.rating-a&&1>t.details.rating-a},this.isEmpty=function(a){return!e.marker||!t.details||0>t.details.rating-a}}),!1},function(e,t,a){var n=a(3);n.tag2('tour','<div class="vertical-wrapper"> <div class="from"> <localize>template.label.bestoffer</localize> </div> <div class="price"> <a class="hyperlink" href="{parent.getCTALink()}" target="_blank" if="{!loading}"> <span if="{amount}" class="tour-amount"> <raw content="{amount}"></raw> </span> <span if="{!amount}" class="not-found"> <localize>template.label.pricenotfound</localize> </span> </a> <loading class="loading" if="{loading}"></loading> </div> <div class="subtitle"> <localize if="{opts.editable}">template.label.livedata</localize> </div> <div if="{user.data.initialized && !user.data.geolocation && !opts.editable}"> <div class="localisation-error"> <localize>template.error.localisation</localize> </div> </div> </div>','','',function(e){'use strict';function t(e){return e&&e.__esModule?e:{default:e}}var n=this,r=a(4),i=t(r),s=a(14),o=t(s);a(20),a(21),a(9),this.mixin('versioned'),this.user=o.default,this.loading=!0,this.currentID=null,this.amount=0,this.on('update',function(){if(!e.editable){var t=n.getVersion();e.marker&&t!==n.currentID&&(n.currentID=t,n.loading=!0,n.user.ready(n.getData.bind(n)))}else n.loading=!1}),this.getData=function(){var t,a;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=o.default.data.currencyCode,!e.cfg){r.next=9;break}if(a={converted:e.cfg.value},e.cfg.currency.toLowerCase()===o.default.data.currencyCode.toLowerCase()){r.next=8;break}return r.next=7,regeneratorRuntime.awrap(i.default.convertCurrency(e.cfg.currency,o.default.data.currencyCode,e.cfg.value));case 7:a=r.sent;case 8:n.onConvertionReceived(a);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r['catch'](0),n.loading=!1;case 14:return r.prev=14,n.update(),r.finish(14);case 17:case'end':return r.stop();}},null,n,[[0,11,14,17]])},this.onConvertionReceived=function(e){n.loading=!1;var t=parseInt(e.converted,10);isNaN(t)||(n.amount=n.formatPrice(t))},this.formatPrice=function(e){return e?i18n.localise('format.currency',{value:Math.round(e),symbol:o.default.data.currencySymbol}):o.default.data.currencySymbol}}),!1},function(e){e.exports={toUnsigned:function(e){return e>>>0},toHexString:function(e){return('00'+e.toString(16)).slice(-2)}}},function(e){'use strict';var t=4;e.exports={parseSei:function(e){for(var a=0,n={payloadType:-1,payloadSize:0},r=0,i=0;a<e.byteLength&&e[a]!==128;){for(;255===e[a];)r+=255,a++;for(r+=e[a++];255===e[a];)i+=255,a++;if(i+=e[a++],!n.payload&&r===t){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(a,a+i);break}a+=i,r=0,i=0}return n},parseUserData:function(e){return 181===e.payload[0]?49==(e.payload[1]<<8|e.payload[2])?'GA94'===String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?3===e.payload[7]?e.payload.subarray(8,e.payload.length-1):null:null:null:null},parseCaptionPackets:function(e,t){var a=[],n,r,i,s;if(!(64&t[0]))return a;for(r=31&t[0],n=0;n<r;n++)i=3*n,s={type:3&t[i+2],pts:e},4&t[i+2]&&(s.ccData=t[i+3]<<8|t[i+4],a.push(s));return a},discardEmulationPreventionBytes:function(e){for(var t=e.byteLength,a=[],n=1,r,i;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;r=t-a.length,i=new Uint8Array(r);var s=0;for(n=0;n<r;s++,n++)s===a[0]&&(s++,a.shift()),i[n]=e[s];return i},USER_DATA_REGISTERED_ITU_T_T35:t}},function(e){'use strict';var t=function(){this.init=function(){var e={};this.on=function(t,a){e[t]||(e[t]=[]),e[t]=e[t].concat(a)},this.off=function(t,a){var n;return!!e[t]&&(n=e[t].indexOf(a),e[t]=e[t].slice(),e[t].splice(n,1),-1<n)},this.trigger=function(t){var a,n,r,i;if(a=e[t],!!a)if(2===arguments.length)for(r=a.length,n=0;n<r;++n)a[n].call(this,arguments[1]);else{for(i=[],n=arguments.length,n=1;n<arguments.length;++n)i.push(arguments[n]);for(r=a.length,n=0;n<r;++n)a[n].apply(this,i)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on('data',function(t){e.push(t)}),this.on('done',function(t){e.flush(t)}),this.on('partialdone',function(t){e.partialFlush(t)}),this.on('endedtimeline',function(t){e.endTimeline(t)}),this.on('reset',function(t){e.reset(t)}),e},t.prototype.push=function(e){this.trigger('data',e)},t.prototype.flush=function(e){this.trigger('done',e)},t.prototype.partialFlush=function(e){this.trigger('partialdone',e)},t.prototype.endTimeline=function(e){this.trigger('endedtimeline',e)},t.prototype.reset=function(e){this.trigger('reset',e)},e.exports=t},function(e){'use strict';e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},function(e,t,a){var n;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(r,i){'use strict';function s(e,t,a){return setTimeout(u(e,a),t)}function o(e,t,a){return!!Array.isArray(e)&&(l(e,a[t],a),!0)}function l(e,t,a){if(e)if(e.forEach)e.forEach(t,a);else if(void 0!==e.length)for(n=0;n<e.length;)t.call(a,e[n],n,e),n++;else for(var n in e)e.hasOwnProperty(n)&&t.call(a,e[n],n,e)}function d(t,a,n){return function(){var i=new Error('get-stack-trace'),e=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,'').replace(/^\s+at\s+/gm,'').replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@'):'Unknown Stack Trace',s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,'DEPRECATED METHOD: '+a+'\n'+n+' AT \n',e),t.apply(this,arguments)}}function p(e,t,a){var n=t.prototype,r;r=e.prototype=Object.create(n),r.constructor=e,r._super=n,a&&_e(r,a)}function u(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==ge?e.apply(t?t[0]||void 0:void 0,t):e}function m(e,t){return e===void 0?t:e}function g(e,t,a){l(_(t),function(t){e.addEventListener(t,a,!1)})}function y(e,t,a){l(_(t),function(t){e.removeEventListener(t,a,!1)})}function h(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function f(e,t){return-1<e.indexOf(t)}function _(e){return e.trim().split(/\s+/g)}function b(e,t,a){if(e.indexOf&&!a)return e.indexOf(t);for(var n=0;n<e.length;){if(a&&e[n][a]==t||!a&&e[n]===t)return n;n++}return-1}function v(e){return Array.prototype.slice.call(e,0)}function T(e,t,a){for(var n=[],r=[],s=0,i;s<e.length;)i=t?e[s][t]:e[s],0>b(r,i)&&n.push(e[s]),r[s]=i,s++;return a&&(t?n=n.sort(function(e,a){return e[t]>a[t]}):n=n.sort()),n}function k(e,t){for(var a=t[0].toUpperCase()+t.slice(1),n=0,r,i;n<ce.length;){if(r=ce[n],i=r?r+a:t,i in e)return i;n++}return void 0}function S(){return Te++}function C(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}function E(e,t){var a=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&a.handler(t)},this.init()}function L(e){var t=e.options.inputClass,a;return a=t?t:Ce?F:Ee?V:Se?q:Y,new a(e,w)}function w(e,t,a){var n=a.pointers.length,r=a.changedPointers.length,i=t&Pe&&0==n-r;a.isFirst=!!i,a.isFinal=!!(t&(Me|De)&&0==n-r),i&&(e.session={}),a.eventType=t,x(e,a),e.emit('hammer.input',a),e.recognize(a),e.session.prevInput=a}function x(e,t){var a=e.session,n=t.pointers,r=n.length;a.firstInput||(a.firstInput=M(t)),1<r&&!a.firstMultiple?a.firstMultiple=M(t):1===r&&(a.firstMultiple=!1);var i=a.firstInput,s=a.firstMultiple,o=s?s.center:i.center,l=t.center=D(n);t.timeStamp=fe(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=N(o,l),t.distance=R(o,l),P(a,t),t.offsetDirection=A(t.deltaX,t.deltaY);var d=O(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=he(d.x)>he(d.y)?d.x:d.y,t.scale=s?B(s.pointers,n):1,t.rotation=s?U(s.pointers,n):0,t.maxPointers=a.prevInput?t.pointers.length>a.prevInput.maxPointers?t.pointers.length:a.prevInput.maxPointers:t.pointers.length,I(a,t);var p=e.element;h(t.srcEvent.target,p)&&(p=t.srcEvent.target),t.target=p}function P(e,t){var a=t.center,n=e.offsetDelta||{},r=e.prevDelta||{},i=e.prevInput||{};(t.eventType===Pe||i.eventType===Me)&&(r=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=e.offsetDelta={x:a.x,y:a.y}),t.deltaX=r.x+(a.x-n.x),t.deltaY=r.y+(a.y-n.y)}function I(e,t){var a=e.lastInterval||t,n=t.timeStamp-a.timeStamp,r,i,s,o;if(t.eventType!=De&&(n>xe||a.velocity===void 0)){var l=t.deltaX-a.deltaX,d=t.deltaY-a.deltaY,p=O(n,l,d);i=p.x,s=p.y,r=he(p.x)>he(p.y)?p.x:p.y,o=A(l,d),e.lastInterval=t}else r=a.velocity,i=a.velocityX,s=a.velocityY,o=a.direction;t.velocity=r,t.velocityX=i,t.velocityY=s,t.direction=o}function M(e){for(var t=[],a=0;a<e.pointers.length;)t[a]={clientX:ye(e.pointers[a].clientX),clientY:ye(e.pointers[a].clientY)},a++;return{timeStamp:fe(),pointers:t,center:D(t),deltaX:e.deltaX,deltaY:e.deltaY}}function D(e){var t=e.length;if(1===t)return{x:ye(e[0].clientX),y:ye(e[0].clientY)};for(var a=0,n=0,r=0;r<t;)a+=e[r].clientX,n+=e[r].clientY,r++;return{x:ye(a/t),y:ye(n/t)}}function O(e,t,a){return{x:t/e||0,y:a/e||0}}function A(e,t){return e===t?Oe:he(e)>=he(t)?0>e?Ae:Re:0>t?Ne:Ue}function R(e,t,a){a||(a=je);var n=t[a[0]]-e[a[0]],r=t[a[1]]-e[a[1]];return Math.sqrt(n*n+r*r)}function N(e,t,a){a||(a=je);var n=t[a[0]]-e[a[0]],r=t[a[1]]-e[a[1]];return 180*Math.atan2(r,n)/Math.PI}function U(e,t){return N(t[1],t[0],He)+N(e[1],e[0],He)}function B(e,t){return R(t[0],t[1],He)/R(e[0],e[1],He)}function Y(){this.evEl=ze,this.evWin=qe,this.pressed=!1,E.apply(this,arguments)}function F(){this.evEl=Ke,this.evWin=Xe,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function j(){this.evTarget=$e,this.evWin=Qe,this.started=!1,E.apply(this,arguments)}function H(e,t){var a=v(e.touches),n=v(e.changedTouches);return t&(Me|De)&&(a=T(a.concat(n),'identifier',!0)),[a,n]}function V(){this.evTarget=et,this.targetIds={},E.apply(this,arguments)}function z(e,t){var a=v(e.touches),n=this.targetIds;if(t&(Pe|Ie)&&1===a.length)return n[a[0].identifier]=!0,[a,a];var r=v(e.changedTouches),s=[],o=this.target,l,i;if(i=a.filter(function(e){return h(e.target,o)}),t===Pe)for(l=0;l<i.length;)n[i[l].identifier]=!0,l++;for(l=0;l<r.length;)n[r[l].identifier]&&s.push(r[l]),t&(Me|De)&&delete n[r[l].identifier],l++;return s.length?[T(i.concat(s),'identifier',!0),s]:void 0}function q(){E.apply(this,arguments);var e=u(this.handler,this);this.touch=new V(this.manager,e),this.mouse=new Y(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function W(e,t){e&Pe?(this.primaryTouch=t.changedPointers[0].identifier,G.call(this,t)):e&(Me|De)&&G.call(this,t)}function G(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var a={x:t.clientX,y:t.clientY};this.lastTouches.push(a);var n=this.lastTouches,r=function(){var e=n.indexOf(a);-1<e&&n.splice(e,1)};setTimeout(r,tt)}}function K(e){for(var a=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],t=Math.abs(a-i.x),s=Math.abs(n-i.y);if(t<=at&&s<=at)return!0}return!1}function X(e,t){this.manager=e,this.set(t)}function J(e){if(f(e,lt))return lt;var t=f(e,dt),a=f(e,pt);return t&&a?lt:t||a?t?dt:pt:f(e,ot)?ot:st}function $(e){this.options=_e({},this.defaults,e||{}),this.id=S(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=ct,this.simultaneous={},this.requireFail=[]}function Q(e){if(e&ft)return'cancel';return e&yt?'end':e&gt?'move':e&mt?'start':''}function Z(e){if(e==Ue)return'down';return e==Ne?'up':e==Ae?'left':e==Re?'right':''}function ee(e,t){var a=t.manager;return a?a.get(e):e}function te(){$.apply(this,arguments)}function ae(){te.apply(this,arguments),this.pX=null,this.pY=null}function ne(){te.apply(this,arguments)}function re(){$.apply(this,arguments),this._timer=null,this._input=null}function ie(){te.apply(this,arguments)}function se(){te.apply(this,arguments)}function oe(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function le(e,t){return t=t||{},t.recognizers=m(t.recognizers,le.defaults.preset),new de(e,t)}function de(e,t){this.options=_e({},le.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=L(this),this.touchAction=new X(this,this.options.touchAction),pe(this,!0),l(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pe(e,t){var a=e.element;if(a.style){var n;l(e.options.cssProps,function(r,i){n=k(a.style,i),t?(e.oldCssProps[n]=a.style[n],a.style[n]=r):a.style[n]=e.oldCssProps[n]||''}),t||(e.oldCssProps={})}}function ue(e,t){var a=i.createEvent('Event');a.initEvent(e,!0,!0),a.gesture=t,t.target.dispatchEvent(a)}var ce=['','webkit','Moz','MS','ms','o'],me=i.createElement('div'),ge='function',ye=Math.round,he=Math.abs,fe=Date.now,_e;_e='function'==typeof Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError('Cannot convert undefined or null to object');for(var t=Object(e),a=1,n;a<arguments.length;a++)if(n=arguments[a],void 0!==n&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);return t};var be=d(function(e,t,a){for(var n=Object.keys(t),r=0;r<n.length;)(!a||a&&void 0===e[n[r]])&&(e[n[r]]=t[n[r]]),r++;return e},'extend','Use `assign`.'),ve=d(function(e,t){return be(e,t,!0)},'merge','Use `assign`.'),Te=1,ke=/mobile|tablet|ip(ad|hone|od)|android/i,Se='ontouchstart'in r,Ce=k(r,'PointerEvent')!==void 0,Ee=Se&&ke.test(navigator.userAgent),Le='touch',we='mouse',xe=25,Pe=1,Ie=2,Me=4,De=8,Oe=1,Ae=2,Re=4,Ne=8,Ue=16,Be=Ae|Re,Ye=Ne|Ue,Fe=Be|Ye,je=['x','y'],He=['clientX','clientY'];E.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(C(this.element),this.evWin,this.domHandler)}};var Ve={mousedown:Pe,mousemove:Ie,mouseup:Me},ze='mousedown',qe='mousemove mouseup';p(Y,E,{handler:function(e){var t=Ve[e.type];t&Pe&&0===e.button&&(this.pressed=!0),t&Ie&&1!==e.which&&(t=Me);this.pressed&&(t&Me&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:we,srcEvent:e}))}});var We={pointerdown:Pe,pointermove:Ie,pointerup:Me,pointercancel:De,pointerout:De},Ge={2:Le,3:'pen',4:we,5:'kinect'},Ke='pointerdown',Xe='pointermove pointerup pointercancel';r.MSPointerEvent&&!r.PointerEvent&&(Ke='MSPointerDown',Xe='MSPointerMove MSPointerUp MSPointerCancel'),p(F,E,{handler:function(e){var t=this.store,a=!1,n=e.type.toLowerCase().replace('ms',''),r=We[n],i=Ge[e.pointerType]||e.pointerType,s=b(t,e.pointerId,'pointerId');r&Pe&&(0===e.button||i==Le)?0>s&&(t.push(e),s=t.length-1):r&(Me|De)&&(a=!0);0>s||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),a&&t.splice(s,1))}});var Je={touchstart:Pe,touchmove:Ie,touchend:Me,touchcancel:De},$e='touchstart',Qe='touchstart touchmove touchend touchcancel';p(j,E,{handler:function(e){var t=Je[e.type];if(t===Pe&&(this.started=!0),!!this.started){var a=H.call(this,e,t);t&(Me|De)&&0==a[0].length-a[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:a[0],changedPointers:a[1],pointerType:Le,srcEvent:e})}}});var Ze={touchstart:Pe,touchmove:Ie,touchend:Me,touchcancel:De},et='touchstart touchmove touchend touchcancel';p(V,E,{handler:function(e){var t=Ze[e.type],a=z.call(this,e,t);a&&this.callback(this.manager,t,{pointers:a[0],changedPointers:a[1],pointerType:Le,srcEvent:e})}});var tt=2500,at=25;p(q,E,{handler:function(e,t,a){var n=a.pointerType==Le,r=a.pointerType==we;if(!(r&&a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents)){if(n)W.call(this,t,a);else if(r&&K.call(this,a))return;this.callback(e,t,a)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var nt=k(me.style,'touchAction'),rt=nt!==void 0,it='compute',st='auto',ot='manipulation',lt='none',dt='pan-x',pt='pan-y',ut=function(){if(!rt)return!1;var e={},t=r.CSS&&r.CSS.supports;return['auto','manipulation','pan-y','pan-x','pan-x pan-y','none'].forEach(function(a){e[a]=!t||r.CSS.supports('touch-action',a)}),e}();X.prototype={set:function(e){e==it&&(e=this.compute()),rt&&this.manager.element.style&&ut[e]&&(this.manager.element.style[nt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return l(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),J(e.join(' '))},preventDefaults:function(e){var t=e.srcEvent,a=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var n=this.actions,r=f(n,lt)&&!ut[lt],i=f(n,pt)&&!ut[pt],s=f(n,dt)&&!ut[dt];if(r){var o=1===e.pointers.length,l=2>e.distance,d=250>e.deltaTime;if(o&&l&&d)return}return s&&i?void 0:r||i&&a&Be||s&&a&Ye?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ct=1,mt=2,gt=4,yt=8,ht=yt,ft=16,_t=32;$.prototype={defaults:{},set:function(e){return _e(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,'recognizeWith',this))return this;var t=this.simultaneous;return e=ee(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,'dropRecognizeWith',this)?this:(e=ee(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,'requireFailure',this))return this;var t=this.requireFail;return e=ee(e,this),-1===b(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,'dropRequireFailure',this))return this;e=ee(e,this);var t=b(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){a.manager.emit(t,e)}var a=this,n=this.state;n<yt&&t(a.options.event+Q(n)),t(a.options.event),e.additionalEvent&&t(e.additionalEvent),n>=yt&&t(a.options.event+Q(n))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=_t)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(_t|ct)))return!1;e++}return!0},recognize:function(e){var t=_e({},e);return c(this.options.enable,[this,t])?void(this.state&(ht|ft|_t)&&(this.state=ct),this.state=this.process(t),this.state&(mt|gt|yt|ft)&&this.tryEmit(t)):(this.reset(),void(this.state=_t))},process:function(){},getTouchAction:function(){},reset:function(){}},p(te,$,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,a=e.eventType,n=t&(mt|gt),r=this.attrTest(e);if(n&&(a&De||!r))return t|ft;return n||r?a&Me?t|yt:t&mt?t|gt:mt:_t}}),p(ae,te,{defaults:{event:'pan',threshold:10,pointers:1,direction:Fe},getTouchAction:function(){var e=this.options.direction,t=[];return e&Be&&t.push(pt),e&Ye&&t.push(dt),t},directionTest:function(e){var t=this.options,a=!0,n=e.distance,r=e.direction,i=e.deltaX,s=e.deltaY;return r&t.direction||(t.direction&Be?(r=0===i?Oe:0>i?Ae:Re,a=i!=this.pX,n=Math.abs(e.deltaX)):(r=0===s?Oe:0>s?Ne:Ue,a=s!=this.pY,n=Math.abs(e.deltaY))),e.direction=r,a&&n>t.threshold&&r&t.direction},attrTest:function(e){return te.prototype.attrTest.call(this,e)&&(this.state&mt||!(this.state&mt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Z(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),p(ne,te,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&mt)},emit:function(e){if(1!==e.scale){var t=1>e.scale?'in':'out';e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),p(re,$,{defaults:{event:'press',pointers:1,time:251,threshold:9},getTouchAction:function(){return[st]},process:function(e){var t=this.options,a=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!n||!a||e.eventType&(Me|De)&&!r)this.reset();else if(e.eventType&Pe)this.reset(),this._timer=s(function(){this.state=ht,this.tryEmit()},t.time,this);else if(e.eventType&Me)return ht;return _t},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state!==ht||(e&&e.eventType&Me?this.manager.emit(this.options.event+'up',e):(this._input.timeStamp=fe(),this.manager.emit(this.options.event,this._input)))}}),p(ie,te,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&mt)}}),p(se,te,{defaults:{event:'swipe',threshold:10,velocity:.3,direction:Be|Ye,pointers:1},getTouchAction:function(){return ae.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,a;return t&(Be|Ye)?a=e.overallVelocity:t&Be?a=e.overallVelocityX:t&Ye&&(a=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&he(a)>this.options.velocity&&e.eventType&Me},emit:function(e){var t=Z(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),p(oe,$,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ot]},process:function(e){var t=this.options,a=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&Pe&&0===this.count)return this.failTimeout();if(n&&r&&a){if(e.eventType!=Me)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||R(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,o&&i?this.count+=1:this.count=1,this._input=e;var l=this.count%t.taps;if(0==l)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ht,this.tryEmit()},t.interval,this),mt):ht}return _t},failTimeout:function(){return this._timer=s(function(){this.state=_t},this.options.interval,this),_t},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ht&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),le.VERSION='2.0.7',le.defaults={domEvents:!1,touchAction:it,enable:!0,inputTarget:null,inputClass:null,preset:[[ie,{enable:!1}],[ne,{enable:!1},['rotate']],[se,{direction:Be}],[ae,{direction:Be},['swipe']],[oe],[oe,{event:'doubletap',taps:2},['tap']],[re]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var bt=2;de.prototype={set:function(e){return _e(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?bt:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var a=this.recognizers,n=t.curRecognizer,r;(!n||n&&n.state&ht)&&(n=t.curRecognizer=null);for(var s=0;s<a.length;)r=a[s],t.stopped!==bt&&(!n||r==n||r.canRecognizeWith(n))?r.recognize(e):r.reset(),!n&&r.state&(mt|gt|yt)&&(n=t.curRecognizer=r),s++}},get:function(e){if(e instanceof $)return e;for(var t=this.recognizers,a=0;a<t.length;a++)if(t[a].options.event==e)return t[a];return null},add:function(e){if(o(e,'add',this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,'remove',this))return this;if(e=this.get(e),e){var t=this.recognizers,a=b(t,e);-1!==a&&(t.splice(a,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var a=this.handlers;return l(_(e),function(e){a[e]=a[e]||[],a[e].push(t)}),this}},off:function(e,t){if(void 0!==e){var a=this.handlers;return l(_(e),function(e){t?a[e]&&a[e].splice(b(a[e],t),1):delete a[e]}),this}},emit:function(e,t){this.options.domEvents&&ue(e,t);var a=this.handlers[e]&&this.handlers[e].slice();if(a&&a.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<a.length;)a[n](t),n++}},destroy:function(){this.element&&pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},_e(le,{INPUT_START:Pe,INPUT_MOVE:Ie,INPUT_END:Me,INPUT_CANCEL:De,STATE_POSSIBLE:ct,STATE_BEGAN:mt,STATE_CHANGED:gt,STATE_ENDED:yt,STATE_RECOGNIZED:ht,STATE_CANCELLED:ft,STATE_FAILED:_t,DIRECTION_NONE:Oe,DIRECTION_LEFT:Ae,DIRECTION_RIGHT:Re,DIRECTION_UP:Ne,DIRECTION_DOWN:Ue,DIRECTION_HORIZONTAL:Be,DIRECTION_VERTICAL:Ye,DIRECTION_ALL:Fe,Manager:de,Input:E,TouchAction:X,TouchInput:V,MouseInput:Y,PointerEventInput:F,TouchMouseInput:q,SingleTouchInput:j,Recognizer:$,AttrRecognizer:te,Tap:oe,Pan:ae,Swipe:se,Pinch:ne,Rotate:ie,Press:re,on:g,off:y,each:l,merge:ve,extend:be,assign:_e,inherit:p,bindFn:u,prefixed:k});var vt='undefined'==typeof r?'undefined'==typeof self?{}:self:r;vt.Hammer=le,n=function(){return le}.call(t,a,t,e),!(n!==void 0&&(e.exports=n))})(window,document,'Hammer')},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';function t(e,t,a){var n={m:['eine Minute','einer Minute'],h:['eine Stunde','einer Stunde'],d:['ein Tag','einem Tag'],dd:[e+' Tage',e+' Tagen'],M:['ein Monat','einem Monat'],MM:[e+' Monate',e+' Monaten'],y:['ein Jahr','einem Jahr'],yy:[e+' Jahre',e+' Jahren']};return t?n[a][0]:n[a][1]}var a=e.defineLocale('de',{months:['Januar','Februar','M\xE4rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],monthsShort:['Jan.','Feb.','M\xE4rz','Apr.','Mai','Juni','Juli','Aug.','Sep.','Okt.','Nov.','Dez.'],monthsParseExact:!0,weekdays:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],weekdaysShort:['So.','Mo.','Di.','Mi.','Do.','Fr.','Sa.'],weekdaysMin:['So','Mo','Di','Mi','Do','Fr','Sa'],weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',ss:'%d Sekunden',m:t,mm:'%d Minuten',h:t,hh:'%d Stunden',d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return a});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';function t(e,t,a){var n={m:['eine Minute','einer Minute'],h:['eine Stunde','einer Stunde'],d:['ein Tag','einem Tag'],dd:[e+' Tage',e+' Tagen'],M:['ein Monat','einem Monat'],MM:[e+' Monate',e+' Monaten'],y:['ein Jahr','einem Jahr'],yy:[e+' Jahre',e+' Jahren']};return t?n[a][0]:n[a][1]}var a=e.defineLocale('de-at',{months:['J\xE4nner','Februar','M\xE4rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],monthsShort:['J\xE4n.','Feb.','M\xE4rz','Apr.','Mai','Juni','Juli','Aug.','Sep.','Okt.','Nov.','Dez.'],monthsParseExact:!0,weekdays:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],weekdaysShort:['So.','Mo.','Di.','Mi.','Do.','Fr.','Sa.'],weekdaysMin:['So','Mo','Di','Mi','Do','Fr','Sa'],weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',ss:'%d Sekunden',m:t,mm:'%d Minuten',h:t,hh:'%d Stunden',d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return a});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';function t(e,t,a){var n={m:['eine Minute','einer Minute'],h:['eine Stunde','einer Stunde'],d:['ein Tag','einem Tag'],dd:[e+' Tage',e+' Tagen'],M:['ein Monat','einem Monat'],MM:[e+' Monate',e+' Monaten'],y:['ein Jahr','einem Jahr'],yy:[e+' Jahre',e+' Jahren']};return t?n[a][0]:n[a][1]}var a=e.defineLocale('de-ch',{months:['Januar','Februar','M\xE4rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'],monthsShort:['Jan.','Feb.','M\xE4rz','Apr.','Mai','Juni','Juli','Aug.','Sep.','Okt.','Nov.','Dez.'],monthsParseExact:!0,weekdays:['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'],weekdaysShort:['So','Mo','Di','Mi','Do','Fr','Sa'],weekdaysMin:['So','Mo','Di','Mi','Do','Fr','Sa'],weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},relativeTime:{future:'in %s',past:'vor %s',s:'ein paar Sekunden',ss:'%d Sekunden',m:t,mm:'%d Minuten',h:t,hh:'%d Stunden',d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});return a});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('en-au',{months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysMin:['Su','Mo','Tu','We','Th','Fr','Sa'],longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,a=1==~~(e%100/10)?'th':1==t?'st':2==t?'nd':3==t?'rd':'th';return e+a},week:{dow:1,doy:4}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('en-ca',{months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysMin:['Su','Mo','Tu','We','Th','Fr','Sa'],longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'YYYY-MM-DD',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,a=1==~~(e%100/10)?'th':1==t?'st':2==t?'nd':3==t?'rd':'th';return e+a}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('en-gb',{months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysMin:['Su','Mo','Tu','We','Th','Fr','Sa'],longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,a=1==~~(e%100/10)?'th':1==t?'st':2==t?'nd':3==t?'rd':'th';return e+a},week:{dow:1,doy:4}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('en-ie',{months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysMin:['Su','Mo','Tu','We','Th','Fr','Sa'],longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD-MM-YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,a=1==~~(e%100/10)?'th':1==t?'st':2==t?'nd':3==t?'rd':'th';return e+a},week:{dow:1,doy:4}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('en-il',{months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysMin:['Su','Mo','Tu','We','Th','Fr','Sa'],longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd, D MMMM YYYY HH:mm'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,a=1==~~(e%100/10)?'th':1==t?'st':2==t?'nd':3==t?'rd':'th';return e+a}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('en-nz',{months:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysMin:['Su','Mo','Tu','We','Th','Fr','Sa'],longDateFormat:{LT:'h:mm A',LTS:'h:mm:ss A',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY h:mm A',LLLL:'dddd, D MMMM YYYY h:mm A'},calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',ss:'%d seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,a=1==~~(e%100/10)?'th':1==t?'st':2==t?'nd':3==t?'rd':'th';return e+a},week:{dow:1,doy:4}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('fr',{months:['janvier','f\xE9vrier','mars','avril','mai','juin','juillet','ao\xFBt','septembre','octobre','novembre','d\xE9cembre'],monthsShort:['janv.','f\xE9vr.','mars','avr.','mai','juin','juil.','ao\xFBt','sept.','oct.','nov.','d\xE9c.'],monthsParseExact:!0,weekdays:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],weekdaysShort:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],weekdaysMin:['di','lu','ma','me','je','ve','sa'],weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd\u2019hui \xE0] LT',nextDay:'[Demain \xE0] LT',nextWeek:'dddd [\xE0] LT',lastDay:'[Hier \xE0] LT',lastWeek:'dddd [dernier \xE0] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',ss:'%d secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case'D':return e+(1===e?'er':'');default:case'M':case'Q':case'DDD':case'd':return e+(1===e?'er':'e');case'w':case'W':return e+(1===e?'re':'e');}},week:{dow:1,doy:4}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('fr-ca',{months:['janvier','f\xE9vrier','mars','avril','mai','juin','juillet','ao\xFBt','septembre','octobre','novembre','d\xE9cembre'],monthsShort:['janv.','f\xE9vr.','mars','avr.','mai','juin','juil.','ao\xFBt','sept.','oct.','nov.','d\xE9c.'],monthsParseExact:!0,weekdays:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],weekdaysShort:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],weekdaysMin:['di','lu','ma','me','je','ve','sa'],weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY-MM-DD',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd\u2019hui \xE0] LT',nextDay:'[Demain \xE0] LT',nextWeek:'dddd [\xE0] LT',lastDay:'[Hier \xE0] LT',lastWeek:'dddd [dernier \xE0] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',ss:'%d secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case'M':case'Q':case'D':case'DDD':case'd':return e+(1===e?'er':'e');case'w':case'W':return e+(1===e?'re':'e');}}});return t});//! moment.js locale configuration
},function(e,t,a){(function(e,t){t(a(5))})(this,function(e){'use strict';var t=e.defineLocale('fr-ch',{months:['janvier','f\xE9vrier','mars','avril','mai','juin','juillet','ao\xFBt','septembre','octobre','novembre','d\xE9cembre'],monthsShort:['janv.','f\xE9vr.','mars','avr.','mai','juin','juil.','ao\xFBt','sept.','oct.','nov.','d\xE9c.'],monthsParseExact:!0,weekdays:['dimanche','lundi','mardi','mercredi','jeudi','vendredi','samedi'],weekdaysShort:['dim.','lun.','mar.','mer.','jeu.','ven.','sam.'],weekdaysMin:['di','lu','ma','me','je','ve','sa'],weekdaysParseExact:!0,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd\u2019hui \xE0] LT',nextDay:'[Demain \xE0] LT',nextWeek:'dddd [\xE0] LT',lastDay:'[Hier \xE0] LT',lastWeek:'dddd [dernier \xE0] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',ss:'%d secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case'M':case'Q':case'D':case'DDD':case'd':return e+(1===e?'er':'e');case'w':case'W':return e+(1===e?'re':'e');}},week:{dow:1,doy:4}});return t});//! moment.js locale configuration
},function(e){e.exports=function(e,t){var a=null,n;try{n=JSON.parse(e,t)}catch(e){a=e}return[a,n]}},function(e,t,a){'use strict';var n=a(40).discardEmulationPreventionBytes,r=a(99).CaptionStream,i=a(13),s=a(26),o=function(e,t){for(var a=e,n=0,r;n<t.length;n++){if(r=t[n],a<r.size)return r;a-=r.size}return null},l=function(e,t,a){var r=new DataView(e.buffer,e.byteOffset,e.byteLength),s=[],l,d,i,p;for(d=0;d+4<e.length;d+=i)if(i=r.getUint32(d),d+=4,!(0>=i))switch(31&e[d]){case 6:var u=e.subarray(d+1,d+1+i),c=o(d,t);l={nalUnitType:'sei_rbsp',size:i,data:u,escapedRBSP:n(u),trackId:a},c?(l.pts=c.pts,l.dts=c.dts,p=c):(l.pts=p.pts,l.dts=p.dts),s.push(l);break;default:}return s},d=function(e,t,a){var n=t,r=a.defaultSampleDuration||0,i=a.defaultSampleSize||0,o=a.trackId,l=[];return e.forEach(function(e){var t=s.parseTrun(e),a=t.samples;a.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=i),e.trackId=o,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),l=l.concat(a)}),l},p=function(e,t){var a=i.findBox(e,['moof','traf']),n=i.findBox(e,['mdat']),r={},o=[];return n.forEach(function(e,t){var n=a[t];o.push({mdat:e,traf:n})}),o.forEach(function(e){var a=e.mdat,n=e.traf,o=i.findBox(n,['tfhd']),p=s.parseTfhd(o[0]),u=p.trackId,c=i.findBox(n,['tfdt']),m=0<c.length?s.parseTfdt(c[0]).baseMediaDecodeTime:0,g=i.findBox(n,['trun']),y,h;t===u&&0<g.length&&(y=d(g,m,p),h=l(a,y,u),!r[u]&&(r[u]=[]),r[u]=r[u].concat(h))}),r},u=function(e,t,a){var n;return null===t?null:(n=p(e,t),{seiNals:n[t],timescale:a})};e.exports=function(){var e=!1,t,a,n,i,s,o;this.isInitialized=function(){return e},this.init=function(a){t=new r,e=!0,o=!!a&&a.isPartial,t.on('data',function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,s.captions.push(e),s.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&'object'==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,t,r){var o;if(!this.isInitialized())return null;if(!t||!r)return null;if(this.isNewInit(t,r))n=t[0],i=r[n];else if(null===n||!i)return a.push(e),null;for(;0<a.length;){var l=a.shift();this.parse(l,t,r)}return(o=u(e,n,i),null===o||!o.seiNals)?null:(this.pushNals(o.seiNals),this.flushStream(),s)},this.pushNals=function(e){return this.isInitialized()&&e&&0!==e.length?void e.forEach(function(e){t.push(e)}):null},this.flushStream=function(){return this.isInitialized()?void(o?t.partialFlush():t.flush()):null},this.clearParsedCaptions=function(){s.captions=[],s.captionStreams={}},this.resetCaptionStream=function(){return this.isInitialized()?void t.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){a=[],n=null,i=null,s?this.clearParsedCaptions():s={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},function(e,t,a){'use strict';var n=a(42),r=a(100).handleRollover,s={};s.ts=a(101),s.aac=a(102);var i=a(103).ONE_SECOND_IN_TS,o=188,l=71,d=function(e,t){for(var a=0,n=o,r,i;n<e.byteLength;){if(e[a]===l&&e[n]===l){switch(r=e.subarray(a,n),i=s.ts.parseType(r,t.pid),i){case'pat':t.pid||(t.pid=s.ts.parsePat(r));break;case'pmt':t.table||(t.table=s.ts.parsePmt(r));break;default:}if(t.pid&&t.table)return;a+=o,n+=o;continue}a++,n++}},p=function(e,t,a){for(var n=0,r=o,i=!1,d,p,u,c,m;r<=e.byteLength;){if(e[n]===l&&(e[r]===l||r===e.byteLength)){switch(d=e.subarray(n,r),p=s.ts.parseType(d,t.pid),p){case'pes':u=s.ts.parsePesType(d,t.table),c=s.ts.parsePayloadUnitStartIndicator(d),'audio'===u&&c&&(m=s.ts.parsePesTime(d),m&&(m.type='audio',a.audio.push(m),i=!0));break;default:}if(i)break;n+=o,r+=o;continue}n++,r++}for(r=e.byteLength,n=r-o,i=!1;0<=n;){if(e[n]===l&&(e[r]===l||r===e.byteLength)){switch(d=e.subarray(n,r),p=s.ts.parseType(d,t.pid),p){case'pes':u=s.ts.parsePesType(d,t.table),c=s.ts.parsePayloadUnitStartIndicator(d),'audio'===u&&c&&(m=s.ts.parsePesTime(d),m&&(m.type='audio',a.audio.push(m),i=!0));break;default:}if(i)break;n-=o,r-=o;continue}n--,r--}},u=function(e,t,a){for(var n=0,r=o,d=!1,p={data:[],size:0},u,c,m,g,y,h,f,i;r<e.byteLength;){if(e[n]===l&&e[r]===l){switch(u=e.subarray(n,r),c=s.ts.parseType(u,t.pid),c){case'pes':if(m=s.ts.parsePesType(u,t.table),g=s.ts.parsePayloadUnitStartIndicator(u),'video'===m&&(g&&!d&&(y=s.ts.parsePesTime(u),y&&(y.type='video',a.video.push(y),d=!0)),!a.firstKeyFrame)){if(g&&0!==p.size){for(h=new Uint8Array(p.size),f=0;p.data.length;)i=p.data.shift(),h.set(i,f),f+=i.byteLength;if(s.ts.videoPacketContainsKeyFrame(h)){var _=s.ts.parsePesTime(h);_?(a.firstKeyFrame=_,a.firstKeyFrame.type='video'):console.warn('Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.')}p.size=0}p.data.push(u),p.size+=u.byteLength}break;default:}if(d&&a.firstKeyFrame)break;n+=o,r+=o;continue}n++,r++}for(r=e.byteLength,n=r-o,d=!1;0<=n;){if(e[n]===l&&e[r]===l){switch(u=e.subarray(n,r),c=s.ts.parseType(u,t.pid),c){case'pes':m=s.ts.parsePesType(u,t.table),g=s.ts.parsePayloadUnitStartIndicator(u),'video'===m&&g&&(y=s.ts.parsePesTime(u),y&&(y.type='video',a.video.push(y),d=!0));break;default:}if(d)break;n-=o,r-=o;continue}n--,r--}},c=function(e,t){if(e.audio&&e.audio.length){var a=t;'undefined'==typeof a&&(a=e.audio[0].dts),e.audio.forEach(function(e){e.dts=r(e.dts,a),e.pts=r(e.pts,a),e.dtsTime=e.dts/i,e.ptsTime=e.pts/i})}if(e.video&&e.video.length){var n=t;if('undefined'==typeof n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=r(e.dts,n),e.pts=r(e.pts,n),e.dtsTime=e.dts/i,e.ptsTime=e.pts/i}),e.firstKeyFrame){var s=e.firstKeyFrame;s.dts=r(s.dts,n),s.pts=r(s.pts,n),s.dtsTime=s.dts/i,s.ptsTime=s.dts/i}}},m=function(e){for(var t=!1,a=0,n=null,r=null,o=0,l=0,d;3<=e.length-l;){var p=s.aac.parseType(e,l);switch(p){case'timed-metadata':if(10>e.length-l){t=!0;break}if(o=s.aac.parseId3TagSize(e,l),o>e.length){t=!0;break}null===r&&(d=e.subarray(l,l+o),r=s.aac.parseAacTimestamp(d)),l+=o;break;case'audio':if(7>e.length-l){t=!0;break}if(o=s.aac.parseAdtsSize(e,l),o>e.length){t=!0;break}null===n&&(d=e.subarray(l,l+o),n=s.aac.parseSampleRate(d)),a++,l+=o;break;default:l++;}if(t)return null}if(null===n||null===r)return null;var u=i/n,c={audio:[{type:'audio',dts:r,pts:r},{type:'audio',dts:r+1024*a*u,pts:r+1024*a*u}]};return c},g=function(e){var t={pid:null,table:null},a={};for(var r in d(e,t),t.table)if(t.table.hasOwnProperty(r)){var i=t.table[r];switch(i){case n.H264_STREAM_TYPE:a.video=[],u(e,t,a),0===a.video.length&&delete a.video;break;case n.ADTS_STREAM_TYPE:a.audio=[],p(e,t,a),0===a.audio.length&&delete a.audio;break;default:}}return a};e.exports={inspect:function(e,t){var a=s.aac.isLikelyAacData(e),n;return(n=a?m(e):g(e),!n||!n.audio&&!n.video)?null:(c(n,t),n)},parseAudioPes_:p}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),a(60),a(61);var n=a(62);a(109),a(114),a(115),a(118),a(119),a(122),a(125),a(126),a(128),t.default=n.Player},function(e,t,a){(function(e,n){n(t,a(3))})(this,function(e,t){'use strict';function a(e){t.util.styleManager.inject();for(var r=document.querySelectorAll(e+', [data-is='+e+']'),s=[],o=0;o<r.length;o++){var i=r[o],l=i._tag,d;a.trigger('before-unmount',l),l.unmount(!0),i.innerHTML=l.__.innerHTML,(l.__.instAttrs||[]).map(function(e){i.setAttribute(e.name,e.value)});var p={};for(c in l.opts)p[c]=l.opts[c];p.parent=l.parent,a.trigger('before-mount',p,l);var u=t.mount(i,p)[0];for(var c in l)(d=l[c],!~n.indexOf(c))&&(u[c]=d);u.update(),s.push(u),a.trigger('after-mount',u,l)}return s}var n=['isMounted','opts'];t.observable(a),t.reload=a,t.default&&(t.default.reload=a),e.reload=a,e['default']=a,Object.defineProperty(e,'__esModule',{value:!0})})},function(){/*!
 * Social Share Kit v1.0.15 (http://socialsharekit.com)
 * Copyright 2015 Social Share Kit / Kaspars Sprogis.
 * @Licensed under Creative Commons Attribution-NonCommercial 3.0 license:
 * https://github.com/darklow/social-share-kit/blob/master/LICENSE
 * ---
 */var e=function(){function _(t){return h(t).share()}function T(t){'loading'==document.readyState?document.addEventListener?document.addEventListener('DOMContentLoaded',t):document.attachEvent('onreadystatechange',function(){'loading'!=document.readyState&&t()}):t()}function S(t){return document.querySelectorAll(t)}function t(a,e){for(var t=0;t<a.length;t++)e(a[t],t)}function C(a,e,t){a.addEventListener?a.addEventListener(e,t):a.attachEvent('on'+e,function(){t.call(a)})}function n(a,e,t){a.removeEventListener?a.removeEventListener(e,t):a.detachEvent('on'+e,t)}function E(t){return t.className.match(c)}function a(a){var e=a||window.event;return e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0),e.currentTarget||e.srcElement}function r(s,e,t){var n,r,o,i;return e&&t?(r=document.documentElement.clientWidth/2-e/2,o=(document.documentElement.clientHeight-t)/2,i='status=1,resizable=yes,width='+e+',height='+t+',top='+o+',left='+r,n=window.open(s,'',i)):n=window.open(s),n.focus(),n}function s(g,y,t){var n=f(g,y,t),o=L(g,y,t,n),h='undefined'==typeof n.title?d(y):n.title,_='undefined'==typeof n.text?l(y):n.text,b=n.image?n.image:p('og:image'),v='undefined'==typeof n.via?p('twitter:site'):n.via,T={shareUrl:o,title:h,text:_,image:b,via:v,options:g,shareUrlEncoded:function(){return encodeURIComponent(this.shareUrl)}},m;return'facebook'===y?m='https://www.facebook.com/share.php?u='+T.shareUrlEncoded():'twitter'===y?(m='https://twitter.com/intent/tweet?url='+T.shareUrlEncoded()+'&text='+encodeURIComponent(h+(_&&h?' - ':'')+_),v&&(m+='&via='+v.replace('@',''))):'google-plus'===y?m='https://plus.google.com/share?url='+T.shareUrlEncoded():'pinterest'===y?(m='https://pinterest.com/pin/create/button/?url='+T.shareUrlEncoded()+'&description='+encodeURIComponent(_),b&&(m+='&media='+encodeURIComponent(b))):'tumblr'===y?m='https://www.tumblr.com/share/link?url='+T.shareUrlEncoded()+'&name='+encodeURIComponent(h)+'&description='+encodeURIComponent(_):'linkedin'===y?m='https://www.linkedin.com/shareArticle?mini=true&url='+T.shareUrlEncoded()+'&title='+encodeURIComponent(h)+'&summary='+encodeURIComponent(_):'vk'===y?m='https://vkontakte.ru/share.php?url='+T.shareUrlEncoded():'buffer'===y?m='https://buffer.com/add?source=button&url='+T.shareUrlEncoded()+'&text='+encodeURIComponent(_):'email'===y?m='mailto:?subject='+encodeURIComponent(h)+'&body='+encodeURIComponent(h+'\n'+o+'\n\n'+_+'\n'):void 0,T.networkUrl=m,g.onBeforeOpen&&g.onBeforeOpen(t,y,T),T.networkUrl}function L(a,e,t,n){return n=n||f(a,e,t),n.url||window.location.href}function d(a){var e;return'twitter'==a&&(e=p('twitter:title')),e||document.title}function l(a){var e;return'twitter'==a&&(e=p('twitter:description')),e||p('description')}function p(a,e){var t=S('meta['+(e?e:0===a.indexOf('og:')?'property':'name')+'="'+a+'"]'),n;return t.length&&(n=t[0].getAttribute('content')||''),n||''}function f(l,e,t){var n=['url','title','text','image'],d={},s=t.parentNode,p,u,o,i;for(i in'twitter'==e&&n.push('via'),n)u=n[i],o='data-'+u,p=t.getAttribute(o)||s.getAttribute(o)||(l[e]&&'undefined'!=typeof l[e][u]?l[e][u]:l[u]),'undefined'!=typeof p&&(d[u]=p);return d}function i(a,e){var t=document.createElement('div');t.innerHTML=e,t.className='ssk-num',a.appendChild(t)}function o(s,e,t,n){var r=encodeURIComponent(e),l,o,i;switch(s){case'facebook':l='https://graph.facebook.com/?id='+r,o=function(t){return n(t.share?t.share.share_count:0)};break;case'twitter':t&&t.twitter&&t.twitter.countCallback&&t.twitter.countCallback(e,n);break;case'google-plus':return l='https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ',i='[{"method":"pos.plusones.get","id":"p","params":{"id":"'+e+'","userId":"@viewer","groupId":"@self","nolog":true},"jsonrpc":"2.0","key":"p","apiVersion":"v1"}]',o=function(t){if(t=JSON.parse(t),t.length)return n(t[0].result.metadata.globalCounts.count)},void u(l,o,i);case'linkedin':l='https://www.linkedin.com/countserv/count/share?url='+r,o=function(t){return n(t.count)};break;case'pinterest':l='https://api.pinterest.com/v1/urls/count.json?url='+r,o=function(t){return n(t.count)};break;case'vk':l='https://vk.com/share.php?act=count&url='+r,o=function(t){return n(t)};break;case'buffer':l='https://api.bufferapp.com/1/links/shares.json?url='+r,o=function(t){return n(t.shares)};}l&&o&&m(s,l,o,i)}function u(a,e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===this.readyState&&200<=this.status&&400>this.status&&e(this.responseText)},n.open('POST',a,!0),n.setRequestHeader('Content-Type','application/json'),n.send(t)}function m(a,e,t){var n='cb_'+a+'_'+Math.round(1e5*Math.random()),r=document.createElement('script');return window[n]=function(a){try{delete window[n]}catch(t){}document.body.removeChild(r),t(a)},'vk'==a?window.VK={Share:{count:function(a,e){window[n](e)}}}:'google-plus'==a&&(window.services={gplus:{cb:window[n]}}),r.src=e+(0<=e.indexOf('?')?'&':'?')+'callback='+n,document.body.appendChild(r),!0}var c=/(twitter|facebook|google-plus|pinterest|tumblr|vk|linkedin|buffer|email)/,y='*|*',h,b;return b=function(a){var e=a||{},t=e.selector||'.ssk';this.nodes=S(t),this.options=e},b.prototype={share:function(){function d(p){var u=a(p),n=E(u),m=n[0],o;if(n&&(o=s(c,m,u))){if(window.twttr&&-1!==u.getAttribute('href').indexOf('twitter.com/intent/'))return void u.setAttribute('href',o);if('email'!==m){var t,i;'buffer'===m?(t=800,i=680):(t=575,i=400);var d=r(o,t,i);if(c.onOpen&&c.onOpen(u,m,o,d),c.onClose)var l=window.setInterval(function(){!1!==d.closed&&(window.clearInterval(l),c.onClose(u,m,o,d))},250)}else document.location=o}}function e(){var a,n;for(a in l)n=a.split(y),function(a){o(n[0],n[1],c,function(e){for(var t in a)i(a[t],e)})}(l[a])}var u=this.nodes,c=this.options,l={},p=function(){u.length&&(t(u,function(e){var t=E(e),a;if(t){if(e.getAttribute('data-ssk-ready')){if(!c.reinitialize||!e._skkListener)return;n(e,'click',e._skkListener)}e.setAttribute('data-ssk-ready',!0),C(e,'click',d),e._skkListener=d,-1!==e.parentNode.className.indexOf('ssk-count')&&(t=t[0],a=t+y+L(c,t,e),a in l||(l[a]=[]),l[a].push(e))}}),e())};return!0===c.forceInit?p():T(p),this.nodes}},h=function(t){return new b(t)},{init:_}}();window.SocialShareKit=e},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.Player=t.PlayerError=void 0,a(63);var i=a(8),s=n(i),o=a(17),l=a(88),d=n(l),p=a(11),u=n(p),c=a(19),m=a(18),g=n(m),y=a(6),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(y),f=a(89),_=a(90),b=a(91),v=a(104),T=a(105),k=a(106),S=a(107),C=a(108),E=a(10).default,L=a(43),w=t.PlayerError=void 0;(function(e){e[e.SessionError=1]='SessionError',e[e.VideoError=2]='VideoError',e[e.VimeError=3]='VimeError'})(w||(t.PlayerError=w={}));t.Player=function(){function e(t,a){if(r(this,e),this.listeners={},this.registeredCallbacks=[],this.timestamp=Date.now(),this.initialized=!1,this.firstPlay=!1,this.unsupported=0,this.editableWarning='\n  Advenced edition features are only available for editable player. \n  If you wish to use this feature esnure that editable property is set to true in player\'s initialization.\n  Current action will have no impact\n  ',this._registerPluginIfNeeded('markers',T.MarkersPlugin),this._registerPluginIfNeeded('repeat',k.RepeatPlugin),this._registerPluginIfNeeded('iosFullscreen',v.IOSFullscreenPlugin),this._registerPluginIfNeeded('resolutionSwitcher',S.ResolutionSwitcherPlugin),this._registerPluginIfNeeded('share',C.SharePlugin),this.rootEl='string'==typeof t?document.querySelector(t):t,'undefined'==typeof a&&(a=this._extractOptsFromNode()),'undefined'==typeof a)console.error('Player options missing. Unable to initialize');else if(a.hasOwnProperty('videoID')||a.hasOwnProperty('source')||a.hasOwnProperty('sources')&&0<a.sources.length){a.hasOwnProperty('poster')&&(a.thumbnailUrl=a.poster);var n=Object.assign({player:this,dimensions:this.rootEl.getBoundingClientRect()},a);a.hasOwnProperty('amadeusBackend')&&a.amadeusBackend.length&&s.default.setValue(u.default.MAIN_SERVER,a.amadeusBackend),a.hasOwnProperty('skin')&&'xmas'===a.skin&&!a.hasOwnProperty('brand')&&(n.brand={image:'url(https://storage.googleapis.com/travelcast/images/santa.svg) no-repeat center',destination:'https://santaclausvillage.info/',destinationTarget:'_blank',title:'Xmas village'}),this.opts=n,this.opts.debug&&console.debug('Initializing player with options',this.opts),this.tag=riot.mount(t,'avs-player',n)[0],this._initialize()}else console.error('Video source missing. Unable to initialize',a)}return e.prototype._registerPluginIfNeeded=function(e,t){var a=Object.keys(E.getPlugins()).indexOf(e);-1==a&&E.registerPlugin(e,t)},e.prototype._extractOptsFromNode=function(){var e=this,t=null,a=this.rootEl.querySelector('video');if(a){var n=function(e){return''===e||'true'===e},r=function(e){return'infinity'===e.toLowerCase()?Infinity:isNaN(parseInt(e,10))?0:parseInt(e,10)};t=this._extendOptsFromNode({},a,'poster'),t=this._extendOptsFromNode(t,a,'autoplay',n),t=this._extendOptsFromNode(t,a,'data-debug',n),t=this._extendOptsFromNode(t,a,'data-videoID'),t=this._extendOptsFromNode(t,a,'data-external'),t=this._extendOptsFromNode(t,a,'data-skin'),t=this._extendOptsFromNode(t,a,'data-amadeusBackend'),t=this._extendOptsFromNode(t,a,'data-defaultCaption');var i=[];a.querySelectorAll('source').forEach(function(t){var a=e._extendOptsFromNode({},t,'src');a=e._extendOptsFromNode(a,t,'type'),a=e._extendOptsFromNode(a,t,'data-label'),a=e._extendOptsFromNode(a,t,'data-res',r),i.push(a)}),i.length&&(t.sources=i)}else console.warn('No <video> tag present has child of rootEl.');return t},e.prototype._extendOptsFromNode=function(e,t,a,n){var r={},i=a.replace('data-','');return t.hasAttribute(a)&&(r[i]=n?n(t.getAttribute(a)):t.getAttribute(a)),Object.assign(r,e)},e.prototype._initialize=function(){var e=this;this.opts.callbacks&&this.opts.callbacks.ready&&this.ready().then(this.opts.callbacks.ready).catch(this.opts.callbacks.ready);var t=null;this.opts.hasOwnProperty('videoID')?(this.opts.debug&&console.debug('Retrieving data from amadeus backend for video',this.opts.videoID),t=new f.AVSVideoService(this.opts)):(this.opts.debug&&console.debug('Retrieving data from configuration object'),t=new _.InlineVideoService(this.opts)),i18n.setLanguage(this.opts.locale||'en_US'),t.getData().then(function(t){e.videoDetails=t,e._initializeVideoJSPlayer()},function(t){e.unsupported=t,e._onReady(t)})},e.prototype._initializeVideoJSPlayer=function(){var e=this;this.opts.debug&&console.debug('Initializing videojs player');var t={hls:{withCredentials:!0},plugins:{resolutionSwitcher:{default:'high',dynamicLabel:!1},iosFullscreen:{active:!1,opts:this.opts},share:{callback:this.openShare.bind(this)}},controlBar:{volumeMenuButton:{inline:!0}}};this.opts.hasOwnProperty('repeatable')&&this.opts.repeatable&&(t.plugins.repeat={active:!1}),(this.opts.hasOwnProperty('brand')||this.videoDetails.hasOwnProperty('brand'))&&(this.opts.debug&&console.debug('Branding detected. Registering brand plugin with parameters',this.videoDetails.brand),this._registerPluginIfNeeded('brand',b.BrandPlugin),this.opts.hasOwnProperty('brand')&&(t.plugins.brand=this.opts.brand),this.videoDetails.hasOwnProperty('brand')&&(t.plugins.brand=this.videoDetails.brand));var a=this.opts.hasOwnProperty('editable')&&this.opts.editable;!a&&this.opts.hasOwnProperty('hotkeys')&&this.opts.hotkeys?(this.opts.debug&&console.debug('Hotkeys detected. Registering default keys'),t.userActions={hotkeys:this.opts.hotkeys}):t.userActions={hotkeys:!1},this.player=E(this.rootEl.querySelector('video'),t,function(){Object.keys(e.opts.callbacks).forEach(function(t){return e.player.on(t,e.opts.callbacks[t])}),e.firstPlay=!0,e.player.iosFullscreen()}),this._initializeMarkers(),this.opts.debug&&console.debug('Multiple sources detected. Registering resolution switcher plugin with parameters',this.videoDetails.sources),this.videoDetails.sources.forEach(function(e,t){e.hasOwnProperty('label')||(e.label='Source '+(t+1))}),this.player.updateSrc(this.videoDetails.sources),this.player.currentResolution(this.videoDetails.selectedResolution),this.videoDetails.hasOwnProperty('captions')&&0<this.videoDetails.captions.length&&(this.opts.debug&&console.debug('Captions detected',this.videoDetails.captions),this._initializeCaptions()),this._addListeners(),this.player.ready(this._onReady.bind(this)),this.ready().then(this._toggleComponentVisibility.bind(this)),this.ready().then(this._addDoubleTapListner.bind(this)),this.loadedMetadataFn=this._onLoadedMetadata.bind(this),this.player.on('loadedmetadata',this.loadedMetadataFn)},e.prototype.dispose=function(){this.tag&&this.tag.unmount(),this.hammerManager&&this.hammerManager.off('doubletap'),this._removeListeners(),this.player&&(this.player.off('loadedmetadata',this.loadedMetadataFn),this.getMarkers().removeAll(),this.player.dispose())},e.prototype._initializeCaptions=function(){var e=this,t=this.videoDetails.captions;t.forEach(function(t){e.player.addRemoteTextTrack(t)})},e.prototype._initializeMarkers=function(){var e={onMarkerReached:this.opts.callbacks.markerreached||function(){},markerTip:{display:!0,text:function(e){return e.poi_name||i18n.localise('template.label.notspecified')}},onMarkerClick:function(e){var t={dimension5:e.poi_name};if(e.details){var a=e.details.address||'',n=a.split(','),r=n.length?n[n.length-1]:'';t.dimension6=r,t.dimension7=e.details.city_name}g.default.send(c.Events.CTRLBRPOI_CLICKED,t)}};this.opts.debug&&console.debug('POIS detected.  Registering videojs markers plugin with parameters',e),this.player.markers(e)},e.prototype._onLoadedMetadata=function(){this.player.markers().add(this.filterPOIs())},e.prototype.filterPOIs=function(){var e=this,t=this.videoDetails.pois||[];return t.filter(function(t){if(e.opts.hasOwnProperty('editable')&&e.opts.editable)return t.place_id&&t.place_id.length||t.poi_id&&t.poi_id.length;var a=null;return e.videoDetails.meta.configurations&&e.videoDetails.meta.configurations[t.poi_id]&&(a=e.videoDetails.meta.configurations[t.poi_id]),t.place_id&&t.place_id.length||a&&a.template_type===o.TemplateType.Tour&&0<a.places.length})},e.prototype._addListeners=function(){var e=this;this.opts.hasOwnProperty('editable')&&this.opts.editable||this.player.on('fullscreenchange',this._toggleComponentVisibility.bind(this)),Object.keys(d.default).forEach(function(t){var a=d.default[t],n=function(t){return console.warn('Event handler undefined for event '+t.type)};'function'==typeof e['_'+a]&&(e.opts.debug&&console.debug('Listener for foreign event '+a+' detected. Adding listener'),n=e['_'+a].bind(e)),e.listeners[a]=n,window.addEventListener(a,n)}),this.opts.hasOwnProperty('editable')&&this.opts.editable||(this.listeners.resize=h.debounce(this._toggleComponentVisibility.bind(this),250,!0),window.addEventListener('resize',this.listeners.resize))},e.prototype._removeListeners=function(){var e=this;Object.keys(this.listeners).forEach(function(t){e.opts.debug&&console.debug('Listener for foreign event '+t+' detected. Removing listener'),window.removeEventListener(t,e.listeners[t])})},e.prototype.ready=function(){var e=this;return this.initialized?Promise.resolve(this.unsupported):new Promise(function(t,a){e.registeredCallbacks.push({resolve:t,reject:a})})},e.prototype._onReady=function(e){var t=this,a=this.opts.hasOwnProperty('editable')&&this.opts.editable;this.initialized=!0,this.registeredCallbacks.forEach(function(a){'undefined'==typeof e?a.resolve(t):a.reject(e)}),this.registeredCallbacks=[]},e.prototype.hasBeenInitialized=function(){return this.initialized},e.prototype.hasError=function(){return this.unsupported},e.prototype.getPlayer=function(){return this.player},e.prototype.getTimeStamp=function(){return this.timestamp},e.prototype.currentTime=function(e,t){var a=this;if('undefined'!=typeof e&&'number'==typeof e){var n=this.rootEl.querySelector('video');if(t){var r=function e(){a.openPanel(),n.removeEventListener('seeked',e)};n.addEventListener('seeked',r)}this.closePanel();var i=function(){var t=a.duration(),n=0>=e?0:e>=t?t:e;a.player.currentTime(n)};this.tag.played?i():(this.tag.played=!0,this._updateTag(),window.setTimeout(i,1e3))}else return this.player.currentTime()},e.prototype.currentPOI=function(){return this.tag.currentMarker()},e.prototype.duration=function(){return this.player?this.player.duration():0},e.prototype.pause=function(){this.player.pause()},e.prototype.play=function(){var e=this;this.player&&this.player.ready(function(){e.closePanel(),e.closeShare(),e.player.play()})},e.prototype.setMuted=function(e){this.player.muted(e)},e.prototype.isFullscreen=function(){return!!this.player&&(h.isiOSDevice()?this.player.iosFullscreen().isFullscreen():this.player.isFullscreen())},e.prototype.requestFullscreen=function(){this.play(),h.isiOSDevice()?this.player.iosFullscreen().requestFullscreen():this.player.requestFullscreen()},e.prototype.exitFullscreen=function(){h.isiOSDevice()?this.player.iosFullscreen().exitFullscreen():this.player.exitFullscreen()},e.prototype.addPOI=function(e,t,a){this.opts.hasOwnProperty('editable')&&this.opts.editable?(e.start_time=0===e.start_time?1:e.start_time,e.time=e.start_time,e.text=e.poi_name,this.player.markers().add([e]),this.videoDetails.pois.push(e),t&&this.currentTime(e.start_time,a)):console.warn(this.editableWarning)},e.prototype.getMarkers=function(){return this.player.markers().getMarkers()},e.prototype.removePOI=function(e){this.opts.hasOwnProperty('editable')&&this.opts.editable?this.removePOIs([e]):console.warn(this.editableWarning)},e.prototype.removePOIs=function(e){var t=this;if(this.opts.hasOwnProperty('editable')&&this.opts.editable){this.closePanel();var a=this.currentPOI();this.player.markers().remove(e),e.forEach(function(e){var n=t.videoDetails.pois[e];a&&n&&a.poi_id===n.poi_id&&t.tag.onMarkerReached(null)})}else console.warn(this.editableWarning)},e.prototype.updatePOIsTimes=function(){this.opts.hasOwnProperty('editable')&&this.opts.editable?this.player.markers().updateTime(!0):console.warn(this.editableWarning)},e.prototype.updatePOI=function(e,t,a){var n=this;if(this.opts.hasOwnProperty('editable')&&this.opts.editable){var r=this._find(e);0<r.length&&(r.forEach(function(e){e[t]=a,'start_time'===t&&(e.time=a),('start_time'===t||'time'===t)&&n.updatePOIsTimes()}),this._updateTag())}else console.warn(this.editableWarning)},e.prototype.updateCurrentPOIConfiguration=function(e,t){if(this.opts.hasOwnProperty('editable')&&this.opts.editable){var a=this.currentPOI();a&&this.updatePOIConfiguration(a.poi_id,e,t)}else console.warn(this.editableWarning)},e.prototype.updatePOIConfiguration=function(e,t,a){var n=this;if(this.opts.hasOwnProperty('editable')&&this.opts.editable){var r=this._find(e);0<r.length&&r.forEach(function(e){var r=h.getDefaultConfiguration(),i=n.videoDetails.meta.configurations||{};i[e.poi_id]=i[e.poi_id]||r,i[e.poi_id][t]=a,'inline'===t&&a?n.tag.hide('',!1,!1):n.tag.show('',!0,!0),n._updateTag()})}else console.warn(this.editableWarning)},e.prototype.scrubbing=function(){return this.player.scrubbing()},e.prototype.setCallbacks=function(e){this.opts.callbacks=e},e.prototype.openPanel=function(){this.tag.openPanel()},e.prototype.closePanel=function(){this.tag.closePanel()},e.prototype.openShare=function(){this.tag.openShare()},e.prototype.closeShare=function(){this.tag.closeShare()},e.prototype.on=function(e,t){this.player&&this.player.on(e,t)},e.prototype.one=function(e,t){this.player&&this.player.one(e,t)},e.prototype.off=function(e,t){this.player&&this.player.off(e,t)},e.prototype.updatePictures=function(e,t){var a=this;if(this.opts.hasOwnProperty('editable')&&this.opts.editable){var n=this._find(e);0<n.length&&(this.videoDetails.meta.pictures=this.videoDetails.meta.pictures||{},n.forEach(function(e){a.videoDetails.meta.pictures[e.poi_id]=t}),this.timestamp=Date.now(),this._updateTag())}else console.warn(this.editableWarning)},e.prototype._toggleComponentVisibility=function(){if(this.player)try{var e=this.rootEl.getBoundingClientRect(),t=['CurrentTimeDisplay','TimeDivider','DurationDisplay'],a=['ShareButton','RepeatButton','BrandButton','ResolutionMenuButton'];this.videoDetails.hasOwnProperty('captions')&&0<this.videoDetails.captions.length&&a.push('SubsCapsButton');var n=[h.isiOSDevice()?'IOSFullscreenButton':'FullscreenToggle'],r=t.concat(a).concat(n),i=this.opts.hasOwnProperty('controls')?this.opts.controls:r,s=r.filter(function(e){return-1===i.indexOf(e)}).concat([h.isiOSDevice()?'FullscreenToggle':'IOSFullscreenButton']);480<e.width?this._showControls(i):(this._hideControls(t),340>e.width?this._hideControls(a):this._showControls(a)),this._hideControls(s)}catch(t){console.warn('Unable to toggle component visibility. Is the player still attached to the DOM?')}},e.prototype._showControls=function(e){var t=this.player.getChild('ControlBar');e.map(function(e){return t.getChild(e)}).forEach(function(e){e&&e.show()})},e.prototype._hideControls=function(e){var t=this.player.getChild('ControlBar');e.map(function(e){return t.getChild(e)}).forEach(function(e){e&&e.hide()})},e.prototype._updateTag=function(){this.opts.debug&&console.debug('Refreshing internal riot tag'),this.tag.update()},e.prototype._onCurrentTimeChanged=function(t){this.opts.debug&&console.debug('onCurrentTimeChanged event recieved with parameters',t);var e=t.detail,a=e.shouldOpenPanel||!1;this.currentTime(e.seconds,a)},e.prototype._onVideoPOIAdded=function(t){this.opts.debug&&console.debug('onVideoPOIAdded event recieved with parameters',t);var e=t.detail.value;this.addPOI(e,!0,!0)},e.prototype._onVideoPOIRemoved=function(t){this.opts.debug&&console.debug('onVideoPOIRemoved event recieved with parameters',t);var e=t.detail.index;this.removePOI(e)},e.prototype._onVideoPOIChanged=function(t){this.opts.debug&&console.debug('onVideoPOIChanged event recieved with parameters',t);var e=t.detail;this.updatePOI(e.id,e.key,e.newValue)},e.prototype._onVideoPOICfgChanged=function(t){this.opts.debug&&console.debug('onVideoPOICfgChanged event recieved with parameters',t);var e=t.detail;this.updateCurrentPOIConfiguration(e.key,e.newValue)},e.prototype._onVideoChanged=function(t){var e=this;this.opts.debug&&console.debug('onVideoChanged event recieved with parameters',t);var a=t.detail;if('pictures'===a.key){var n=Object.keys(a.newValue);n.forEach(function(t){e.updatePictures(t,a.newValue[t])})}},e.prototype._find=function(e){var t=this.videoDetails.pois.filter(function(t){return t.poi_id===e||t.place_id===e||t.id===e});return this.opts.debug&&console.debug('Looking for POI with id '+e+'.',t),t},e.prototype._addDoubleTapListner=function(){var e=this;if(L.Hammer)try{var t=new L.Hammer.Tap({event:'doubletap',taps:2});this.hammerManager=new L.Hammer.Manager(this.rootEl.querySelector('video')),this.hammerManager.add([t]),this.hammerManager.on('doubletap',function(){e.currentTime(e.player.currentTime()+15)})}catch(t){console.warn('Unable to attach tap listener. Is the player still attached to the DOM?')}},e}()},function(e,t,a){var n=a(3);n.tag2('avs-player','<div if="{!isUnsupported()}" id="{\'player-\'+playerId}" class="player-container fill-height"> <avs-header player="{player}" marker="{marker}" video="{video_id}" likes="{likes}" if="{played && !editable}" user="{user}"></avs-header> <div class="fill-height"> <video id="{\'video-\'+playerId}" class="video-js vjs-big-play-centered fill-height" controls preload="auto" poster webkit-playsinline playsinline crossorigin="anonymous"> <p class="vjs-no-js"> <localize>player.error.support</localize> </p> </video> <div id="{\'overlays-\'+playerId}" class="overlays-wrapper"> <canvas width="{this.width}" height="{opts.height}" class="overlay-blurred"></canvas> <avs-template player="{player}" marker="{marker}" cfg="{getMarkerCfg()}" editable="{editable}" class="{\u2057overlay-template\u2057:true, \u2057inline\u2057 : isInlineTemplate()}"></avs-template> <avs-share player="{player}" marker="{marker}" class="overlay-share" if="{!editable}"></avs-share> <avs-requierement player="{player}" class="{\u2057overlay-requierement\u2057:true}"></avs-requierement> <avs-tutorial class="{\u2057overlay-tutorial-wrapper\u2057:true, \u2057visible\u2057: firstTime && played && !requierement.visible && marker}"></avs-tutorial> </div> </div> <div class="video-js loader" if="{!played}"> <img riot-src="{thumbnailUrl}" onclick="{playRequest}"> <button class="vjs-big-play-button" type="button" onclick="{playRequest}"> <span class="vjs-icon-placeholder"></span> </button> </div> </div> <div if="{isUnsupported()}" class="player-container player-container-error"> <div class="error-message" if="{player.unsupported === 1}"> <localize>player.error.cookies</localize> </div> <div class="error-message" if="{player.unsupported > 1}"> <localize>player.error.unsupportedVideo</localize> </div> </div>','','class="{\u2057ios\u2057: ios, \u2057editable\u2057: editable}"',function(e){'use strict';function t(e){return e&&e.__esModule?e:{default:e}}var n=this,r=a(6),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(r),s=a(18),o=t(s),l=a(19),d=a(25),p=t(d),u=a(8),c=t(u),m=a(11),g=t(m);a(76),a(77),a(78),a(79),a(80),a(81),this.video_id=e.videoID,this.thumbnailUrl=this.opts.hasOwnProperty('external')&&this.opts.external?c.default.getValue(g.default.MAIN_SERVER)+'/api/video/picture/external/'+this.video_id+'?t='+Date.now():c.default.getValue(g.default.MAIN_SERVER)+'/api/video/picture/'+this.video_id+'?t='+Date.now(),e.thumbnailUrl&&(this.thumbnailUrl=e.thumbnailUrl);var y=e.skin||'avs';p.default.initialize(e.skin||'avs'),this.editable=!!e.hasOwnProperty('editable')&&e.editable,this.autoplay=!!e.hasOwnProperty('autoplay')&&e.autoplay,this.overlayOnPause=!e.hasOwnProperty('overlayOnPause')||e.overlayOnPause,this.ios=i.isiOSDevice(),this.playerId=e.id||i.uuid(),this.firstTime=!1,this.played=!1,this.ended=!1,this.initialized=!1,this.timer=null,this.marker=null,this.startPlaytime=0,this.startPanelTime=0,this.firstPlay=!0,this.hasError=!1,this.template={visible:!1},this.share={visible:!1},this.requierement={visible:!1},this.videoCompleteRate=1e18,this.isViewed=!1,this.isCompleted=!1,this.errors=[],this.on('mount',function(){o.default.initialize(e.analytics),o.default.enabled(!n.editable),window.addEventListener('beforeunload',n.onLeavingPage.bind(n)),n.player=e.player,n.player.setCallbacks({play:n.onVideoPlay.bind(n),pause:n.onVideoPause.bind(n),timeupdate:n.onVideoTimeUpdate.bind(n),ended:n.onVideoEnded.bind(n),loadedmetadata:n.onLoadedMetadata.bind(n),fullscreenchange:n.onFullScreenChange.bind(n),ready:n.onPlayerInitialized.bind(n),markerreached:n.onMarkerReached.bind(n)})}),this.onPlayerInitialized=function(e){if(n.root.parentNode.classList.add('theme-'+y),n.errors.push(e),n.player.unsupported)n.update();else{if(n.player.hasBeenInitialized()){n.initialized=!0;var t=n.root.querySelector('div[id^="video-"]'),a=n.root.querySelector('div[id^="overlays-"]');if(i.style('div[id^="video-"] video',{visibility:'visible'}),t){var r=n.root.querySelector('video');r&&r.addEventListener('touchend',n.onTouchEnd.bind(n)),t.append(a)}n.setVideoDimension(),n.handleMobile(),n.autoplay&&!n.isMobile()&&(n.player.setMuted(!0),n.playRequest()),n.editable&&window.parent.postMessage(JSON.stringify({name:'playerInitialized'}),window.location.href)}else n.hasError=!0;n.update()}},this.handleMobile=function(){n.isMobile()&&window.addEventListener('orientationchange',n.onOrientationChange.bind(n))},this.onLoadedMetadata=function(){o.default.send(l.Events.LOADED,{metric4:1}),n.videoCompleteRate=.9*n.player.player.duration()},this.onFullScreenChange=function(){o.default.send(l.Events.FULLSCREEN),n.hide('template'),n.checkRequierements(),n._moveHeader()},this.onOrientationChange=function(){var e=i.getOrientation();n.hide('template'),n.checkRequierements(),0!=e&&n.isMobile()&&n.player.isFullscreen()&&!n.playing&&n.playRequest()},this.onTouchEnd=function(){n.playing?n.player.player.pause():n.playRequest()},this.onLeavingPage=function(){n.playing&&n.sendPlaytimeEvent()},this.onVideoPlay=function(){var e=i.getAuthorizedStore(),t=i.getKey(e,'tc-firsttime');n.firstTime=!(null!==t||n.editable)||parseInt(t,10),n.firstPlay&&(o.default.send(l.Events.START,{metric5:1}),n.firstPlay=!1),n.playing=!0,n.startPlaytime=Date.now(),n.played||'undefined'==typeof window.hj||hj('tagRecording',['Played']),n.played=!0,n.ended=!1,n.closePanel(),n.isMobile()&&!n.player.isFullscreen()&&n.player.requestFullscreen(),n.checkRequierements(),n.update()},this.onVideoPause=function(){o.default.send(l.Events.PAUSE,{metric14:1}),n.playing=!1,null==n.marker||n.player.scrubbing()||n.isMobile()||n.share.visible||!n.overlayOnPause||n.openPanel(),n.sendPlaytimeEvent(),n.update()},this.onVideoEnded=function(){n.ended=!0,n.player.isFullscreen()&&n.player.exitFullscreen(),n.sendPlaytimeEvent(),o.default.send(l.Events.ENDED)},this.onVideoTimeUpdate=function(){var e=n.player.currentTime();e>=n.videoCompleteRate&&!n.isCompleted&&(o.default.send(l.Events.VIDEO_COMPLETED,{metric7:1}),n.isCompleted=!0),n.marker&&n.marker.end_time<e&&n.setMarker(null)},this.onMarkerReached=function(e){n.setMarker(e),n.firstTime&&window.setTimeout(n.hideTutorial.bind(n),1e4)},this.getMarkerCfg=function(){var e=i.getDefaultConfiguration();return n.player&&n.marker&&n.player.videoDetails&&n.player.videoDetails.meta.configurations&&n.player.videoDetails.meta.configurations[n.marker.poi_id]&&(e=n.player.videoDetails.meta.configurations[n.marker.poi_id]),e},this.setMarker=function(e){if(n.hide('template'),!e)i.removeClass(n.root.querySelectorAll('div[data-marker-key]'),'active'),n.marker=null;else if(!n.marker||e.key!==n.marker.key){i.removeClass(n.root.querySelectorAll('div[data-marker-key]'),'active'),n.marker=e,n.played&&n.isInlineTemplate()&&n.show('template',!1,!1);n.marker.poi_name||'';i.addClass(n.root.querySelector('div[data-marker-key="'+e.key+'"'),'active'),n.setPoiDimension()}n.updateCursor(),i.dispatchEvent('markerReached',n.marker),n.update()},this.isInlineTemplate=function(){var e=n.getMarkerCfg();return e&&e.hasOwnProperty('inline')&&e.inline},this.updateCursor=function(){var t=n.root.querySelector('video'),a='pointer',r=e.locale||'en_US';null!==n.marker&&!n.isInlineTemplate()&&n.overlayOnPause&&(a=p.default.getValue('player-explore-cursor'),a&&(a=a.replace(/%locale%/gi,r),a=a.replace(/%time%/gi,'?t='+Date.now()),a+=', auto')),i.style(t,{cursor:a})},this.slideDown=function(e){i.style(e,{marginTop:0,visibility:'visible'})},this.slideUp=function(e){var t=document.querySelector(e);i.style(e,{marginTop:'-'+t.offsetHeight+'px',visibility:'visible'})},this.show=function(e,t,a){t='undefined'!=typeof t&&t,a=!('undefined'!=typeof a)||a,n.hasOwnProperty(e)?n[e].visible=!0:n[e]={visible:!0},t&&n.player.pause();var r={marginTop:0,opacity:1,visibility:'visible',top:0};a&&i.style('#player-'+n.playerId+' .overlay-blurred',r),i.style('#player-'+n.playerId+' .overlay-'+e,r),window.setTimeout(n.generateThumbnail.bind(n),0)},this.hide=function(e,t,a){t='undefined'!=typeof t&&t,a='undefined'!=typeof a&&a,n.hasOwnProperty(e)?n[e].visible=!1:n[e]={visible:!1};var r={marginTop:0,opacity:0,visibility:'hidden',top:'-100%'};i.style('#player-'+n.playerId+' .overlay-'+e,r),a||i.style('#player-'+n.playerId+' .overlay-blurred',r),t&&n.playRequest()},this.hideTutorial=function(){n.firstTime=!1;var e=i.getAuthorizedStore();i.setKey(e,'tc-firsttime',0,365),n.update()},this.generateThumbnail=function(){try{var e=n.root.querySelector('video'),t=void 0,a=n.root.querySelector('.overlay-blurred');a.width=e.offsetWidth,a.height=e.offsetHeight;var r=a.getContext('2d');t=n.root.querySelector('video'),r.drawImage(t,0,0,a.width,a.height)}catch(t){}},this.setVideoDimension=function(){if(n.player.videoDetails.hasOwnProperty('meta')&&'undefined'!=typeof n.player.videoDetails.meta){var e=n.player.videoDetails.meta,t={dimension1:e.title||'',dimension2:e.producer_id||'',dimension3:e.tags?e.tags.join(', '):'',dimension4:n.player.videoDetails.meta.id};o.default.setVideoDimensions(t)}},this.setPoiDimension=function(){var t={dimension5:n.marker.poi_name};if(e.videoID&&(t.dimension8=n.marker.poi_id),n.marker&&n.marker.hasOwnProperty('details')){var a=n.marker.details.address||'',r=a.split(','),i=r.length?r[r.length-1]:'';t.dimension6=i,t.dimension7=n.marker.details.city_name}o.default.setPoiDimensions(t)},this.sendPlaytimeEvent=function(){var e=Date.now(),t=(e-n.startPlaytime)/1e3;if(0<n.startPlaytime&&0<t){t=t.toFixed(0);var a=Math.floor(n.player.player.duration());t>a&&(o.default.send(l.Events.PLAY_TIME_ERROR,{metric1:t}),t=a),o.default.send(l.Events.PLAY_TIME,{metric1:t})}},this.sendPaneltimeEvent=function(){var e=(Date.now()-n.startPanelTime)/1e3;0<e&&(e=e.toFixed(0),o.default.send(l.Events.DETAILS_PANEL_HIDE,{metric2:e}))},this.openPanel=function(e,t){e=!('undefined'!=typeof e)||e,t='undefined'==typeof t?!n.isInlineTemplate():t,null===n.marker||n.firstTime||(n.hide('share'),n.hide('header'),n.show('template',e,t),n.startPanelTime=Date.now(),o.default.send(l.Events.DETAILS_PANEL,{metric8:1}))},this.closePanel=function(){n.hide('template'),n.show('header',!1,!1)},this.openShare=function(){n.hide('template'),n.show('share',!0,!0)},this.closeShare=function(){n.hide('share')},this.currentMarker=function(){return n.marker},this.isUnsupported=function(){return n.player&&n.player.hasBeenInitialized()?n.player.hasError():0},this.playRequest=function(){n.player.ready().then(function(){n.player.hasBeenInitialized()&&(n.isMobile()&&n.player.requestFullscreen(),n.player.play())})},this.checkRequierements=function(){n.hide('requierement'),n.isMobile()&&n.player.isFullscreen()&&0===i.getOrientation()&&n.show('requierement',!0)},this._moveHeader=function(){var e=n.player.isFullscreen()?'#overlays-'+n.playerId:'#player-'+n.playerId,t=document.querySelector(e),a=document.querySelector('#player-'+n.playerId+' avs-header');t&&a&&t.insertBefore(a,t.firstChild)},this.isMobile=function(){return i.isMobile()}}),!1},function(e,t){'use strict';function a(e,t){e=e||[];var a=NodeList.prototype.isPrototypeOf(e)?e:[e];'string'==typeof e&&(a=document.querySelectorAll(e)),Array.prototype.forEach.call(a,function(e){Object.keys(t).forEach(function(a){e.style[a]=t[a]})})}Object.defineProperty(t,'__esModule',{value:!0}),t.htmlToElement=function(e){var t=document.createElement('template');return e=e.trim(),t.innerHTML=e,t.content.firstChild},t.style=a,t.removeClass=function(e,t){e=e||[];var a=NodeList.prototype.isPrototypeOf(e)?e:[e];'string'==typeof e&&(a=document.querySelectorAll(e));var n=!t;t=Array.isArray(t)?t:[t];for(var r=a,i=Array.isArray(r),s=0,r=i?r:r[Symbol.iterator]();;){var o;if(i){if(s>=r.length)break;o=r[s++]}else{if(s=r.next(),s.done)break;o=s.value}var l=o;if(!n){var d;(d=l.classList).remove.apply(d,t)}else{var p;(p=l.classList).remove.apply(p,l.classList)}}},t.addClass=function(e,t){e=e||[];var a=NodeList.prototype.isPrototypeOf(e)?e:[e];'string'==typeof e&&(a=document.querySelectorAll(e)),t=Array.isArray(t)?t:[t];for(var n=a,r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var s,o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var l=o;(s=l.classList).add.apply(s,t)}},t.getElementBounding=function(e){var t=void 0,a=new DOMRect(0,0,0,0);try{t=e.getBoundingClientRect()}catch(n){t=a}return t}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.dispatchEvent=function(e,t){var a=new CustomEvent(e,{detail:t||null});window.dispatchEvent(a)},t.debounce=function(e,t,a){var n=this,r=arguments,i=void 0;return function(){var s=n,o=r,l=a&&!i;clearTimeout(i),i=setTimeout(function(){i=null,a||e.apply(s,o)},t),l&&e.apply(s,o)}}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.injectJSONLd=function(e,t){var a=document.createElement('script');a.type='application/ld+json',a.text=e,t.appendChild(a)}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default=[{code:'ab',name:'Abkhaz'},{code:'aa',name:'Afar'},{code:'af',name:'Afrikaans'},{code:'ak',name:'Akan'},{code:'sq',name:'Albanian'},{code:'am',name:'Amharic'},{code:'ar',name:'Arabic'},{code:'an',name:'Aragonese'},{code:'hy',name:'Armenian'},{code:'as',name:'Assamese'},{code:'av',name:'Avaric'},{code:'ae',name:'Avestan'},{code:'ay',name:'Aymara'},{code:'az',name:'Azerbaijani'},{code:'bm',name:'Bambara'},{code:'ba',name:'Bashkir'},{code:'eu',name:'Basque'},{code:'be',name:'Belarusian'},{code:'bn',name:'Bengali, Bangla'},{code:'bh',name:'Bihari'},{code:'bi',name:'Bislama'},{code:'bs',name:'Bosnian'},{code:'br',name:'Breton'},{code:'bg',name:'Bulgarian'},{code:'my',name:'Burmese'},{code:'ca',name:'Catalan, Valencian'},{code:'ch',name:'Chamorro'},{code:'ce',name:'Chechen'},{code:'ny',name:'Chichewa, Chewa, Nyanja'},{code:'zh',name:'Chinese'},{code:'cv',name:'Chuvash'},{code:'kw',name:'Cornish'},{code:'co',name:'Corsican'},{code:'cr',name:'Cree'},{code:'hr',name:'Croatian'},{code:'cs',name:'Czech'},{code:'da',name:'Danish'},{code:'dv',name:'Divehi, Dhivehi, Maldivian;'},{code:'nl',name:'Dutch'},{code:'dz',name:'Dzongkha'},{code:'en',name:'English'},{code:'eo',name:'Esperanto'},{code:'et',name:'Estonian'},{code:'ee',name:'Ewe'},{code:'fo',name:'Faroese'},{code:'fj',name:'Fijian'},{code:'fi',name:'Finnish'},{code:'fr',name:'French'},{code:'ff',name:'Fula, Fulah, Pulaar, Pular'},{code:'gl',name:'Galician'},{code:'ka',name:'Georgian'},{code:'de',name:'German'},{code:'el',name:'Greek, Modern'},{code:'gn',name:'Guaran\xC3\xAD'},{code:'gu',name:'Gujarati'},{code:'ht',name:'Haitian, Haitian Creole'},{code:'ha',name:'Hausa'},{code:'he',name:'Hebrew (modern)'},{code:'hz',name:'Herero'},{code:'hi',name:'Hindi'},{code:'ho',name:'Hiri Motu'},{code:'hu',name:'Hungarian'},{code:'ia',name:'Interlingua'},{code:'id',name:'Indonesian'},{code:'ie',name:'Interlingue'},{code:'ga',name:'Irish'},{code:'ig',name:'Igbo'},{code:'ik',name:'Inupiaq'},{code:'io',name:'Ido'},{code:'is',name:'Icelandic'},{code:'it',name:'Italian'},{code:'iu',name:'Inuktitut'},{code:'ja',name:'Japanese'},{code:'jv',name:'Javanese'},{code:'kl',name:'Kalaallisut, Greenlandic'},{code:'kn',name:'Kannada'},{code:'kr',name:'Kanuri'},{code:'ks',name:'Kashmiri'},{code:'kk',name:'Kazakh'},{code:'km',name:'Khmer'},{code:'ki',name:'Kikuyu, Gikuyu'},{code:'rw',name:'Kinyarwanda'},{code:'ky',name:'Kyrgyz'},{code:'kv',name:'Komi'},{code:'kg',name:'Kongo'},{code:'ko',name:'Korean'},{code:'ku',name:'Kurdish'},{code:'kj',name:'Kwanyama, Kuanyama'},{code:'la',name:'Latin'},{code:'lb',name:'Luxembourgish, Letzeburgesch'},{code:'lg',name:'Ganda'},{code:'li',name:'Limburgish, Limburgan, Limburger'},{code:'ln',name:'Lingala'},{code:'lo',name:'Lao'},{code:'lt',name:'Lithuanian'},{code:'lu',name:'Luba-Katanga'},{code:'lv',name:'Latvian'},{code:'gv',name:'Manx'},{code:'mk',name:'Macedonian'},{code:'mg',name:'Malagasy'},{code:'ms',name:'Malay'},{code:'ml',name:'Malayalam'},{code:'mt',name:'Maltese'},{code:'mi',name:'M\xC4ori'},{code:'mr',name:'Marathi (Mar\xC4\xE1\xB9\xADh\xC4\xAB)'},{code:'mh',name:'Marshallese'},{code:'mn',name:'Mongolian'},{code:'na',name:'Nauru'},{code:'nv',name:'Navajo, Navaho'},{code:'nb',name:'Norwegian Bokm\xC3\xA5l'},{code:'nd',name:'North Ndebele'},{code:'ne',name:'Nepali'},{code:'ng',name:'Ndonga'},{code:'nn',name:'Norwegian Nynorsk'},{code:'no',name:'Norwegian'},{code:'ii',name:'Nuosu'},{code:'nr',name:'South Ndebele'},{code:'oc',name:'Occitan'},{code:'oj',name:'Ojibwe, Ojibwa'},{code:'om',name:'Oromo'},{code:'or',name:'Oriya'},{code:'os',name:'Ossetian, Ossetic'},{code:'pa',name:'Panjabi, Punjabi'},{code:'pi',name:'P\xC4li'},{code:'fa',name:'Persian (Farsi)'},{code:'pl',name:'Polish'},{code:'ps',name:'Pashto, Pushto'},{code:'pt',name:'Portuguese'},{code:'qu',name:'Quechua'},{code:'rm',name:'Romansh'},{code:'rn',name:'Kirundi'},{code:'ro',name:'Romanian'},{code:'ru',name:'Russian'},{code:'sa',name:'Sanskrit (Sa\xE1\xB9sk\xE1\xB9\u203Ata)'},{code:'sc',name:'Sardinian'},{code:'sd',name:'Sindhi'},{code:'se',name:'Northern Sami'},{code:'sm',name:'Samoan'},{code:'sg',name:'Sango'},{code:'sr',name:'Serbian'},{code:'gd',name:'Scottish Gaelic, Gaelic'},{code:'sn',name:'Shona'},{code:'si',name:'Sinhala, Sinhalese'},{code:'sk',name:'Slovak'},{code:'sl',name:'Slovene'},{code:'so',name:'Somali'},{code:'st',name:'Southern Sotho'},{code:'az',name:'South Azerbaijani'},{code:'es',name:'Spanish, Castilian'},{code:'su',name:'Sundanese'},{code:'sw',name:'Swahili'},{code:'ss',name:'Swati'},{code:'sv',name:'Swedish'},{code:'ta',name:'Tamil'},{code:'te',name:'Telugu'},{code:'tg',name:'Tajik'},{code:'th',name:'Thai'},{code:'ti',name:'Tigrinya'},{code:'bo',name:'Tibetan Standard, Tibetan, Central'},{code:'tk',name:'Turkmen'},{code:'tl',name:'Tagalog'},{code:'tn',name:'Tswana'},{code:'to',name:'Tonga (Tonga Islands)'},{code:'tr',name:'Turkish'},{code:'ts',name:'Tsonga'},{code:'tt',name:'Tatar'},{code:'tw',name:'Twi'},{code:'ty',name:'Tahitian'},{code:'ug',name:'Uyghur, Uighur'},{code:'uk',name:'Ukrainian'},{code:'ur',name:'Urdu'},{code:'uz',name:'Uzbek'},{code:'ve',name:'Venda'},{code:'vi',name:'Vietnamese'},{code:'vo',name:'Volap\xC3\xBCk'},{code:'wa',name:'Walloon'},{code:'cy',name:'Welsh'},{code:'wo',name:'Wolof'},{code:'fy',name:'Western Frisian'},{code:'xh',name:'Xhosa'},{code:'yi',name:'Yiddish'},{code:'yo',name:'Yoruba'},{code:'za',name:'Zhuang, Chuang'},{code:'zu',name:'Zulu'}]},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.isMobile=function(){return r.phone},t.isiOSDevice=function(){return r.apple.device},t.isAndroidDevice=function(){return r.android.device},t.getOrientation=function(){var e=0;return window.orientation?e=window.orientation:window.screen&&window.screen.orientation&&(e=Math.abs(window.screen.orientation.angle)),e};var n=a(69),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(n)},function(e,t){var a,n,r;/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */(function(i){var s=/iPhone/i,o=/iPod/i,l=/iPad/i,d=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,p=/Android/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,c=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,m=/Windows Phone/i,g=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,y=/BlackBerry/i,h=/BB10/i,f=/Opera Mini/i,_=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,v=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,T=function(e,t){return e.test(t)},k=function(e){var t=e||navigator.userAgent,a=t.split('[FBAN');if('undefined'!=typeof a[1]&&(t=a[0]),a=t.split('Twitter'),'undefined'!=typeof a[1]&&(t=a[0]),this.apple={phone:T(s,t),ipod:T(o,t),tablet:!T(s,t)&&T(l,t),device:T(s,t)||T(o,t)||T(l,t)},this.amazon={phone:T(u,t),tablet:!T(u,t)&&T(c,t),device:T(u,t)||T(c,t)},this.android={phone:T(u,t)||T(d,t),tablet:!T(u,t)&&!T(d,t)&&(T(c,t)||T(p,t)),device:T(u,t)||T(c,t)||T(d,t)||T(p,t)},this.windows={phone:T(m,t),tablet:T(g,t),device:T(m,t)||T(g,t)},this.other={blackberry:T(y,t),blackberry10:T(h,t),opera:T(f,t),firefox:T(b,t),chrome:T(_,t),device:T(y,t)||T(h,t)||T(f,t)||T(b,t)||T(_,t)},this.seven_inch=T(v,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,'undefined'==typeof window)return this},S=function(){var e=new k;return e.Class=k,e};'undefined'!=typeof e&&e.exports&&'undefined'==typeof window?e.exports=k:'undefined'!=typeof e&&e.exports&&'undefined'!=typeof window?e.exports=S():(n=[],a=i.isMobile=S(),r='function'==typeof a?a.apply(t,n):a,!(r!==void 0&&(e.exports=r)))})(this)},function(){'use strict'},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default={NONE:0,COOKIE:1,LOCAL_STORAGE:2,SESSION_STORAGE:3}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default={GET:'Get',POST:'Post',PUT:'Put',DELETE:'Delete'}},function(e,t){'use strict';function a(){var e=new Date().getTime(),t='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var a=0|(e+16*Math.random())%16;return e=Math.floor(e/16),('x'==t?a:8|3&a).toString(16)});return t}Object.defineProperty(t,'__esModule',{value:!0}),t.default=a},function(e,t){var a,n;/*!
 * universal-ga v1.2.0
 * https://github.com/daxko/universal-ga 
 *
 * Copyright (c) 2017 Daxko
 * MIT License
 */(function(){'use strict';function r(e){console.warn('[analytics]',e)}function i(){for(var e=[],t=arguments.length,a=0;a<t;a++)e.push(arguments[a]);for(;'undefined'==typeof e[e.length-1];)e.pop();this._namespace&&(e[0]=this._namespace+'.'+e[0],this._namespace=null),window&&'function'==typeof window.ga&&window.ga.apply(void 0,e)}var s=function(){return this};s.prototype={initialize:function(e,t){var a='https://www.google-analytics.com/';'object'==typeof e&&(t=e),t=t||{},t.debug?(a+='analytics_debug.js',delete t.debug):a+='analytics.js',function(e,t,n,i,s,r,a){e.GoogleAnalyticsObject=s,e[s]=e[s]||function(){(e[s].q=e[s].q||[]).push(arguments)},e[s].l=1*new Date,r=t.createElement(n),a=t.getElementsByTagName(n)[0],r.async=1,r.src=i,a.parentNode.insertBefore(r,a)}(window,document,'script',a,'ga'),e&&(t='{}'===JSON.stringify(t)?void 0:t,this.create(e,t))},create:function(e,t){return e?void i.call(this,'create',e,'auto',t):void r('tracking id is required to initialize.')},name:function(e){var t=new s;return t._namespace=e,t},set:function(e,t){return e&&e.length?(i.call(this,'set',e,t),this):void r('set: `key` is required.')},plugin:function(e,t){return e&&e.length?(i.call(this,'require',e,t),this):void r('plugin: `name` is required.')},pageview:function(e,t){return i.call(this,'send','pageview',e,t),this},screenview:function(e,t){return e?(t=t||{},t.screenName=e,i.call(this,'send','screenview',t),this):void r('screenview: `screenName` is required.')},event:function(e,t,a){return e&&t?(a&&'undefined'!=typeof a.eventValue&&'number'!=typeof a.eventValue&&(r('event: expected `options.eventValue` to be a Number.'),a.eventValue=void 0),a&&a.nonInteraction&&'boolean'!=typeof a.nonInteraction&&(r('event: expected `options.nonInteraction` to be a boolean.'),a.nonInteraction=!1),i.call(this,'send','event',e,t,a),this):void r('event: both `category` and `action` are required.')},timing:function(e,t,a,n){return e&&t&&'undefined'!=typeof a?'number'==typeof a?i.call(this,'send','timing',e,t,a,n):r('event: expected `timingValue` to be a Number.'):r('timing: `timingCategory`, `timingVar`, and `timingValue` are required.'),this},exception:function(e,t){return i.call(this,'send','exception',{exDescription:e,exFatal:!!t}),this},custom:function(e,t){return /(dimension|metric)[0-9]+/i.test(e)?(i.call(this,'set',e,t),this):void r('custom: key must match dimension[0-9]+ or metric[0-9]+')},initializeEcommerce:function(){this.plugin('ecommerce')},ecAddTransaction:function(e){return e&&e.id?(i.call(this,'ecommerce:addTransaction',e),this):void r('addTransaction: `transaction` is required and needs an `id`.')},ecAddItem:function(e){return e&&e.id&&e.name?(i.call(this,'ecommerce:addItem',e),this):void r('addItem: `productItem` is required and needs an `id` and a `name`.')},ecSend:function(){i.call(this,'ecommerce:send')},ecClear:function(){i.call(this,'ecommerce:clear')}};var o=new s;a=[],n=function(){return o}.apply(t,a),!(n!==void 0&&(e.exports=n))})(this)},function(){'use strict'},function(e,t,a){var n=a(3);n.tag2('localize','<span ref="localised" name="localised"><yield></yield></span>','localize,[data-is="localize"]{ display: inline-block; }','',function(){'use strict';var e=this;this.on('mount',function(){this.hasRefs=this.refs!=void 0,this.localise()}),this.on('update',function(){this.localise()}),this.localise=function(){var t=e.hasRefs?e.refs:e,a='undefined'==typeof t.localised?'':t.localised.innerHTML;0<a.length&&(t.localised.innerHTML=i18n.localise(t.localised.innerHTML))}}),!1},function(e,t,a){var n=a(3);n.tag2('avs-header','<div class="{\u2057overlay-header\u2057 : true, disabled : !parent.played || opts.marker === null}"> <i class="{getIconClass()}" if="{opts.marker && opts.marker.poi_name}" onclick="{parent.openPanel.bind(parent)}"></i> <div class="content-wrapper"> <div class="poi-container" if="{opts.marker !== null}" onclick="{parent.openPanel.bind(parent)}"> <div class="name">{opts.marker.poi_name || \'Not specified\'}</div> </div> </div> </div>','','',function(e){'use strict';var t=a(30),n=function(e){return e&&e.__esModule?e:{default:e}}(t);this.getIconClass=function(){var t='default';if(e.marker.hasOwnProperty('details')){var a=(0,n.default)(e.marker.details.types);a.length&&(t='fa-'+a[0])}return'fa type '+t}}),!1},function(e,t,a){var n=a(3);n.tag2('avs-tutorial','<div class="overlay-tutorial"> <img src="https://storage.googleapis.com/travelcast/images/tuto-avs.png"> </div>','','onclick="{parent.hideTutorial}"',function(){}),!1},function(e,t,a){var n=a(3);n.tag2('avs-requierement','<div class="close" onclick="{hide}"></div> <div class="requierement"> <img src="https://storage.googleapis.com/travelcast/images/landscape.svg"> <h1>Please turn your phone to continue</h1> <div onclick="{hide}" class="go-back"> Go back to the page </div> </div>','','',function(t){'use strict';this.hide=function(a){a.stopPropagation(),a.preventDefault(),t.player.exitFullscreen()}}),!1},function(e,t,a){var n=a(3);n.tag2('avs-share','<div id="{\'share-\'+parent.playerId}" class="share-container large"> <div class="close" onclick="{parent.hide.bind(this, \'share\')}"></div> <div class="shares-wrapper"> <h1>Share this video</h1> <input type="text" riot-value="{link}" onclick="this.select()" readonly> <div class="shares ssk-group"> <a href="" class="ssk ssk-icon ssk-facebook"></a> <a href="" class="ssk ssk-icon ssk-twitter"></a> <a href="" class="ssk ssk-icon ssk-google-plus"></a> <a href="" class="ssk ssk-icon ssk-pinterest"></a> </div> </div> </div>','','',function(e){'use strict';var t=this;this.mixin('template'),this.link=window.location.href,this.on('mount',function(){t.addResizeListener(t.el),t._overlay=t.root.querySelector('div[id^="share-"]'),t.onResize()}),this.on('updated',function(){if(SocialShareKit&&e.player&&e.player.videoDetails&&e.player.videoDetails.meta){t.link=e.player.videoDetails.meta.share_link||window.location.href;var a=t.parent.thumbnailUrl;SocialShareKit.init({reinitialize:!0,selector:'div[id^="share-"] .shares .ssk',url:t.link,text:'Watch '+e.player.videoDetails.meta.title+' on '+t.getHostName(t.link),image:a})}}),this.on('unmount',function(){t.removeLsiteners()}),this.getHostName=function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&2<t.length&&'string'==typeof t[2]&&0<t[2].length?t[2]:null},this.getOverlay=function(){return t._overlay}}),!1},function(e,t,a){var n=a(3);n.tag2('avs-template','<div id="{\'template-\'+parent.playerId}" class="{template:true, large:  !isInline(), small : isInline()}"> <div class="close" onclick="{hide}"></div> <template-large type="{type}" cfg="{opts.cfg}" marker="{opts.marker}" editable="{opts.editable}" photos="{photos}" if="{!isInline()}"></template-large> <template-small type="{type}" cfg="{opts.cfg}" marker="{opts.marker}" editable="{opts.editable}" photos="{photos}" if="{isInline()}"></template-small> </div>','','',function(e){'use strict';function t(e){return e&&e.__esModule?e:{default:e}}var n=this,r=a(6),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(r),s=a(4),o=t(s),l=a(12),d=t(l);a(82),a(9),a(83),a(84),this.mixin('template'),this.mixin('versioned'),this.MAX_NB_PHOTOS=5,this.type=d.default.Default,this.photos=[],this.currentID=null,this.loading=!0,this.on('mount',function(){this.addResizeListener(),this._overlay=this.root.querySelector('div[id^="template-"]'),this.onResize()}),this.on('update',function(){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.addFullscreenChangeListener(),this.type=this.getType(e.marker,e.cfg),window.setTimeout(this.onResize.bind(this),0),t=this.getVersion(),!(e.marker&&t!==this.currentID)){a.next=22;break}return this.currentID=t,a.prev=6,a.next=9,regeneratorRuntime.awrap(this.getPhotoReferences(e.player.videoDetails.meta.pictures,e.marker,e.cfg));case 9:this.photos=a.sent,a.next=16;break;case 12:a.prev=12,a.t0=a['catch'](6),console.warn('Unable to retrieve photos',e.marker),this.photos=[];case 16:return a.prev=16,this.loading=!1,this.update(),a.finish(16);case 20:a.next=23;break;case 22:this.loading=!1;case 23:case'end':return a.stop();}},null,this,[[6,12,16,20]])}),this.getVersioningKeys=function(){return['opts.marker.place_id','opts.marker.poi_id','opts.cfg.google_place_photos','opts.player.timestamp']},this.on('unmount',function(){this.removeLsiteners()}),this.isInline=function(){return e.cfg&&e.cfg.hasOwnProperty('inline')&&e.cfg.inline},this.hide=function(t){t.stopPropagation(),t.preventDefault(),n.parent.hide('template',!0)},this.getOverlay=function(){return n._overlay}}),!1},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.TemplateMixin=void 0;var i=a(6),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),o=a(19),l=a(8),d=n(l),p=a(11),u=n(p),c=a(12),m=n(c),g=a(18),y=n(g),h=a(4),f=n(h),_=t.TemplateMixin=function(){function e(){r(this,e),this.MAX_NB_PHOTOS=5,this.tplDim=null,this._listeners={},this._fullscrenListener=null}return e.prototype.addResizeListener=function(){this._listeners.resize=s.debounce(this.onResize.bind(this),250),window.addEventListener('resize',this._listeners.resize)},e.prototype.addFullscreenChangeListener=function(){var e=this;this._fullscrenListener||'undefined'==typeof this.opts.player||(this._fullscrenListener=function(){window.setTimeout(e.onResize.bind(e),0)},this.opts.player.on('fullscreenchange',this._fullscrenListener))},e.prototype.removeLsiteners=function(){var e=this;Object.keys(this._listeners).forEach(function(t){window.removeEventListener(t,e._listeners[t])}),this._fullscrenListener&&this.opts.player.off('fullscreenchange',this._fullscrenListener)},e.prototype.onResize=function(){var e=this.getOverlay();if(e&&(e.style='',this.tplDim=e.getBoundingClientRect(),this.opts.player)){var t=this.opts.player.hasOwnProperty('rootEl')?this.opts.player.rootEl:this.opts.player,a=t.getBoundingClientRect();this.opts.player&&this.opts.player.isFullscreen()&&(a=document.body.getBoundingClientRect());var n=this.getPadding(),r=Math.min((a.width-2*n)/this.tplDim.width,(a.height-2*n)/this.tplDim.height);r=1.15<r?1.15:r;var i='translate(-50%, -50%) scale3d('+r+','+r+', 1)';this.opts.cfg&&this.opts.cfg.inline&&(i='translateY(-50%) scale3d('+r+','+r+', 1)'),s.style(e,{transform:i})}},e.prototype.getPadding=function(){var e=document.querySelectorAll('meta[content~="viewport-fit=cover"]'),t=s.isiOSDevice()?e.length?25:10:0,a=this.opts.cfg&&this.opts.cfg.inline?60:20+t;return a},e.prototype.getPhotoReferences=function(e,t,a){var n=this;return new Promise(function(r,i){var s=t?t.poi_id:null,o=e&&e.hasOwnProperty(s),l=!a&&!o||a&&a.google_place_photos;if(!l){var p=o?e[s]:[];n.opts&&n.opts.editable&&(p=p.map(function(e){return e+'?t='+n.opts.player.getTimeStamp()})),r(p.length>n.MAX_NB_PHOTOS?p.slice(0,n.MAX_NB_PHOTOS):p)}else f.default.getPlace(t.place_id).then(function(e){if(e&&e.photos&&0<e.photos.length){var t=d.default.getValue(u.default.MAIN_SERVER);('undefined'==typeof t||null===t||'null'===t)&&(t='');var a=e.photos.map(function(e){return t+'/api/place/picture/'+e.photo_reference});r(a.length>n.MAX_NB_PHOTOS?a.slice(0,n.MAX_NB_PHOTOS):a)}}).catch(function(){i([])})})},e.prototype.getType=function(e,t){var a=m.default.Default;return t&&t.hasOwnProperty('template_type')?a=t.template_type:e&&e.hasOwnProperty('details')&&(a=-1<e.details.types.indexOf('lodging')?m.default.Hotel:m.default.Default),a},e.prototype.getCTALabel=function(e,t){var a=this.getCTADefaultLabel(e,t);return t&&t.cta_label&&(a=t.cta_label),a},e.prototype.getCTADefaultLabel=function(e,t){var a=this.getType(e,t),n=i18n.localise('template.button.booknow');return a===m.default.Destination?n=i18n.localise('template.button.getthere'):a===m.default.Hotel?n=i18n.localise('template.button.checkavailability'):a===m.default.Tour&&(n=i18n.localise('template.button.contactus')),n},e.prototype.getCTALink=function(e,t){e=e||this.opts.marker,t=t||this.opts.cfg;var a=this.getType(e,t),n='javascript:void(0)';if(t&&t.cta_url)n=t.cta_url;else if(a!==m.default.Default&&e&&e.deeplinks){var r=a===m.default.Hotel?'hotel':'flight';n=e.deeplinks[r]}return n},e.prototype.hasCtaLink=function(e,t){var a=this.getType(e,t);return a===m.default.Destination||!this.hasTips(e)||'javascript:void(0)'!==this.getCTALink(e,t)},e.prototype.onCtaLink=function(){return y.default.send(o.Events.DEEPLINK_CLICKED),!0},e.prototype.hasTips=function(e){return null!==e&&e.hasOwnProperty('tips_description')},e}();riot.mixin('template',new _)},function(e,t,a){var n=a(3);n.tag2('template-small','<div> <carousel class="photo-wrapper" photos="{opts.photos}" editable="{opts.editable}" marker="{opts.marker}"></carousel> <h1> <span class="name" if="{opts.marker && opts.marker.poi_name}">{opts.marker.poi_name}</span> <span class="no-data" if="{!opts.marker || !opts.marker.poi_name}"> <localize>template.label.notitle</localize> </span> </h1> <div class="{\u2057data-wrapper\u2057: true, highlighted : opts.type !== TemplateType.Default, expanded : !parent.hasCtaLink(opts.marker, opts.cfg)}"> <div class="tips-wrapper" if="{opts.type === TemplateType.Default}"> <blockquote> <span class="tips" if="{parent.hasTips(opts.marker)}"> {opts.marker.tips_description} </span> <span class="no-data" if="{!parent.hasTips(opts.marker)}"> <localize>template.label.notips</localize> </span> </blockquote> </div> <hotel class="hotel" cfg="{opts.cfg}" marker="{opts.marker}" editable="{opts.editable}" if="{opts.type === TemplateType.Hotel}"></hotel> <flight class="flight" marker="{opts.marker}" editable="{opts.editable}" if="{opts.type === TemplateType.Destination}"></flight> <additional-info class="contact" marker="{opts.marker}" if="{opts.type === TemplateType.GoingOut}"></additional-info> <tour class="tour" cfg="{opts.cfg}" marker="{opts.marker}" editable="{opts.editable}" if="{opts.type === TemplateType.Tour}"></tour> </div> <div class="actions-wrapper" if="{parent.hasCtaLink(opts.marker, opts.cfg)}"> <div class="cta"> <a href="{getCTALink()}" target="_blank" onclick="{parent.onCtaLink.bind(this)}">{parent.getCTALabel(opts.marker, opts.cfg)}</a> </div> </div> </div>','','',function(e){'use strict';var t=this,n=a(12),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(34),a(35),a(36),a(37),a(38),this.TemplateType=r.default,this.getCTALink=function(){return t.parent.getCTALink(e.marker,e.cfg)}}),!1},function(e,t,a){var n=a(3);n.tag2('template-large','<div class="{\u2057flex-container\u2057 : true}"> <carousel class="col" photos="{opts.photos}" editable="{opts.editable}" marker="{opts.marker}"></carousel> <div class="col"> <div class="{\u2057details-wrapper\u2057: true,           \u2057default\u2057 :  opts.type === TemplateType.Default,           \u2057expanded\u2057 : !parent.hasCtaLink(opts.marker, opts.cfg),           \u2057shrinked\u2057 : opts.type === TemplateType.Mixed}"> <h1> <span class="name" if="{opts.marker && opts.marker.poi_name}">{opts.marker.poi_name}</span> <span class="no-data" if="{!opts.marker || !opts.marker.poi_name}"> <localize>template.label.notitle</localize> </span> </h1> <div class="tips-wrapper" if="{opts.type !== TemplateType.Mixed}"> <blockquote> <span class="tips" if="{parent.hasTips(opts.marker)}"> {opts.marker.tips_description} </span> <span class="no-data" if="{!parent.hasTips(opts.marker)}"> <localize>template.label.notips</localize> </span> </blockquote> </div> </div> <div class="{\u2057map-wrapper\u2057: true, \u2057flex-container\u2057: true, expanded: opts.type === TemplateType.Default || opts.type === TemplateType.Mixed , highlighted :opts.type === TemplateType.Hotel}"> <static-map class="{col : opts.type === TemplateType.Hotel}" marker="{opts.marker}" cfg="{opts.cfg}"></static-map> <hotel class="col hotel" cfg="{opts.cfg}" marker="{opts.marker}" editable="{opts.editable}" if="{opts.type === TemplateType.Hotel}"></hotel> </div> <div class="{\u2057data-wrapper\u2057: true, highlighted : opts.type !== TemplateType.Hotel}" if="{opts.type !== TemplateType.Default}"> <div class="flex-container" if="{opts.type === TemplateType.Destination || opts.type === TemplateType.Mixed}"> <flight class="col flight" marker="{opts.marker}" editable="{opts.editable}"></flight> <budget class="col budget" marker="{opts.marker}" editable="{opts.editable}"></budget> </div> <div class="flex-container" if="{opts.type === TemplateType.Hotel || opts.type === TemplateType.GoingOut}"> <address class="col address" marker="{opts.marker}"></address> <additional-info class="col contact" marker="{opts.marker}"></additional-info> </div> <div class="flex-container" if="{opts.type === TemplateType.Tour}"> <tour class="tour" cfg="{opts.cfg}" marker="{opts.marker}" editable="{opts.editable}"></tour> </div> </div> <div class="actions-wrapper" if="{parent.hasCtaLink(opts.marker, opts.cfg)}"> <div class="cta"> <a href="{getCTALink()}" target="_blank" onclick="{parent.onCtaLink.bind(this)}"> {parent.getCTALabel(opts.marker, opts.cfg)} </a> </div> </div> </div> </div>','','',function(e){'use strict';var t=this,n=a(12),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(34),a(85),a(35),a(36),a(86),a(87),a(37),a(38),this.TemplateType=r.default,this.getCTALink=function(){return t.parent.getCTALink(e.marker,e.cfg)}}),!1},function(e,t,a){var n=a(3);n.tag2('static-map','<a class="avs-map" riot-style="background-image:url(\'{staticMapSrc}\');" href="{googleMapDeeplink}" target="_blank"> </a>','','',function(e){'use strict';function t(e){return e&&e.__esModule?e:{default:e}}var n=this,r=a(4),i=t(r),s=a(25),o=t(s),l=a(12),d=t(l),p=a(11),u=t(p),c=a(8),m=t(c);a(9),this.mixin('versioned'),this.loading=!0,this.DEFAULT='https://storage.googleapis.com/travelcast/images/no-map.svg',this.DEFAULT_LINK='javascript:void(0)',this.currentID=null,this.staticMapSrc=this.DEFAULT,this.googleMapDeeplink=this.DEFAULT_LINK,this.on('mount',function(){o.default.ready().then(function(){return n.generateGMapUrl()})}),this.on('update',function(){o.default.ready().then(function(){return n.generateGMapUrl()})}),this.generateGMapUrl=function(){var t=n.getVersion();if(e.marker&&t!==n.currentID){n.staticMapSrc=n.DEFAULT;n.root.getBoundingClientRect();n.currentID=t;var a=m.default.getValue(u.default.GOOGLE_MAP_API_KEY),r=o.default.getValue('primary').replace('#',''),s=[],l='https://maps.googleapis.com/maps/api/staticmap?size=410x140&scale=2&maptype=roadmap&key='+a+'&format=png&visual_refresh=true&style='+n.getMapStyle();if(e.cfg&&e.cfg.template_type===d.default.Tour)n.staticMapSrc=l+'&autoscale=1',s=e.cfg.places||[];else{var p=e.cfg&&e.cfg.hasOwnProperty('zoom_level')?e.cfg.zoom_level:12;l=l+'&zoom='+p,s=e.marker.place_id?[e.marker.place_id]:[]}n.googleMapDeeplink=0<s.length?'https://www.google.com/maps?q=place_id:'+s[0]:n.DEFAULT_LINK,n.update();var c=0;s.forEach(function(t,a){var o,d,p;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,regeneratorRuntime.awrap(i.default.getPlace(t));case 3:o=u.sent,o&&(d=o.geometry.location,p={lat:'function'==typeof d.lat?d.lat():d.lat,lng:'function'==typeof d.lng?d.lng():d.lng},l=l+'&markers=size:medium%7Ccolor:0x'+r+'%7Clabel:'+name+'%7C'+p.lat+','+p.lng),u.next=11;break;case 7:u.prev=7,u.t0=u['catch'](0),c++,console.warn('Unable to get place',e.marker.place_id);case 11:return u.prev=11,a===s.length-1&&(s.length===c?(n.googleMapDeeplink=n.DEFAULT_LINK,n.staticMapSrc=n.DEFAULT):n.staticMapSrc=l,n.loading=!1,n.update()),u.finish(11);case 14:case'end':return u.stop();}},null,n,[[0,7,11,14]])})}},this.getMapStyle=function(){return'feature:landscape.natural%7Celement:geometry.fill%7Ccolor:0xe0efef%7Cvisibility:on&style=feature:poi%7Cvisibility:on&style=feature:poi%7Celement:geometry.fill%7Ccolor:0xc0e8e8%7Chue:0x1900ff%7Cvisibility:on&style=feature:poi.business%7Cvisibility:off&style=feature:poi.government%7Cvisibility:off&style=feature:poi.medical%7Cvisibility:off&style=feature:poi.school%7Cvisibility:off&style=feature:poi.sports_complex%7Cvisibility:off&style=feature:road%7Celement:geometry%7Clightness:100%7Cvisibility:simplified&style=feature:road%7Celement:labels%7Cvisibility:off&style=feature:road.local%7Cvisibility:on&style=feature:transit.line%7Celement:geometry%7Clightness:700%7Cvisibility:on&style=feature:water%7Ccolor:0x00a9e0%7Cvisibility:on&size=480x360'},this.getVersioningKeys=function(){return['opts.marker.place_id','opts.cfg.zoom_level']}}),!1},function(e,t,a){var n=a(3);n.tag2('budget','<div class="vertical-wrapper"> <div class="from"><localize>template.label.average_cost_from</localize></div> <div class="price" if="{(user.data.initialized && user.data.geolocation) || opts.editable}"> <a href="{deeplink}" target="_blank" class="hyperlink" if="{!loading}"> <span if="{valueBudget}" class="budget-amount"> <raw content="{valueBudget}" if="{valueBudget}"></raw> </span> <span if="{!valueBudget}" class="not-found"> <localize>template.label.pricenotfound</localize> </span> </a> <loading if="{loading}"></loading> </div> <div class="subtitle" if="{(user.data.initialized && user.data.geolocation)|| opts.editable}"> <span if="{!opts.editable}">{valueFor}</span> <localize if="{opts.editable}">template.label.livedata</localize> </div> <div if="{user.data.initialized && !user.data.geolocation && !opts.editable}"> <div class="localisation-error"> <localize>template.error.localisation</localize> </div> </div> </div>','','',function(e){'use strict';function t(e){return e&&e.__esModule?e:{default:e}}var n=this,r=a(4),i=t(r),s=a(14),o=t(s);a(20),a(21),a(9),this.mixin('versioned'),this.user=o.default,this.loading=!0,this.currentID=null,this.date=moment().endOf('month').add(1,'d'),this.valueBudget=i18n.localise('format.currency',{value:'---',symbol:'\u20AC'}),this.deeplink='javascript:void(0)',this.on('mount',function(){return n.fakeData()}),this.on('update',function(){if(!e.editable){var t=n.getVersion();e.marker&&t!==n.currentID&&(n.currentID=t,n.loading=!0,n.user.ready(n.getData.bind(n)))}else n.loading=!1}),this.getData=function(){var t;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(i.default.getGeodataFromID(e.marker.place_id));case 3:t=a.sent,n.onGeoDataRecieved(t.response),a.next=12;break;case 7:a.prev=7,a.t0=a['catch'](0),n.loading=!1,n.valueBudget=null,console.error('Could  not retrieved budget data');case 12:return a.prev=12,n.update(),a.finish(12);case 15:case'end':return a.stop();}},null,n,[[0,7,12,15]])},this.fakeData=function(){n.valueBudget=i18n.localise('format.currency',{value:'---',symbol:o.default.data.currencySymbol}),n.deeplink='javascript:void(0)'},this.onGeoDataRecieved=function(e){n.loading=!1,e.country&&e.country.countryname.length?(n.valueBudget=n.formatPrice(e.country?Math.round(parseFloat(e.country.budget.value_midrange)):0),n.valueFor=e.country.countryname,n.countryCode=e.country.country_code,n.geoNameID='',n.deeplink='http://www.budgetyourtrip.com/budgetreportadv.php?country_code='+n.countryCode+'&startdate=&enddate=&categoryid=&budgettype=&triptype=&travelerno=',e.country.country_code&&'US'==e.country.country_code.toUpperCase()&&e.city.budget.value_midrange&&(n.valueBudget=n.formatPrice(Math.round(parseFloat(e.city.budget.value_midrange))),n.valueFor=e.city.asciiname,n.countryCode=e.city.country_code,n.geoNameID=e.city.geonameid,n.deeplink+='&geonameid='+n.geoNameID)):n.valueBudget=null},this.formatPrice=function(e){return e?i18n.localise('format.currency',{value:Math.round(e),symbol:o.default.data.currencySymbol}):o.default.data.currencySymbol}}),!1},function(e,t,a){var n=a(3);n.tag2('address','<div class="box vertical-wrapper"> <i class="fa fa-map-marker" aria-hidden="true"></i> <small> <localize>template.label.address</localize> </small> <span class="address value" if="{opts.marker && details && details.formatted_address}"> {details.formatted_address} </span> </div>','','',function(e){'use strict';var t=this,n=a(4),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a(9),this.mixin('versioned'),this.details=null,this.currentID=null,this.on('update',function(){var a;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.getVersion(),!(e.marker&&a!==t.currentID)){n.next=15;break}return t.currentID=a,n.prev=3,n.next=6,regeneratorRuntime.awrap(r.default.getPlace(e.marker.place_id));case 6:t.details=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n['catch'](3),console.warn('Unable to get place',e.marker.place_id);case 12:return n.prev=12,t.update(),n.finish(12);case 15:case'end':return n.stop();}},null,t,[[3,9,12,15]])})}),!1},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.default={OnCurrentTimeChanged:'onCurrentTimeChanged',OnVideoPOIChanged:'onVideoPOIChanged',OnVideoPOICfgChanged:'onVideoPOICfgChanged',OnVideoPOIAdded:'onVideoPOIAdded',OnVideoPOIRemoved:'onVideoPOIRemoved',OnBridgeEvent:'onBridgeEvent',OnVideoChanged:'onVideoChanged'}},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.AVSVideoService=void 0;var i=a(4),s=n(i),o=a(6),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o),d=a(25),p=n(d),u=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,i){function s(e){try{l(n.next(e))}catch(t){i(t)}}function o(e){try{l(n['throw'](e))}catch(t){i(t)}}function l(e){e.done?r(e.value):new a(function(t){t(e.value)}).then(s,o)}l((n=n.apply(e,t||[])).next())})},c=t.AVSVideoService=function(){function e(t){r(this,e),this.opts=t}return e.prototype.getCaptions=function(e){var t=this,a=[];return e.forEach(function(e){if(e.active){var n=function(e){return t.opts.hasOwnProperty('defaultCaption')&&t.opts.defaultCaption.toLocaleLowerCase()===e.language.toLocaleLowerCase()};a.push({kind:'captions',label:t.getTrackLabel(e),id:l.uuid(),src:e.source+'?t='+Date.now(),srclang:e.language,default:n(e)})}}),a},e.prototype.getData=function(){var e=this;return new Promise(function(t,a){var n=void 0,r=l.getKey(l.getAuthorizedStore(),'tc-env'),i=l.getToken();n=null===i?s.default.createSession():Promise.resolve({response:{token:i,env:r},headers:null}),n.then(e._onSessionCreated.bind(e),function(){return a(1)}).then(e._onVideoReceived.bind(e),function(){return a(2)}).then(e._onVimeoDetailsReceived.bind(e),function(){return a(3)}).then(function(){return u(e,void 0,void 0,regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.videoDetails.meta.producer_id){e.next=11;break}return e.prev=1,e.next=4,this.getBranding();case 4:a=e.sent,this.videoDetails.brand=a,e.next=11;break;case 8:e.prev=8,e.t0=e['catch'](1),console.warn('Not able to retrieve brand for '+this.opts.videoID);case 11:t(this.videoDetails);case 12:case'end':return e.stop();}},e,this,[[1,8]])}))})})},e.prototype.getBranding=function(){return u(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPoducer();case 3:return t=e.sent,a=t.response,n='',a&&a.links&&a.links.length&&(r=a.links,n=r[0].url),e.abrupt('return',{destination:n,destinationTarget:'_blank',image:p.default.getValue('watermark'),title:''});case 10:throw e.prev=10,e.t0=e['catch'](0),i='Not able to retrieve producer '+this.videoDetails.meta.producer_id,console.warn(i),new Error(i);case 15:case'end':return e.stop();}},e,this,[[0,10]])}))},e.prototype.normalize=function(e){var t=[];if(e.linearized_video_pois&&e.linearized_video_pois.length){var a={};e.video_pois.forEach(function(e){a[e.poi_id]=e}),t=e.linearized_video_pois.map(function(e){return e.time=e.start_time,a.hasOwnProperty(e.poi_id)&&(e.poi_name=a[e.poi_id].poi_name),e})}return t},e.prototype.getTrackLabel=function(e){for(var t=0;t<l.languages.length;t++)if(l.languages[t].code===e.language)return l.languages[t].name;return'Unknown'},e.prototype.getVideoResolution=function(e,t){var a=0,n=9999;for(var r in e.files){var i=e.files[r].width||t.width;i<=t.width&&i>=a&&(a=i),i<=n&&(n=e.files[r].width)}return 0==a?n:a},e.prototype.getVideoURLs=function(e){var t=Object.keys(e.files).map(function(t){return e.files[t]}).map(function(e){var t=e.link_secure;if(!e.width)return{src:t,type:'application/x-mpegURL',label:'Auto',res:Infinity};var a=960<e.width;return{src:t,type:'video/mp4',label:e.height+'p <small>'+(a?'HD':'SD')+'</small>',res:e.width}}).sort(function(e,t){var a=e.res-t.res;return 0<a?1:0>a?-1:0});return t},e.prototype._onSessionCreated=function(e){var t=e.response,a=l.getAuthorizedStore();return t.env&&l.setKey(a,'tc-env',t.env,7),l.setKey(a,l.getTravelCastKeyName(a),t.token,7),this.opts.hasOwnProperty('external')&&this.opts.external?s.default.getVideoBy({externalid:this.opts.videoID}):s.default.getVideo(this.opts.videoID)},e.prototype._onVideoReceived=function(e){var t=e.response instanceof Array?e.response[0]:e.response;t.video_pois.forEach(function(e){return e.end_time=!e.hasOwnProperty('end_time')||0>e.end_time?Infinity:e.end_time});var a=t.captions?t.captions:[];if(this.videoDetails={meta:t,pois:this.normalize(t),captions:this.getCaptions(a),selectedResolution:-Infinity,sources:[]},!this.opts.hasOwnProperty('external')||!this.opts.external){return s.default.getVimeoSource(this.opts.videoID,'files,pictures')}return this.videoDetails.sources=[{src:t.source}],Promise.resolve()},e.prototype.getPoducer=function(){return this.videoDetails.meta.producer_id?s.default.getProducer(this.videoDetails.meta.producer_id):new Promise(function(e){e({response:'null'})})},e.prototype._onVimeoDetailsReceived=function(e){if(!this.opts.hasOwnProperty('external')||!this.opts.external){var t=e.response;this.videoDetails.sources=this.getVideoURLs(t),this.videoDetails.selectedResolution=this.getVideoResolution(t,this.opts.dimensions)}return Promise.resolve()},e}()},function(e,t,a){'use strict';function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0}),t.InlineVideoService=void 0;var i=a(4),s=n(i),o=a(6),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o),d=a(12),u=n(d),p=t.InlineVideoService=function(){function e(t){r(this,e),this.opts=t}return e.prototype.getData=function(){var e=this;return new Promise(function(t,a){var n=void 0,r=l.getKey(l.getAuthorizedStore(),'tc-env'),i=l.getToken();n=null===i?s.default.createSession():Promise.resolve({response:{token:i,env:r},headers:null}),n.then(function(a){var n=a.response,r=l.getAuthorizedStore();n.env&&l.setKey(r,'tc-env',n.env,7),l.setKey(r,l.getTravelCastKeyName(r),n.token,7);var i=e.opts.sources||[];e.opts.hasOwnProperty('source')&&(i=[e.opts.source]);var s=e.normalize(e.opts.pois||[]);e.videoDetails={meta:{configurations:s.configurations,pictures:s.pictures},pois:s.pois,captions:[],selectedResolution:Infinity,sources:i},e.opts.hasOwnProperty('brand')&&(e.videoDetails.brand=e.opts.brand),t(e.videoDetails)}).catch(function(){a(1)})})},e.prototype.normalize=function(e){var t={pois:[],pictures:{},configurations:{}};return e.forEach(function(e){var a=Object.assign({},e);a.end_time=!a.hasOwnProperty('end_time')||0>a.end_time?Infinity:a.end_time,a.time=a.start_time,a.poi_id=l.uuid();var n=l.getDefaultConfiguration();n.template_type=u.default.Mixed,a.hasOwnProperty('configuration')&&(n=Object.assign(n,a.configuration)),a.hasOwnProperty('pictures')&&(t.pictures[a.poi_id]=a.pictures),t.pois.push(a),t.configurations[a.poi_id]=n}),t},e}()},function(e,t,a){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0}),t.BrandPlugin=void 0;var s=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(10),l=function(e){return e&&e.__esModule?e:{default:e}}(o),d=a(6),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(d),u=l.default.getPlugin('plugin'),c=l.default.getComponent('Button'),m=t.BrandPlugin=function(e){function t(a,i){n(this,t);var s=r(this,e.call(this,a)),o=new g(a,i);return a.ready(function(){a.getChild('controlBar').addChild(o,{},12)}),s}return i(t,e),s(t,[{key:'name',get:function(){return this._name},set:function(e){this._name=e}}]),t}(u),g=function(e){function t(a,i){n(this,t),i.name='BrandButton';var s=r(this,e.call(this,a,i)),o='<a href="'+i.destination+'" class="watermark" target="'+i.destinationTarget+'" style="background:'+i.image+'"></a>';return s.el().appendChild(p.htmlToElement(o)),s.controlText(i.title),s}return i(t,e),t.prototype.buildCSSClass=function(){return'vjs-brand-control vjs-control vjs-button'},t}(c)},function(){},function(e){e.exports=function(e){var a=t.call(e);return'[object Function]'===a||'function'==typeof e&&'[object RegExp]'!==a||'undefined'!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},function(e){var t=function(e){return e.replace(/^\s+|\s+$/g,'')},a=function(e){return'[object Array]'===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};for(var n={},r=t(e).split('\n'),s=0;s<r.length;s++){var i=r[s],o=i.indexOf(':'),l=t(i.slice(0,o)).toLowerCase(),d=t(i.slice(o+1));'undefined'==typeof n[l]?n[l]=d:a(n[l])?n[l].push(d):n[l]=[n[l],d]}return n}},function(e){e.exports=function(){for(var e={},a=0,n;a<arguments.length;a++)for(var r in n=arguments[a],n)t.call(n,r)&&(e[r]=n[r]);return e};var t=Object.prototype.hasOwnProperty},function(e){function t(e,t){this.name='ParsingError',this.code=e.code,this.message=t||e.message}function a(e){function t(e,t,a,n){return 3600*(0|e)+60*(0|t)+(0|a)+(0|n)/1e3}var a=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return a?a[3]?t(a[1],a[2],a[3].replace(':',''),a[4]):59<a[1]?t(a[1],a[2],0,a[4]):t(0,a[1],a[2],a[4]):null}function n(){this.values=y(null)}function r(e,t,a,n){var r=n?e.split(n):[e];for(var s in r)if('string'==typeof r[s]){var i=r[s].split(a);if(2===i.length){var o=i[0],l=i[1];t(o,l)}}}function i(e,i,s){function o(){var n=a(e);if(null===n)throw new t(t.Errors.BadTimeStamp,'Malformed timestamp: '+p);return e=e.replace(/^[^\sa-zA-Z-]+/,''),n}function l(e,t){var a=new n;r(e,function(e,t){switch(e){case'region':for(var n=s.length-1;0<=n;n--)if(s[n].id===t){a.set(e,s[n].region);break}break;case'vertical':a.alt(e,t,['rl','lr']);break;case'line':var r=t.split(','),i=r[0];a.integer(e,i),a.percent(e,i)?a.set('snapToLines',!1):null,a.alt(e,i,['auto']),2===r.length&&a.alt('lineAlign',r[1],['start','middle','end']);break;case'position':r=t.split(','),a.percent(e,r[0]),2===r.length&&a.alt('positionAlign',r[1],['start','middle','end']);break;case'size':a.percent(e,t);break;case'align':a.alt(e,t,['start','middle','end','left','right']);}},/:/,/\s/),t.region=a.get('region',null),t.vertical=a.get('vertical',''),t.line=a.get('line','auto'),t.lineAlign=a.get('lineAlign','start'),t.snapToLines=a.get('snapToLines',!0),t.size=a.get('size',100),t.align=a.get('align','middle'),t.position=a.get('position',{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=a.get('positionAlign',{start:'start',left:'start',middle:'middle',end:'end',right:'end'},t.align)}function d(){e=e.replace(/^\s+/,'')}var p=e;if(d(),i.startTime=o(),d(),'-->'!==e.substr(0,3))throw new t(t.Errors.BadTimeStamp,'Malformed time stamp (time stamps must be separated by \'-->\'): '+p);e=e.substr(3),d(),i.endTime=o(),d(),l(e,i)}function s(e,n){function r(){function e(e){return n=n.substr(e.length),e}if(!n)return null;var t=n.match(/^([^<]*)(<[^>]*>?)?/);return e(t[1]?t[1]:t[2])}function i(t){return h[t]}function s(e){for(;y=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(y[0],i);return e}function o(e,t){return!b[t.localName]||b[t.localName]===e.localName}function l(t,a){var n=f[t];if(!n)return null;var r=e.document.createElement(n);r.localName=n;var i=_[t];return i&&a&&(r[i]=a.trim()),r}for(var d=e.document.createElement('div'),p=d,u=[],c;null!==(c=r());){if('<'===c[0]){if('/'===c[1]){u.length&&u[u.length-1]===c.substr(2).replace('>','')&&(u.pop(),p=p.parentNode);continue}var t=a(c.substr(1,c.length-2)),g;if(t){g=e.document.createProcessingInstruction('timestamp',t),p.appendChild(g);continue}var y=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(g=l(y[1],y[3]),!g)continue;if(!o(p,g))continue;y[2]&&(g.className=y[2].substr(1).replace('.',' ')),u.push(y[1]),p.appendChild(g),p=g;continue}p.appendChild(e.document.createTextNode(s(c)))}return d}function o(e){for(var t=0,a;t<v.length;t++)if(a=v[t],e>=a[0]&&e<=a[1])return!0;return!1}function l(e){function t(e,t){for(var a=t.childNodes.length-1;0<=a;a--)e.push(t.childNodes[a])}function a(e){if(!e||!e.length)return null;var n=e.pop(),r=n.textContent||n.innerText;if(r){var i=r.match(/^.*(\n|\r)/);return i?(e.length=0,i[0]):r}return'ruby'===n.tagName?a(e):n.childNodes?(t(e,n),a(e)):void 0}var n=[],r='',s;if(!e||!e.childNodes)return'ltr';for(t(n,e);r=a(n);)for(var l=0;l<r.length;l++)if(s=r.charCodeAt(l),o(s))return'rtl';return'ltr'}function d(e){if('number'==typeof e.line&&(e.snapToLines||0<=e.line&&100>=e.line))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,a=t.textTrackList,n=0,r=0;r<a.length&&a[r]!==t;r++)'showing'===a[r].mode&&n++;return-1*++n}function p(){}function u(e,t,a){p.call(this),this.cue=t,this.cueDiv=s(e,t.text);var n={color:'rgba(255, 255, 255, 1)',backgroundColor:'rgba(0, 0, 0, 0.8)',position:'relative',left:0,right:0,top:0,bottom:0,display:'inline',writingMode:''===t.vertical?'horizontal-tb':'lr'===t.vertical?'vertical-lr':'vertical-rl',unicodeBidi:'plaintext'};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement('div'),n={direction:l(this.cueDiv),writingMode:''===t.vertical?'horizontal-tb':'lr'===t.vertical?'vertical-lr':'vertical-rl',unicodeBidi:'plaintext',textAlign:'middle'===t.align?'center':t.align,font:a.font,whiteSpace:'pre-line',position:'absolute'},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case'start':r=t.position;break;case'middle':r=t.position-t.size/2;break;case'end':r=t.position-t.size;}''===t.vertical?this.applyStyles({left:this.formatStyle(r,'%'),width:this.formatStyle(t.size,'%')}):this.applyStyles({top:this.formatStyle(r,'%'),height:this.formatStyle(t.size,'%')}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,'px'),bottom:this.formatStyle(e.bottom,'px'),left:this.formatStyle(e.left,'px'),right:this.formatStyle(e.right,'px'),height:this.formatStyle(e.height,'px'),width:this.formatStyle(e.width,'px')})}}function c(e){var t,a,n,r;if(e.div){a=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var i=(i=e.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects();e=e.div.getBoundingClientRect(),t=i?Math.max(i[0]&&i[0].height||0,e.height/i.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||a,this.bottom=e.bottom||r+(e.height||a),this.width=e.width||n,this.lineHeight=t===void 0?e.lineHeight:t}function m(e,t,a,n){function r(e,t){for(var r=new c(e),s=1,o=0,i;o<t.length;o++){for(;e.overlapsOppositeAxis(a,t[o])||e.within(a)&&e.overlapsAny(n);)e.move(t[o]);if(e.within(a))return e;var l=e.intersectPercentage(a);s>l&&(i=new c(e),s=l),e=new c(r)}return i||r}var i=new c(t),s=t.cue,o=d(s),l=[];if(s.snapToLines){var p;switch(s.vertical){case'':l=['+y','-y'],p='height';break;case'rl':l=['+x','-x'],p='width';break;case'lr':l=['-x','+x'],p='width';}var u=i.lineHeight,m=u*Math.round(o),g=a[p]+u,y=l[0];Math.abs(m)>g&&(m=0>m?-1:1,m*=Math.ceil(g/u)*u),0>o&&(m+=''===s.vertical?a.height:a.width,l=l.reverse()),i.move(y,m)}else{var h=100*(i.lineHeight/a.height);switch(s.lineAlign){case'middle':o-=h/2;break;case'end':o-=h;}switch(s.vertical){case'':t.applyStyles({top:t.formatStyle(o,'%')});break;case'rl':t.applyStyles({left:t.formatStyle(o,'%')});break;case'lr':t.applyStyles({right:t.formatStyle(o,'%')});}l=['+y','-x','+x','-y'],i=new c(t)}var f=r(i,l);t.move(f.toCSSCompatValues(a))}function g(){}var y=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error('Object.create shim only accepts one parameter.');return e.prototype=t,new e}}();t.prototype=y(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:'Malformed WebVTT signature.'},BadTimeStamp:{code:1,message:'Malformed time stamp.'}},n.prototype={set:function(e,t){this.get(e)||''===t||(this.values[e]=t)},get:function(e,t,a){return a?this.has(e)?this.values[e]:t[a]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var a=0;a<r.length;++a)if(t===r[a]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var a;return!!((a=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),0<=t&&100>=t))&&(this.set(e,t),!0)}};var h={"&amp;":'&',"&lt;":'<',"&gt;":'>',"&lrm;":'\u200E',"&rlm;":'\u200F',"&nbsp;":'\xA0'},f={c:'span',i:'i',b:'b',u:'u',ruby:'ruby',rt:'rt',v:'span',lang:'span'},_={v:'title',lang:'lang'},b={rt:'ruby'},v=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];p.prototype.applyStyles=function(e,t){for(var a in t=t||this.div,e)e.hasOwnProperty(a)&&(t.style[a]=e[a])},p.prototype.formatStyle=function(e,t){return 0===e?0:e+t},u.prototype=y(p.prototype),u.prototype.constructor=u,c.prototype.move=function(e,t){t=t===void 0?this.lineHeight:t;'+x'===e?(this.left+=t,this.right+=t):'-x'===e?(this.left-=t,this.right-=t):'+y'===e?(this.top+=t,this.bottom+=t):'-y'===e?(this.top-=t,this.bottom-=t):void 0},c.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},c.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},c.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},c.prototype.overlapsOppositeAxis=function(e,t){return'+x'===t?this.left<e.left:'-x'===t?this.right>e.right:'+y'===t?this.top<e.top:'-y'===t?this.bottom>e.bottom:void 0},c.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),a=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top));return t*a/(this.height*this.width)},c.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},c.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,a=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var r={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||a};return r},g.StringDecoder=function(){return{decode:function(e){if(!e)return'';if('string'!=typeof e)throw new Error('Error - expected string data.');return decodeURIComponent(encodeURIComponent(e))}}},g.convertCueToDOMTree=function(e,t){return e&&t?s(e,t):null};g.processCues=function(e,t,a){function n(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!e||!t||!a)return null;for(;a.firstChild;)a.removeChild(a.firstChild);var r=e.document.createElement('div');if(r.style.position='absolute',r.style.left='0',r.style.right='0',r.style.top='0',r.style.bottom='0',r.style.margin='1.5%',a.appendChild(r),!n(t)){for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState);return}var o=[],l=c.getSimpleBoxPosition(r),i=Math.round(100*(l.height*.05))/100,d={font:i+'px '+'sans-serif'};(function(){for(var a=0,n,i;a<t.length;a++)i=t[a],n=new u(e,i,d),r.appendChild(n.div),m(e,n,l,o),i.displayState=n.div,o.push(c.getSimpleBoxPosition(n))})()},g.Parser=function(e,t,a){a||(a=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state='INITIAL',this.buffer='',this.decoder=a||new TextDecoder('utf8'),this.regionList=[]},g.Parser.prototype={reportOrThrowError:function(a){if(a instanceof t)this.onparsingerror&&this.onparsingerror(a);else throw a},parse:function(e){function s(){for(var e=p.buffer,t=0;t<e.length&&'\r'!==e[t]&&'\n'!==e[t];)++t;var a=e.substr(0,t);return'\r'===e[t]&&++t,'\n'===e[t]&&++t,p.buffer=e.substr(t),a}function o(e){var t=new n;if(r(e,function(e,a){switch(e){case'id':t.set(e,a);break;case'width':t.percent(e,a);break;case'lines':t.integer(e,a);break;case'regionanchor':case'viewportanchor':var r=a.split(',');if(2!==r.length)break;var i=new n;if(i.percent('x',r[0]),i.percent('y',r[1]),!i.has('x')||!i.has('y'))break;t.set(e+'X',i.get('x')),t.set(e+'Y',i.get('y'));break;case'scroll':t.alt(e,a,['up']);}},/=/,/\s/),t.has('id')){var a=new(p.vttjs.VTTRegion||p.window.VTTRegion);a.width=t.get('width',100),a.lines=t.get('lines',3),a.regionAnchorX=t.get('regionanchorX',0),a.regionAnchorY=t.get('regionanchorY',100),a.viewportAnchorX=t.get('viewportanchorX',0),a.viewportAnchorY=t.get('viewportanchorY',100),a.scroll=t.get('scroll',''),p.onregion&&p.onregion(a),p.regionList.push({id:t.get('id'),region:a})}}function l(e){var t=new n;r(e,function(e,n){'MPEGT'===e?t.integer(e+'S',n):'LOCA'===e?t.set(e+'L',a(n)):void 0},/[^\d]:/,/,/),p.ontimestampmap&&p.ontimestampmap({MPEGTS:t.get('MPEGTS'),LOCAL:t.get('LOCAL')})}function d(e){e.match(/X-TIMESTAMP-MAP/)?r(e,function(e,t){'X-TIMESTAMP-MAP'===e?l(t):void 0},/=/):r(e,function(e,t){'Region'===e?o(t):void 0},/:/)}var p=this;e&&(p.buffer+=p.decoder.decode(e,{stream:!0}));try{var u;if('INITIAL'===p.state){if(!/\r\n|\n/.test(p.buffer))return this;u=s();var c=u.match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new t(t.Errors.BadSignature);p.state='HEADER'}for(var g=!1;p.buffer;){if(!/\r\n|\n/.test(p.buffer))return this;switch(g?g=!1:u=s(),p.state){case'HEADER':/:/.test(u)?d(u):!u&&(p.state='ID');continue;case'NOTE':u||(p.state='ID');continue;case'ID':if(/^NOTE($|[ \t])/.test(u)){p.state='NOTE';break}if(!u)continue;if(p.cue=new(p.vttjs.VTTCue||p.window.VTTCue)(0,0,''),p.state='CUE',-1===u.indexOf('-->')){p.cue.id=u;continue}case'CUE':try{i(u,p.cue,p.regionList)}catch(t){p.reportOrThrowError(t),p.cue=null,p.state='BADCUE';continue}p.state='CUETEXT';continue;case'CUETEXT':var y=-1!==u.indexOf('-->');if(!u||y&&(g=!0)){p.oncue&&p.oncue(p.cue),p.cue=null,p.state='ID';continue}p.cue.text&&(p.cue.text+='\n'),p.cue.text+=u;continue;case'BADCUE':u||(p.state='ID');continue;}}}catch(t){p.reportOrThrowError(t),'CUETEXT'===p.state&&p.cue&&p.oncue&&p.oncue(p.cue),p.cue=null,p.state='INITIAL'===p.state?'BADWEBVTT':'BADCUE'}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||'HEADER'===a.state)&&(a.buffer+='\n\n',a.parse()),'INITIAL'===a.state)throw new t(t.Errors.BadSignature)}catch(t){a.reportOrThrowError(t)}return a.onflush&&a.onflush(),this}},e.exports=g},function(e){function t(e){if('string'!=typeof e)return!1;var t=i[e.toLowerCase()];return!!t&&e.toLowerCase()}function a(e){if('string'!=typeof e)return!1;var t=s[e.toLowerCase()];return!!t&&e.toLowerCase()}function n(e,n,i){this.hasBeenReset=!1;var s='',o=!1,l=e,d=n,p=i,u=null,c='',m=!0,g='auto',y='start',h=50,f='middle',_=50,b='middle';Object.defineProperties(this,{id:{enumerable:!0,get:function(){return s},set:function(e){s=''+e}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if('number'!=typeof e)throw new TypeError('Start time must be set to a number.');l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return d},set:function(e){if('number'!=typeof e)throw new TypeError('End time must be set to a number.');d=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return p},set:function(e){p=''+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var a=t(e);if(!1===a)throw new SyntaxError('An invalid or illegal string was specified.');c=a,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return g},set:function(e){if('number'!=typeof e&&e!==r)throw new SyntaxError('An invalid number or illegal string was specified.');g=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return y},set:function(e){var t=a(e);if(!t)throw new SyntaxError('An invalid or illegal string was specified.');y=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return h},set:function(e){if(0>e||100<e)throw new Error('Position must be between 0 and 100.');h=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=a(e);if(!t)throw new SyntaxError('An invalid or illegal string was specified.');f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return _},set:function(e){if(0>e||100<e)throw new Error('Size must be between 0 and 100.');_=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(e){var t=a(e);if(!t)throw new SyntaxError('An invalid or illegal string was specified.');b=t,this.hasBeenReset=!0}}}),this.displayState=void 0}var r='auto',i={"":1,lr:1,rl:1},s={start:1,middle:1,end:1,left:1,right:1};n.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=n},function(e){function t(e){if('string'!=typeof e)return!1;var t=n[e.toLowerCase()];return!!t&&e.toLowerCase()}function a(e){return'number'==typeof e&&0<=e&&100>=e}var n={"":!0,up:!0};e.exports=function(){var e=100,n=3,r=0,i=100,s=0,o=100,l='';Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!a(t))throw new Error('Width must be between 0 and 100.');e=t}},lines:{enumerable:!0,get:function(){return n},set:function(e){if('number'!=typeof e)throw new TypeError('Lines must be set to a number.');n=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!a(e))throw new Error('RegionAnchorX must be between 0 and 100.');i=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!a(e))throw new Error('RegionAnchorY must be between 0 and 100.');r=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!a(e))throw new Error('ViewportAnchorY must be between 0 and 100.');o=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!a(e))throw new Error('ViewportAnchorX must be between 0 and 100.');s=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var a=t(e);if(!1===a)throw new SyntaxError('An invalid or illegal string was specified.');l=a}}})}},function(e,t,a){'use strict';var n=a(41),r=a(40),i=function(){i.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new u(0,0),new u(0,1),new u(1,0),new u(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on('data',this.trigger.bind(this,'data')),e.on('partialdone',this.trigger.bind(this,'partialdone')),e.on('done',this.trigger.bind(this,'done'))},this)};i.prototype=new n,i.prototype.push=function(e){var t,a,n;if('sei_rbsp'===e.nalUnitType)return(t=r.parseSei(e.escapedRBSP),t.payloadType===r.USER_DATA_REGISTERED_ITU_T_T35)?(a=r.parseUserData(t),a?e.dts<this.latestDts_?void(this.ignoreNextEqualDts_=!0):e.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1))):void(n=r.parseCaptionPackets(e.pts,a),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts):void 0):void 0},i.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return'flush'===e?t.flush():t.partialFlush()},this)},i.prototype.flushStream=function(e){return this.captionPackets_.length?void(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){2>e.type&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):void this.flushCCStreams(e)},i.prototype.flush=function(){return this.flushStream('flush')},i.prototype.partialFlush=function(){return this.flushStream('partialFlush')},i.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},i.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1);null===this.activeCea608Channel_[e.type]||this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},i.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},i.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},i.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},o=function(e){return null===e?'':(e=s[e]||e,String.fromCharCode(e))},l=14,d=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],p=function(){for(var e=[],t=l+1;t--;)e.push('');return e},u=function(e,t){u.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_='CC'+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(e){var t,a,n,r,i;if(t=32639&e.ccData,t===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_='popOn';else if(t===this.END_OF_CAPTION_)this.mode_='popOn',this.clearFormatting(e.pts),this.flushDisplayed(e.pts),a=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=a,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)'popOn'===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=p();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=p();else if(t===this.RESUME_DIRECT_CAPTIONING_)'paintOn'!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=p()),this.mode_='paintOn',this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))n=(3&n)<<8,i=o(n|r),this[this.mode_](e.pts,i),this.column_++;else if(this.isExtCharacter(n,r))'popOn'===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),n=(3&n)<<8,i=o(n|r),this[this.mode_](e.pts,i),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts,' '),this.column_++,14==(14&r)&&this.addFormatting(e.pts,['i']),1==(1&r)&&this.addFormatting(e.pts,['u']);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=d.indexOf(7968&t);'rollUp'===this.mode_&&(0>s-this.rollUpRows_+1&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf('u')&&this.addFormatting(e.pts,['u']),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,['i'])}else this.isNormalChar(n)&&(0===r&&(r=null),i=o(n),i+=o(r),this[this.mode_](e.pts,i),this.column_+=i.length)}};u.prototype=new n,u.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(t){return console.error('Skipping malformed caption.'),''}}).join('\n').replace(/^\n+|\n+$/g,'');t.length&&this.trigger('data',{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},u.prototype.reset=function(){this.mode_='popOn',this.topRow_=0,this.startPts_=0,this.displayed_=p(),this.nonDisplayed_=p(),this.lastControlCode_=null,this.column_=0,this.row_=l,this.rollUpRows_=2,this.formatting_=[]},u.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},u.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&63>=t},u.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&63>=t},u.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&47>=t},u.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&35>=t},u.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&127>=t},u.prototype.isColorPAC=function(e){return 64<=e&&79>=e||96<=e&&127>=e},u.prototype.isNormalChar=function(e){return 32<=e&&127>=e},u.prototype.setRollUp=function(e,t){if('rollUp'!==this.mode_&&(this.row_=l,this.mode_='rollUp',this.flushDisplayed(e),this.nonDisplayed_=p(),this.displayed_=p()),void 0!==t&&t!==this.row_)for(var a=0;a<this.rollUpRows_;a++)this.displayed_[t-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]='';void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},u.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var a=t.reduce(function(e,t){return e+'<'+t+'>'},'');this[this.mode_](e,a)},u.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+'</'+t+'>'},'');this.formatting_=[],this[this.mode_](e,t)}},u.prototype.popOn=function(e,t){var a=this.nonDisplayed_[this.row_];a+=t,this.nonDisplayed_[this.row_]=a},u.prototype.rollUp=function(e,t){var a=this.displayed_[this.row_];a+=t,this.displayed_[this.row_]=a},u.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]='';for(e=this.row_+1;e<l+1;e++)this.displayed_[e]='';for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=''},u.prototype.paintOn=function(e,t){var a=this.displayed_[this.row_];a+=t,this.displayed_[this.row_]=a},e.exports={CaptionStream:i,Cea608Stream:u}},function(e,t,a){'use strict';var n=a(41),r='shared',i=function(e,t){var a=1;for(e>t&&(a=-1);Math.abs(t-e)>4294967296;)e+=a*8589934592;return e},s=function(e){var t,a;s.prototype.init.call(this),this.type_=e||r,this.push=function(e){this.type_!==r&&e.type!==this.type_||(a===void 0&&(a=e.dts),e.dts=i(e.dts,a),e.pts=i(e.pts,a),t=e.dts,this.trigger('data',e))},this.flush=function(){a=t,this.trigger('done')},this.endTimeline=function(){this.flush(),this.trigger('endedtimeline')},this.discontinuity=function(){a=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger('reset')}};s.prototype=new n,e.exports={TimestampRolloverStream:s,handleRollover:i}},function(e,t,a){'use strict';var n=a(42),r=function(e){var t=31&e[1];return t<<=8,t|=e[2],t},s=function(e){return!!(64&e[1])},o=function(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t},i=function(e){return 5===e?'slice_layer_without_partitioning_rbsp_idr':6===e?'sei_rbsp':7===e?'seq_parameter_set_rbsp':8===e?'pic_parameter_set_rbsp':9===e?'access_unit_delimiter_rbsp':null};e.exports={parseType:function(e,t){var a=r(e);if(0===a)return'pat';return a===t?'pmt':t?'pes':null},parsePat:function(e){var t=s(e),a=4+o(e);return t&&(a+=e[a]+1),(31&e[a+10])<<8|e[a+11]},parsePmt:function(e){var t={},a=s(e),n=4+o(e);if(a&&(n+=e[n]+1),!!(1&e[n+5])){var r,l,d;r=(15&e[n+1])<<8|e[n+2],l=3+r-4,d=(15&e[n+10])<<8|e[n+11];for(var p=12+d,u;p<l;)u=n+p,t[(31&e[u+1])<<8|e[u+2]]=e[u],p+=((15&e[u+3])<<8|e[u+4])+5;return t}},parsePayloadUnitStartIndicator:s,parsePesType:function(e,t){var a=r(e),i=t[a];return i===n.H264_STREAM_TYPE?'video':i===n.ADTS_STREAM_TYPE?'audio':i===n.METADATA_STREAM_TYPE?'timed-metadata':null},parsePesTime:function(e){var t=s(e);if(!t)return null;var a=4+o(e);if(a>=e.byteLength)return null;var n=null,r;return r=e[a+7],192&r&&(n={},n.pts=(14&e[a+9])<<27|(255&e[a+10])<<20|(254&e[a+11])<<12|(255&e[a+12])<<5|(254&e[a+13])>>>3,n.pts*=4,n.pts+=(6&e[a+13])>>>1,n.dts=n.pts,64&r&&(n.dts=(14&e[a+14])<<27|(255&e[a+15])<<20|(254&e[a+16])<<12|(255&e[a+17])<<5|(254&e[a+18])>>>3,n.dts*=4,n.dts+=(6&e[a+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+o(e),a=e.subarray(t),n=0,r=0,s=!1,l;r<a.byteLength-3;r++)if(1===a[r+2]){n=r+5;break}for(;n<a.byteLength;)switch(a[n]){case 0:if(0!==a[n-1]){n+=2;break}else if(0!==a[n-2]){n++;break}r+3!=n-2&&(l=i(31&a[r+3]),'slice_layer_without_partitioning_rbsp_idr'===l&&(s=!0));do n++;while(1!==a[n]&&n<a.length);r=n-2,n+=3;break;case 1:if(0!==a[n-1]||0!==a[n-2]){n+=3;break}l=i(31&a[r+3]),'slice_layer_without_partitioning_rbsp_idr'===l&&(s=!0),r=n-2,n+=3;break;default:n+=3;}return a=a.subarray(r),n-=r,r=0,a&&3<a.byteLength&&(l=i(31&a[r+3]),'slice_layer_without_partitioning_rbsp_idr'===l&&(s=!0)),s}}},function(e){'use strict';var t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},n=function(e,t,a){var n='',r;for(r=t;r<a;r++)n+='%'+('00'+e[r].toString(16)).slice(-2);return n},r=function(e,t,a){return unescape(n(e,t,a))};e.exports={isLikelyAacData:function(e){return!(73!==e[0]||68!==e[1]||51!==e[2])},parseId3TagSize:function(e,t){var a=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],n=e[t+5];return(16&n)>>4?a+20:a+10},parseAdtsSize:function(e,t){var a=(224&e[t+5])>>5,n=e[t+4]<<3,r=e[t+3]&6144;return r|n|a},parseType:function(e,t){if(e[t]===73&&e[t+1]===68&&e[t+2]===51)return'timed-metadata';return!0&e[t]&&240==(240&e[t+1])?'audio':null},parseSampleRate:function(e){for(var a=0;a+5<e.length;){if(255!==e[a]||240!=(246&e[a+1])){a++;continue}return t[(60&e[a+2])>>>2]}return null},parseAacTimestamp:function(e){var t,n,s,o;t=10,64&e[5]&&(t+=4,t+=a(e.subarray(10,14)));do{if(n=a(e.subarray(t+4,t+8)),1>n)return null;if(o=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),'PRIV'===o){s=e.subarray(t+10,t+n+10);for(var l=0;l<s.byteLength;l++)if(0===s[l]){var i=r(s,0,l);if('com.apple.streaming.transportStreamTimestamp'===i){var p=s.subarray(l+1),d=(1&p[3])<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;return d*=4,d+=3&p[7],d}break}}t+=10,t+=n}while(t<e.byteLength);return null}}},function(e){var t=9e4,a,n,r,i,s,o,l;a=function(e){return e*t},n=function(e,t){return e*t},r=function(e){return e/t},i=function(e,t){return e/t},s=function(e,t){return a(i(e,t))},o=function(e,t){return n(r(e),t)},l=function(e,t,a){return r(a?e:e-t)},e.exports={ONE_SECOND_IN_TS:t,secondsToVideoTs:a,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:i,audioTsToVideoTs:s,videoTsToAudioTs:o,metadataTsToSeconds:l}},function(e,t,a){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0}),t.IOSFullscreenPlugin=void 0;var s=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(10),l=function(e){return e&&e.__esModule?e:{default:e}}(o),d=a(6),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(d),u=l.default.getPlugin('plugin'),c=l.default.getComponent('Button'),m=t.IOSFullscreenPlugin=function(e){function t(a,i){n(this,t);var s=r(this,e.call(this,a));s.playerEl=a.el().closest('*[data-is="avs-player"]'),s.hammerManager=new Hammer.Manager(s.playerEl),s.swipe=new Hammer.Swipe,s.hammerManager.add([s.swipe]),s.anchorEl=s.playerEl.parentNode,s.meta_=null;var o=s;Object.defineProperty(a,'iosFullscreen_',{get:function(){return o.iosFullscreen_},set:function(e){o.iosFullscreen_=e,o.player.trigger('fullscreenchange')},enumerable:!0,configurable:!0}),s.iosFullscreenButton=new g(a,i);var l=i.opts.skin||'avs';return s.theme='theme-'+l,a.ready(function(){p.isMobile()&&p.isiOSDevice()?(a.getChild('controlBar').addChild(s.iosFullscreenButton),a.iosFullscreen_=i.active):a.iosFullscreen_=!1}),s.on(a,['ended'],s.onVideoEnded),s}return i(t,e),t.prototype.isFullscreen=function(){return this.player.iosFullscreen_},t.prototype.requestFullscreen=function(){var e=this;this.iosFullscreenButton.update(),document.body.classList.add('avs-fullscreen'),document.body.classList.add(this.theme),document.body.appendChild(this.playerEl),this.player.iosFullscreen_=!0,this.hammerManager.on('swipedown',function(){return e.exitFullscreen()}),this._addViewportMetaTag()},t.prototype.exitFullscreen=function(){this.iosFullscreenButton.update(),document.body.classList.remove('avs-fullscreen'),document.body.classList.remove(this.theme),this.anchorEl.appendChild(this.playerEl),this.player.iosFullscreen_=!1,this.hammerManager.off('pinch'),this._removeViewportMetaTag()},t.prototype.toggleFullscreen=function(){this.player.iosFullscreen_=!this.player.iosFullscreen_,this.player.iosFullscreen_?this.requestFullscreen():this.exitFullscreen()},t.prototype.onVideoEnded=function(){this.exitFullscreen()},t.prototype._addViewportMetaTag=function(){try{this.meta_=document.createElement('meta'),this.meta_.name='viewport',this.meta_.setAttribute('content','width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover'),document.querySelector('head').appendChild(this.meta_)}catch(t){console.warn('Unable to add viewport meta tag')}},t.prototype._removeViewportMetaTag=function(){try{this.meta_&&document.querySelector('head').removeChild(this.meta_)}catch(t){}},s(t,[{key:'name',get:function(){return this._name},set:function(e){this._name=e}}]),t}(u),g=function(e){function t(a,i){n(this,t),i.name='IOSFullscreenButton';var s=r(this,e.call(this,a,i));return s.on(a,['iosFullscreen_'],s.update),s.controlText('Fullscreen off'),s}return i(t,e),t.prototype.buildCSSClass=function(){return'vjs-fullscreen-control vjs-control vjs-ios-control vjs-button'},t.prototype.handleClick=function(){this.player_.iosFullscreen().toggleFullscreen()},t.prototype.update=function(){this.updateIcon(),this.updateText()},t.prototype.updateIcon=function(){this.player_.iosFullscreen_?this.el().classList.add('on'):this.el().classList.remove('on')},t.prototype.updateText=function(){this.controlText(this.player_.iosFullscreen_?'Fullscreen on':'Fullscreen off')},t}(c)},function(e,t,a){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0}),t.MarkersPlugin=void 0;var s=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(10),l=function(e){return e&&e.__esModule?e:{default:e}}(o),d=a(6),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(d),u=a(31),c=l.default.getPlugin('plugin'),m=-1,g=t.MarkersPlugin=function(e){function t(a,i){n(this,t);var s=r(this,e.call(this,a));return s.setting=l.default.mergeOptions((0,u.getDefaultMarkerPluginConfiguration)(),i),s.markersMap={},s.markersList=[],s.currentMarkerIndex=m,s.markerTip=null,s.breakOverlay=null,s.overlayIndex=m,s.player.on('loadedmetadata',function(){return s.initialize()}),s}return i(t,e),t.prototype.sortMarkersList=function(){var e=this;this.markersList.sort(function(t,a){return e.setting.markerTip.time(t)-e.setting.markerTip.time(a)})},t.prototype.addMarkers=function(e){var t=this;e.forEach(function(e){e.key=p.uuid(),t.player.el().querySelector('.vjs-progress-holder').appendChild(t.createMarkerDiv(e)),t.markersMap[e.key]=e,t.markersList.push(e)}),this.sortMarkersList()},t.prototype.getPosition=function(e){return 100*(this.setting.markerTip.time(e)/this.player.duration())},t.prototype.setMarkderDivStyle=function(e,t){var a=this;t.className='vjs-marker '+(e.class||''),Object.keys(this.setting.markerStyle).forEach(function(e){t.style[e]=a.setting.markerStyle[e]});var n=e.time/this.player.duration();if((0>n||1<n)&&(t.style.display='none'),t.style.left=this.getPosition(e)+'%',e.duration)t.style.width=100*(e.duration/this.player.duration())+'%',t.style.marginLeft='0px';else{var r=p.getElementBounding(t);t.style.marginLeft=r.width/2+'px'}},t.prototype.createMarkerDiv=function(e){var t=this,a=l.default.dom.createEl('div',{},{"data-marker-key":e.key,"data-marker-time":this.setting.markerTip.time(e)});return this.setMarkderDivStyle(e,a),a.addEventListener('click',function(){var n=!1;if('function'==typeof t.setting.onMarkerClick&&(n=!1===t.setting.onMarkerClick(e)),!n){var r=a.getAttribute('data-marker-key');t.player.currentTime(t.setting.markerTip.time(t.markersMap[r]))}}),this.setting.markerTip.display&&this.registerMarkerTipHandler(a),a},t.prototype.updateMarkers=function(e){var t=this;this.markersList.forEach(function(a){var n=t.player.el().querySelector('.vjs-marker[data-marker-key=\''+a.key+'\']'),r=t.setting.markerTip.time(a),i=n.getAttribute('data-marker-time');(e||parseInt(i,10)!==r)&&(t.setMarkderDivStyle(a,n),n.setAttribute('data-marker-time',''+r))}),this.sortMarkersList()},t.prototype.removeMarkers=function(e){var t=this;!this.breakOverlay||(this.overlayIndex=m,this.breakOverlay.style.visibility='hidden'),this.currentMarkerIndex=m;var a=[];e.forEach(function(e){var n=t.markersList[e];if(n){delete t.markersMap[n.key],a.push(e);var r=t.player.el().querySelector('.vjs-marker[data-marker-key=\''+n.key+'\']');r&&r.parentNode.removeChild(r)}}),a.reverse(),a.forEach(function(e){t.markersList.splice(e,1)}),this.sortMarkersList()},t.prototype.registerMarkerTipHandler=function(e){var t=this;e.addEventListener('mouseover',function(){var a=t.markersMap[e.getAttribute('data-marker-key')];if(!!t.markerTip){var n=t.markerTip.querySelector('.vjs-tip-inner');n.innerText=t.setting.markerTip.text(a),t.markerTip.style.left=t.getPosition(a)+'%';var r=p.getElementBounding(t.markerTip),i=p.getElementBounding(e),s=p.getElementBounding(t.player.el()),o=i.x+i.width/2,l=r.width/2,d=i.width/4,u=0;t.markerTip.className='vjs-tip aligned-right',o-l>s.x&&(t.markerTip.className='vjs-tip',u=-(r.width/2)+d),o+l>s.x+s.width&&(t.markerTip.className='vjs-tip aligned-left',u=-r.width+i.width/2),t.markerTip.style.marginLeft=u+'px',t.markerTip.style.visibility='visible'}}),e.addEventListener('mouseout',function(){!t.markerTip||(t.markerTip.style.visibility='hidden')})},t.prototype.initializeMarkerTip=function(){this.markerTip=l.default.dom.createEl('div',{className:'vjs-tip',innerHTML:'<div class=\'vjs-tip-arrow\'></div><div class=\'vjs-tip-inner\'></div>'}),this.player.el().querySelector('.vjs-progress-holder').appendChild(this.markerTip)},t.prototype.updateBreakOverlay=function(){if(this.setting.breakOverlay.display&&!(0>this.currentMarkerIndex)){var e=this.player.currentTime(),t=this.markersList[this.currentMarkerIndex],a=this.setting.markerTip.time(t);e>=a&&e<=a+this.setting.breakOverlay.displayTime?(this.overlayIndex!==this.currentMarkerIndex&&(this.overlayIndex=this.currentMarkerIndex,this.breakOverlay&&(this.breakOverlay.querySelector('.vjs-break-overlay-text').innerHTML=this.setting.breakOverlay.text(t))),this.breakOverlay&&(this.breakOverlay.style.visibility='visible')):(this.overlayIndex=m,this.breakOverlay&&(this.breakOverlay.style.visibility='hidden'))}},t.prototype.initializeOverlay=function(){var e=this;this.breakOverlay=l.default.dom.createEl('div',{className:'vjs-break-overlay',innerHTML:'<div class=\'vjs-break-overlay-text\'></div>'}),Object.keys(this.setting.breakOverlay.style).forEach(function(t){e.breakOverlay&&(e.breakOverlay.style[t]=e.setting.breakOverlay.style[t])}),this.player.el().appendChild(this.breakOverlay),this.overlayIndex=m},t.prototype.onTimeUpdate=function(){this.onUpdateMarker(),this.updateBreakOverlay(),this.setting.onTimeUpdateAfterMarkerUpdate&&this.setting.onTimeUpdateAfterMarkerUpdate()},t.prototype.onUpdateMarker=function(){var e=this;if(this.markersList.length){var t=function(t){return t<e.markersList.length-1?e.setting.markerTip.time(e.markersList[t+1]):e.player.duration()},a=this.player.currentTime(),n=m,r;if(this.currentMarkerIndex!==m){if(r=t(this.currentMarkerIndex),a>=this.setting.markerTip.time(this.markersList[this.currentMarkerIndex])&&a<r)return;if(this.currentMarkerIndex===this.markersList.length-1&&a===this.player.duration())return}if(a<this.setting.markerTip.time(this.markersList[0]))n=m;else for(var s=0;s<this.markersList.length;s++)if(r=t(s),a>=this.setting.markerTip.time(this.markersList[s])&&a<r){n=s;break}n!==this.currentMarkerIndex&&(n!==m&&this.setting.onMarkerReached&&this.setting.onMarkerReached(this.markersList[n],n),this.currentMarkerIndex=n)}},t.prototype.initialize=function(){var e=this;this.setting.markerTip.display&&this.initializeMarkerTip(),this.removeAll(),this.addMarkers(this.setting.markers),this.setting.breakOverlay.display&&this.initializeOverlay(),this.onTimeUpdate(),this.player.on('timeupdate',function(){return e.onTimeUpdate()}),this.player.off('loadedmetadata')},t.prototype.getMarkers=function(){return this.markersList},t.prototype.next=function(){for(var e=this.player.currentTime(),t=0,a;t<this.markersList.length;t++)if(a=this.setting.markerTip.time(this.markersList[t]),a>e){this.player.currentTime(a);break}},t.prototype.prev=function(){for(var e=this.player.currentTime(),t=this.markersList.length-1,a;0<=t;t--)if(a=this.setting.markerTip.time(this.markersList[t]),a+.5<e)return void this.player.currentTime(a)},t.prototype.add=function(e){this.addMarkers(e)},t.prototype.remove=function(e){this.removeMarkers(e)},t.prototype.removeAll=function(){for(var e=[],t=0;t<this.markersList.length;t++)e.push(t);this.removeMarkers(e)},t.prototype.updateTime=function(e){this.updateMarkers(e)},t.prototype.reset=function(e){this.removeAll(),this.addMarkers(e)},t.prototype.dispose=function(){this.removeAll(),this.breakOverlay&&this.breakOverlay.remove(),this.markerTip&&this.markerTip.remove(),this.player.off('timeupdate',this.updateBreakOverlay),delete this.player.markers},s(t,[{key:'name',get:function(){return this._name},set:function(e){this._name=e}}]),t}(c)},function(e,t,a){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0}),t.RepeatPlugin=void 0;var s=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(10),l=function(e){return e&&e.__esModule?e:{default:e}}(o),d=l.default.getPlugin('plugin'),p=l.default.getComponent('Button'),u=t.RepeatPlugin=function(e){function t(a,i){n(this,t);var s=r(this,e.call(this,a)),o=new c(a,i);return a.ready(function(){a.getChild('controlBar').addChild(o,{},12),a.repeat=i.active}),s}return i(t,e),s(t,[{key:'name',get:function(){return this._name},set:function(e){this._name=e}}]),t}(d),c=function(e){function t(a,i){n(this,t),i.name='RepeatButton';var s=r(this,e.call(this,a,i));s.on(a,['repeat'],s.update),s.on(a,['ended'],s.onVideoEnded),s.controlText('Repeat off'),s.player_=a;var o=s;return Object.defineProperty(a,'repeat',{get:function(){return o.repeat},set:function(e){o.repeat=e},enumerable:!0,configurable:!0}),s}return i(t,e),t.prototype.buildCSSClass=function(){return'vjs-repeat-control vjs-control vjs-button off'},t.prototype.handleClick=function(){this.player_.repeat=!this.player_.repeat,this.player_.trigger('repeat')},t.prototype.update=function(){this.updateIcon(),this.updateText()},t.prototype.updateIcon=function(){this.player_.repeat?this.el().classList.remove('off'):this.el().classList.add('off')},t.prototype.updateText=function(){this.controlText(this.player_.repeat?'Repeat on':'Repeat off')},t.prototype.onVideoEnded=function(){this.player_.repeat&&this.player_.play()},t}(p)},function(e,t,a){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,a,n){return(g={label:a,sources:t},'function'==typeof n)?n(e,t,a):(e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}})),e)}Object.defineProperty(t,'__esModule',{value:!0}),t.ResolutionSwitcherPlugin=void 0;var o=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(10),d=function(e){return e&&e.__esModule?e:{default:e}}(l),p=d.default.getPlugin('plugin'),u=d.default.getComponent('MenuItem'),c=d.default.getComponent('MenuButton'),m={},g={},y={},h=function(e){function t(a,i,s,o){n(this,t);var l=r(this,e.call(this,a,i));return l.onClickListener=s,l.label=o,l.src=i.src,l.on('click',l.onClick),l.on('touchstart',l.onClick),i.initialySelected&&(l.showAsLabel(),l.selected(!0),l.addClass('vjs-selected')),l}return i(t,e),t.prototype.showAsLabel=function(){this.label&&(this.label.innerHTML=this.options_.label)},t.prototype.onClick=function(e){var t=this;this.onClickListener(this);var a=this.player_.currentTime(),n=this.player_.paused();this.showAsLabel(),this.addClass('vjs-selected'),n||this.player_.bigPlayButton.hide(),'function'!=typeof e&&'function'==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var r='loadeddata';'Flash'!==this.player_.techName_&&(r='timeupdate'),s(this.player_,this.src,this.options_.label,e).one(r,function(){t.player_.currentTime(a),t.player_.handleTechSeeked_(),n||(t.player_.play(),t.player_.handleTechSeeked_()),t.player_.trigger('resolutionchange')})},t}(u),f=function(e){function t(a,i,s,o){n(this,t),i.name='ResolutionMenuButton';var l=r(this,e.call(this,a,i));if(l.sources=i.sources,l.label=o,l.label.innerHTML=i.initialySelectedLabel,c.call(l,a,i,s),l.controlText('Quality'),s.dynamicLabel)l.el().appendChild(o);else{var p=document.createElement('span');d.default.dom.addClass(p,'vjs-resolution-button-staticlabel'),l.el().appendChild(p)}return l}return i(t,e),t.prototype.createItems=function(){var e=[],t=this.sources&&this.sources.label||{},a=function(t){e.map(function(e){e.selected(e===t),e.removeClass('vjs-selected')})};for(var n in t)t.hasOwnProperty(n)&&(e.push(new h(this.player_,{label:n,src:t[n],initialySelected:n===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},a,this.label)),y[n]=e[e.length-1]);return e},t}(c),_=t.ResolutionSwitcherPlugin=function(e){function t(a,i){n(this,t);var s=r(this,e.call(this,a));return s.settings=d.default.mergeOptions(m,i),s.label=document.createElement('span'),s.groupedSrc={},d.default.dom.addClass(s.label,'vjs-resolution-button-label'),s.extendPlayer(),a.ready(function(){1<a.options_.sources.length&&a.updateSrc(a.options_.sources)}),s}return i(t,e),t.prototype.extendPlayer=function(){var e=this;this.player.updateSrc=function(t){if(!t)return e.player.src();e.player.controlBar.resolutionSwitcher&&(e.player.controlBar.resolutionSwitcher.dispose(),delete e.player.controlBar.resolutionSwitcher),t=t.sort(e.compareResolutions),e.groupedSrc=e.bucketSources(t);var a=e.chooseSrc(e.groupedSrc,t),n=new f(e.player,{sources:e.groupedSrc,initialySelectedLabel:a.label,initialySelectedRes:a.res,customSourcePicker:e.settings.customSourcePicker},e.settings,e.label);return d.default.dom.addClass(n.el(),'vjs-resolution-button'),e.player.getChild('controlBar').addChild(n,{},12),s(e.player,a.sources,a.label)},this.player.currentResolution=function(t,a){return null==t?g:(null!=y[t]&&y[t].onClick(a),e.player)},this.player.getGroupedSrc=function(){return e.groupedSrc}},t.prototype.compareResolutions=function(e,t){return e.res&&t.res?+t.res-+e.res:0},t.prototype.bucketSources=function(e){var t=this,a={label:{},res:{},type:{}};return e.map(function(e){t.initResolutionKey(a,'label',e),t.initResolutionKey(a,'res',e),t.initResolutionKey(a,'type',e),t.appendSourceToKey(a,'label',e),t.appendSourceToKey(a,'res',e),t.appendSourceToKey(a,'type',e)}),a},t.prototype.initResolutionKey=function(e,t,a){null==e[t][a[t]]&&(e[t][a[t]]=[])},t.prototype.appendSourceToKey=function(e,t,a){e[t][a[t]].push(a)},t.prototype.chooseSrc=function(e,t){var a=this.settings['default'],n='';return'high'===a?(a=t[0].res,n=t[0].label):'low'!==a&&null!=a&&e.res[a]?e.res[a]&&(n=e.res[a][0].label):(a=t[t.length-1].res,n=t[t.length-1].label),{res:a,label:n,sources:e.res[a]}},o(t,[{key:'name',get:function(){return this._name},set:function(e){this._name=e}}]),t}(p)},function(e,t,a){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0}),t.SharePlugin=void 0;var s=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(10),l=function(e){return e&&e.__esModule?e:{default:e}}(o),d=l.default.getPlugin('plugin'),p=l.default.getComponent('Button'),u=t.SharePlugin=function(e){function t(a,i){n(this,t);var s=r(this,e.call(this,a)),o=new c(a,i);return a.ready(function(){a.getChild('controlBar').addChild(o,{},12)}),s}return i(t,e),s(t,[{key:'name',get:function(){return this._name},set:function(e){this._name=e}}]),t}(d),c=function(e){function t(a,i){n(this,t);var s=r(this,e.call(this,a,i));i.name='ShareButton',s.controlText('Share'),s.player_=a;var o=function(){return console.warn('No callback specified for share click')};return i.hasOwnProperty('callback')&&(o=i.callback),s.callback_=o,s}return i(t,e),t.prototype.buildCSSClass=function(){return'vjs-share-control vjs-control vjs-button'},t.prototype.handleClick=function(){this.callback_(),this.player_.trigger('share')},t}(p)},function(e,t,a){var n=a(110);'string'==typeof n&&(n=[[e.i,n,'']]);var r={hmr:!0},i;r.transform=i,r.insertInto=void 0;a(112)(n,r);n.locals&&(e.exports=n.locals),!1},function(){},,function(e,t,a){function n(e,t){for(var a=0;a<e.length;a++){var n=e[a],r=g[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(p(n.parts[i],t))}else{for(var s=[],i=0;i<n.parts.length;i++)s.push(p(n.parts[i],t));g[n.id]={id:n.id,refs:1,parts:s}}}}function r(e,t){for(var a=[],n={},r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],o=i[1],l=i[2],d=i[3],p={css:o,media:l,sourceMap:d};n[s]?n[s].parts.push(p):a.push(n[s]={id:s,parts:[p]})}return a}function i(e,t){var a=f(e.insertInto);if(!a)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');var n=v[v.length-1];if('top'===e.insertAt)n?n.nextSibling?a.insertBefore(t,n.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),v.push(t);else if('bottom'===e.insertAt)a.appendChild(t);else if('object'==typeof e.insertAt&&e.insertAt.before){var r=f(e.insertInto+' '+e.insertAt.before);a.insertBefore(t,r)}else throw new Error('[Style Loader]\n\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\n Must be \'top\', \'bottom\', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n')}function s(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=v.indexOf(e);0<=t&&v.splice(t,1)}function o(e){var t=document.createElement('style');return e.attrs.type='text/css',d(t,e.attrs),i(e,t),t}function l(e){var t=document.createElement('link');return e.attrs.type='text/css',e.attrs.rel='stylesheet',d(t,e.attrs),i(e,t),t}function d(e,t){Object.keys(t).forEach(function(a){e.setAttribute(a,t[a])})}function p(e,t){var a,n,r,i;if(t.transform&&e.css)if(i=t.transform(e.css),i)e.css=i;else return function(){};if(t.singleton){var d=b++;a=_||(_=o(t)),n=u.bind(null,a,d,!1),r=u.bind(null,a,d,!0)}else e.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(a=l(t),n=m.bind(null,a,t),r=function(){s(a),a.href&&URL.revokeObjectURL(a.href)}):(a=o(t),n=c.bind(null,a),r=function(){s(a)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}function u(e,t,a,n){var r=a?'':n.css;if(e.styleSheet)e.styleSheet.cssText=k(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function c(e,t){var a=t.css,n=t.media;if(n&&e.setAttribute('media',n),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function m(e,t,a){var n=a.css,r=a.sourceMap,i=t.convertToAbsoluteUrls===void 0&&r;(t.convertToAbsoluteUrls||i)&&(n=T(n)),r&&(n+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+' */');var s=new Blob([n],{type:'text/css'}),o=e.href;e.href=URL.createObjectURL(s),o&&URL.revokeObjectURL(o)}var g={},y=function(e){var t;return function(){return'undefined'==typeof t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),h=function(e){return document.querySelector(e)},f=function(){var e={};return function(t){if('function'==typeof t)return t();if('undefined'==typeof e[t]){var a=h.call(this,t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}e[t]=a}return e[t]}}(),_=null,b=0,v=[],T=a(113);e.exports=function(e,t){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');t=t||{},t.attrs='object'==typeof t.attrs?t.attrs:{},t.singleton||'boolean'==typeof t.singleton||(t.singleton=y()),t.insertInto||(t.insertInto='head'),t.insertAt||(t.insertAt='bottom');var a=r(e,t);return n(a,t),function(e){for(var s=[],o=0;o<a.length;o++){var i=a[o],l=g[i.id];l.refs--,s.push(l)}if(e){var d=r(e,t);n(d,t)}for(var o=0,l;o<s.length;o++)if(l=s[o],0===l.refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete g[l.id]}}};var k=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join('\n')}}()},function(e){e.exports=function(e){var t='undefined'!=typeof window&&window.location;if(!t)throw new Error('fixUrls requires window.location');if(!e||'string'!=typeof e)return e;var a=t.protocol+'//'+t.host,n=a+t.pathname.replace(/\/[^\/]*$/,'/'),r=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r))return e;var i;return i=0===r.indexOf('//')?r:0===r.indexOf('/')?a+r:n+r.replace(/^\.\//,''),'url('+JSON.stringify(i)+')'});return r}},function(e,t,a){(function(t){e.exports=t.riot=a(3)}).call(this,a(7))},function(e,t,a){(function(t){e.exports=t.i18n=a(15)}).call(this,a(7))},function(e,t,a){var n;/* Riot v2.6.8, @license MIT */(function(r){'use strict';function s(e,t,a){var n={};return n[e.key]=t,e.pos&&(n[e.pos]=a),n}function o(e,a){for(var n=a.length,r=e.length,i;n>r;)i=a[--n],a.splice(n,1),i.unmount()}function l(e,a){Object.keys(e.tags).forEach(function(n){var t=e.tags[n];U(t)?_(t,function(e){I(e,n,a)}):I(t,n,a)})}function d(e,t,a){var n=e._root,r;for(e._virts=[];n;)r=n.nextSibling,a?t.insertBefore(n,a._root):t.appendChild(n),e._virts.push(n),n=r}function p(e,t,a,n){for(var r=e._root,s=0,i;s<n;s++)i=r.nextSibling,t.insertBefore(r,a._root),r=i}function u(e,t,a,n,r,i,s){H(t.root)||(e?i(t,n,a,s.childNodes.length):n.insertBefore(t.root,a.root))}function i(e,t,a){C(e,'each');var n=typeof L(e,'no-reorder')!==ie||C(e,'no-reorder'),r=A(e),c=ee[r]||{tmpl:v(e)},m=ue.test(r),y=e.parentNode,h=document.createTextNode(''),f=x(e),_='option'===r.toLowerCase(),b=[],T=[],k='VIRTUAL'==e.tagName,S;a=fe.loopKeys(a),y.insertBefore(h,e),t.one('before-mount',function(){e.parentNode.removeChild(e),y.stub&&(y=t.root)}).on('update',function(){var v=fe(a.val,t),C=document.createDocumentFragment();U(v)||(S=v||!1,v=S?Object.keys(v).map(function(e){return s(a,e,v[e])}):[]);for(var E=0,i=v.length;E<i;E++){var L=v[E],w=n&&typeof L==se&&!S,x=T.indexOf(L),P=~x&&w?x:E,I=b[P];L=!S&&a.key?s(a,L,E):L,(w||I)&&(!w||~x)&&I?I.update(L,!0):(I=new g(c,{parent:t,isLoop:!0,hasImpl:!!ee[r],root:m?y:e.cloneNode(),item:L},e.innerHTML),I.mount(),k&&(I._root=I.root.firstChild),E!=b.length&&b[E]?(u(k,I,b[E],y,b,d,e),T.splice(E,0,L)):k?d(I,C):C.appendChild(I.root),b.splice(E,0,I),P=E),P!==E&&w&&b[E]&&(N(v,T[E])&&u(k,I,b[E],y,b,p,e),a.pos&&(I[a.pos]=E),b.splice(E,0,b.splice(P,1)[0]),T.splice(E,0,T.splice(P,1)[0]),!f&&I.tags&&l(I,E)),I._item=L,O(I,'_parent',t)}if(o(v,b),y.insertBefore(C,h),_&&ye&&!y.multiple)for(var M=0;M<y.length;M++)if(y[M].__riot1374){y.selectedIndex=M,delete y[M].__riot1374;break}f&&(t.tags[r]=b),T=v.slice()})}function c(e,t,a,n){F(e,function(e){if(1==e.nodeType){if(e.isLoop=e.isLoop||e.parentNode&&e.parentNode.isLoop||L(e,'each')?1:0,a){var r=x(e);r&&!e.isLoop&&a.push(M(r,{root:e,parent:t},e.innerHTML,t))}(!e.isLoop||n)&&K(e,t,[])}})}function m(e,t,a){function n(e,t,n){fe.hasExpr(t)&&a.push(R({dom:e,expr:t},n))}F(e,function(e){var a=e.nodeType,r;if(3==a&&'STYLE'!=e.parentNode.tagName&&n(e,e.nodeValue),1==a){if(r=L(e,'each'),r)return i(e,t,r),!1;if(_(e.attributes,function(t){var a=t.name,r=a.split('__')[1];if(n(e,t.value,{attr:r||a,bool:r}),r)return C(e,a),!1}),x(e))return!1}})}function g(e,t,a){function n(){var e=g&&p?l:u||l;_(T.attributes,function(t){if(!(t.name in L)){var a=t.value;d[E(t.name)]=fe.hasExpr(a)?fe(a,e):a}}),_(Object.keys(L),function(t){d[E(t)]=fe(L[t],e)})}function r(e){for(var t in y)typeof l[t]!==oe&&B(l,t)&&(l[t]=e[t])}function s(e){_(Object.keys(e),function(t){var a=!ce.test(t)&&N(x,t);(typeof l[t]===oe||a)&&(!a&&x.push(t),l[t]=e[t])})}function i(e){l.update(e,!0)}function o(e){if(_(v,function(t){t[e?'mount':'unmount']()}),!!u){var t=e?'on':'off';p?u[t]('unmount',l.unmount):u[t]('update',i)[t]('unmount',l.unmount)}}var l=$.observable(this),d=W(t.opts)||{},u=t.parent,p=t.isLoop,g=t.hasImpl,y=Y(t.item),h=[],v=[],T=t.root,k=T.tagName.toLowerCase(),L={},x=[],P;e.name&&T._tag&&T._tag.unmount(!0),this.isMounted=!1,T.isLoop=p,T._tag=this,O(this,'_riot_id',++Q),R(this,{parent:u,root:T,opts:d},y),O(this,'tags',{}),_(T.attributes,function(e){var t=e.value;fe.hasExpr(t)&&(L[e.name]=t)}),P=_e(e.tmpl,a,p),O(this,'update',function(e,t){return e=Y(e),p&&s(l.parent),e&&S(y)&&(r(e),y=e),R(l,e),n(),l.trigger('update',e),f(h,l),t&&l.parent?l.parent.one('updated',function(){l.trigger('updated')}):ve(function(){l.trigger('updated')}),this}),O(this,'mixin',function(){return _(arguments,function(e){var t=[],a,n;e=typeof e===ie?$.mixin(e):e,a=b(e)?new e:e;var r=Object.getPrototypeOf(a);do t=t.concat(Object.getOwnPropertyNames(n||a));while(n=Object.getPrototypeOf(n||a));_(t,function(e){if('init'!=e){var t=Object.getOwnPropertyDescriptor(a,e)||Object.getOwnPropertyDescriptor(r,e),n=t&&(t.get||t.set);!l.hasOwnProperty(e)&&n?Object.defineProperty(l,e,t):l[e]=b(a[e])?a[e].bind(l):a[e]}}),a.init&&a.init.bind(l)()}),this}),O(this,'mount',function(){n();var t=$.mixin(te);if(t)for(var a in t)t.hasOwnProperty(a)&&l.mixin(t[a]);if(l._parent&&l._parent.root.isLoop&&s(l._parent),e.fn&&e.fn.call(l,d),m(P,l,h),o(!0),e.attrs&&j(e.attrs,function(e,t){w(T,e,t)}),(e.attrs||g)&&m(l.root,l,h),(!l.parent||p)&&l.update(y),l.trigger('before-mount'),p&&!g)T=P.firstChild;else{for(;P.firstChild;)T.appendChild(P.firstChild);T.stub&&(T=u.root)}O(l,'root',T),p&&c(l.root,l.parent,null,!0),!l.parent||l.parent.isMounted?(l.isMounted=!0,l.trigger('mount')):l.parent.one('mount',function(){H(l.root)||(l.parent.isMounted=l.isMounted=!0,l.trigger('mount'))})}),O(this,'unmount',function(e){var t=T,a=t.parentNode,n=Z.indexOf(l),r;if(l.trigger('before-unmount'),~n&&Z.splice(n,1),a){if(u)r=D(u),U(r.tags[k])?_(r.tags[k],function(e,t){e._riot_id==l._riot_id&&r.tags[k].splice(t,1)}):r.tags[k]=void 0;else for(;t.firstChild;)t.removeChild(t.firstChild);e?(C(a,re),C(a,ne)):a.removeChild(t)}this._virts&&_(this._virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),l.trigger('unmount'),o(),l.off('*'),l.isMounted=!1,delete T._tag}),c(P,this,v)}function y(e,t,a,n){a[e]=function(i){var e=n._parent,s=n._item,o;if(!s)for(;e&&!s;)s=e._item,e=e._parent;i=i||r.event,B(i,'currentTarget')&&(i.currentTarget=a),B(i,'target')&&(i.target=i.srcElement),B(i,'which')&&(i.which=i.charCode||i.keyCode),i.item=s,!0===t.call(n,i)||/radio|check/.test(a.type)||(i.preventDefault&&i.preventDefault(),i.returnValue=!1),i.preventUpdate||(o=s?D(e):n,o.update())}}function h(e,t,a){e&&(e.insertBefore(a,t),e.removeChild(t))}function f(e,t){_(e,function(e){var a=e.dom,n=e.attr,r=fe(e.expr,t),i=e.parent||e.dom.parentNode;if(e.bool?r=!!r:null==r&&(r=''),e.value!==r){if(e.value=r,!n)return r+='',void(i&&(e.parent=i,'TEXTAREA'===i.tagName?(i.value=r,!ge&&(a.nodeValue=r)):a.nodeValue=r));if('value'===n)return void(a.value!==r&&(a.value=r,w(a,n,r)));if(C(a,n),b(r))y(n,r,a,t);else if('if'==n){var s=e.stub,o=function(){h(s.parentNode,s,a)},l=function(){h(a.parentNode,a,s)};r?s&&(o(),a.inStub=!1,!H(a)&&F(a,function(e){e._tag&&!e._tag.isMounted&&(e._tag.isMounted=!!e._tag.trigger('mount'))})):(s=e.stub=s||document.createTextNode(''),a.parentNode?l():(t.parent||t).one('updated',l),a.inStub=!0)}else'show'===n?a.style.display=r?'':'none':'hide'===n?a.style.display=r?'none':'':e.bool?(a[n]=r,r&&w(a,n,n),ye&&'selected'===n&&'OPTION'===a.tagName&&(a.__riot1374=r)):(0===r||r&&typeof r!==se)&&(X(n,ae)&&n!=ne&&(n=n.slice(ae.length)),w(a,n,r))}})}function _(e,t){for(var a=e?e.length:0,n=0,r;n<a;n++)r=e[n],null!=r&&!1===t(r,n)&&n--;return e}function b(e){return typeof e===le||!1}function v(e){if(e.outerHTML)return e.outerHTML;var t=V('div');return t.appendChild(e.cloneNode(!0)),t.innerHTML}function T(e,t){if(typeof e.innerHTML!=oe)e.innerHTML=t;else{var a=new DOMParser().parseFromString(t,'application/xml');e.appendChild(e.ownerDocument.importNode(a.documentElement,!0))}}function k(e){return~me.indexOf(e)}function S(e){return e&&typeof e===se}function C(e,t){e.removeAttribute(t)}function E(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function L(e,t){return e.getAttribute(t)}function w(e,t,a){var n=pe.exec(t);n&&n[1]?e.setAttributeNS(de,n[1],a):e.setAttribute(t,a)}function x(e){return e.tagName&&ee[L(e,re)||L(e,ne)||e.tagName.toLowerCase()]}function P(e,t,a){var n=a.tags[t];n?(!U(n)&&n!==e&&(a.tags[t]=[n]),!N(a.tags[t],e)&&a.tags[t].push(e)):a.tags[t]=e}function I(e,t,a){var n=e.parent,r;n&&(r=n.tags[t],U(r)?r.splice(a,0,r.splice(r.indexOf(e),1)[0]):P(e,t,n))}function M(e,t,a,n){var r=new g(e,t,a),i=A(t.root),s=D(n);return r.parent=s,r._parent=n,P(r,i,s),s!==n&&P(r,i,n),t.root.innerHTML='',r}function D(e){for(var t=e;!x(t.root)&&!!t.parent;)t=t.parent;return t}function O(e,t,a,n){return Object.defineProperty(e,t,R({value:a,enumerable:!1,writable:!1,configurable:!0},n)),e}function A(e){var t=x(e),a=L(e,'name'),n=a&&!fe.hasExpr(a)?a:t?t.name:e.tagName.toLowerCase();return n}function R(e){for(var t=arguments,a=1,n;a<t.length;++a)if(n=t[a])for(var r in n)B(e,r)&&(e[r]=n[r]);return e}function N(e,t){return~e.indexOf(t)}function U(e){return Array.isArray(e)||e instanceof Array}function B(e,t){var a=Object.getOwnPropertyDescriptor(e,t);return typeof e[t]===oe||a&&a.writable}function Y(e){if(!(e instanceof g)&&!(e&&typeof e.trigger==le))return e;var t={};for(var a in e)ce.test(a)||(t[a]=e[a]);return t}function F(e,t){if(e){if(!1===t(e))return;for(e=e.firstChild;e;)F(e,t),e=e.nextSibling}}function j(e,t){for(var a=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,n;n=a.exec(e);)t(n[1].toLowerCase(),n[2]||n[3]||n[4])}function H(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function V(e,t){return t?document.createElementNS('http://www.w3.org/2000/svg','svg'):document.createElement(e)}function z(e,t){return(t||document).querySelectorAll(e)}function q(e,t){return(t||document).querySelector(e)}function W(e){return Object.create(e||null)}function G(e){return L(e,'id')||L(e,'name')}function K(e,t,a){var n=G(e),r=function(r){N(a,n)||(i=U(r),r?(!i||i&&!N(r,e))&&(i?r.push(e):t[n]=[r,e]):t[n]=e)},i;n&&(fe.hasExpr(n)?t.one('mount',function(){n=G(e),r(t[n])}):r(t[n]))}function X(e,t){return e.slice(0,t.length)===t}function J(e,t,a){var n=ee[t],r=e._innerHTML=e._innerHTML||e.innerHTML;return e.innerHTML='',n&&e&&(n=new g(n,{root:e,opts:a},r)),n&&n.mount&&(n.mount(),!N(Z,n)&&Z.push(n)),n}var $={version:'v2.6.8',settings:{}},Q=0,Z=[],ee={},te='__global_mixin',ae='riot-',ne=ae+'tag',re='data-is',ie='string',se='object',oe='undefined',le='function',de='http://www.w3.org/1999/xlink',pe=/^xlink:(\w+)/,ue=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,ce=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|parent|opts|trigger|o(?:n|ff|ne))$/,me=['altGlyph','animate','animateColor','circle','clipPath','defs','ellipse','feBlend','feColorMatrix','feComponentTransfer','feComposite','feConvolveMatrix','feDiffuseLighting','feDisplacementMap','feFlood','feGaussianBlur','feImage','feMerge','feMorphology','feOffset','feSpecularLighting','feTile','feTurbulence','filter','font','foreignObject','g','glyph','glyphRef','image','line','linearGradient','marker','mask','missing-glyph','path','pattern','polygon','polyline','radialGradient','rect','stop','svg','switch','symbol','text','textPath','tref','tspan','use'],ge=0|(r&&r.document||{}).documentMode,ye=r&&!!r.InstallTrigger;$.observable=function(e){function t(t,e){for(var a=t.split(' '),n=a.length,r=0,i;r<n;r++)i=a[r],i&&e(i,r)}e=e||{};var a={},n=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(n,r){return'function'==typeof r?(t(n,function(e,t){(a[e]=a[e]||[]).push(r),r.typed=0<t}),e):e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,r){return'*'!=n||r?t(n,function(e){if(r)for(var t=a[e],n=0,i;i=t&&t[n];++n)i==r&&t.splice(n--,1);else delete a[e]}):a={},e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,a){function n(){e.off(t,n),a.apply(e,arguments)}return e.on(t,n)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){for(var s=arguments.length-1,o=Array(s),l=0,d;l<s;l++)o[l]=arguments[l+1];return t(r,function(t){d=n.call(a[t]||[],0);for(var r=0,i;i=d[r];++r)i.busy||(i.busy=1,i.apply(e,i.typed?[t].concat(o):o),d[r]!==i&&r--,i.busy=0);a['*']&&'*'!=t&&e.trigger.apply(e,['*',t].concat(o))}),e},enumerable:!1,writable:!1,configurable:!1}}),e},function(e){function t(e){return e.split(/[/?#]/)}function a(e,t){var a=new RegExp('^'+t[b](/\*/g,'([^/?#]+?)')[b](/\.\./,'.*')+'$'),n=e.match(a);if(n)return n.slice(1)}function n(e,a){var n;return function(){clearTimeout(n),n=setTimeout(e,a)}}function i(e){R=n(u,1),C[f](v,R),C[f](T,R),E[f](P,c),e&&u(!0)}function s(){this.$=[],e.observable(this),M.on('stop',this.s.bind(this)),M.on('emit',this.e.bind(this))}function o(e){return e[b](/^\/|\/$/,'')}function l(e){return'string'==typeof e}function d(e){return(e||w.href)[b](g,'')}function p(e){return'#'==N[0]?(e||w.href||'').split(N)[1]||'':(w?d(e):e||'')[b](N,'')}function u(e){var t=0==A,a;if(!(S<=A)&&(A++,O.push(function(){var t=p();(e||t!=U)&&(M[k]('emit',t),U=t)}),t)){for(;a=O.shift();)a();A=0}}function c(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&'A'!=e.nodeName;)e=e.parentNode;e&&'A'==e.nodeName&&!e[_]('download')&&e[_]('href')&&(!e.target||'_self'==e.target)&&-1!=e.href.indexOf(w.href.match(g)[0])&&(e.href==w.href||e.href.split('#')[0]!=w.href.split('#')[0]&&('#'==N[0]||0===d(e.href).indexOf(N))&&('#'!=N[0]||e.href.split(N)[0]==w.href.split(N)[0])&&m(p(e.href),e.title||E.title))&&t.preventDefault()}}function m(e,t,a){return L?(e=N+o(e),t=t||E.title,a?L.replaceState(null,t,e):L.pushState(null,t,e),E.title=t,D=!1,u(),D):M[k]('emit',p(e))}var g=/^.+?\/\/+[^\/]+/,y='EventListener',h='remove'+y,f='add'+y,_='hasAttribute',b='replace',v='popstate',T='hashchange',k='trigger',S=3,C='undefined'!=typeof r&&r,E='undefined'!=typeof document&&document,L=C&&history,w=C&&(L.location||C.location),x=s.prototype,P=E&&E.ontouchstart?'touchstart':'click',I=!1,M=e.observable(),D=!1,O=[],A=0,R,N,U,B,Y;x.m=function(e,t,a){l(e)&&(!t||l(t))?m(e,t,a||!1):t?this.r(e,t):this.r('@',e)},x.s=function(){this.off('*'),this.$=[]},x.e=function(e){this.$.concat('@').some(function(t){var a=('@'==t?B:Y)(o(e),o(t));if('undefined'!=typeof a)return this[k].apply(null,[t].concat(a)),D=!0},this)},x.r=function(e,t){'@'!=e&&(e='/'+o(e),this.$.push(e)),this.on(e,t)};var F=new s,j=F.m.bind(F);j.create=function(){var e=new s,t=e.m.bind(e);return t.stop=e.s.bind(e),t},j.base=function(e){N=e||'#',U=p()},j.exec=function(){u(!0)},j.parser=function(e,n){e||n||(B=t,Y=a),e&&(B=e),n&&(Y=n)},j.query=function(){var e={},t=w.href||U;return t[b](/[?&](.+?)=([^&]*)/g,function(t,a,n){e[a]=n}),e},j.stop=function(){I&&(C&&(C[h](v,R),C[h](T,R),E[h](P,c)),M[k]('stop'),I=!1)},j.start=function(e){I||(C&&('complete'==document.readyState?i(e):C[f]('load',function(){setTimeout(function(){i(e)},1)})),I=!0)},j.base(),j.parser(),e.route=j}($);var he=function(e){function t(e){return e}function a(e,t){return t||(t=h),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?s:'')}function n(e){if(e===m)return g;var t=e.split(' ');if(2!==t.length||p.test(e))throw new Error('Unsupported brackets "'+e+'"');return t=t.concat(e.replace(u,'\\').split(' ')),t[4]=a(1<t[1].length?/{[\S\s]*?}/:g[4],t),t[5]=a(3<e.length?/\\({|})/g:g[5],t),t[6]=a(g[6],t),t[7]=RegExp('\\\\('+t[3]+')|([[({])|('+t[3]+')|'+d,s),t[8]=e,t}function r(e){return e instanceof RegExp?f(e):h[e]}function i(e){(e||(e=m))!==h[8]&&(h=n(e),f=e===m?t:a,h[9]=f(g[9])),y=e}var s='g',o=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,d=l.source+'|'+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+'|'+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,p=/[\x00-\x1F<>a-zA-Z0-9'",;\\]/,u=/(?=[[\]()*+?.^$|])/g,c={"(":RegExp('([()])|'+d,s),"[":RegExp('([[\\]])|'+d,s),"{":RegExp('([{}])|'+d,s)},m='{ }',g=['{','}','{','}',/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp('\\\\(})|([[({])|(})|'+d,s),m,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],y=e,h=[],f,_;return r.split=function(e,t,a){function n(e){t||l?i.push(e&&e.replace(a[5],'$1')):i.push(e)}function r(e,t,a){var n=c[t],r;for(n.lastIndex=a,a=1;(r=n.exec(e))&&!(r[1]&&(r[1]===t?!++a:! --a)););return a?e.length:n.lastIndex}a||(a=h);var i=[],s=a[6],o,l,d,p;for(l=d=s.lastIndex=0;o=s.exec(e);){if(p=o.index,l){if(o[2]){s.lastIndex=r(e,o[2],s.lastIndex);continue}if(!o[3])continue}o[1]||(n(e.slice(d,p)),d=s.lastIndex,s=a[6+(l^=1)],s.lastIndex=d)}return e&&d<e.length&&n(e.slice(d)),i},r.hasExpr=function(e){return h[4].test(e)},r.loopKeys=function(e){var t=e.match(h[9]);return t?{key:t[1],pos:t[2],val:h[0]+t[3].trim()+h[1]}:{val:e.trim()}},r.array=function(e){return e?n(e):h},Object.defineProperty(r,'settings',{set:function(e){var t;e=e||{},t=e.brackets,Object.defineProperty(e,'brackets',{set:i,get:function(){return y},enumerable:!0}),_=e,i(t)},get:function(){return _}}),r.settings=$.settings||{},r.set=i,r.R_STRINGS=l,r.R_MLCOMMS=o,r.S_QBLOCKS=d,r}(),fe=function(){function e(e,n){return e?(o[e]||(o[e]=a(e))).call(n,t):e}function t(t,a){e.errorHandler&&(t.riotData={tagName:a&&a.root&&a.root.tagName,_riot_id:a&&a._riot_id},e.errorHandler(t))}function a(e){var t=n(e);return'try{return '!==t.slice(0,11)&&(t='return '+t),new Function('E',t+';')}function n(e){var t=[],a=he.split(e.replace(u,'"'),1),n;if(2<a.length||a[0]){var r=[],o,i;for(o=i=0;o<a.length;++o)n=a[o],n&&(n=1&o?s(n,1,t):'"'+n.replace(/\\/g,'\\\\').replace(/\r\n?|\n/g,'\\n').replace(/"/g,'\\"')+'"')&&(r[i++]=n);n=2>i?r[0]:'['+r.join(',')+'].join("")'}else n=s(a[1],0,t);return t[0]&&(n=n.replace(c,function(e,a){return t[a].replace(/\r/g,'\\r').replace(/\n/g,'\\n')})),n}function s(e,t,a){function n(t,a){var n=1,r=m[t],i;for(r.lastIndex=a.lastIndex;i=r.exec(e);)if(i[0]===t)++n;else if(! --n)break;a.lastIndex=n?e.length:r.lastIndex}if(e=e.replace(p,function(e,t){return 2<e.length&&!t?l+(a.push(e)-1)+'~':e}).replace(/\s+/g,' ').trim().replace(/\ ?([[\({},?\.:])\ ?/g,'$1'),e){for(var r=[],s=0,o;e&&(o=e.match(d))&&!o.index;){var u=/,|([[{(])|$/g,c,g;for(e=RegExp.rightContext,c=o[2]?a[o[2]].slice(1,-1).trim().replace(/\s+/g,' '):o[1];g=(o=u.exec(e))[1];)n(g,u);g=e.slice(0,o.index),e=RegExp.rightContext,r[s++]=i(g,1,c)}e=s?1<s?'['+r.join(',')+'].join(" ").trim()':r[0]:i(e,t)}return e}function i(e,t,a){var n;return e=e.replace(y,function(e,t,a,r,i){return a&&(r=n?0:r+e.length,'this'!==a&&'global'!==a&&'window'!==a?(e=t+'("'+a+g+a,r&&(n='.'===(i=i[r])||'('===i||'['===i)):r&&(n=!h.test(i.slice(r)))),e}),n&&(e='try{return '+e+'}catch(e){E(e,this)}'),a?e=(n?'function(){'+e+'}.call(this)':'('+e+')')+'?"'+a+'":""':t&&(e='function(v){'+(n?e.replace('return ','v='):'v=('+e+')')+';return v||v===0?v:""}.call(this)'),e}var o={};e.haveRaw=he.hasRaw,e.hasExpr=he.hasExpr,e.loopKeys=he.loopKeys,e.clearCache=function(){o={}},e.errorHandler=null;var l=String.fromCharCode(8279),d=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,p=RegExp(he.S_QBLOCKS,'g'),u=/\u2057/g,c=/\u2057(\d+)~/g,m={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},g='"in this?this:'+('object'==typeof r?'window':'global')+').',y=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,h=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.version=he.version='v2.4.2',e}(),_e=function(){function e(e,t,a){var n='o'===a[0],r=n?'select>':'table>';if(e.innerHTML='<'+r+t.trim()+'</'+r,r=e.firstChild,n)r.selectedIndex=-1;else{var i=s[a];i&&1===r.childElementCount&&(r=q(i,r))}return r}function t(e,t){if(!a.test(e))return e;var s={};return t=t&&t.replace(r,function(e,t,a){return s[t]=s[t]||a,''}).trim(),e.replace(i,function(e,t,a){return s[t]||a||''}).replace(n,function(e,a){return t||a||''})}var a=/<yield\b/i,n=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/ig,r=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/ig,i=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/ig,s={tr:'tbody',th:'tr',td:'tr',col:'colgroup'},o=ge&&10>ge?ue:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return function(a,n,r){var i=a&&a.match(/^\s*<([-\w]+)/),s=i&&i[1].toLowerCase(),l=V('div',r&&k(s));return a=t(a,n),o.test(s)?l=e(l,a,s):T(l,a),l.stub=!0,l}}(),be=function(e){if(!r)return{add:function(){},inject:function(){}};var t=function(){var e=V('style');w(e,'type','text/css');var t=q('style[type=riot]');return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName('head')[0].appendChild(e),e}(),a=t.styleSheet,n='';return Object.defineProperty(e,'styleNode',{value:t,writable:!0}),{add:function(e){n+=e},inject:function(){n&&(a?a.cssText+=n:t.innerHTML+=n,n='')}}}($),ve=function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame;if(!t||/iP(ad|hone|od).*OS 6/.test(e.navigator.userAgent)){var a=0;t=function(e){var t=Date.now(),n=Math.max(16-(t-a),0);setTimeout(function(){e(a=t+n)},n)}}return t}(r||{});$.util={brackets:he,tmpl:fe},$.mixin=function(){var e={},t=e[te]={},a=0;return function(n,r,i){if(S(n))return void $.mixin('__unnamed_'+a++,n,!0);var s=i?t:e;if(!r){if(typeof s[n]==oe)throw new Error('Unregistered mixin: '+n);return s[n]}b(r)?(R(r.prototype,s[n]||{}),s[n]=r):s[n]=R(s[n]||{},r)}}(),$.tag=function(e,t,a,n,r){return b(n)&&(r=n,/^[\w\-]+\s?=/.test(a)?(n=a,a=''):n=''),a&&(b(a)?r=a:be.add(a)),e=e.toLowerCase(),ee[e]={name:e,tmpl:t,attrs:n,fn:r},e},$.tag2=function(e,t,a,n,r){return a&&be.add(a),ee[e]={name:e,tmpl:t,attrs:n,fn:r},e},$.mount=function(e,t,a){function n(e){var t='';return _(e,function(a){/[^-\w]/.test(a)||(a=a.trim().toLowerCase(),t+=',['+re+'="'+a+'"],['+ne+'="'+a+'"]')}),t}function r(){var e=Object.keys(ee);return e+n(e)}function i(e){if(e.tagName){var n=L(e,re)||L(e,ne);t&&n!==t&&(n=t,w(e,re,t),w(e,ne,t));var r=J(e,n||e.tagName.toLowerCase(),a);r&&s.push(r)}else e.length&&_(e,i)}var s=[],o,l;if(be.inject(),S(t)&&(a=t,t=0),typeof e==ie?('*'===e?e=l=r():e+=n(e.split(/, */)),o=e?z(e):[]):o=e,'*'===t){if(t=l||r(),o.tagName)o=z(t,o);else{var d=[];_(o,function(e){d.push(z(t,e))}),o=d}t=0}return i(o),s},$.update=function(){return _(Z,function(e){e.update()})},$.vdom=Z,$.Tag=g,typeof t==se?e.exports=$:typeof a(117)!=oe?(n=function(){return $}.call(t,a,t,e),!(n!==void 0&&(e.exports=n))):r.riot=$})('undefined'==typeof window?void 0:window)},function(e){(function(t){e.exports=t}).call(this,{})},function(e,t,a){(function(t){e.exports=t.videojs=a(10)}).call(this,a(7))},function(e,t,a){(function(t){e.exports=t.moment=a(5)}).call(this,a(7))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,a){function n(e){var t=r(e);return a(t)}function r(t){var a=i[t];if(!(a+1)){var n=new Error('Cannot find module \''+t+'\'');throw n.code='MODULE_NOT_FOUND',n}return a}var i={"./de":44,"./de-at":45,"./de-at.js":45,"./de-ch":46,"./de-ch.js":46,"./de.js":44,"./en-au":47,"./en-au.js":47,"./en-ca":48,"./en-ca.js":48,"./en-gb":49,"./en-gb.js":49,"./en-ie":50,"./en-ie.js":50,"./en-il":51,"./en-il.js":51,"./en-nz":52,"./en-nz.js":52,"./fr":53,"./fr-ca":54,"./fr-ca.js":54,"./fr-ch":55,"./fr-ch.js":55,"./fr.js":53};n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id=121},function(e,t,a){(function(t){e.exports=t.regeneratorRuntime=a(123)}).call(this,a(7))},function(e,t,a){var n=function(){return this}()||Function('return this')(),r=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf('regeneratorRuntime'),i=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=a(124),r)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(e){!function(t){'use strict';function a(e,t,a,n){var i=t&&t.prototype instanceof r?t:r,s=Object.create(i.prototype),o=new m(n||[]);return s._invoke=d(e,a,o),s}function n(e,t,a){try{return{type:'normal',arg:e.call(t,a)}}catch(e){return{type:'throw',arg:e}}}function r(){}function i(){}function s(){}function o(e){['next','throw','return'].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function t(a,r,i,s){var o=n(e[a],e,r);if('throw'===o.type)s(o.arg);else{var l=o.arg,d=l.value;return d&&'object'==typeof d&&f.call(d,'__await')?Promise.resolve(d.__await).then(function(e){t('next',e,i,s)},function(e){t('throw',e,i,s)}):Promise.resolve(d).then(function(e){l.value=e,i(l)},s)}}function a(e,a){function n(){return new Promise(function(n,r){t(e,a,n,r)})}return r=r?r.then(n,n):n()}var r;this._invoke=a}function d(e,t,a){var r=C;return function(i,s){if(r===L)throw new Error('Generator is already running');if(r===w){if('throw'===i)throw s;return y()}for(a.method=i,a.arg=s;;){var o=a.delegate;if(o){var l=p(o,a);if(l){if(l===x)continue;return l}}if('next'===a.method)a.sent=a._sent=a.arg;else if('throw'===a.method){if(r===C)throw r=w,a.arg;a.dispatchException(a.arg)}else'return'===a.method&&a.abrupt('return',a.arg);r=L;var d=n(e,t,a);if('normal'===d.type){if(r=a.done?w:E,d.arg===x)continue;return{value:d.arg,done:a.done}}'throw'===d.type&&(r=w,a.method='throw',a.arg=d.arg)}}}function p(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,'throw'===t.method){if(e.iterator.return&&(t.method='return',t.arg=void 0,p(e,t),'throw'===t.method))return x;t.method='throw',t.arg=new TypeError('The iterator does not provide a \'throw\' method')}return x}var r=n(a,e.iterator,t.arg);if('throw'===r.type)return t.method='throw',t.arg=r.arg,t.delegate=null,x;var i=r.arg;if(!i)return t.method='throw',t.arg=new TypeError('iterator result is not an object'),t.delegate=null,x;if(i.done)t[e.resultName]=i.value,t.next=e.nextLoc,'return'!==t.method&&(t.method='next',t.arg=void 0);else return i;return t.delegate=null,x}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function c(e){var t=e.completion||{};t.type='normal',delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:'root'}],e.forEach(u,this),this.reset(!0)}function g(e){if(e){var t=e[b];if(t)return t.call(e);if('function'==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(f.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}var h=Object.prototype,f=h.hasOwnProperty,_='function'==typeof Symbol?Symbol:{},b=_.iterator||'@@iterator',v=_.asyncIterator||'@@asyncIterator',T=_.toStringTag||'@@toStringTag',k='object'==typeof e,S=t.regeneratorRuntime;if(S)return void(k&&(e.exports=S));S=t.regeneratorRuntime=k?e.exports:{},S.wrap=a;var C='suspendedStart',E='suspendedYield',L='executing',w='completed',x={},P={};P[b]=function(){return this};var I=Object.getPrototypeOf,M=I&&I(I(g([])));M&&M!==h&&f.call(M,b)&&(P=M);var D=s.prototype=r.prototype=Object.create(P);i.prototype=D.constructor=s,s.constructor=i,s[T]=i.displayName='GeneratorFunction',S.isGeneratorFunction=function(e){var t='function'==typeof e&&e.constructor;return!!t&&(t===i||'GeneratorFunction'===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,!(T in e)&&(e[T]='GeneratorFunction')),e.prototype=Object.create(D),e},S.awrap=function(e){return{__await:e}},o(l.prototype),l.prototype[v]=function(){return this},S.AsyncIterator=l,S.async=function(e,t,n,r){var i=new l(a(e,t,n,r));return S.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},o(D),D[T]='Generator',D[b]=function(){return this},D.toString=function(){return'[object Generator]'},S.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},S.values=g,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method='next',this.arg=void 0,this.tryEntries.forEach(c),!e)for(var t in this)'t'===t.charAt(0)&&f.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if('throw'===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type='throw',i.arg=e,a.next=t,n&&(a.method='next',a.arg=void 0),!!n}if(this.done)throw e;for(var a=this,n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n],i=r.completion;if('root'===r.tryLoc)return t('end');if(r.tryLoc<=this.prev){var s=f.call(r,'catchLoc'),o=f.call(r,'finallyLoc');if(s&&o){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);}else if(!o)throw new Error('try statement without catch or finally');else if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1,n;0<=a;--a)if(n=this.tryEntries[a],n.tryLoc<=this.prev&&f.call(n,'finallyLoc')&&this.prev<n.finallyLoc){var r=n;break}r&&('break'===e||'continue'===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=e,i.arg=t,r?(this.method='next',this.next=r.finallyLoc,x):this.complete(i)},complete:function(e,t){if('throw'===e.type)throw e.arg;return'break'===e.type||'continue'===e.type?this.next=e.arg:'return'===e.type?(this.rval=this.arg=e.arg,this.method='return',this.next='end'):'normal'===e.type&&t&&(this.next=t),x},finish:function(e){for(var t=this.tryEntries.length-1,a;0<=t;--t)if(a=this.tryEntries[t],a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),c(a),x},catch:function(e){for(var t=this.tryEntries.length-1,a;0<=t;--t)if(a=this.tryEntries[t],a.tryLoc===e){var n=a.completion;if('throw'===n.type){var r=n.arg;c(a)}return r}throw new Error('illegal catch attempt')},delegateYield:function(e,t,a){return this.delegate={iterator:g(e),resultName:t,nextLoc:a},'next'===this.method&&(this.arg=void 0),x}}}(function(){return this}()||Function('return this')())},function(e,t,a){(function(t){e.exports=t.Hammer=a(43)}).call(this,a(7))},function(e,t,a){(function(t){e.exports=t.GLightbox=a(127)}).call(this,a(7))},function(a,n){var r,i,s;!function(o,e){i=[a],r=e,s='function'==typeof r?r.apply(n,i):r,!(void 0!==s&&(a.exports=s))}(this,function(_){'use strict';function D(){var t={},e=!1,a=0,n=arguments.length;'[object Boolean]'===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],a++);for(var r=function(a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e&&'[object Object]'===Object.prototype.toString.call(a[n])?t[n]=D(!0,t[n],a[n]):t[n]=a[n])};a<n;a++)r(arguments[a]);return t}function R(a,e){if((L.isNode(a)||a===window||a===document)&&(a=[a]),L.isArrayLike(a)||L.isObject(a)||(a=[a]),0!=L.size(a))if(L.isArrayLike(a)&&!L.isObject(a))for(var t=a.length,r=0;r<t&&!1!==e.call(a[r],a[r],r,a);r++);else if(L.isObject(a))for(var n in a)if(L.has(a,n)&&!1===e.call(a[n],a[n],n,a))break}function U(a){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=a[v]=a[v]||[],l={all:e,evt:null,found:null};return r&&t&&0<L.size(e)&&R(e,function(a,e){if(a.eventName==r&&a.fn.toString()==t.toString())return l.found=!0,l.evt=e,!1}),l}function Y(n){function p(t){L.isFunction(o)&&o.call(y,t,this),c&&p.destroy()}var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},m=i.onElement,o=i.withCallback,l=i.avoidDuplicate,r=void 0===l||l,g=i.once,c=void 0!==g&&g,d=i.useCapture,u=void 0!==d&&d,y=arguments[2],h=m||[];return L.isString(h)&&(h=document.querySelectorAll(h)),p.destroy=function(){R(h,function(e){var t=U(e,n,p);t.found&&t.all.splice(t.evt,1),e.removeEventListener&&e.removeEventListener(n,p,u)})},R(h,function(o){var i=U(o,n,p);(o.addEventListener&&r&&!i.found||!r)&&(o.addEventListener(n,p,u),i.all.push({eventName:n,fn:p}))}),p}function H(a,e){z(a,e)||(a.classList?a.classList.add(e):a.className+=' '+e)}function V(a,e){var t=e.split(' ');1<t.length?R(t,function(e){V(a,e)}):a.classList?a.classList.remove(e):a.className=a.className.replace(e,'')}function z(a,e){return a.classList?a.classList.contains(e):new RegExp('(^| )'+e+'( |$)','gi').test(a.className)}function o(a){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'',s=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!a||''===i)return!1;if('none'==i)return L.isFunction(s)&&s(),!1;var n=i.split(' ');R(n,function(e){H(a,'g'+e)}),Y(h,{onElement:a,avoidDuplicate:!1,once:!0,withCallback:function(a,r){R(n,function(t){V(r,'g'+t)}),L.isFunction(s)&&s()}})}function W(a){var e=document.createDocumentFragment(),t=document.createElement('div');for(t.innerHTML=a;t.firstChild;)e.appendChild(t.firstChild);return e}function a(a,e){for(;a!==document.body;)if('function'==typeof(a=a.parentElement).matches?a.matches(e):a.msMatchesSelector(e))return a}function r(t){t.style.display='block'}function l(t){t.style.display='none'}function G(o,c,i){var n=this,g=c.source,y='gvideo'+c.index,l=o.querySelector('.gslide-media'),a=c.href,_=location.protocol.replace(':','');if('file'==_&&(_='http'),'vimeo'==g){var u=/vimeo.*\/(\d+)/i.exec(a),h=s(this.settings.vimeo.params),P=_+'://player.vimeo.com/video/'+u[1]+'?'+h;t(this.settings.vimeo.api);var p=e(P,c.width,c.height,function(){!function(a,e,t,r){if(a())e();else{t||(t=100);var n=setInterval(function(){a()&&(clearInterval(n),i&&clearTimeout(i),e())},t),i;r&&(i=setTimeout(function(){clearInterval(n)},r))}}(function(){return'undefined'!=typeof Vimeo},function(){var t=new Vimeo.Player(p);w[y]=t,L.isFunction(i)&&i()})},l);p.id=y,p.className='vimeo-video gvideo',this.settings.autoplayVideos&&!f&&(p.className+=' wait-autoplay')}if('youtube'==g){var m=s(D(this.settings.youtube.params,{playerapiid:y})),b=_+'://www.youtube.com/embed/'+function(a){var e='';return e=void 0===(a=a.replace(/(>|<)/gi,'').split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?a:(e=a[2].split(/[^0-9a-z_\-]/i))[0],e}(a)+'?'+m;t(this.settings.youtube.api);var I=e(b,c.width,c.height,function(){if(!L.isNil(YT)&&YT.loaded){var t=new YT.Player(I);w[y]=t}else T.push(I);L.isFunction(i)&&i()},l);I.id=y,I.className='youtube-video gvideo',this.settings.autoplayVideos&&!f&&(I.className+=' wait-autoplay')}if('local'==g){var S='<video id="'+y+'" ';S+='style="background:#000; width: '+c.width+'px; height: '+c.height+'px;" ',S+='preload="metadata" ',S+='x-webkit-airplay="allow" ',S+='webkit-playsinline="" ',S+='controls ',S+='class="gvideo">';var x={mp4:'',ogg:'',webm:''};for(var E in x[a.toLowerCase().split('.').pop()]=a,x)if(x.hasOwnProperty(E)){var C=x[E];c.hasOwnProperty(E)&&(C=c[E]),''!==C&&(S+='<source src="'+C+'" type="video/'+E+'">')}var M=W(S+='</video>');l.appendChild(M);var A=document.getElementById(y);if(null!==this.settings.jwplayer&&null!==this.settings.jwplayer.api){this.settings.jwplayer;var O=this.settings.jwplayer.api;if(!O)return console.warn('Missing jwplayer api file'),L.isFunction(i)&&i(),!1;t(O,function(){var t=D(n.settings.jwplayer.params,{width:c.width+'px',height:c.height+'px',file:a});jwplayer.key=n.settings.jwplayer.licenseKey;var e=jwplayer(y);e.setup(t),w[y]=e,e.on('ready',function(){H(A=l.querySelector('.jw-video'),'gvideo'),A.id=y,L.isFunction(i)&&i()})})}else H(A,'html5-video'),w[y]=A,L.isFunction(i)&&i()}}function e(a,e,t,i,n){var s=document.createElement('iframe'),o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;return s.className='vimeo-video gvideo',s.src=a,s.style.height=f&&767>o?'':t+'px',s.style.width=e+'px',s.setAttribute('allowFullScreen',''),s.onload=function(){H(s,'iframe-ready'),L.isFunction(i)&&i()},n&&n.appendChild(s),s}function t(a,e){if(L.isNil(a))console.error('Inject videos api error');else{var t=document.querySelectorAll('script[src="'+a+'"]');if(L.isNil(t)||0==t.length){var r=document.createElement('script');return r.type='text/javascript',r.src=a,r.onload=function(){L.isFunction(e)&&e()},document.body.appendChild(r),!1}L.isFunction(e)&&e()}}function n(){for(var a=0;a<T.length;a++){var e=T[a],t=new YT.Player(e);w[e.id]=t}}function s(a){var r='',t=0;return R(a,function(a,e){0<t&&(r+='&amp;'),r+=e+'='+a,t+=1}),r}function p(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'';return''==e?(a.style.webkitTransform='',a.style.MozTransform='',a.style.msTransform='',a.style.OTransform='',a.style.transform='',!1):void(a.style.webkitTransform=e,a.style.MozTransform=e,a.style.msTransform=e,a.style.OTransform=e,a.style.transform=e)}function m(a){var e=a.querySelector('.gslide-media'),n=a.querySelector('.gslide-description');H(e,'greset'),p(e,'translate3d(0, 0, 0)'),Y(g,{onElement:e,once:!0,withCallback:function(){V(e,'greset')}}),e.style.opacity='',n&&(n.style.opacity='')}function y(n,s){var e=n.querySelector('.desc-more');return!!e&&void Y('click',{onElement:e,withCallback:function(t,e){t.preventDefault();var i=a(e,'.gslide-desc');if(!i)return!1;i.innerHTML=s.description,H(b,'gdesc-open');var o=Y('click',{onElement:[b,a(i,'.gslide-description')],withCallback:function(t){'a'!==t.target.nodeName.toLowerCase()&&(V(b,'gdesc-open'),H(b,'gdesc-closed'),i.innerHTML=s.smallDescription,y(i,s),setTimeout(function(){V(b,'gdesc-closed')},400),o.destroy())}})}})}var i=function(){function a(a,r){for(var t=0,i;t<r.length;t++)i=r[t],i.enumerable=i.enumerable||!1,i.configurable=!0,'value'in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}}(),d='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},f=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),u=null!==f||void 0!==document.createTouch||'ontouchstart'in window||'onmsgesturechange'in window||navigator.msMaxTouchPoints,c=document.getElementsByTagName('html')[0],b=document.body,g=function(){var a=document.createElement('fakeelement'),t={transition:'transitionend',OTransition:'oTransitionEnd',MozTransition:'transitionend',WebkitTransition:'webkitTransitionEnd'},n;for(n in t)if(void 0!==a.style[n])return t[n]}(),h=function(){var a=document.createElement('fakeelement'),t={animation:'animationend',OAnimation:'oAnimationEnd',MozAnimation:'animationend',WebkitAnimation:'webkitAnimationEnd'},n;for(n in t)if(void 0!==a.style[n])return t[n]}(),v=Date.now(),T=[],w={},S={selector:'glightbox',skin:'clean',closeButton:!0,startAt:0,autoplayVideos:!0,descPosition:'bottom',width:900,height:506,videosWidth:960,videosHeight:540,beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,onOpen:null,onClose:null,loopAtEnd:!1,touchNavigation:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,jwplayer:{api:null,licenseKey:null,params:{width:'100%',aspectratio:'16:9',stretching:'uniform'}},vimeo:{api:'https://player.vimeo.com/api/player.js',params:{api:1,title:0,byline:0,portrait:0}},youtube:{api:'https://www.youtube.com/iframe_api',params:{enablejsapi:1,showinfo:0}},openEffect:'zoomIn',closeEffect:'zoomOut',slideEffect:'slide',moreText:'See more',moreLength:60,slideHtml:'',lightboxHtml:'',cssEfects:{fade:{in:'fadeIn',out:'fadeOut'},zoom:{in:'zoomIn',out:'zoomOut'},slide:{in:'slideInRight',out:'slideOutLeft'},slide_back:{in:'slideInLeft',out:'slideOutRight'}}};S.slideHtml='<div class="gslide">         <div class="gslide-inner-content">            <div class="ginner-container">               <div class="gslide-media">               </div>               <div class="gslide-description">                  <h4 class="gslide-title"></h4>                  <div class="gslide-desc"></div>               </div>            </div>         </div>       </div>',S.lightboxHtml='<div id="glightbox-body" class="glightbox-container">            <div class="gloader visible"></div>            <div class="goverlay"></div>            <div class="gcontainer">               <div id="glightbox-slider" class="gslider"></div>               <a class="gnext"></a>               <a class="gprev"></a>               <a class="gclose"></a>            </div>   </div>';var L={isFunction:function(t){return'function'==typeof t},isString:function(t){return'string'==typeof t},isNode:function(t){return t&&t.nodeType&&1==t.nodeType},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return t&&t.length&&isFinite(t.length)},isObject:function(t){return'object'===(void 0===t?'undefined':d(t))&&null!=t&&!L.isFunction(t)&&!L.isArray(t)},isNil:function(t){return null==t},has:function(a,e){return null!==a&&hasOwnProperty.call(a,e)},size:function(a){if(L.isObject(a)){if(a.keys)return a.keys().length;var e=0;for(var t in a)L.has(a,t)&&e++;return e}return a.length},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},C=function(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,m=arguments[1],n={href:'',title:'',description:'',descPosition:'bottom',effect:'',node:p};if(L.isObject(p)&&!L.isNode(p))return D(n,p);var t='',i=p.getAttribute('data-glightbox'),s=p.nodeName.toLowerCase();'a'===s&&(t=p.href),'img'===s&&(t=p.src),n.href=t,R(n,function(e,t){L.has(m,t)&&(n[t]=m[t]);var a=p.dataset[t];L.isNil(a)||(n[t]=a)});var r=x(t);if(n=D(n,r),L.isNil(i)){if('a'==s){var a=p.title;L.isNil(a)||''===a||(n.title=a)}if('img'==s){var o=p.alt;L.isNil(o)||''===o||(n.title=o)}var l=p.getAttribute('data-description');L.isNil(l)||''===l||(n.description=l)}else{var d=[];R(n,function(a,e){d.push(';\\s?'+e)}),d=d.join('\\s?:|'),''!==i.trim()&&R(n,function(s,e){var t='s?'+e+'s?:s?(.*?)('+d+'s?:|$)',l=new RegExp(t),o=i.match(l);if(o&&o.length&&o[1]){var r=o[1].trim().replace(/;\s*$/,'');n[e]=r}})}var u=p.querySelector('.glightbox-desc');u&&(n.description=u.innerHTML),n.sourcetype=n.hasOwnProperty('type')?n.type:n.sourcetype,n.type=n.sourcetype;var c='video'==n.sourcetype?m.videosWidth:m.width,y='video'==n.sourcetype?m.videosHeight:m.height;return n.width=L.has(n,'width')?n.width:c,n.height=L.has(n,'height')?n.height:y,n},E=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(z(r,'loaded'))return!1;L.isFunction(this.settings.beforeSlideLoad)&&this.settings.beforeSlideLoad(r,t);var n=t.type,s=t.descPosition,l=r.querySelector('.gslide-media'),a=r.querySelector('.gslide-title'),c=r.querySelector('.gslide-desc'),d=r.querySelector('.gslide-description'),u=i;if(!(L.isFunction(this.settings.afterSlideLoad)&&(u=function(){L.isFunction(i)&&i(),o.settings.afterSlideLoad(r,t)}),''==t.title&&''==t.description?d&&d.parentNode.removeChild(d):(a&&''!==t.title?a.innerHTML=t.title:a.parentNode.removeChild(a),c&&''!==t.description?f&&0<this.settings.moreLength?(t.smallDescription=function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if((a=a.trim()).length<=e)return a;var n=a.substr(0,e-1);return t?n+'... <a href="#" class="desc-more">'+t+'</a>':n}(t.description,this.settings.moreLength,this.settings.moreText),c.innerHTML=t.smallDescription,y.apply(this,[c,t])):c.innerHTML=t.description:c.parentNode.removeChild(c),H(l.parentNode,'desc-'+s),H(d,'description-'+s)),H(l,'gslide-'+n),H(r,'loaded'),'video'!==n))G.apply(this,[r,t,u]);else if(!('external'!==n)){var m=e(t.href,t.width,t.height,u);l.appendChild(m)}else if('inline'!==n){if('image'===n){var p=new Image;return p.addEventListener('load',function(){L.isFunction(u)&&u()},!1),p.src=t.href,void l.appendChild(p)}L.isFunction(u)&&u()}else(function(a,e,t){var r=a.querySelector('.gslide-media'),n=document.getElementById(e.inlined.replace('#',''));if(n){var i=n.cloneNode(!0);return i.style.height=e.height+'px',i.style.maxWidth=e.width+'px',H(i,'ginlined-content'),r.appendChild(i),void(L.isFunction(t)&&t())}}).apply(this,[r,t,u])};window.onYouTubeIframeAPIReady=void 0===window.onYouTubeIframeAPIReady?n:function(){window.onYouTubeIframeAPIReady(),n()};var x=function(a){var e=a,t={};if(null!==(a=a.toLowerCase()).match(/\.(jpeg|jpg|gif|png|apn|webp|svg)$/))return t.sourcetype='image',t;if(a.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||a.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/))return t.sourcetype='video',t.source='youtube',t;if(a.match(/vimeo\.com\/([0-9]*)/))return t.sourcetype='video',t.source='vimeo',t;if(null!==a.match(/\.(mp4|ogg|webm)$/))return t.sourcetype='video',t.source='local',t;if(-1<a.indexOf('#')){var r=e.split('#').pop();if(''!==r.trim())return t.sourcetype='inline',t.source=a,t.inlined='#'+r,t}return a.includes('gajax=true')&&(t.sourcetype='ajax',t.source=a),t.sourcetype='external',t.source=a,t},P=function(){function t(e){!function(a,e){if(!(a instanceof e))throw new TypeError('Cannot call a class as a function')}(this,t),this.settings=D(S,e||{}),this.effectsClasses=this.getAnimationClasses()}return i(t,[{key:'init',value:function(){var a=this;this.baseEvents=Y('click',{onElement:'.'+this.settings.selector,withCallback:function(e,t){e.preventDefault(),a.open(t)}})}},{key:'open',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(this.elements=this.getElements(a),0==this.elements.length)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var e=this.settings.startAt;a&&0>(e=this.elements.indexOf(a))&&(e=0),this.build(),o(this.overlay,'none'==this.settings.openEffect?'none':this.settings.cssEfects.fade.in);var t=b.offsetWidth;return(b.style.width=t+'px',H(b,'glightbox-open'),H(c,'glightbox-open'),f&&(H(c,'glightbox-mobile'),this.settings.slideEffect='slide'),this.showSlide(e,!0),1==this.elements.length?(l(this.prevButton),l(this.nextButton)):(r(this.prevButton),r(this.nextButton)),this.lightboxOpen=!0,L.isFunction(this.settings.onOpen)&&this.settings.onOpen(),f&&u&&this.settings.touchNavigation)?(function(){var s=this;if(this.events.hasOwnProperty('touchStart'))return!1;var e=!1,u=!1,r=!1,h=!1,f={},g={},_=(this.slidesContainer,null),y=0,v=0,o=null,T=null,k=null,S=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l,C,i,n,a,E;window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,this.events.doctouchmove=Y('touchmove',{onElement:document,withCallback:function(t){if(z(b,'gdesc-open'))return t.preventDefault(),!1}}),this.events.touchStart=Y('touchstart',{onElement:b,withCallback:function(e){z(b,'gdesc-open')||(H(b,'touching'),_=s.getActiveSlide(),o=_.querySelector('.gslide-image'),T=_.querySelector('.gslide-media'),k=_.querySelector('.gslide-description'),l=s.index,g=e.targetTouches[0],f.pageX=e.targetTouches[0].pageX,f.pageY=e.targetTouches[0].pageY,y=e.targetTouches[0].clientX,v=e.targetTouches[0].clientY)}}),this.events.gestureStart=Y('gesturestart',{onElement:b,withCallback:function(t){o&&(t.preventDefault(),r=!0)}}),this.events.gestureChange=Y('gesturechange',{onElement:b,withCallback:function(t){t.preventDefault(),p(o,'scale('+t.scale+')')}}),this.events.gesturEend=Y('gestureend',{onElement:b,withCallback:function(t){r=!1,1>t.scale?(h=!1,p(o,'scale(1)')):h=!0}}),this.events.touchMove=Y('touchmove',{onElement:b,withCallback:function(d){if(z(b,'touching')&&!(z(b,'gdesc-open')||r||h)){d.preventDefault(),g=d.targetTouches[0];var t=_.querySelector('.gslide-inner-content').offsetHeight,o=_.querySelector('.gslide-inner-content').offsetWidth,l=d.targetTouches[0].clientX,c=d.targetTouches[0].clientY,w=y-l,x=v-c;if(Math.abs(w)>Math.abs(x)?(e=!1,u=!0):(u=!1,e=!0),e){if(a=i,i=g.pageY-f.pageY,0<=Math.abs(i)||e){var P=.75-Math.abs(i)/t;T.style.opacity=P,k&&(k.style.opacity=P),p(T,'translate3d(0, '+i+'px, 0)')}}else if(n=C,C=g.pageX-f.pageX,E=100*C/S,u){if(s.index+1==s.elements.length&&-60>C)return m(_),!1;if(0>s.index-1&&60<C)return m(_),!1;var I=.75-Math.abs(C)/o;T.style.opacity=I,k&&(k.style.opacity=I),p(T,'translate3d('+E+'%, 0, 0)')}}}}),this.events.touchEnd=Y('touchend',{onElement:b,withCallback:function(){i=g.pageY-f.pageY,C=g.pageX-f.pageX,E=100*C/S,V(b,'touching');var t=_.querySelector('.gslide-inner-content').offsetHeight,a=_.querySelector('.gslide-inner-content').offsetWidth;if(e){return e=!1,Math.abs(i)>=t/2?void s.close():void m(_)}if(u){u=!1;var n='prev',r=!0;if(0>C&&(n='next',C=Math.abs(C)),'prev'==n&&0>s.index-1&&(r=!1),'next'==n&&s.index+1>=s.elements.length&&(r=!1),r&&C>=a/2-90)return void('next'==n?s.nextSlide():s.prevSlide());m(_)}}})}.apply(this),!1):void(this.settings.keyboardNavigation&&function(){var a=this;return!this.events.hasOwnProperty('keyboard')&&void(this.events.keyboard=Y('keydown',{onElement:window,withCallback:function(e){var t=(e=e||window.event).keyCode;39==t&&a.nextSlide(),37==t&&a.prevSlide(),27==t&&a.close()}}))}.apply(this))}},{key:'showSlide',value:function(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];r(this.loader),this.index=e;var i=this.slidesContainer.querySelector('.current');i&&V(i,'current'),this.slideAnimateOut();var n=this.slidesContainer.querySelectorAll('.gslide')[e];if(r(this.slidesContainer),z(n,'loaded'))this.slideAnimateIn(n,t),l(this.loader);else{r(this.loader);var s=C(this.elements[e],this.settings);s.index=e,E.apply(this,[n,s,function(){l(o.loader),o.slideAnimateIn(n,t)}])}this.preloadSlide(e+1),this.preloadSlide(e-1),V(this.nextButton,'disabled'),V(this.prevButton,'disabled'),0===e?H(this.prevButton,'disabled'):e===this.elements.length-1&&!0!==this.settings.loopAtEnd&&H(this.nextButton,'disabled'),this.activeSlide=n}},{key:'preloadSlide',value:function(a){var e=this;if(0>a||a>this.elements.length)return!1;if(L.isNil(this.elements[a]))return!1;var t=this.slidesContainer.querySelectorAll('.gslide')[a];if(z(t,'loaded'))return!1;var r=C(this.elements[a],this.settings);r.index=a;var n=r.sourcetype;'video'==n||'external'==n?setTimeout(function(){E.apply(e,[t,r])},200):E.apply(this,[t,r])}},{key:'prevSlide',value:function(){var t=this.index-1;return!(0>t)&&void this.goToSlide(t)}},{key:'nextSlide',value:function(){var t=this.index+1;return!(t>this.elements.length)&&void this.goToSlide(t)}},{key:'goToSlide',value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];-1<t&&(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,t<this.elements.length?this.showSlide(t):!0===this.settings.loopAtEnd&&(t=0,this.showSlide(t)))}},{key:'slideAnimateIn',value:function(a,e){var t=this,i=a.querySelector('.gslide-media'),n=a.querySelector('.gslide-description'),s={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide},r={index:this.index,slide:this.activeSlide};if(0<i.offsetWidth&&n&&(l(n),a.querySelector('.ginner-container').style.maxWidth=i.offsetWidth+'px',n.style.display=''),V(a,this.effectsClasses),e)o(a,this.settings.openEffect,function(){!f&&t.settings.autoplayVideos&&t.playSlideVideo(a),L.isFunction(t.settings.afterSlideChange)&&t.settings.afterSlideChange.apply(t,[s,r])});else{var p=this.settings.slideEffect,d='none'===p?p:this.settings.cssEfects[p].in;this.prevActiveSlideIndex>this.index&&'slide'==this.settings.slideEffect&&(d=this.settings.cssEfects.slide_back.in),o(a,d,function(){!f&&t.settings.autoplayVideos&&t.playSlideVideo(a),L.isFunction(t.settings.afterSlideChange)&&t.settings.afterSlideChange.apply(t,[s,r])})}H(a,'current')}},{key:'slideAnimateOut',value:function(){if(!this.prevActiveSlide)return!1;var a=this.prevActiveSlide;V(a,this.effectsClasses),H(a,'prev');var e=this.settings.slideEffect,t='none'===e?e:this.settings.cssEfects[e].out;this.stopSlideVideo(a),L.isFunction(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide},{index:this.index,slide:this.activeSlide}]),this.prevActiveSlideIndex>this.index&&'slide'==this.settings.slideEffect&&(t=this.settings.cssEfects.slide_back.out),o(a,t,function(){var e=a.querySelector('.gslide-media'),t=a.querySelector('.gslide-description');e.style.transform='',V(e,'greset'),e.style.opacity='',t&&(t.style.opacity=''),V(a,'prev')})}},{key:'stopSlideVideo',value:function(a){L.isNumber(a)&&(a=this.slidesContainer.querySelectorAll('.gslide')[a]);var e=a?a.querySelector('.gvideo'):null;if(!e)return!1;var r=e.id;if(w.hasOwnProperty(r)){var i=w[r];z(e,'vimeo-video')&&i.pause(),z(e,'youtube-video')&&i.pauseVideo(),z(e,'jw-video')&&i.pause(!0),z(e,'html5-video')&&i.pause()}}},{key:'playSlideVideo',value:function(a){L.isNumber(a)&&(a=this.slidesContainer.querySelectorAll('.gslide')[a]);var e=a.querySelector('.gvideo');if(!e)return!1;var r=e.id;if(w.hasOwnProperty(r)){var i=w[r];return z(e,'vimeo-video')&&i.play(),z(e,'youtube-video')&&i.playVideo(),z(e,'jw-video')&&i.play(),z(e,'html5-video')&&i.play(),setTimeout(function(){V(e,'wait-autoplay')},300),!1}}},{key:'setElements',value:function(t){this.settings.elements=t}},{key:'getElements',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(this.elements=[],!L.isNil(this.settings.elements)&&L.isArray(this.settings.elements))return this.settings.elements;var e=!1;if(null!==a){var t=a.getAttribute('data-gallery');t&&''!==t&&(e=document.querySelectorAll('[data-gallery="'+t+'"]'))}return 0==e&&(e=document.querySelectorAll('.'+this.settings.selector)),e=Array.prototype.slice.call(e)}},{key:'getActiveSlide',value:function(){return this.slidesContainer.querySelectorAll('.gslide')[this.index]}},{key:'getActiveSlideIndex',value:function(){return this.index}},{key:'getAnimationClasses',value:function(){var a=[];for(var e in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(e)){var t=this.settings.cssEfects[e];a.push('g'+t.in),a.push('g'+t.out)}return a.join(' ')}},{key:'build',value:function(){var r=this;if(this.built)return!1;var e=W(this.settings.lightboxHtml);document.body.appendChild(e);var t=document.getElementById('glightbox-body');this.modal=t;var i=t.querySelector('.gclose');this.prevButton=t.querySelector('.gprev'),this.nextButton=t.querySelector('.gnext'),this.overlay=t.querySelector('.goverlay'),this.loader=t.querySelector('.gloader'),this.slidesContainer=document.getElementById('glightbox-slider'),this.events={},H(this.modal,'glightbox-'+this.settings.skin),this.settings.closeButton&&i&&(this.events.close=Y('click',{onElement:i,withCallback:function(e){e.preventDefault(),r.close()}})),i&&!this.settings.closeButton&&i.parentNode.removeChild(i),this.nextButton&&(this.events.next=Y('click',{onElement:this.nextButton,withCallback:function(e){e.preventDefault(),r.nextSlide()}})),this.prevButton&&(this.events.prev=Y('click',{onElement:this.prevButton,withCallback:function(e){e.preventDefault(),r.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=Y('click',{onElement:t,withCallback:function(e){a(e.target,'.ginner-container')||z(e.target,'gnext')||z(e.target,'gprev')||r.close()}})),R(this.elements,function(){var e=W(r.settings.slideHtml);r.slidesContainer.appendChild(e)}),u&&H(c,'glightbox-touch'),this.built=!0}},{key:'reload',value:function(){this.init()}},{key:'close',value:function(){var a=this;return!this.closing&&void(this.closing=!0,this.stopSlideVideo(this.activeSlide),H(this.modal,'glightbox-closing'),o(this.overlay,'none'==this.settings.openEffect?'none':this.settings.cssEfects.fade.out),o(this.activeSlide,this.settings.closeEffect,function(){if(a.activeSlide=null,a.prevActiveSlideIndex=null,a.prevActiveSlide=null,a.built=!1,a.events)for(var e in a.events)a.events.hasOwnProperty(e)&&a.events[e].destroy();V(b,'glightbox-open'),V(c,'glightbox-open'),V(b,'touching'),V(b,'gdesc-open'),b.style.width='',a.modal.parentNode.removeChild(a.modal),L.isFunction(a.settings.onClose)&&a.settings.onClose(),a.closing=null}))}},{key:'destroy',value:function(){this.close(),this.baseEvents.destroy()}}]),t}();_.exports=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new P(a);return e.init(),e}})},function(e,t,a){'use strict';a(129),a(130),a(131),a(132)},function(e,t,a){'use strict';var n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},r,i;(function(n,s){r=[a(15)],i=function(e){s(e)}.apply(t,r),!(i!==void 0&&(e.exports=i))})(this,function(e){e._entities.de_DE={format:{month:{short:'YYYY-MM',full:'YYYY MMMM'},date:{short:'YYYY-MM-DD'},currency:'{value}{symbol}'},currency:{code:'EUR',symbol:'\u20AC'},template:{label:{average:'Durchschnittliche Lebenskosten in',from:'Billigstes Angebot',roundtrip_from:'Hin- und R\xFCckflug / Person',average_cost_from:'Durchschnittliche Tageskosten pro Person',perperson:'Hin- & R\xFCckflug / 1 Erwachsener',to:'nach',availability:'Verf\xFCgbarkeit pr\xFCfen',dailycost:'Durchschnittliche Tageskosten pro Person Hotel inklusive',viewmore:'Mehr Informationen unter BudgetYourTrip',notspecified:'Nicht angegeben',bestoffer:'Bestes Angebot',inclflight:'Inklusive Flug und Hotel',address:'Adresse',rating:'Einsch\xE4tzung',contactinfo:'Kontaktinformationen',livedata:'Livedaten w\xE4hrend der Laufzeit',notips:'Tipps werden hier angezeigt',notitle:'Titel'},button:{booknow:'Jetzt buchen',getthere:'Hinkommen',checkavailability:'Verf\xFCgbarkeit pr\xFCfen',contactus:'Kontaktieren Sie uns'},error:{localisation:'Bitte aktivieren Sie die Lokalisierung in Ihrem Browser um Preise anzusehen',pricenotfound:'Kein Preis wurde gefunden'}},header:{label:{current:'Standort, der gerade im Film erscheint:'}},player:{label:{towishlist:'wurde zur Wunschliste hinzugef\xFCgt',fromwishlist:'wurde von der Wunschliste gel\xF6scht'},error:{support:'Um dieses Video anzusehen, aktivieren Sie bitte JavaScript und erw\xE4gen Sie die Aktualisierung auf einen Webbrowsers, der HTML5-Video unterst\xFCtzt ',cookies:'Bitte aktivieren Sie Drittanbieter-Cookies in Ihrem Browser, um dieses Video anzusehen'}},requirements:{label:{resolutiontoosmall:'Die Videoaufl\xF6sung ist zu klein um eine optimale Wiedergabe zu garantieren',leavepage:'Wollen Sie das Video auf einer f\xFCr die Wiedergabe optmierten Seite ansehen?'},button:{takemethere:'Ja',stayhere:'Nein'}}}})},function(e,t,a){'use strict';var n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},r,i;(function(n,s){r=[a(15)],i=function(e){s(e)}.apply(t,r),!(i!==void 0&&(e.exports=i))})(this,function(e){e._entities.en_GB=e._entities.en={format:{month:{short:'MM YYYY',full:'MMMM YYYY'},date:{short:'DD MM YYYY'},currency:'{symbol}{value}'},currency:{code:'GBP',symbol:'\xA3'},template:{label:{average:'Average cost of vacation in',from:'From',perperson:'Round trip / person',roundtrip_from:'Round trip / person from',average_cost_from:'Average daily cost from',pernight:'Price / night',to:'to',availability:'Check availability',dailycost:'Average daily cost / person incl Hotel in',viewmore:'View more on BudgetYourTrip',notspecified:'Not specified',bestoffer:'Best Offer',inclflight:'incl. flights and hotels',address:'Address',rating:'Rating',contactinfo:'Contact information',livedata:'Live data available at runtime',notips:'Tips will be visible here once filled ',notitle:'Title',pricenotfound:'Price not found'},button:{booknow:'Book now',getthere:'Get there',checkavailability:'Check availability',contactus:'Contact us'},error:{localisation:'Please enable localisation on your browser to view this section',pricenotfound:'Price not found'}},header:{label:{current:'You are now visiting:'}},player:{label:{towishlist:' has been added to your wish list',fromwishlist:' has been removed from your wish list'},error:{support:'To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video',cookies:'Please enable third party cookies in your browser to watch this video',"360Unavailable":'360 Video unavailable',unsupportedBrowser:'This video can\'t play in this browser',unsupportedVideo:'This video could not be loaded, either because the server or network failed or because of some plugins (e.g Ghostery)'}},requirements:{label:{resolutiontoosmall:'Video\'s resolution is too small for an optimal experience.',leavepage:'Would you like to watch the video in a dedicated page?'},button:{takemethere:'Yes, take me there',stayhere:'No, stay here'}}}})},function(e,t,a){'use strict';var n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},r,i;(function(n,s){r=[a(15)],i=function(e){s(e)}.apply(t,r),!(i!==void 0&&(e.exports=i))})(this,function(e){e._entities.en_US={format:{month:{short:'YYYY-MM',full:'YYYY MMMM'},date:{short:'YYYY-MM-DD'},currency:'{symbol}{value}'},currency:{code:'USD',symbol:'$'},template:{label:{average:'Average cost of vacation in',from:'From',perperson:'Round trip / person',roundtrip_from:'Round trip / person from',average_cost_from:'Average daily cost from',pernight:'Price / night',to:'to',availability:'Check availability',dailycost:'Average daily cost / person incl Hotel in',viewmore:'View more on BudgetYourTrip',notspecified:'Not specified',bestoffer:'Best Offer',inclflight:'incl. flights and hotels',address:'Address',rating:'Rating',contactinfo:'Contact information',livedata:'Live data available at runtime',notips:'Tips will be visible here once filled ',notitle:'Title',pricenotfound:'Price not found'},button:{booknow:'Book now',getthere:'Get there',checkavailability:'Check availability',contactus:'Contact us'},error:{localisation:'Please enable localisation on your browser to view this section',pricenotfound:'Price not found'}},header:{label:{current:'You are now visiting:'}},player:{label:{towishlist:' has been added to your wish list',fromwishlist:' has been removed from your wish list'},error:{support:'To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video',cookies:'Please enable third party cookies in your browser to watch this video',"360Unavailable":'360 Video unavailable',unsupportedBrowser:'This video can\'t play in this browser',unsupportedVideo:'This video could not be loaded, either because the server or network failed or because of some plugins (e.g Ghostery)'}},requirements:{label:{resolutiontoosmall:'Video\'s resolution is too small for an optimal experience.',leavepage:'Would you like to watch the video in a dedicated page?'},button:{takemethere:'Yes, take me there',stayhere:'No, stay here'}}}})},function(e,t,a){'use strict';var n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},r,i;(function(n,s){r=[a(15)],i=function(e){s(e)}.apply(t,r),!(i!==void 0&&(e.exports=i))})(this,function(e){e._entities.fr_FR={format:{month:{short:'MM YYYY',full:'MMMM YYYY'},date:{short:'DD MM YYYY'},currency:'{value}{symbol}'},currency:{code:'EUR',symbol:'\u20AC'},template:{label:{average:'Cout moyen en',from:'\xC0 partir de',roundtrip_from:'Aller retour par personne \xE0 partir de',average_cost_from:'Cout moyen \xE0 partir de',perperson:'Aller retour par personne',pernight:'Prix par nuit',to:'\xE0',availability:'Verifier les disponibilit\xE9s',dailycost:'Cout moyen journalier par personne avec h\xF4tel',viewmore:'Voir plus de prix sur BudgetYourTrip',notspecified:'Non sp\xE9cifi\xE9',bestoffer:'Meilleure Offre',inclflight:'icluant vols et hotels',address:'Adresse',rating:'\xC9valuation',contactinfo:'Contacts',livedata:'Donn\xE9es disponibles lors de l\'ex\xE9cution',notips:'Les conseils seront visible ici une fois remplis',notitle:'Titre',pricenotfound:'Prix non trouv\xE9s'},button:{booknow:'Acheter maintenant',getthere:'Y aller',checkavailability:'Disponibilit\xE9s',contactus:'Nous contacter'},error:{localisation:'S"il vous plait activer la g\xE9o-localisation de votre navigateur pour voir cette section',pricenotfound:'Prix non trouv\xE9s'}},header:{label:{current:'Vous visitez:'}},player:{label:{towishlist:' a \xE9t\xE9 rajout\xE9(e) \xE0 votre liste de souhaits',fromwishlist:' a \xE9t\xE9 supprim\xE9(e) de votre liste de souhaits'},error:{support:'Activer JavaScript dans votre navigateur afin de visionner cette vid\xE9o',cookies:'Activer les cookies tiers dans votre navigateur afin de visionner cette vid\xE9o',"360Unavailable":'Vid\xE9o 360 non disponible',unsupportedBrowser:'Cette vid\xE9o ne peut pas jouer dans ce navigateur',unsupportedVideo:'Cette vid\xE9o ne peut pas jouer.'}},requirements:{label:{resolutiontoosmall:'La r\xE9solution de la vid\xE9o est trop petite pour une exp\xE8rience optimale.',leavepage:'Voulez vous visionner la vid\xE9o dans une page d\xE9di\xE9e?'},button:{takemethere:'Oui, allons y',stayhere:'Non, restons l\xE0'}}}})}])['default']});